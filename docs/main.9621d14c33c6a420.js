"use strict";(self.webpackChunkfirebase_angular=self.webpackChunkfirebase_angular||[]).push([[179],{932:(ks,ri,Ue)=>{Ue.d(ri,{$:()=>Uy,A:()=>ue,G:()=>kt,K:()=>MI,L:()=>cl,N:()=>Dr,P:()=>Od,R:()=>uv,U:()=>Ce,V:()=>Ip,W:()=>_d,X:()=>Qr,Y:()=>Bs,Z:()=>Ar,_:()=>fl,a:()=>Hs,a0:()=>xp,a1:()=>wd,a2:()=>Pp,a3:()=>$y,a4:()=>FI,a5:()=>Ei,a6:()=>ml,a7:()=>Wy,a8:()=>Fc,a9:()=>LI,aA:()=>ct,aB:()=>qt,aC:()=>le,aD:()=>Ws,aE:()=>Q,aF:()=>ze,aG:()=>Gc,aH:()=>mv,aI:()=>Cl,aJ:()=>Dn,aN:()=>Wn,aQ:()=>ao,aa:()=>Ee,ab:()=>gn,ac:()=>ys,ad:()=>Oi,ae:()=>gl,af:()=>et,ag:()=>qy,ah:()=>$n,ak:()=>Lc,al:()=>Vo,am:()=>lo,ap:()=>jy,aq:()=>Bc,as:()=>Tk,at:()=>Rk,au:()=>ln,av:()=>Ie,aw:()=>j,ax:()=>pt,ay:()=>xl,az:()=>vv,b:()=>BI,c:()=>Uo,d:()=>pv,e:()=>XI,f:()=>eC,g:()=>Ci,h:()=>Rt,i:()=>Pd,j:()=>$s,k:()=>Rv,l:()=>ZI,m:()=>uC,p:()=>Jt,r:()=>YI,s:()=>dv,u:()=>sn});var x=Ue(861),X=Ue(58),L=Ue(534),Pe=Ue(879),ht=Ue(582),dn=Ue(537);const Jt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ue={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const kt=function Re(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},si=function nt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},bt=new X.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qe=new Pe.Yd("@firebase/auth");function On(p,...u){Qe.logLevel<=Pe.in.ERROR&&Qe.error(`Auth (${L.SDK_VERSION}): ${p}`,...u)}function pt(p,...u){throw ot(p,...u)}function qt(p,...u){return ot(p,...u)}function wr(p,u,h){const m=Object.assign(Object.assign({},si()),{[u]:h});return new X.LL("auth","Firebase",m).create(u,{appName:p.name})}function Zn(p,u,h){if(!(u instanceof h))throw h.name!==u.constructor.name&&pt(p,"argument-error"),wr(p,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ot(p,...u){if("string"!=typeof p){const h=u[0],m=[...u.slice(1)];return m[0]&&(m[0].appName=p.name),p._errorFactory.create(h,...m)}return bt.create(p,...u)}function le(p,u,...h){if(!p)throw ot(u,...h)}function Ct(p){const u="INTERNAL ASSERTION FAILED: "+p;throw On(u),new Error(u)}function ln(p,u){p||Ct(u)}function Fn(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function Ln(){return"http:"===hs()||"https:"===hs()}function hs(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class rr{constructor(u,h){this.shortDelay=u,this.longDelay=h,ln(h>u,"Short delay should be less than long delay!"),this.isMobile=(0,X.uI)()||(0,X.b$)()}get(){return function fs(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ln()||(0,X.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ns(p,u){ln(p.emulator,"Emulator should always be set here");const{url:h}=p.emulator;return u?`${h}${u.startsWith("/")?u.slice(1):u}`:h}class q{static initialize(u,h,m){this.fetchImpl=u,h&&(this.headersImpl=h),m&&(this.responseImpl=m)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ct("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ct("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ct("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const K={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},z=new rr(3e4,6e4);function $(p,u){return p.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:p.tenantId}):u}function ne(p,u,h,m){return ee.apply(this,arguments)}function ee(){return(ee=(0,x.Z)(function*(p,u,h,m,y={}){return pe(p,y,(0,x.Z)(function*(){let w={},N={};m&&("GET"===u?N=m:w={body:JSON.stringify(m)});const W=(0,X.xO)(Object.assign({key:p.config.apiKey},N)).slice(1),se=yield p._getAdditionalHeaders();return se["Content-Type"]="application/json",p.languageCode&&(se["X-Firebase-Locale"]=p.languageCode),q.fetch()(Tt(p,p.config.apiHost,h,W),Object.assign({method:u,headers:se,referrerPolicy:"no-referrer"},w))}))})).apply(this,arguments)}function pe(p,u,h){return ft.apply(this,arguments)}function ft(){return(ft=(0,x.Z)(function*(p,u,h){p._canInitEmulator=!1;const m=Object.assign(Object.assign({},K),u);try{const y=new en(p),w=yield Promise.race([h(),y.promise]);y.clearNetworkTimeout();const N=yield w.json();if("needConfirmation"in N)throw fn(p,"account-exists-with-different-credential",N);if(w.ok&&!("errorMessage"in N))return N;{const W=w.ok?N.errorMessage:N.error.message,[se,Te]=W.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===se)throw fn(p,"credential-already-in-use",N);if("EMAIL_EXISTS"===se)throw fn(p,"email-already-in-use",N);if("USER_DISABLED"===se)throw fn(p,"user-disabled",N);const Ve=m[se]||se.toLowerCase().replace(/[_\s]+/g,"-");if(Te)throw wr(p,Ve,Te);pt(p,Ve)}}catch(y){if(y instanceof X.ZR)throw y;pt(p,"network-request-failed",{message:String(y)})}})).apply(this,arguments)}function ge(p,u,h,m){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,x.Z)(function*(p,u,h,m,y={}){const w=yield ne(p,u,h,m,y);return"mfaPendingCredential"in w&&pt(p,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function Tt(p,u,h,m){const y=`${u}${h}?${m}`;return p.config.emulator?Ns(p.config,y):`${p.config.apiScheme}://${y}`}function hn(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class en{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((h,m)=>{this.timer=setTimeout(()=>m(qt(this.auth,"network-request-failed")),z.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fn(p,u,h){const m={appName:p.name};h.email&&(m.email=h.email),h.phoneNumber&&(m.phoneNumber=h.phoneNumber);const y=qt(p,u,m);return y.customData._tokenResponse=h,y}function Yn(p){return void 0!==p&&void 0!==p.getResponse}function oi(p){return void 0!==p&&void 0!==p.enterprise}class fi{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const h of this.recaptchaEnforcementState)if(h.provider&&h.provider===u)return hn(h.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function Zr(){return(Zr=(0,x.Z)(function*(p){return(yield ne(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Os(p,u){return mt.apply(this,arguments)}function mt(){return(mt=(0,x.Z)(function*(p,u){return ne(p,"GET","/v2/recaptchaConfig",$(p,u))})).apply(this,arguments)}function Ls(){return(Ls=(0,x.Z)(function*(p,u){return ne(p,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function ms(){return(ms=(0,x.Z)(function*(p,u){return ne(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Ir(){return(Ir=(0,x.Z)(function*(p,u){return ne(p,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function Cr(p){if(p)try{const u=new Date(Number(p));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function Ht(){return(Ht=(0,x.Z)(function*(p,u=!1){const h=(0,X.m9)(p),m=yield h.getIdToken(u),y=Tn(m);le(y&&y.exp&&y.auth_time&&y.iat,h.auth,"internal-error");const w="object"==typeof y.firebase?y.firebase:void 0,N=w?.sign_in_provider;return{claims:y,token:m,authTime:Cr(or(y.auth_time)),issuedAtTime:Cr(or(y.iat)),expirationTime:Cr(or(y.exp)),signInProvider:N||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function or(p){return 1e3*Number(p)}function Tn(p){const[u,h,m]=p.split(".");if(void 0===u||void 0===h||void 0===m)return On("JWT malformed, contained fewer than 3 sections"),null;try{const y=(0,X.tV)(h);return y?JSON.parse(y):(On("Failed to decode base64 JWT payload"),null)}catch(y){return On("Caught error parsing JWT payload as JSON",y?.toString()),null}}function pn(p,u){return xn.apply(this,arguments)}function xn(){return(xn=(0,x.Z)(function*(p,u,h=!1){if(h)return u;try{return yield u}catch(m){throw m instanceof X.ZR&&function gs({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(m)&&p.auth.currentUser===p&&(yield p.auth.signOut()),m}})).apply(this,arguments)}class Yr{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var h;if(u){const m=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),m}{this.errorBackoff=3e4;const y=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,y)}}schedule(u=!1){var h=this;if(!this.isRunning)return;const m=this.getInterval(u);this.timerId=setTimeout((0,x.Z)(function*(){yield h.iteration()}),m)}iteration(){var u=this;return(0,x.Z)(function*(){try{yield u.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&u.schedule(!0))}u.schedule()})()}}class _s{constructor(u,h){this.createdAt=u,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cr(this.lastLoginAt),this.creationTime=Cr(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ai(p){return Qn.apply(this,arguments)}function Qn(){return Qn=(0,x.Z)(function*(p){var u;const h=p.auth,m=yield p.getIdToken(),y=yield pn(p,function vi(p,u){return Ir.apply(this,arguments)}(h,{idToken:m}));le(y?.users.length,h,"internal-error");const w=y.users[0];p._notifyReloadListener(w);const N=null!==(u=w.providerUserInfo)&&void 0!==u&&u.length?function Mo(p){return p.map(u=>{var{providerId:h}=u,m=(0,ht._T)(u,["providerId"]);return{providerId:h,uid:m.rawId||"",displayName:m.displayName||null,email:m.email||null,phoneNumber:m.phoneNumber||null,photoURL:m.photoUrl||null}})}(w.providerUserInfo):[],W=function ll(p,u){return[...p.filter(m=>!u.some(y=>y.providerId===m.providerId)),...u]}(p.providerData,N),Ve=!!p.isAnonymous&&!(p.email&&w.passwordHash||W?.length),wt={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:W,metadata:new _s(w.createdAt,w.lastLoginAt),isAnonymous:Ve};Object.assign(p,wt)}),Qn.apply(this,arguments)}function xr(){return(xr=(0,x.Z)(function*(p){const u=(0,X.m9)(p);yield ai(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function Vs(){return(Vs=(0,x.Z)(function*(p,u){const h=yield pe(p,{},(0,x.Z)(function*(){const m=(0,X.xO)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:y,apiKey:w}=p.config,N=Tt(p,y,"/v1/token",`key=${w}`),W=yield p._getAdditionalHeaders();return W["Content-Type"]="application/x-www-form-urlencoded",q.fetch()(N,{method:"POST",headers:W,body:m})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}function D(){return(D=(0,x.Z)(function*(p,u){return ne(p,"POST","/v2/accounts:revokeToken",$(p,u))})).apply(this,arguments)}class E{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){le(u.idToken,"internal-error"),le(typeof u.idToken<"u","internal-error"),le(typeof u.refreshToken<"u","internal-error");const h="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):function Mc(p){const u=Tn(p);return le(u,"internal-error"),le(typeof u.exp<"u","internal-error"),le(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,h)}getToken(u,h=!1){var m=this;return(0,x.Z)(function*(){return le(!m.accessToken||m.refreshToken,u,"user-token-expired"),h||!m.accessToken||m.isExpired?m.refreshToken?(yield m.refresh(u,m.refreshToken),m.accessToken):null:m.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,h){var m=this;return(0,x.Z)(function*(){const{accessToken:y,refreshToken:w,expiresIn:N}=yield function ga(p,u){return Vs.apply(this,arguments)}(u,h);m.updateTokensAndExpiration(y,w,Number(N))})()}updateTokensAndExpiration(u,h,m){this.refreshToken=h||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*m}static fromJSON(u,h){const{refreshToken:m,accessToken:y,expirationTime:w}=h,N=new E;return m&&(le("string"==typeof m,"internal-error",{appName:u}),N.refreshToken=m),y&&(le("string"==typeof y,"internal-error",{appName:u}),N.accessToken=y),w&&(le("number"==typeof w,"internal-error",{appName:u}),N.expirationTime=w),N}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new E,this.toJSON())}_performRefresh(){return Ct("not implemented")}}function C(p,u){le("string"==typeof p||typeof p>"u","internal-error",{appName:u})}class b{constructor(u){var{uid:h,auth:m,stsTokenManager:y}=u,w=(0,ht._T)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=m,this.stsTokenManager=y,this.accessToken=y.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new _s(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(u){var h=this;return(0,x.Z)(function*(){const m=yield pn(h,h.stsTokenManager.getToken(h.auth,u));return le(m,h.auth,"internal-error"),h.accessToken!==m&&(h.accessToken=m,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),m})()}getIdTokenResult(u){return function bi(p){return Ht.apply(this,arguments)}(this,u)}reload(){return function qi(p){return xr.apply(this,arguments)}(this)}_assign(u){this!==u&&(le(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(h=>Object.assign({},h)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const h=new b(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(u){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,h=!1){var m=this;return(0,x.Z)(function*(){let y=!1;u.idToken&&u.idToken!==m.stsTokenManager.accessToken&&(m.stsTokenManager.updateFromServerResponse(u),y=!0),h&&(yield ai(m)),yield m.auth._persistUserIfCurrent(m),y&&m.auth._notifyListenersIfCurrent(m)})()}delete(){var u=this;return(0,x.Z)(function*(){const h=yield u.getIdToken();return yield pn(u,function Fs(p,u){return Ls.apply(this,arguments)}(u.auth,{idToken:h})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,h){var m,y,w,N,W,se,Te,Ve;const wt=null!==(m=h.displayName)&&void 0!==m?m:void 0,Yi=null!==(y=h.email)&&void 0!==y?y:void 0,ho=null!==(w=h.phoneNumber)&&void 0!==w?w:void 0,Xc=null!==(N=h.photoURL)&&void 0!==N?N:void 0,Pv=null!==(W=h.tenantId)&&void 0!==W?W:void 0,Al=null!==(se=h._redirectEventId)&&void 0!==se?se:void 0,zo=null!==(Te=h.createdAt)&&void 0!==Te?Te:void 0,kv=null!==(Ve=h.lastLoginAt)&&void 0!==Ve?Ve:void 0,{uid:Kd,emailVerified:um,isAnonymous:Rl,providerData:dm,stsTokenManager:Li}=h;le(Kd&&Li,u,"internal-error");const pC=E.fromJSON(this.name,Li);le("string"==typeof Kd,u,"internal-error"),C(wt,u.name),C(Yi,u.name),le("boolean"==typeof um,u,"internal-error"),le("boolean"==typeof Rl,u,"internal-error"),C(ho,u.name),C(Xc,u.name),C(Pv,u.name),C(Al,u.name),C(zo,u.name),C(kv,u.name);const Jn=new b({uid:Kd,auth:u,email:Yi,emailVerified:um,displayName:wt,isAnonymous:Rl,photoURL:Xc,phoneNumber:ho,tenantId:Pv,stsTokenManager:pC,createdAt:zo,lastLoginAt:kv});return dm&&Array.isArray(dm)&&(Jn.providerData=dm.map(hm=>Object.assign({},hm))),Al&&(Jn._redirectEventId=Al),Jn}static _fromIdTokenResponse(u,h,m=!1){return(0,x.Z)(function*(){const y=new E;y.updateFromServerResponse(h);const w=new b({uid:h.localId,auth:u,stsTokenManager:y,isAnonymous:m});return yield ai(w),w})()}}const R=new Map;function Q(p){ln(p instanceof Function,"Expected a class definition");let u=R.get(p);return u?(ln(u instanceof p,"Instance stored in cache mismatched with class"),u):(u=new p,R.set(p,u),u)}const Ce=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,x.Z)(function*(){return!0})()}_set(h,m){var y=this;return(0,x.Z)(function*(){y.storage[h]=m})()}_get(h){var m=this;return(0,x.Z)(function*(){const y=m.storage[h];return void 0===y?null:y})()}_remove(h){var m=this;return(0,x.Z)(function*(){delete m.storage[h]})()}_addListener(h,m){}_removeListener(h,m){}}return p.type="NONE",p})();function ze(p,u,h){return`firebase:${p}:${u}:${h}`}class At{constructor(u,h,m){this.persistence=u,this.auth=h,this.userKey=m;const{config:y,name:w}=this.auth;this.fullUserKey=ze(this.userKey,y.apiKey,w),this.fullPersistenceKey=ze("persistence",y.apiKey,w),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,x.Z)(function*(){const h=yield u.persistence._get(u.fullUserKey);return h?b._fromJSON(u.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var h=this;return(0,x.Z)(function*(){if(h.persistence===u)return;const m=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=u,m?h.setCurrentUser(m):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,h,m="authUser"){return(0,x.Z)(function*(){if(!h.length)return new At(Q(Ce),u,m);const y=(yield Promise.all(h.map(function(){var Te=(0,x.Z)(function*(Ve){if(yield Ve._isAvailable())return Ve});return function(Ve){return Te.apply(this,arguments)}}()))).filter(Te=>Te);let w=y[0]||Q(Ce);const N=ze(m,u.config.apiKey,u.name);let W=null;for(const Te of h)try{const Ve=yield Te._get(N);if(Ve){const wt=b._fromJSON(u,Ve);Te!==w&&(W=wt),w=Te;break}}catch{}const se=y.filter(Te=>Te._shouldAllowMigration);return w._shouldAllowMigration&&se.length?(w=se[0],W&&(yield w._set(N,W.toJSON())),yield Promise.all(h.map(function(){var Te=(0,x.Z)(function*(Ve){if(Ve!==w)try{yield Ve._remove(N)}catch{}});return function(Ve){return Te.apply(this,arguments)}}())),new At(w,u,m)):new At(w,u,m)})()}}function be(p){const u=p.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(_a(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(Zt(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(k(u))return"Blackberry";if(ae(u))return"Webos";if(Ne(u))return"Safari";if((u.includes("chrome/")||pi(u))&&!u.includes("edge/"))return"Chrome";if(j(u))return"Android";{const m=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===m?.length)return m[1]}return"Other"}function Zt(p=(0,X.z$)()){return/firefox\//i.test(p)}function Ne(p=(0,X.z$)()){const u=p.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function pi(p=(0,X.z$)()){return/crios\//i.test(p)}function _a(p=(0,X.z$)()){return/iemobile/i.test(p)}function j(p=(0,X.z$)()){return/android/i.test(p)}function k(p=(0,X.z$)()){return/blackberry/i.test(p)}function ae(p=(0,X.z$)()){return/webos/i.test(p)}function Ie(p=(0,X.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function ct(p=(0,X.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function Sn(p=(0,X.z$)()){return Ie(p)||j(p)||ae(p)||k(p)||/windows phone/i.test(p)||_a(p)}function ut(p,u=[]){let h;switch(p){case"Browser":h=be((0,X.z$)());break;case"Worker":h=`${be((0,X.z$)())}-${p}`;break;default:h=p}const m=u.length?u.join(","):"FirebaseCore-web";return`${h}/JsCore/${L.SDK_VERSION}/${m}`}class Pc{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,h){const m=w=>new Promise((N,W)=>{try{N(u(w))}catch(se){W(se)}});m.onAbort=h,this.queue.push(m);const y=this.queue.length-1;return()=>{this.queue[y]=()=>Promise.resolve()}}runMiddleware(u){var h=this;return(0,x.Z)(function*(){if(h.auth.currentUser===u)return;const m=[];try{for(const y of h.queue)yield y(u),y.onAbort&&m.push(y.onAbort)}catch(y){m.reverse();for(const w of m)try{w()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:y?.message})}})()}}function dp(){return(dp=(0,x.Z)(function*(p,u={}){return ne(p,"GET","/v2/passwordPolicy",$(p,u))})).apply(this,arguments)}class Sr{constructor(u){var h,m,y,w;const N=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(h=N.minPasswordLength)&&void 0!==h?h:6,N.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=N.maxPasswordLength),void 0!==N.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=N.containsLowercaseCharacter),void 0!==N.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=N.containsUppercaseCharacter),void 0!==N.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=N.containsNumericCharacter),void 0!==N.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=N.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(y=null===(m=u.allowedNonAlphanumericCharacters)||void 0===m?void 0:m.join(""))&&void 0!==y?y:"",this.forceUpgradeOnSignin=null!==(w=u.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=u.schemaVersion}validatePassword(u){var h,m,y,w,N,W;const se={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,se),this.validatePasswordCharacterOptions(u,se),se.isValid&&(se.isValid=null===(h=se.meetsMinPasswordLength)||void 0===h||h),se.isValid&&(se.isValid=null===(m=se.meetsMaxPasswordLength)||void 0===m||m),se.isValid&&(se.isValid=null===(y=se.containsLowercaseLetter)||void 0===y||y),se.isValid&&(se.isValid=null===(w=se.containsUppercaseLetter)||void 0===w||w),se.isValid&&(se.isValid=null===(N=se.containsNumericCharacter)||void 0===N||N),se.isValid&&(se.isValid=null===(W=se.containsNonAlphanumericCharacter)||void 0===W||W),se}validatePasswordLengthOptions(u,h){const m=this.customStrengthOptions.minPasswordLength,y=this.customStrengthOptions.maxPasswordLength;m&&(h.meetsMinPasswordLength=u.length>=m),y&&(h.meetsMaxPasswordLength=u.length<=y)}validatePasswordCharacterOptions(u,h){let m;this.updatePasswordCharacterOptionsStatuses(h,!1,!1,!1,!1);for(let y=0;y<u.length;y++)m=u.charAt(y),this.updatePasswordCharacterOptionsStatuses(h,m>="a"&&m<="z",m>="A"&&m<="Z",m>="0"&&m<="9",this.allowedNonAlphanumericCharacters.includes(m))}updatePasswordCharacterOptionsStatuses(u,h,m,y,w){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=h)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=m)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=y)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=w))}}class gk{constructor(u,h,m,y){this.app=u,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=m,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SI(this),this.idTokenSubscription=new SI(this),this.beforeStateQueue=new Pc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(u,h){var m=this;return h&&(this._popupRedirectResolver=Q(h)),this._initializationPromise=this.queue((0,x.Z)(function*(){var y,w;if(!m._deleted&&(m.persistenceManager=yield At.create(m,u),!m._deleted)){if(null!==(y=m._popupRedirectResolver)&&void 0!==y&&y._shouldInitProactively)try{yield m._popupRedirectResolver._initialize(m)}catch{}yield m.initializeCurrentUser(h),m.lastNotifiedUid=(null===(w=m.currentUser)||void 0===w?void 0:w.uid)||null,!m._deleted&&(m._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,x.Z)(function*(){if(u._deleted)return;const h=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||h){if(u.currentUser&&h&&u.currentUser.uid===h.uid)return u._currentUser._assign(h),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(h,!0)}})()}initializeCurrentUser(u){var h=this;return(0,x.Z)(function*(){var m;const y=yield h.assertedPersistence.getCurrentUser();let w=y,N=!1;if(u&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const W=null===(m=h.redirectUser)||void 0===m?void 0:m._redirectEventId,se=w?._redirectEventId,Te=yield h.tryRedirectSignIn(u);(!W||W===se)&&Te?.user&&(w=Te.user,N=!0)}if(!w)return h.directlySetCurrentUser(null);if(!w._redirectEventId){if(N)try{yield h.beforeStateQueue.runMiddleware(w)}catch(W){w=y,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(W))}return w?h.reloadAndSetCurrentUserOrClear(w):h.directlySetCurrentUser(null)}return le(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===w._redirectEventId?h.directlySetCurrentUser(w):h.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(u){var h=this;return(0,x.Z)(function*(){let m=null;try{m=yield h._popupRedirectResolver._completeRedirectFn(h,u,!0)}catch{yield h._setRedirectUser(null)}return m})()}reloadAndSetCurrentUserOrClear(u){var h=this;return(0,x.Z)(function*(){try{yield ai(u)}catch(m){if("auth/network-request-failed"!==m?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function Xe(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var u=this;return(0,x.Z)(function*(){u._deleted=!0})()}updateCurrentUser(u){var h=this;return(0,x.Z)(function*(){const m=u?(0,X.m9)(u):null;return m&&le(m.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(m&&m._clone(h))})()}_updateCurrentUser(u,h=!1){var m=this;return(0,x.Z)(function*(){if(!m._deleted)return u&&le(m.tenantId===u.tenantId,m,"tenant-id-mismatch"),h||(yield m.beforeStateQueue.runMiddleware(u)),m.queue((0,x.Z)(function*(){yield m.directlySetCurrentUser(u),m.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,x.Z)(function*(){return yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0)})()}setPersistence(u){var h=this;return this.queue((0,x.Z)(function*(){yield h.assertedPersistence.setPersistence(Q(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var h=this;return(0,x.Z)(function*(){h._getPasswordPolicyInternal()||(yield h._updatePasswordPolicy());const m=h._getPasswordPolicyInternal();return m.schemaVersion!==h.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(h._errorFactory.create("unsupported-password-policy-schema-version",{})):m.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,x.Z)(function*(){const h=yield function mk(p){return dp.apply(this,arguments)}(u),m=new Sr(h);null===u.tenantId?u._projectPasswordPolicy=m:u._tenantPasswordPolicies[u.tenantId]=m})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new X.LL("auth","Firebase",u())}onAuthStateChanged(u,h,m){return this.registerStateListener(this.authStateSubscription,u,h,m)}beforeAuthStateChanged(u,h){return this.beforeStateQueue.pushCallback(u,h)}onIdTokenChanged(u,h,m){return this.registerStateListener(this.idTokenSubscription,u,h,m)}authStateReady(){return new Promise((u,h)=>{if(this.currentUser)u();else{const m=this.onAuthStateChanged(()=>{m(),u()},h)}})}revokeAccessToken(u){var h=this;return(0,x.Z)(function*(){if(h.currentUser){const m=yield h.currentUser.getIdToken(),y={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:m};null!=h.tenantId&&(y.tenantId=h.tenantId),yield function P(p,u){return D.apply(this,arguments)}(h,y)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,h){var m=this;return(0,x.Z)(function*(){const y=yield m.getOrInitRedirectPersistenceManager(h);return null===u?y.removeCurrentUser():y.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var h=this;return(0,x.Z)(function*(){if(!h.redirectPersistenceManager){const m=u&&Q(u)||h._popupRedirectResolver;le(m,h,"argument-error"),h.redirectPersistenceManager=yield At.create(h,[Q(m._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(u){var h=this;return(0,x.Z)(function*(){var m,y;return h._isInitialized&&(yield h.queue((0,x.Z)(function*(){}))),(null===(m=h._currentUser)||void 0===m?void 0:m._redirectEventId)===u?h._currentUser:(null===(y=h.redirectUser)||void 0===y?void 0:y._redirectEventId)===u?h.redirectUser:null})()}_persistUserIfCurrent(u){var h=this;return(0,x.Z)(function*(){if(u===h.currentUser)return h.queue((0,x.Z)(function*(){return h.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const m=null!==(h=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==m&&(this.lastNotifiedUid=m,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,h,m,y){if(this._deleted)return()=>{};const w="function"==typeof h?h:h.next.bind(h);let N=!1;const W=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(W,this,"internal-error"),W.then(()=>{N||w(this.currentUser)}),"function"==typeof h){const se=u.addObserver(h,m,y);return()=>{N=!0,se()}}{const se=u.addObserver(h);return()=>{N=!0,se()}}}directlySetCurrentUser(u){var h=this;return(0,x.Z)(function*(){h.currentUser&&h.currentUser!==u&&h._currentUser._stopProactiveRefresh(),u&&h.isProactiveRefreshEnabled&&u._startProactiveRefresh(),h.currentUser=u,u?yield h.assertedPersistence.setCurrentUser(u):yield h.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=ut(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,x.Z)(function*(){var h;const m={"X-Client-Version":u.clientVersion};u.app.options.appId&&(m["X-Firebase-gmpid"]=u.app.options.appId);const y=yield null===(h=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();y&&(m["X-Firebase-Client"]=y);const w=yield u._getAppCheckToken();return w&&(m["X-Firebase-AppCheck"]=w),m})()}_getAppCheckToken(){var u=this;return(0,x.Z)(function*(){var h;const m=yield null===(h=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return m?.error&&function hi(p,...u){Qe.logLevel<=Pe.in.WARN&&Qe.warn(`Auth (${L.SDK_VERSION}): ${p}`,...u)}(`Error while retrieving App Check token: ${m.error}`),m?.token})()}}function Dn(p){return(0,X.m9)(p)}class SI{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,X.ne)(h=>this.observer=h)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function My(p){return new Promise((u,h)=>{const m=document.createElement("script");m.setAttribute("src",p),m.onload=u,m.onerror=y=>{const w=qt("internal-error");w.customData=y,h(w)},m.type="text/javascript",m.charset="UTF-8",function ya(){var p,u;return null!==(u=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==u?u:document}().appendChild(m)})}function DI(p){return`__${p}${Math.floor(1e6*Math.random())}`}class RI{constructor(u){this.type="recaptcha-enterprise",this.auth=Dn(u)}verify(u="verify",h=!1){var m=this;return(0,x.Z)(function*(){function w(){return w=(0,x.Z)(function*(W){if(!h){if(null==W.tenantId&&null!=W._agentRecaptchaConfig)return W._agentRecaptchaConfig.siteKey;if(null!=W.tenantId&&void 0!==W._tenantRecaptchaConfigs[W.tenantId])return W._tenantRecaptchaConfigs[W.tenantId].siteKey}return new Promise(function(){var se=(0,x.Z)(function*(Te,Ve){Os(W,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(wt=>{if(void 0!==wt.recaptchaKey){const Yi=new fi(wt);return null==W.tenantId?W._agentRecaptchaConfig=Yi:W._tenantRecaptchaConfigs[W.tenantId]=Yi,Te(Yi.siteKey)}Ve(new Error("recaptcha Enterprise site key undefined"))}).catch(wt=>{Ve(wt)})});return function(Te,Ve){return se.apply(this,arguments)}}())}),w.apply(this,arguments)}function N(W,se,Te){const Ve=window.grecaptcha;oi(Ve)?Ve.enterprise.ready(()=>{Ve.enterprise.execute(W,{action:u}).then(wt=>{se(wt)}).catch(()=>{se("NO_RECAPTCHA")})}):Te(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((W,se)=>{(function y(W){return w.apply(this,arguments)})(m.auth).then(Te=>{if(!h&&oi(window.grecaptcha))N(Te,W,se);else{if(typeof window>"u")return void se(new Error("RecaptchaVerifier is only supported in browser"));My("https://www.google.com/recaptcha/enterprise.js?render="+Te).then(()=>{N(Te,W,se)}).catch(Ve=>{se(Ve)})}}).catch(Te=>{se(Te)})})})()}}function Py(p,u,h){return ky.apply(this,arguments)}function ky(){return(ky=(0,x.Z)(function*(p,u,h,m=!1){const y=new RI(p);let w;try{w=yield y.verify(h)}catch{w=yield y.verify(h,!0)}const N=Object.assign({},u);return Object.assign(N,m?{captchaResp:w}:{captchaResponse:w}),Object.assign(N,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(N,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),N})).apply(this,arguments)}function ki(p,u,h,m){return We.apply(this,arguments)}function We(){return We=(0,x.Z)(function*(p,u,h,m){var y;if(null!==(y=p._getRecaptchaConfig())&&void 0!==y&&y.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const w=yield Py(p,u,h,"getOobCode"===h);return m(p,w)}return m(p,u).catch(function(){var w=(0,x.Z)(function*(N){if("auth/missing-recaptcha-token"===N.code){console.log(`${h} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const W=yield Py(p,u,h,"getOobCode"===h);return m(p,W)}return Promise.reject(N)});return function(N){return w.apply(this,arguments)}}())}),We.apply(this,arguments)}function MI(p,u,h){const m=Dn(p);le(m._canInitEmulator,m,"emulator-config-failed"),le(/^https?:\/\//.test(u),m,"invalid-emulator-scheme");const y=!!h?.disableWarnings,w=Nt(u),{host:N,port:W}=function ld(p){const u=Nt(p),h=/(\/\/)?([^?#/]+)/.exec(p.substr(u.length));if(!h)return{host:"",port:null};const m=h[2].split("@").pop()||"",y=/^(\[[^\]]+\])(:|$)/.exec(m);if(y){const w=y[1];return{host:w,port:Oy(m.substr(w.length+1))}}{const[w,N]=m.split(":");return{host:w,port:Oy(N)}}}(u);m.config.emulator={url:`${w}//${N}${null===W?"":`:${W}`}/`},m.settings.appVerificationDisabledForTesting=!0,m.emulatorConfig=Object.freeze({host:N,port:W,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:y})}),y||function Fy(){function p(){const u=document.createElement("p"),h=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function Nt(p){const u=p.indexOf(":");return u<0?"":p.substr(0,u+1)}function Oy(p){if(!p)return null;const u=Number(p);return isNaN(u)?null:u}class cl{constructor(u,h){this.providerId=u,this.signInMethod=h}toJSON(){return Ct("not implemented")}_getIdTokenResponse(u){return Ct("not implemented")}_linkToIdToken(u,h){return Ct("not implemented")}_getReauthenticationResolver(u){return Ct("not implemented")}}function kc(p,u){return ul.apply(this,arguments)}function ul(){return(ul=(0,x.Z)(function*(p,u){return ne(p,"POST","/v1/accounts:resetPassword",$(p,u))})).apply(this,arguments)}function cd(){return(cd=(0,x.Z)(function*(p,u){return ne(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function PI(p,u){return dt.apply(this,arguments)}function dt(){return(dt=(0,x.Z)(function*(p,u){return ne(p,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function ud(){return(ud=(0,x.Z)(function*(p,u){return ne(p,"POST","/v1/accounts:update",$(p,u))})).apply(this,arguments)}function ar(p,u){return dd.apply(this,arguments)}function dd(){return(dd=(0,x.Z)(function*(p,u){return ge(p,"POST","/v1/accounts:signInWithPassword",$(p,u))})).apply(this,arguments)}function mp(p,u){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,x.Z)(function*(p,u){return ne(p,"POST","/v1/accounts:sendOobCode",$(p,u))})).apply(this,arguments)}function Ly(){return(Ly=(0,x.Z)(function*(p,u){return mp(p,u)})).apply(this,arguments)}function oe(p,u){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,x.Z)(function*(p,u){return mp(p,u)})).apply(this,arguments)}function gp(p,u){return hd.apply(this,arguments)}function hd(){return(hd=(0,x.Z)(function*(p,u){return mp(p,u)})).apply(this,arguments)}function yp(){return(yp=(0,x.Z)(function*(p,u){return mp(p,u)})).apply(this,arguments)}function Vy(){return(Vy=(0,x.Z)(function*(p,u){return ge(p,"POST","/v1/accounts:signInWithEmailLink",$(p,u))})).apply(this,arguments)}function By(){return(By=(0,x.Z)(function*(p,u){return ge(p,"POST","/v1/accounts:signInWithEmailLink",$(p,u))})).apply(this,arguments)}class fd extends cl{constructor(u,h,m,y=null){super("password",m),this._email=u,this._password=h,this._tenantId=y}static _fromEmailAndPassword(u,h){return new fd(u,h,"password")}static _fromEmailAndCode(u,h,m=null){return new fd(u,h,"emailLink",m)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const h="string"==typeof u?JSON.parse(u):u;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(u){var h=this;return(0,x.Z)(function*(){switch(h.signInMethod){case"password":return ki(u,{returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ar);case"emailLink":return function vp(p,u){return Vy.apply(this,arguments)}(u,{email:h._email,oobCode:h._password});default:pt(u,"internal-error")}})()}_linkToIdToken(u,h){var m=this;return(0,x.Z)(function*(){switch(m.signInMethod){case"password":return ki(u,{idToken:h,returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PI);case"emailLink":return function wk(p,u){return By.apply(this,arguments)}(u,{idToken:h,email:m._email,oobCode:m._password});default:pt(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function Po(p,u){return va.apply(this,arguments)}function va(){return(va=(0,x.Z)(function*(p,u){return ge(p,"POST","/v1/accounts:signInWithIdp",$(p,u))})).apply(this,arguments)}class Dr extends cl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const h=new Dr(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(h.idToken=u.idToken),u.accessToken&&(h.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(h.nonce=u.nonce),u.pendingToken&&(h.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(h.accessToken=u.oauthToken,h.secret=u.oauthTokenSecret):pt("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const h="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:y}=h,w=(0,ht._T)(h,["providerId","signInMethod"]);if(!m||!y)return null;const N=new Dr(m,y);return N.idToken=w.idToken||void 0,N.accessToken=w.accessToken||void 0,N.secret=w.secret,N.nonce=w.nonce,N.pendingToken=w.pendingToken||null,N}_getIdTokenResponse(u){return Po(u,this.buildRequest())}_linkToIdToken(u,h){const m=this.buildRequest();return m.idToken=h,Po(u,m)}_getReauthenticationResolver(u){const h=this.buildRequest();return h.autoCreate=!1,Po(u,h)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),u.postBody=(0,X.xO)(h)}return u}}function Ep(){return(Ep=(0,x.Z)(function*(p,u){return ne(p,"POST","/v1/accounts:sendVerificationCode",$(p,u))})).apply(this,arguments)}function pd(){return(pd=(0,x.Z)(function*(p,u){return ge(p,"POST","/v1/accounts:signInWithPhoneNumber",$(p,u))})).apply(this,arguments)}function wp(){return(wp=(0,x.Z)(function*(p,u){const h=yield ge(p,"POST","/v1/accounts:signInWithPhoneNumber",$(p,u));if(h.temporaryProof)throw fn(p,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const ko={USER_NOT_FOUND:"user-not-found"};function O(){return(O=(0,x.Z)(function*(p,u){return ge(p,"POST","/v1/accounts:signInWithPhoneNumber",$(p,Object.assign(Object.assign({},u),{operation:"REAUTH"})),ko)})).apply(this,arguments)}class No extends cl{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,h){return new No({verificationId:u,verificationCode:h})}static _fromTokenResponse(u,h){return new No({phoneNumber:u,temporaryProof:h})}_getIdTokenResponse(u){return function NI(p,u){return pd.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,h){return function dl(p,u){return wp.apply(this,arguments)}(u,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function OI(p,u){return O.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:h,verificationId:m,verificationCode:y}=this.params;return u&&h?{temporaryProof:u,phoneNumber:h}:{sessionInfo:m,code:y}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:h,verificationCode:m,phoneNumber:y,temporaryProof:w}=u;return m||h||y||w?new No({verificationId:h,verificationCode:m,phoneNumber:y,temporaryProof:w}):null}}class ba{constructor(u){var h,m,y,w,N,W;const se=(0,X.zd)((0,X.pd)(u)),Te=null!==(h=se.apiKey)&&void 0!==h?h:null,Ve=null!==(m=se.oobCode)&&void 0!==m?m:null,wt=function me(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(y=se.mode)&&void 0!==y?y:null);le(Te&&Ve&&wt,"argument-error"),this.apiKey=Te,this.operation=wt,this.code=Ve,this.continueUrl=null!==(w=se.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(N=se.languageCode)&&void 0!==N?N:null,this.tenantId=null!==(W=se.tenantId)&&void 0!==W?W:null}static parseLink(u){const h=function md(p){const u=(0,X.zd)((0,X.pd)(p)).link,h=u?(0,X.zd)((0,X.pd)(u)).deep_link_id:null,m=(0,X.zd)((0,X.pd)(p)).deep_link_id;return(m?(0,X.zd)((0,X.pd)(m)).link:null)||m||h||u||p}(u);try{return new ba(h)}catch{return null}}}let Ip=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(h,m){return fd._fromEmailAndPassword(h,m)}static credentialWithLink(h,m){const y=ba.parseLink(m);return le(y,"argument-error"),fd._fromEmailAndCode(h,y.code,y.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class oo{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class hl extends oo{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class Ar extends hl{static credentialFromJSON(u){const h="string"==typeof u?JSON.parse(u):u;return le("providerId"in h&&"signInMethod"in h,"argument-error"),Dr._fromParams(h)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return le(u.idToken||u.accessToken,"argument-error"),Dr._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return Ar.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return Ar.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:h,oauthAccessToken:m,oauthTokenSecret:y,pendingToken:w,nonce:N,providerId:W}=u;if(!m&&!y&&!h&&!w||!W)return null;try{return new Ar(W)._credential({idToken:h,accessToken:m,nonce:N,pendingToken:w})}catch{return null}}}let _d=(()=>{class p extends hl{constructor(){super("facebook.com")}static credential(h){return Dr._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return p.credential(h.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),Qr=(()=>{class p extends hl{constructor(){super("google.com"),this.addScope("profile")}static credential(h,m){return Dr._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:m})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:m,oauthAccessToken:y}=h;if(!m&&!y)return null;try{return p.credential(m,y)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Bs=(()=>{class p extends hl{constructor(){super("github.com")}static credential(h){return Dr._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return p.credential(h.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class ao extends cl{constructor(u,h){super(u,u),this.pendingToken=h}_getIdTokenResponse(u){return Po(u,this.buildRequest())}_linkToIdToken(u,h){const m=this.buildRequest();return m.idToken=h,Po(u,m)}_getReauthenticationResolver(u){const h=this.buildRequest();return h.autoCreate=!1,Po(u,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const h="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:y,pendingToken:w}=h;return m&&y&&w&&m===y?new ao(m,w):null}static _create(u,h){return new ao(u,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fl extends oo{constructor(u){le(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return fl.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return fl.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const h=ao.fromJSON(u);return le(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:h,providerId:m}=u;if(!h||!m)return null;try{return ao._create(m,h)}catch{return null}}}let Uy=(()=>{class p extends hl{constructor(){super("twitter.com")}static credential(h,m){return Dr._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:m})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:m,oauthTokenSecret:y}=h;if(!m||!y)return null;try{return p.credential(m,y)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Us(p,u){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,x.Z)(function*(p,u){return ge(p,"POST","/v1/accounts:signUp",$(p,u))})).apply(this,arguments)}class Rr{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,h,m,y=!1){return(0,x.Z)(function*(){const w=yield b._fromIdTokenResponse(u,m,y),N=Tp(m);return new Rr({user:w,providerId:N,_tokenResponse:m,operationType:h})})()}static _forOperation(u,h,m){return(0,x.Z)(function*(){yield u._updateTokensIfNecessary(m,!0);const y=Tp(m);return new Rr({user:u,providerId:y,_tokenResponse:m,operationType:h})})()}}function Tp(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function xp(p){return yd.apply(this,arguments)}function yd(){return(yd=(0,x.Z)(function*(p){var u;const h=Dn(p);if(yield h._initializationPromise,null!==(u=h.currentUser)&&void 0!==u&&u.isAnonymous)return new Rr({user:h.currentUser,providerId:null,operationType:"signIn"});const m=yield Us(h,{returnSecureToken:!0}),y=yield Rr._fromIdTokenResponse(h,"signIn",m,!0);return yield h._updateCurrentUser(y.user),y})).apply(this,arguments)}class Oc extends X.ZR{constructor(u,h,m,y){var w;super(h.code,h.message),this.operationType=m,this.user=y,Object.setPrototypeOf(this,Oc.prototype),this.customData={appName:u.name,tenantId:null!==(w=u.tenantId)&&void 0!==w?w:void 0,_serverResponse:h.customData._serverResponse,operationType:m}}static _fromErrorAndOperation(u,h,m,y){return new Oc(u,h,m,y)}}function pl(p,u,h,m){return("reauthenticate"===u?h._getReauthenticationResolver(p):h._getIdTokenResponse(p)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?Oc._fromErrorAndOperation(p,w,u,m):w})}function Sp(p){return new Set(p.map(({providerId:u})=>u).filter(u=>!!u))}function jy(p,u){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,x.Z)(function*(p,u){const h=(0,X.m9)(p);yield bd(!0,h,u);const{providerUserInfo:m}=yield function ps(p,u){return ms.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[u]}),y=Sp(m||[]);return h.providerData=h.providerData.filter(w=>y.has(w.providerId)),y.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),Dp.apply(this,arguments)}function vd(p,u){return Ap.apply(this,arguments)}function Ap(){return(Ap=(0,x.Z)(function*(p,u,h=!1){const m=yield pn(p,u._linkToIdToken(p.auth,yield p.getIdToken()),h);return Rr._forOperation(p,"link",m)})).apply(this,arguments)}function bd(p,u,h){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,x.Z)(function*(p,u,h){yield ai(u);const y=!1===p?"provider-already-linked":"no-such-provider";le(Sp(u.providerData).has(h)===p,u.auth,y)})).apply(this,arguments)}function zy(p,u){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,x.Z)(function*(p,u,h=!1){const{auth:m}=p,y="reauthenticate";try{const w=yield pn(p,pl(m,y,u,p),h);le(w.idToken,m,"internal-error");const N=Tn(w.idToken);le(N,m,"internal-error");const{sub:W}=N;return le(p.uid===W,m,"user-mismatch"),Rr._forOperation(p,y,w)}catch(w){throw"auth/user-not-found"===w?.code&&pt(m,"user-mismatch"),w}})).apply(this,arguments)}function Hy(p,u){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,x.Z)(function*(p,u,h=!1){const m="signIn",y=yield pl(p,m,u),w=yield Rr._fromIdTokenResponse(p,m,y);return h||(yield p._updateCurrentUser(w.user)),w})).apply(this,arguments)}function wd(p,u){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,x.Z)(function*(p,u){return Hy(Dn(p),u)})).apply(this,arguments)}function Pp(p,u){return kp.apply(this,arguments)}function kp(){return(kp=(0,x.Z)(function*(p,u){const h=(0,X.m9)(p);return yield bd(!1,h,u.providerId),vd(h,u)})).apply(this,arguments)}function $y(p,u){return Np.apply(this,arguments)}function Np(){return(Np=(0,x.Z)(function*(p,u){return zy((0,X.m9)(p),u)})).apply(this,arguments)}function Op(){return(Op=(0,x.Z)(function*(p,u){return ge(p,"POST","/v1/accounts:signInWithCustomToken",$(p,u))})).apply(this,arguments)}function FI(p,u){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,x.Z)(function*(p,u){const h=Dn(p),m=yield function lr(p,u){return Op.apply(this,arguments)}(h,{token:u,returnSecureToken:!0}),y=yield Rr._fromIdTokenResponse(h,"signIn",m);return yield h._updateCurrentUser(y.user),y}),Fp.apply(this,arguments)}class xt{constructor(u,h){this.factorId=u,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(u,h){return"phoneInfo"in h?Lp._fromServerResponse(u,h):"totpInfo"in h?Id._fromServerResponse(u,h):pt(u,"internal-error")}}class Lp extends xt{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,h){return new Lp(h)}}class Id extends xt{constructor(u){super("totp",u)}static _fromServerResponse(u,h){return new Id(h)}}function Ae(p,u,h){var m;le((null===(m=h.url)||void 0===m?void 0:m.length)>0,p,"invalid-continue-uri"),le(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),u.continueUrl=h.url,u.dynamicLinkDomain=h.dynamicLinkDomain,u.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(le(h.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),u.iOSBundleId=h.iOS.bundleId),h.android&&(le(h.android.packageName.length>0,p,"missing-android-pkg-name"),u.androidInstallApp=h.android.installApp,u.androidMinimumVersionCode=h.android.minimumVersion,u.androidPackageName=h.android.packageName)}function Ni(p){return Et.apply(this,arguments)}function Et(){return(Et=(0,x.Z)(function*(p){const u=Dn(p);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function Ei(p,u,h){return wi.apply(this,arguments)}function wi(){return(wi=(0,x.Z)(function*(p,u,h){const m=Dn(p),y={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};h&&Ae(m,y,h),yield ki(m,y,"getOobCode",oe)})).apply(this,arguments)}function ml(p,u,h){return Gi.apply(this,arguments)}function Gi(){return Gi=(0,x.Z)(function*(p,u,h){yield kc((0,X.m9)(p),{oobCode:u,newPassword:h}).catch(function(){var m=(0,x.Z)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&Ni(p),y});return function(y){return m.apply(this,arguments)}}())}),Gi.apply(this,arguments)}function Wy(p,u){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,x.Z)(function*(p,u){yield function pp(p,u){return ud.apply(this,arguments)}((0,X.m9)(p),{oobCode:u})}),Cd.apply(this,arguments)}function Fc(p,u){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,x.Z)(function*(p,u){const h=(0,X.m9)(p),m=yield kc(h,{oobCode:u}),y=m.requestType;switch(le(y,h,"internal-error"),y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(m.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(m.mfaInfo,h,"internal-error");default:le(m.email,h,"internal-error")}let w=null;return m.mfaInfo&&(w=xt._fromServerResponse(Dn(h),m.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.newEmail:m.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.email:m.newEmail)||null,multiFactorInfo:w},operation:y}})).apply(this,arguments)}function LI(p,u){return mn.apply(this,arguments)}function mn(){return(mn=(0,x.Z)(function*(p,u){const{data:h}=yield Fc((0,X.m9)(p),u);return h.email})).apply(this,arguments)}function Ee(p,u,h){return Je.apply(this,arguments)}function Je(){return(Je=(0,x.Z)(function*(p,u,h){const m=Dn(p),N=yield ki(m,{returnSecureToken:!0,email:u,password:h,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Us).catch(se=>{throw"auth/password-does-not-meet-requirements"===se.code&&Ni(p),se}),W=yield Rr._fromIdTokenResponse(m,"signIn",N);return yield m._updateCurrentUser(W.user),W})).apply(this,arguments)}function gn(p,u,h){return wd((0,X.m9)(p),Ip.credential(u,h)).catch(function(){var m=(0,x.Z)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&Ni(p),y});return function(y){return m.apply(this,arguments)}}())}function ys(p,u,h){return wa.apply(this,arguments)}function wa(){return(wa=(0,x.Z)(function*(p,u,h){const m=Dn(p),y={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function w(N,W){le(W.handleCodeInApp,m,"argument-error"),W&&Ae(m,N,W)})(y,h),yield ki(m,y,"getOobCode",gp)})).apply(this,arguments)}function Oi(p,u){const h=ba.parseLink(u);return"EMAIL_SIGNIN"===h?.operation}function gl(p,u,h){return An.apply(this,arguments)}function An(){return(An=(0,x.Z)(function*(p,u,h){const m=(0,X.m9)(p),y=Ip.credentialWithLink(u,h||Fn());return le(y._tenantId===(m.tenantId||null),m,"tenant-id-mismatch"),wd(m,y)})).apply(this,arguments)}function Fo(){return(Fo=(0,x.Z)(function*(p,u){return ne(p,"POST","/v1/accounts:createAuthUri",$(p,u))})).apply(this,arguments)}function et(p,u){return Ia.apply(this,arguments)}function Ia(){return Ia=(0,x.Z)(function*(p,u){const m={identifier:u,continueUri:Ln()?Fn():"http://localhost"},{signinMethods:y}=yield function Oo(p,u){return Fo.apply(this,arguments)}((0,X.m9)(p),m);return y||[]}),Ia.apply(this,arguments)}function qy(p,u){return Lo.apply(this,arguments)}function Lo(){return Lo=(0,x.Z)(function*(p,u){const h=(0,X.m9)(p),y={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};u&&Ae(h.auth,y,u);const{email:w}=yield function Ek(p,u){return Ly.apply(this,arguments)}(h.auth,y);w!==p.email&&(yield p.reload())}),Lo.apply(this,arguments)}function $n(p,u,h){return Ca.apply(this,arguments)}function Ca(){return Ca=(0,x.Z)(function*(p,u,h){const m=(0,X.m9)(p),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:u};h&&Ae(m.auth,w,h);const{email:N}=yield function _p(p,u){return yp.apply(this,arguments)}(m.auth,w);N!==p.email&&(yield p.reload())}),Ca.apply(this,arguments)}function Xr(){return(Xr=(0,x.Z)(function*(p,u){return ne(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Lc(p,u){return Td.apply(this,arguments)}function Td(){return Td=(0,x.Z)(function*(p,{displayName:u,photoURL:h}){if(void 0===u&&void 0===h)return;const m=(0,X.m9)(p),w={idToken:yield m.getIdToken(),displayName:u,photoUrl:h,returnSecureToken:!0},N=yield pn(m,function _l(p,u){return Xr.apply(this,arguments)}(m.auth,w));m.displayName=N.displayName||null,m.photoURL=N.photoUrl||null;const W=m.providerData.find(({providerId:se})=>"password"===se);W&&(W.displayName=m.displayName,W.photoURL=m.photoURL),yield m._updateTokensIfNecessary(N)}),Td.apply(this,arguments)}function Vo(p,u){return yl((0,X.m9)(p),u,null)}function lo(p,u){return yl((0,X.m9)(p),null,u)}function yl(p,u,h){return Ta.apply(this,arguments)}function Ta(){return Ta=(0,x.Z)(function*(p,u,h){const{auth:m}=p,w={idToken:yield p.getIdToken(),returnSecureToken:!0};u&&(w.email=u),h&&(w.password=h);const N=yield pn(p,function fp(p,u){return cd.apply(this,arguments)}(m,w));yield p._updateTokensIfNecessary(N,!0)}),Ta.apply(this,arguments)}class Vc{constructor(u,h,m={}){this.isNewUser=u,this.providerId=h,this.profile=m}}class xd extends Vc{constructor(u,h,m,y){super(u,h,m),this.username=y}}class Gy extends Vc{constructor(u,h){super(u,"facebook.com",h)}}class js extends xd{constructor(u,h){super(u,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class Sd extends Vc{constructor(u,h){super(u,"google.com",h)}}class vl extends xd{constructor(u,h,m){super(u,"twitter.com",h,m)}}function Bc(p){const{user:u,_tokenResponse:h}=p;return u.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function _t(p){var u,h;if(!p)return null;const{providerId:m}=p,y=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},w=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!m&&p?.idToken){const N=null===(h=null===(u=Tn(p.idToken))||void 0===u?void 0:u.firebase)||void 0===h?void 0:h.sign_in_provider;if(N)return new Vc(w,"anonymous"!==N&&"custom"!==N?N:null)}if(!m)return null;switch(m){case"facebook.com":return new Gy(w,y);case"github.com":return new js(w,y);case"google.com":return new Sd(w,y);case"twitter.com":return new vl(w,y,p.screenName||null);case"custom":case"anonymous":return new Vc(w,null);default:return new Vc(w,m,y)}}(h)}class Sa{constructor(u,h,m){this.type=u,this.credential=h,this.user=m}static _fromIdtoken(u,h){return new Sa("enroll",u,h)}static _fromMfaPendingCredential(u){return new Sa("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var h,m;if(u?.multiFactorSession){if(null!==(h=u.multiFactorSession)&&void 0!==h&&h.pendingCredential)return Sa._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(m=u.multiFactorSession)&&void 0!==m&&m.idToken)return Sa._fromIdtoken(u.multiFactorSession.idToken)}return null}}class Zy{constructor(u,h,m){this.session=u,this.hints=h,this.signInResolver=m}static _fromError(u,h){const m=Dn(u),y=h.customData._serverResponse,w=(y.mfaInfo||[]).map(W=>xt._fromServerResponse(m,W));le(y.mfaPendingCredential,m,"internal-error");const N=Sa._fromMfaPendingCredential(y.mfaPendingCredential);return new Zy(N,w,function(){var W=(0,x.Z)(function*(se){const Te=yield se._process(m,N);delete y.mfaInfo,delete y.mfaPendingCredential;const Ve=Object.assign(Object.assign({},y),{idToken:Te.idToken,refreshToken:Te.refreshToken});switch(h.operationType){case"signIn":const wt=yield Rr._fromIdTokenResponse(m,h.operationType,Ve);return yield m._updateCurrentUser(wt.user),wt;case"reauthenticate":return le(h.user,m,"internal-error"),Rr._forOperation(h.user,h.operationType,Ve);default:pt(m,"internal-error")}});return function(se){return W.apply(this,arguments)}}())}resolveSignIn(u){var h=this;return(0,x.Z)(function*(){return h.signInResolver(u)})()}}function Tk(p,u){var h;const m=(0,X.m9)(p),y=u;return le(u.customData.operationType,m,"argument-error"),le(null===(h=y.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,m,"argument-error"),Zy._fromError(m,y)}class Yy{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(m=>xt._fromServerResponse(u.auth,m)))})}static _fromUser(u){return new Yy(u)}getSession(){var u=this;return(0,x.Z)(function*(){return Sa._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,h){var m=this;return(0,x.Z)(function*(){const y=u,w=yield m.getSession(),N=yield pn(m.user,y._process(m.user.auth,w,h));return yield m.user._updateTokensIfNecessary(N),m.user.reload()})()}unenroll(u){var h=this;return(0,x.Z)(function*(){const m="string"==typeof u?u:u.uid,y=yield h.user.getIdToken();try{const w=yield pn(h.user,function Ak(p,u){return ne(p,"POST","/v2/accounts/mfaEnrollment:withdraw",$(p,u))}(h.user.auth,{idToken:y,mfaEnrollmentId:m}));h.enrolledFactors=h.enrolledFactors.filter(({uid:N})=>N!==m),yield h.user._updateTokensIfNecessary(w),yield h.user.reload()}catch(w){throw w}})()}}const Qy=new WeakMap;function Rk(p){const u=(0,X.m9)(p);return Qy.has(u)||Qy.set(u,Yy._fromUser(u)),Qy.get(u)}const zp="__sak";class VI{constructor(u,h){this.storageRetriever=u,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(zp,"1"),this.storage.removeItem(zp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,h){return this.storage.setItem(u,JSON.stringify(h)),Promise.resolve()}_get(u){const h=this.storage.getItem(u);return Promise.resolve(h?JSON.parse(h):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const BI=(()=>{class p extends VI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,m)=>this.onStorageEvent(h,m),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Xy(){const p=(0,X.z$)();return Ne(p)||Ie(p)}()&&function De(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Sn(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const m of Object.keys(this.listeners)){const y=this.storage.getItem(m),w=this.localCache[m];y!==w&&h(m,w,y)}}onStorageEvent(h,m=!1){if(!h.key)return void this.forAllChangedKeys((W,se,Te)=>{this.notifyListeners(W,Te)});const y=h.key;if(m?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const W=this.storage.getItem(y);if(h.newValue!==W)null!==h.newValue?this.storage.setItem(y,h.newValue):this.storage.removeItem(y);else if(this.localCache[y]===h.newValue&&!m)return}const w=()=>{const W=this.storage.getItem(y);!m&&this.localCache[y]===W||this.notifyListeners(y,W)},N=this.storage.getItem(y);!function B(){return(0,X.w1)()&&10===document.documentMode}()||N===h.newValue||h.newValue===h.oldValue?w():setTimeout(w,10)}notifyListeners(h,m){this.localCache[h]=m;const y=this.listeners[h];if(y)for(const w of Array.from(y))w(m&&JSON.parse(m))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,m,y)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:m,newValue:y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,m){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(m)}_removeListener(h,m){this.listeners[h]&&(this.listeners[h].delete(m),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,m){var y=()=>super._set,w=this;return(0,x.Z)(function*(){yield y().call(w,h,m),w.localCache[h]=JSON.stringify(m)})()}_get(h){var m=()=>super._get,y=this;return(0,x.Z)(function*(){const w=yield m().call(y,h);return y.localCache[h]=JSON.stringify(w),w})()}_remove(h){var m=()=>super._remove,y=this;return(0,x.Z)(function*(){yield m().call(y,h),delete y.localCache[h]})()}}return p.type="LOCAL",p})(),Hs=(()=>{class p extends VI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,m){}_removeListener(h,m){}}return p.type="SESSION",p})();let kk=(()=>{class p{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const m=this.receivers.find(w=>w.isListeningto(h));if(m)return m;const y=new p(h);return this.receivers.push(y),y}isListeningto(h){return this.eventTarget===h}handleEvent(h){var m=this;return(0,x.Z)(function*(){const y=h,{eventId:w,eventType:N,data:W}=y.data,se=m.handlersMap[N];if(!se?.size)return;y.ports[0].postMessage({status:"ack",eventId:w,eventType:N});const Te=Array.from(se).map(function(){var wt=(0,x.Z)(function*(Yi){return Yi(y.origin,W)});return function(Yi){return wt.apply(this,arguments)}}()),Ve=yield function Pk(p){return Promise.all(p.map(function(){var u=(0,x.Z)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(m){return{fulfilled:!1,reason:m}}});return function(h){return u.apply(this,arguments)}}()))}(Te);y.ports[0].postMessage({status:"done",eventId:w,eventType:N,response:Ve})})()}_subscribe(h,m){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(m)}_unsubscribe(h,m){this.handlersMap[h]&&m&&this.handlersMap[h].delete(m),(!m||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Wn(p="",u=10){let h="";for(let m=0;m<u;m++)h+=Math.floor(10*Math.random());return p+h}class Dd{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,h,m=50){var y=this;return(0,x.Z)(function*(){const w=typeof MessageChannel<"u"?new MessageChannel:null;if(!w)throw new Error("connection_unavailable");let N,W;return new Promise((se,Te)=>{const Ve=Wn("",20);w.port1.start();const wt=setTimeout(()=>{Te(new Error("unsupported_event"))},m);W={messageChannel:w,onMessage(Yi){const ho=Yi;if(ho.data.eventId===Ve)switch(ho.data.status){case"ack":clearTimeout(wt),N=setTimeout(()=>{Te(new Error("timeout"))},3e3);break;case"done":clearTimeout(N),se(ho.data.response);break;default:clearTimeout(wt),clearTimeout(N),Te(new Error("invalid_response"))}}},y.handlers.add(W),w.port1.addEventListener("message",W.onMessage),y.target.postMessage({eventType:u,eventId:Ve,data:h},[w.port2])}).finally(()=>{W&&y.removeMessageHandler(W)})})()}}function Ut(){return window}function Ad(){return typeof Ut().WorkerGlobalScope<"u"&&"function"==typeof Ut().importScripts}function Rd(){return(Rd=(0,x.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Md="firebaseLocalStorageDb",Uc="firebaseLocalStorage",Wp="fbase_key";class El{constructor(u){this.request=u}toPromise(){return new Promise((u,h)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function Da(p,u){return p.transaction([Uc],u?"readwrite":"readonly").objectStore(Uc)}function Bo(){const p=indexedDB.open(Md,1);return new Promise((u,h)=>{p.addEventListener("error",()=>{h(p.error)}),p.addEventListener("upgradeneeded",()=>{const m=p.result;try{m.createObjectStore(Uc,{keyPath:Wp})}catch(y){h(y)}}),p.addEventListener("success",(0,x.Z)(function*(){const m=p.result;m.objectStoreNames.contains(Uc)?u(m):(m.close(),yield function jc(){const p=indexedDB.deleteDatabase(Md);return new El(p).toPromise()}(),u(yield Bo()))}))})}function qp(p,u,h){return iv.apply(this,arguments)}function iv(){return(iv=(0,x.Z)(function*(p,u,h){const m=Da(p,!0).put({[Wp]:u,value:h});return new El(m).toPromise()})).apply(this,arguments)}function rv(){return(rv=(0,x.Z)(function*(p,u){const h=Da(p,!1).get(u),m=yield new El(h).toPromise();return void 0===m?null:m.value})).apply(this,arguments)}function sv(p,u){const h=Da(p,!0).delete(u);return new El(h).toPromise()}const Pd=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,x.Z)(function*(){return h.db||(h.db=yield Bo()),h.db})()}_withRetries(h){var m=this;return(0,x.Z)(function*(){let y=0;for(;;)try{const w=yield m._openDb();return yield h(w)}catch(w){if(y++>3)throw w;m.db&&(m.db.close(),m.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,x.Z)(function*(){return Ad()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,x.Z)(function*(){h.receiver=kk._getInstance(function nv(){return Ad()?self:null}()),h.receiver._subscribe("keyChanged",function(){var m=(0,x.Z)(function*(y,w){return{keyProcessed:(yield h._poll()).includes(w.key)}});return function(y,w){return m.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var m=(0,x.Z)(function*(y,w){return["keyChanged"]});return function(y,w){return m.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,x.Z)(function*(){var m,y;if(h.activeServiceWorker=yield function tv(){return Rd.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new Dd(h.activeServiceWorker);const w=yield h.sender._send("ping",{},800);w&&null!==(m=w[0])&&void 0!==m&&m.fulfilled&&null!==(y=w[0])&&void 0!==y&&y.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var m=this;return(0,x.Z)(function*(){if(m.sender&&m.activeServiceWorker&&function Hp(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===m.activeServiceWorker)try{yield m.sender._send("keyChanged",{key:h},m.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,x.Z)(function*(){try{if(!indexedDB)return!1;const h=yield Bo();return yield qp(h,zp,"1"),yield sv(h,zp),!0}catch{}return!1})()}_withPendingWrite(h){var m=this;return(0,x.Z)(function*(){m.pendingWrites++;try{yield h()}finally{m.pendingWrites--}})()}_set(h,m){var y=this;return(0,x.Z)(function*(){return y._withPendingWrite((0,x.Z)(function*(){return yield y._withRetries(w=>qp(w,h,m)),y.localCache[h]=m,y.notifyServiceWorker(h)}))})()}_get(h){var m=this;return(0,x.Z)(function*(){const y=yield m._withRetries(w=>function Nk(p,u){return rv.apply(this,arguments)}(w,h));return m.localCache[h]=y,y})()}_remove(h){var m=this;return(0,x.Z)(function*(){return m._withPendingWrite((0,x.Z)(function*(){return yield m._withRetries(y=>sv(y,h)),delete m.localCache[h],m.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,x.Z)(function*(){const m=yield h._withRetries(N=>{const W=Da(N,!1).getAll();return new El(W).toPromise()});if(!m)return[];if(0!==h.pendingWrites)return[];const y=[],w=new Set;for(const{fbase_key:N,value:W}of m)w.add(N),JSON.stringify(h.localCache[N])!==JSON.stringify(W)&&(h.notifyListeners(N,W),y.push(N));for(const N of Object.keys(h.localCache))h.localCache[N]&&!w.has(N)&&(h.notifyListeners(N,null),y.push(N));return y})()}notifyListeners(h,m){this.localCache[h]=m;const y=this.listeners[h];if(y)for(const w of Array.from(y))w(m)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,x.Z)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,m){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(m)}_removeListener(h,m){this.listeners[h]&&(this.listeners[h].delete(m),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),zc=1e12;class ov{constructor(u){this.auth=u,this.counter=zc,this._widgets=new Map}render(u,h){const m=this.counter;return this._widgets.set(m,new $I(u,this.auth.name,h||{})),this.counter++,m}reset(u){var h;const m=u||zc;null===(h=this._widgets.get(m))||void 0===h||h.delete(),this._widgets.delete(m)}getResponse(u){var h;return(null===(h=this._widgets.get(u||zc))||void 0===h?void 0:h.getResponse())||""}execute(u){var h=this;return(0,x.Z)(function*(){var m;return null===(m=h._widgets.get(u||zc))||void 0===m||m.execute(),""})()}}class $I{constructor(u,h,m){this.params=m,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const y="string"==typeof u?document.getElementById(u):u;le(y,"argument-error",{appName:h}),this.container=y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function WI(p){const u=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<p;m++)u.push(h.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":h}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Kp=DI("rcb"),av=new rr(3e4,6e4);class lv{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=Ut().grecaptcha)||void 0===u||!u.render)}load(u,h=""){return le(function GI(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(h),u,"argument-error"),this.shouldResolveImmediately(h)&&Yn(Ut().grecaptcha)?Promise.resolve(Ut().grecaptcha):new Promise((m,y)=>{const w=Ut().setTimeout(()=>{y(qt(u,"network-request-failed"))},av.get());Ut()[Kp]=()=>{Ut().clearTimeout(w),delete Ut()[Kp];const W=Ut().grecaptcha;if(!W||!Yn(W))return void y(qt(u,"internal-error"));const se=W.render;W.render=(Te,Ve)=>{const wt=se(Te,Ve);return this.counter++,wt},this.hostLanguage=h,m(W)},My(`https://www.google.com/recaptcha/api.js??${(0,X.xO)({onload:Kp,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(w),y(qt(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var h;return!(null===(h=Ut().grecaptcha)||void 0===h||!h.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Vk{load(u){return(0,x.Z)(function*(){return new ov(u)})()}clearedOneInstance(){}}const cv="recaptcha",kr={theme:"light",type:"image"};class uv{constructor(u,h,m=Object.assign({},kr)){this.parameters=m,this.type=cv,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dn(u),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const y="string"==typeof h?document.getElementById(h):h;le(y,this.auth,"argument-error"),this.container=y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vk:new lv,this.validateStartingState()}verify(){var u=this;return(0,x.Z)(function*(){u.assertNotDestroyed();const h=yield u.render(),m=u.getAssertedRecaptcha();return m.getResponse(h)||new Promise(w=>{const N=W=>{W&&(u.tokenChangeListeners.delete(N),w(W))};u.tokenChangeListeners.add(N),u.isInvisible&&m.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return h=>{if(this.tokenChangeListeners.forEach(m=>m(h)),"function"==typeof u)u(h);else if("string"==typeof u){const m=Ut()[u];"function"==typeof m&&m(h)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,x.Z)(function*(){if(yield u.init(),!u.widgetId){let h=u.container;if(!u.isInvisible){const m=document.createElement("div");h.appendChild(m),h=m}u.widgetId=u.getAssertedRecaptcha().render(h,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,x.Z)(function*(){le(Ln()&&!Ad(),u.auth,"internal-error"),yield function KI(){let p=null;return new Promise(u=>{"complete"!==document.readyState?(p=()=>u(),window.addEventListener("load",p)):u()}).catch(u=>{throw p&&window.removeEventListener("load",p),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const h=yield function sr(p){return Zr.apply(this,arguments)}(u.auth);le(h,u.auth,"internal-error"),u.parameters.sitekey=h})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zp{constructor(u,h){this.verificationId=u,this.onConfirmation=h}confirm(u){const h=No._fromVerification(this.verificationId,u);return this.onConfirmation(h)}}function dv(p,u,h){return kd.apply(this,arguments)}function kd(){return(kd=(0,x.Z)(function*(p,u,h){const m=Dn(p),y=yield $c(m,u,(0,X.m9)(h));return new Zp(y,w=>wd(m,w))})).apply(this,arguments)}function ZI(p,u,h){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,x.Z)(function*(p,u,h){const m=(0,X.m9)(p);yield bd(!1,m,"phone");const y=yield $c(m.auth,u,(0,X.m9)(h));return new Zp(y,w=>Pp(m,w))})).apply(this,arguments)}function YI(p,u,h){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,x.Z)(function*(p,u,h){const m=(0,X.m9)(p),y=yield $c(m.auth,u,(0,X.m9)(h));return new Zp(y,w=>$y(m,w))})).apply(this,arguments)}function $c(p,u,h){return Nd.apply(this,arguments)}function Nd(){return Nd=(0,x.Z)(function*(p,u,h){var m;const y=yield h.verify();try{let w;if(le("string"==typeof y,p,"argument-error"),le(h.type===cv,p,"argument-error"),w="string"==typeof u?{phoneNumber:u}:u,"session"in w){const N=w.session;if("phoneNumber"in w)return le("enroll"===N.type,p,"internal-error"),(yield function xk(p,u){return ne(p,"POST","/v2/accounts/mfaEnrollment:start",$(p,u))}(p,{idToken:N.credential,phoneEnrollmentInfo:{phoneNumber:w.phoneNumber,recaptchaToken:y}})).phoneSessionInfo.sessionInfo;{le("signin"===N.type,p,"internal-error");const W=(null===(m=w.multiFactorHint)||void 0===m?void 0:m.uid)||w.multiFactorUid;return le(W,p,"missing-multi-factor-info"),(yield function zI(p,u){return ne(p,"POST","/v2/accounts/mfaSignIn:start",$(p,u))}(p,{mfaPendingCredential:N.credential,mfaEnrollmentId:W,phoneSignInInfo:{recaptchaToken:y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:N}=yield function kI(p,u){return Ep.apply(this,arguments)}(p,{phoneNumber:w.phoneNumber,recaptchaToken:y});return N}}finally{h._reset()}}),Nd.apply(this,arguments)}function sn(p,u){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,x.Z)(function*(p,u){yield vd((0,X.m9)(p),u)})).apply(this,arguments)}let Od=(()=>{class p{constructor(h){this.providerId=p.PROVIDER_ID,this.auth=Dn(h)}verifyPhoneNumber(h,m){return $c(this.auth,h,(0,X.m9)(m))}static credential(h,m){return No._fromVerification(h,m)}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:m,temporaryProof:y}=h;return m&&y?No._fromTokenResponse(m,y):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function Xn(p,u){return u?Q(u):(le(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Yp extends cl{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return Po(u,this._buildIdpRequest())}_linkToIdToken(u,h){return Po(u,this._buildIdpRequest(h))}_getReauthenticationResolver(u){return Po(u,this._buildIdpRequest())}_buildIdpRequest(u){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(h.idToken=u),h}}function hv(p){return Hy(p.auth,new Yp(p),p.bypassAuthState)}function wl(p){const{auth:u,user:h}=p;return le(h,u,"internal-error"),zy(h,new Yp(p),p.bypassAuthState)}function Nr(p){return Qp.apply(this,arguments)}function Qp(){return(Qp=(0,x.Z)(function*(p){const{auth:u,user:h}=p;return le(h,u,"internal-error"),vd(h,new Yp(p),p.bypassAuthState)})).apply(this,arguments)}class fv{constructor(u,h,m,y,w=!1){this.auth=u,this.resolver=m,this.user=y,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var u=this;return new Promise(function(){var h=(0,x.Z)(function*(m,y){u.pendingPromise={resolve:m,reject:y};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(w){u.reject(w)}});return function(m,y){return h.apply(this,arguments)}}())}onAuthEvent(u){var h=this;return(0,x.Z)(function*(){const{urlResponse:m,sessionId:y,postBody:w,tenantId:N,error:W,type:se}=u;if(W)return void h.reject(W);const Te={auth:h.auth,requestUri:m,sessionId:y,tenantId:N||void 0,postBody:w||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(se)(Te))}catch(Ve){h.reject(Ve)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return hv;case"linkViaPopup":case"linkViaRedirect":return Nr;case"reauthViaPopup":case"reauthViaRedirect":return wl;default:pt(this.auth,"internal-error")}}resolve(u){ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const QI=new rr(2e3,1e4);function Uo(p,u,h){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,x.Z)(function*(p,u,h){const m=Dn(p);Zn(p,u,oo);const y=Xn(m,h);return new Xp(m,"signInViaPopup",u,y).executeNotNull()})).apply(this,arguments)}function XI(p,u,h){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,x.Z)(function*(p,u,h){const m=(0,X.m9)(p);Zn(m.auth,u,oo);const y=Xn(m.auth,h);return new Xp(m.auth,"reauthViaPopup",u,y,m).executeNotNull()})).apply(this,arguments)}function pv(p,u,h){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,x.Z)(function*(p,u,h){const m=(0,X.m9)(p);Zn(m.auth,u,oo);const y=Xn(m.auth,h);return new Xp(m.auth,"linkViaPopup",u,y,m).executeNotNull()})).apply(this,arguments)}let Xp=(()=>{class p extends fv{constructor(h,m,y,w,N){super(h,m,w,N),this.provider=y,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var h=this;return(0,x.Z)(function*(){const m=yield h.execute();return le(m,h.auth,"internal-error"),m})()}onExecution(){var h=this;return(0,x.Z)(function*(){ln(1===h.filter.length,"Popup operations only handle one event");const m=Wn();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],m),h.authWindow.associatedEvent=m,h.resolver._originValidation(h.auth).catch(y=>{h.reject(y)}),h.resolver._isIframeWebStorageSupported(h.auth,y=>{y||h.reject(qt(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const h=()=>{var m,y;this.pollId=null!==(y=null===(m=this.authWindow)||void 0===m?void 0:m.window)&&void 0!==y&&y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(qt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,QI.get())};h()}}return p.currentPopupAction=null,p})();const Ge="pendingRedirect",Il=new Map;class Bk extends fv{constructor(u,h,m=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,m),this.eventId=null}execute(){var u=()=>super.execute,h=this;return(0,x.Z)(function*(){let m=Il.get(h.auth._key());if(!m){try{const w=(yield function JI(p,u){return Jp.apply(this,arguments)}(h.resolver,h.auth))?yield u().call(h):null;m=()=>Promise.resolve(w)}catch(y){m=()=>Promise.reject(y)}Il.set(h.auth._key(),m)}return h.bypassAuthState||Il.set(h.auth._key(),()=>Promise.resolve(null)),m()})()}onAuthEvent(u){var h=()=>super.onAuthEvent,m=this;return(0,x.Z)(function*(){if("signInViaRedirect"===u.type)return h().call(m,u);if("unknown"!==u.type){if(u.eventId){const y=yield m.auth._redirectUserForId(u.eventId);if(y)return m.user=y,h().call(m,u);m.resolve(null)}}else m.resolve(null)})()}onExecution(){return(0,x.Z)(function*(){})()}cleanUp(){}}function Jp(){return(Jp=(0,x.Z)(function*(p,u){const h=_v(u),m=gv(p);if(!(yield m._isAvailable()))return!1;const y="true"===(yield m._get(h));return yield m._remove(h),y})).apply(this,arguments)}function em(p,u){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,x.Z)(function*(p,u){return gv(p)._set(_v(u),"true")})).apply(this,arguments)}function Cl(){Il.clear()}function mv(p,u){Il.set(p._key(),u)}function gv(p){return Q(p._redirectPersistence)}function _v(p){return ze(Ge,p.config.apiKey,p.name)}function eC(p,u,h){return function tC(p,u,h){return ie.apply(this,arguments)}(p,u,h)}function ie(){return(ie=(0,x.Z)(function*(p,u,h){const m=Dn(p);Zn(p,u,oo),yield m._initializationPromise;const y=Xn(m,h);return yield em(y,m),y._openRedirect(m,u,"signInViaRedirect")})).apply(this,arguments)}function Rt(p,u,h){return function vs(p,u,h){return Or.apply(this,arguments)}(p,u,h)}function Or(){return(Or=(0,x.Z)(function*(p,u,h){const m=(0,X.m9)(p);Zn(m.auth,u,oo),yield m.auth._initializationPromise;const y=Xn(m.auth,h);yield em(y,m.auth);const w=yield nC(m);return y._openRedirect(m.auth,u,"reauthViaRedirect",w)})).apply(this,arguments)}function Ci(p,u,h){return function yv(p,u,h){return Aa.apply(this,arguments)}(p,u,h)}function Aa(){return(Aa=(0,x.Z)(function*(p,u,h){const m=(0,X.m9)(p);Zn(m.auth,u,oo),yield m.auth._initializationPromise;const y=Xn(m.auth,h);yield bd(!1,m,u.providerId),yield em(y,m.auth);const w=yield nC(m);return y._openRedirect(m.auth,u,"linkViaRedirect",w)})).apply(this,arguments)}function $s(p,u){return qc.apply(this,arguments)}function qc(){return(qc=(0,x.Z)(function*(p,u){return yield Dn(p)._initializationPromise,Gc(p,u,!1)})).apply(this,arguments)}function Gc(p,u){return tm.apply(this,arguments)}function tm(){return(tm=(0,x.Z)(function*(p,u,h=!1){const m=Dn(p),y=Xn(m,u),N=yield new Bk(m,y,h).execute();return N&&!h&&(delete N.user._redirectEventId,yield m._persistUserIfCurrent(N.user),yield m._setRedirectUser(null,u)),N})).apply(this,arguments)}function nC(p){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,x.Z)(function*(p){const u=Wn(`${p.uid}:::`);return p._redirectEventId=u,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),u})).apply(this,arguments)}class Ws{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let h=!1;return this.consumers.forEach(m=>{this.isEventForConsumer(u,m)&&(h=!0,this.sendToConsumer(u,m),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function co(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ra(p);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=u,h=!0)),h}sendToConsumer(u,h){var m;if(u.error&&!Ra(u)){const y=(null===(m=u.error.code)||void 0===m?void 0:m.split("auth/")[1])||"internal-error";h.onError(qt(this.auth,y))}else h.onAuthEvent(u)}isEventForConsumer(u,h){const m=null===h.eventId||!!u.eventId&&u.eventId===h.eventId;return h.filter.includes(u.type)&&m}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nm(u))}saveEventToCache(u){this.cachedEventUids.add(nm(u)),this.lastProcessedEventTime=Date.now()}}function nm(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(u=>u).join("-")}function Ra({type:p,error:u}){return"unknown"===p&&"auth/no-auth-event"===u?.code}function vv(p){return jd.apply(this,arguments)}function jd(){return(jd=(0,x.Z)(function*(p,u={}){return ne(p,"GET","/v1/projects",u)})).apply(this,arguments)}const iC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rC=/^https?/;function Kc(){return(Kc=(0,x.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:u}=yield vv(p);for(const h of u)try{if(bv(h))return}catch{}pt(p,"unauthorized-domain")})).apply(this,arguments)}function bv(p){const u=Fn(),{protocol:h,hostname:m}=new URL(u);if(p.startsWith("chrome-extension://")){const N=new URL(p);return""===N.hostname&&""===m?"chrome-extension:"===h&&p.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===h&&N.hostname===m}if(!rC.test(h))return!1;if(iC.test(p))return m===p;const y=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+y+"|"+y+")$","i").test(m)}const rm=new rr(3e4,6e4);function Ev(){const p=Ut().___jsl;if(p?.H)for(const u of Object.keys(p.H))if(p.H[u].r=p.H[u].r||[],p.H[u].L=p.H[u].L||[],p.H[u].r=[...p.H[u].L],p.CP)for(let h=0;h<p.CP.length;h++)p.CP[h]=null}let Tl=null;const Cv=new rr(5e3,15e3),Tv="__/auth/iframe",xv="emulator/auth/iframe",sm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oC(p){const u=p.config;le(u.authDomain,p,"auth-domain-config-required");const h=u.emulator?Ns(u,xv):`https://${p.config.authDomain}/${Tv}`,m={apiKey:u.apiKey,appName:p.name,v:L.SDK_VERSION},y=sC.get(p.config.apiHost);y&&(m.eid=y);const w=p._getFrameworks();return w.length&&(m.fw=w.join(",")),`${h}?${(0,X.xO)(m).slice(1)}`}function uo(){return uo=(0,x.Z)(function*(p){const u=yield function Iv(p){return Tl=Tl||function wv(p){return new Promise((u,h)=>{var m,y,w;function N(){Ev(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{Ev(),h(qt(p,"network-request-failed"))},timeout:rm.get()})}if(null!==(y=null===(m=Ut().gapi)||void 0===m?void 0:m.iframes)&&void 0!==y&&y.Iframe)u(gapi.iframes.getContext());else{if(null===(w=Ut().gapi)||void 0===w||!w.load){const W=DI("iframefcb");return Ut()[W]=()=>{gapi.load?N():h(qt(p,"network-request-failed"))},My(`https://apis.google.com/js/api.js?onload=${W}`).catch(se=>h(se))}N()}}).catch(u=>{throw Tl=null,u})}(p),Tl}(p),h=Ut().gapi;return le(h,p,"internal-error"),u.open({where:document.body,url:oC(p),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sm,dontclear:!0},m=>new Promise(function(){var y=(0,x.Z)(function*(w,N){yield m.restyle({setHideOnLeave:!1});const W=qt(p,"network-request-failed"),se=Ut().setTimeout(()=>{N(W)},Cv.get());function Te(){Ut().clearTimeout(se),w(m)}m.ping(Te).then(Te,()=>{N(W)})});return function(w,N){return y.apply(this,arguments)}}()))}),uo.apply(this,arguments)}const Rn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class am{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const jo="__/auth/handler",cC="emulator/auth/handler",Hd=encodeURIComponent("fac");function xl(p,u,h,m,y,w){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,x.Z)(function*(p,u,h,m,y,w){le(p.config.authDomain,p,"auth-domain-config-required"),le(p.config.apiKey,p,"invalid-api-key");const N={apiKey:p.config.apiKey,appName:p.name,authType:h,redirectUrl:m,v:L.SDK_VERSION,eventId:y};if(u instanceof oo){u.setDefaultLanguage(p.languageCode),N.providerId=u.providerId||"",(0,X.xb)(u.getCustomParameters())||(N.customParameters=JSON.stringify(u.getCustomParameters()));for(const[Ve,wt]of Object.entries(w||{}))N[Ve]=wt}if(u instanceof hl){const Ve=u.getScopes().filter(wt=>""!==wt);Ve.length>0&&(N.scopes=Ve.join(","))}p.tenantId&&(N.tid=p.tenantId);const W=N;for(const Ve of Object.keys(W))void 0===W[Ve]&&delete W[Ve];const se=yield p._getAppCheckToken(),Te=se?`#${Hd}=${encodeURIComponent(se)}`:"";return`${function lm({config:p}){return p.emulator?Ns(p,cC):`https://${p.authDomain}/${jo}`}(p)}?${(0,X.xO)(W).slice(1)}${Te}`})).apply(this,arguments)}const $d="webStorageSupport",Rv=class Av{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hs,this._completeRedirectFn=Gc,this._overrideRedirectResult=mv}_openPopup(u,h,m,y){var w=this;return(0,x.Z)(function*(){var N;ln(null===(N=w.eventManagers[u._key()])||void 0===N?void 0:N.manager,"_initialize() not called before _openPopup()");const W=yield xl(u,h,m,Fn(),y);return function Dv(p,u,h,m=500,y=600){const w=Math.max((window.screen.availHeight-y)/2,0).toString(),N=Math.max((window.screen.availWidth-m)/2,0).toString();let W="";const se=Object.assign(Object.assign({},Rn),{width:m.toString(),height:y.toString(),top:w,left:N}),Te=(0,X.z$)().toLowerCase();h&&(W=pi(Te)?"_blank":h),Zt(Te)&&(u=u||"http://localhost",se.scrollbars="yes");const Ve=Object.entries(se).reduce((Yi,[ho,Xc])=>`${Yi}${ho}=${Xc},`,"");if(function gt(p=(0,X.z$)()){var u;return Ie(p)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(Te)&&"_self"!==W)return function zd(p,u){const h=document.createElement("a");h.href=p,h.target=u;const m=document.createEvent("MouseEvent");m.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(m)}(u||"",W),new am(null);const wt=window.open(u||"",W,Ve);le(wt,p,"popup-blocked");try{wt.focus()}catch{}return new am(wt)}(u,W,Wn())})()}_openRedirect(u,h,m,y){var w=this;return(0,x.Z)(function*(){return yield w._originValidation(u),function ev(p){Ut().location.href=p}(yield xl(u,h,m,Fn(),y)),new Promise(()=>{})})()}_initialize(u){const h=u._key();if(this.eventManagers[h]){const{manager:y,promise:w}=this.eventManagers[h];return y?Promise.resolve(y):(ln(w,"If manager is not set, promise should be"),w)}const m=this.initAndGetManager(u);return this.eventManagers[h]={promise:m},m.catch(()=>{delete this.eventManagers[h]}),m}initAndGetManager(u){var h=this;return(0,x.Z)(function*(){const m=yield function Zi(p){return uo.apply(this,arguments)}(u),y=new Ws(u);return m.register("authEvent",w=>(le(w?.authEvent,u,"invalid-auth-event"),{status:y.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[u._key()]={manager:y},h.iframes[u._key()]=m,y})()}_isIframeWebStorageSupported(u,h){this.iframes[u._key()].send($d,{type:$d},y=>{var w;const N=null===(w=y?.[0])||void 0===w?void 0:w[$d];void 0!==N&&h(!!N),pt(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const h=u._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function im(p){return Kc.apply(this,arguments)}(u)),this.originValidationPromises[h]}get _shouldInitProactively(){return Sn()||Ne()||Ie()}};class Dl{constructor(u){this.factorId=u}_process(u,h,m){switch(h.type){case"enroll":return this._finalizeEnroll(u,h.credential,m);case"signin":return this._finalizeSignIn(u,h.credential);default:return Ct("unexpected MultiFactorSessionType")}}}class Ma extends Dl{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new Ma(u)}_finalizeEnroll(u,h,m){return function Sk(p,u){return ne(p,"POST","/v2/accounts/mfaEnrollment:finalize",$(p,u))}(u,{idToken:h,displayName:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,h){return function Gp(p,u){return ne(p,"POST","/v2/accounts/mfaSignIn:finalize",$(p,u))}(u,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let uC=(()=>{class p{constructor(){}static assertion(h){return Ma._fromCredential(h)}}return p.FACTOR_ID="phone",p})();var Mv="@firebase/auth";class Uk{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var h=this;return(0,x.Z)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const h=this.auth.onIdTokenChanged(m=>{u(m?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,h),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const h=this.internalListeners.get(u);h&&(this.internalListeners.delete(u),h(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,X.Pz)("authIdTokenMaxAge"),function Yc(p){(0,L._registerComponent)(new dn.wA("auth",(u,{options:h})=>{const m=u.getProvider("app").getImmediate(),y=u.getProvider("heartbeat"),w=u.getProvider("app-check-internal"),{apiKey:N,authDomain:W}=m.options;le(N&&!N.includes(":"),"invalid-api-key",{appName:m.name});const se={apiKey:N,authDomain:W,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ut(p)},Te=new gk(m,y,w,se);return function fe(p,u){const h=u?.persistence||[],m=(Array.isArray(h)?h:[h]).map(Q);u?.errorMap&&p._updateErrorMap(u.errorMap),p._initializeWithPersistence(m,u?.popupRedirectResolver)}(Te,h),Te},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,h,m)=>{u.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new dn.wA("auth-internal",u=>{const h=Dn(u.getProvider("auth").getImmediate());return new Uk(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(Mv,"1.5.0",function cm(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(p)),(0,L.registerVersion)(Mv,"1.5.0","esm2017")}("Browser")},58:(ks,ri,Ue)=>{Ue.d(ri,{BH:()=>wr,DV:()=>fi,Dv:()=>or,G6:()=>Ns,GJ:()=>Yn,L:()=>Dt,LL:()=>ee,Pz:()=>qt,Sg:()=>Zn,UG:()=>Ct,UI:()=>Zr,US:()=>dn,Wj:()=>pn,Wl:()=>Fe,Yr:()=>rr,ZB:()=>Re,ZR:()=>ne,aH:()=>pt,b$:()=>Ln,cI:()=>ge,dS:()=>gs,eu:()=>K,g5:()=>L,gK:()=>Tn,gQ:()=>vi,h$:()=>Jt,hl:()=>q,hu:()=>X,jU:()=>ln,lb:()=>xn,m9:()=>Vs,ne:()=>Ir,p$:()=>ue,pd:()=>ms,r3:()=>oi,ru:()=>Fn,tV:()=>te,uI:()=>le,ug:()=>Yr,vZ:()=>Os,w1:()=>fs,w9:()=>fn,xO:()=>Ls,xb:()=>sr,z$:()=>ot,zd:()=>ps});const x={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},X=function(P,D){if(!P)throw L(D)},L=function(P){return new Error("Firebase Database ("+x.SDK_VERSION+") INTERNAL ASSERT FAILED: "+P)},Pe=function(P){const D=[];let E=0;for(let C=0;C<P.length;C++){let b=P.charCodeAt(C);b<128?D[E++]=b:b<2048?(D[E++]=b>>6|192,D[E++]=63&b|128):55296==(64512&b)&&C+1<P.length&&56320==(64512&P.charCodeAt(C+1))?(b=65536+((1023&b)<<10)+(1023&P.charCodeAt(++C)),D[E++]=b>>18|240,D[E++]=b>>12&63|128,D[E++]=b>>6&63|128,D[E++]=63&b|128):(D[E++]=b>>12|224,D[E++]=b>>6&63|128,D[E++]=63&b|128)}return D},dn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(P,D){if(!Array.isArray(P))throw Error("encodeByteArray takes an array as a parameter");this.init_();const E=D?this.byteToCharMapWebSafe_:this.byteToCharMap_,C=[];for(let b=0;b<P.length;b+=3){const R=P[b],Q=b+1<P.length,xe=Q?P[b+1]:0,Ce=b+2<P.length,ze=Ce?P[b+2]:0;let Zt=(15&xe)<<2|ze>>6,Ne=63&ze;Ce||(Ne=64,Q||(Zt=64)),C.push(E[R>>2],E[(3&R)<<4|xe>>4],E[Zt],E[Ne])}return C.join("")},encodeString(P,D){return this.HAS_NATIVE_SUPPORT&&!D?btoa(P):this.encodeByteArray(Pe(P),D)},decodeString(P,D){return this.HAS_NATIVE_SUPPORT&&!D?atob(P):function(P){const D=[];let E=0,C=0;for(;E<P.length;){const b=P[E++];if(b<128)D[C++]=String.fromCharCode(b);else if(b>191&&b<224){const R=P[E++];D[C++]=String.fromCharCode((31&b)<<6|63&R)}else if(b>239&&b<365){const Ce=((7&b)<<18|(63&P[E++])<<12|(63&P[E++])<<6|63&P[E++])-65536;D[C++]=String.fromCharCode(55296+(Ce>>10)),D[C++]=String.fromCharCode(56320+(1023&Ce))}else{const R=P[E++],Q=P[E++];D[C++]=String.fromCharCode((15&b)<<12|(63&R)<<6|63&Q)}}return D.join("")}(this.decodeStringToByteArray(P,D))},decodeStringToByteArray(P,D){this.init_();const E=D?this.charToByteMapWebSafe_:this.charToByteMap_,C=[];for(let b=0;b<P.length;){const R=E[P.charAt(b++)],xe=b<P.length?E[P.charAt(b)]:0;++b;const ze=b<P.length?E[P.charAt(b)]:64;++b;const be=b<P.length?E[P.charAt(b)]:64;if(++b,null==R||null==xe||null==ze||null==be)throw new Hn;C.push(R<<2|xe>>4),64!==ze&&(C.push(xe<<4&240|ze>>2),64!==be&&C.push(ze<<6&192|be))}return C},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let P=0;P<this.ENCODED_VALS.length;P++)this.byteToCharMap_[P]=this.ENCODED_VALS.charAt(P),this.charToByteMap_[this.byteToCharMap_[P]]=P,this.byteToCharMapWebSafe_[P]=this.ENCODED_VALS_WEBSAFE.charAt(P),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[P]]=P,P>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(P)]=P,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(P)]=P)}}};class Hn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jt=function(P){const D=Pe(P);return dn.encodeByteArray(D,!0)},Dt=function(P){return Jt(P).replace(/\./g,"")},te=function(P){try{return dn.decodeString(P,!0)}catch(D){console.error("base64Decode failed: ",D)}return null};function ue(P){return Re(void 0,P)}function Re(P,D){if(!(D instanceof Object))return D;switch(D.constructor){case Date:return new Date(D.getTime());case Object:void 0===P&&(P={});break;case Array:P=[];break;default:return D}for(const E in D)!D.hasOwnProperty(E)||!nt(E)||(P[E]=Re(P[E],D[E]));return P}function nt(P){return"__proto__"!==P}const Qe=()=>{try{return function kt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const P=process.env.__FIREBASE_DEFAULTS__;return P?JSON.parse(P):void 0})()||(()=>{if(typeof document>"u")return;let P;try{P=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const D=P&&te(P[1]);return D&&JSON.parse(D)})()}catch(P){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${P}`)}},pt=()=>{var P;return null===(P=Qe())||void 0===P?void 0:P.config},qt=P=>{var D;return null===(D=Qe())||void 0===D?void 0:D[`_${P}`]};class wr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((D,E)=>{this.resolve=D,this.reject=E})}wrapCallback(D){return(E,C)=>{E?this.reject(E):this.resolve(C),"function"==typeof D&&(this.promise.catch(()=>{}),1===D.length?D(E):D(E,C))}}}function Zn(P,D){if(P.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const C=D||"demo-project",b=P.iat||0,R=P.sub||P.user_id;if(!R)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Q=Object.assign({iss:`https://securetoken.google.com/${C}`,aud:C,iat:b,exp:b+3600,auth_time:b,sub:R,user_id:R,firebase:{sign_in_provider:"custom",identities:{}}},P);return[Dt(JSON.stringify({alg:"none",type:"JWT"})),Dt(JSON.stringify(Q)),""].join(".")}function ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function le(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function Ct(){var P;const D=null===(P=Qe())||void 0===P?void 0:P.forceEnvironment;if("node"===D)return!0;if("browser"===D)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ln(){return"object"==typeof self&&self.self===self}function Fn(){const P="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof P&&void 0!==P.id}function Ln(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function fs(){const P=ot();return P.indexOf("MSIE ")>=0||P.indexOf("Trident/")>=0}function rr(){return!0===x.NODE_CLIENT||!0===x.NODE_ADMIN}function Ns(){return!Ct()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){try{return"object"==typeof indexedDB}catch{return!1}}function K(){return new Promise((P,D)=>{try{let E=!0;const C="validate-browser-context-for-indexeddb-analytics-module",b=self.indexedDB.open(C);b.onsuccess=()=>{b.result.close(),E||self.indexedDB.deleteDatabase(C),P(!0)},b.onupgradeneeded=()=>{E=!1},b.onerror=()=>{var R;D((null===(R=b.error)||void 0===R?void 0:R.message)||"")}}catch(E){D(E)}})}class ne extends Error{constructor(D,E,C){super(E),this.code=D,this.customData=C,this.name="FirebaseError",Object.setPrototypeOf(this,ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ee.prototype.create)}}class ee{constructor(D,E,C){this.service=D,this.serviceName=E,this.errors=C}create(D,...E){const C=E[0]||{},b=`${this.service}/${D}`,R=this.errors[D],Q=R?function pe(P,D){return P.replace(ft,(E,C)=>{const b=D[C];return null!=b?String(b):`<${C}?>`})}(R,C):"Error";return new ne(b,`${this.serviceName}: ${Q} (${b}).`,C)}}const ft=/\{\$([^}]+)}/g;function ge(P){return JSON.parse(P)}function Fe(P){return JSON.stringify(P)}const Tt=function(P){let D={},E={},C={},b="";try{const R=P.split(".");D=ge(te(R[0])||""),E=ge(te(R[1])||""),b=R[2],C=E.d||{},delete E.d}catch{}return{header:D,claims:E,data:C,signature:b}},fn=function(P){const E=Tt(P).claims;return!!E&&"object"==typeof E&&E.hasOwnProperty("iat")},Yn=function(P){const D=Tt(P).claims;return"object"==typeof D&&!0===D.admin};function oi(P,D){return Object.prototype.hasOwnProperty.call(P,D)}function fi(P,D){if(Object.prototype.hasOwnProperty.call(P,D))return P[D]}function sr(P){for(const D in P)if(Object.prototype.hasOwnProperty.call(P,D))return!1;return!0}function Zr(P,D,E){const C={};for(const b in P)Object.prototype.hasOwnProperty.call(P,b)&&(C[b]=D.call(E,P[b],b,P));return C}function Os(P,D){if(P===D)return!0;const E=Object.keys(P),C=Object.keys(D);for(const b of E){if(!C.includes(b))return!1;const R=P[b],Q=D[b];if(mt(R)&&mt(Q)){if(!Os(R,Q))return!1}else if(R!==Q)return!1}for(const b of C)if(!E.includes(b))return!1;return!0}function mt(P){return null!==P&&"object"==typeof P}function Ls(P){const D=[];for(const[E,C]of Object.entries(P))Array.isArray(C)?C.forEach(b=>{D.push(encodeURIComponent(E)+"="+encodeURIComponent(b))}):D.push(encodeURIComponent(E)+"="+encodeURIComponent(C));return D.length?"&"+D.join("&"):""}function ps(P){const D={};return P.replace(/^\?/,"").split("&").forEach(C=>{if(C){const[b,R]=C.split("=");D[decodeURIComponent(b)]=decodeURIComponent(R)}}),D}function ms(P){const D=P.indexOf("?");if(!D)return"";const E=P.indexOf("#",D);return P.substring(D,E>0?E:void 0)}class vi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let D=1;D<this.blockSize;++D)this.pad_[D]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(D,E){E||(E=0);const C=this.W_;if("string"==typeof D)for(let be=0;be<16;be++)C[be]=D.charCodeAt(E)<<24|D.charCodeAt(E+1)<<16|D.charCodeAt(E+2)<<8|D.charCodeAt(E+3),E+=4;else for(let be=0;be<16;be++)C[be]=D[E]<<24|D[E+1]<<16|D[E+2]<<8|D[E+3],E+=4;for(let be=16;be<80;be++){const Zt=C[be-3]^C[be-8]^C[be-14]^C[be-16];C[be]=4294967295&(Zt<<1|Zt>>>31)}let ze,At,b=this.chain_[0],R=this.chain_[1],Q=this.chain_[2],xe=this.chain_[3],Ce=this.chain_[4];for(let be=0;be<80;be++){be<40?be<20?(ze=xe^R&(Q^xe),At=1518500249):(ze=R^Q^xe,At=1859775393):be<60?(ze=R&Q|xe&(R|Q),At=2400959708):(ze=R^Q^xe,At=3395469782);const Zt=(b<<5|b>>>27)+ze+Ce+At+C[be]&4294967295;Ce=xe,xe=Q,Q=4294967295&(R<<30|R>>>2),R=b,b=Zt}this.chain_[0]=this.chain_[0]+b&4294967295,this.chain_[1]=this.chain_[1]+R&4294967295,this.chain_[2]=this.chain_[2]+Q&4294967295,this.chain_[3]=this.chain_[3]+xe&4294967295,this.chain_[4]=this.chain_[4]+Ce&4294967295}update(D,E){if(null==D)return;void 0===E&&(E=D.length);const C=E-this.blockSize;let b=0;const R=this.buf_;let Q=this.inbuf_;for(;b<E;){if(0===Q)for(;b<=C;)this.compress_(D,b),b+=this.blockSize;if("string"==typeof D){for(;b<E;)if(R[Q]=D.charCodeAt(b),++Q,++b,Q===this.blockSize){this.compress_(R),Q=0;break}}else for(;b<E;)if(R[Q]=D[b],++Q,++b,Q===this.blockSize){this.compress_(R),Q=0;break}}this.inbuf_=Q,this.total_+=E}digest(){const D=[];let E=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let b=this.blockSize-1;b>=56;b--)this.buf_[b]=255&E,E/=256;this.compress_(this.buf_);let C=0;for(let b=0;b<5;b++)for(let R=24;R>=0;R-=8)D[C]=this.chain_[b]>>R&255,++C;return D}}function Ir(P,D){const E=new Cr(P,D);return E.subscribe.bind(E)}class Cr{constructor(D,E){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=E,this.task.then(()=>{D(this)}).catch(C=>{this.error(C)})}next(D){this.forEachObserver(E=>{E.next(D)})}error(D){this.forEachObserver(E=>{E.error(D)}),this.close(D)}complete(){this.forEachObserver(D=>{D.complete()}),this.close()}subscribe(D,E,C){let b;if(void 0===D&&void 0===E&&void 0===C)throw new Error("Missing Observer.");b=function bi(P,D){if("object"!=typeof P||null===P)return!1;for(const E of D)if(E in P&&"function"==typeof P[E])return!0;return!1}(D,["next","error","complete"])?D:{next:D,error:E,complete:C},void 0===b.next&&(b.next=Ht),void 0===b.error&&(b.error=Ht),void 0===b.complete&&(b.complete=Ht);const R=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?b.error(this.finalError):b.complete()}catch{}}),this.observers.push(b),R}unsubscribeOne(D){void 0===this.observers||void 0===this.observers[D]||(delete this.observers[D],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(D){if(!this.finalized)for(let E=0;E<this.observers.length;E++)this.sendOne(E,D)}sendOne(D,E){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[D])try{E(this.observers[D])}catch(C){typeof console<"u"&&console.error&&console.error(C)}})}close(D){this.finalized||(this.finalized=!0,void 0!==D&&(this.finalError=D),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ht(){}const or=function(P,D,E,C){let b;if(C<D?b="at least "+D:C>E&&(b=0===E?"none":"no more than "+E),b)throw new Error(P+" failed: Was called with "+C+(1===C?" argument.":" arguments.")+" Expects "+b+".")};function Tn(P,D){return`${P} failed: ${D} argument `}function pn(P,D,E,C){if((!C||E)&&"function"!=typeof E)throw new Error(Tn(P,D)+"must be a valid function.")}function xn(P,D,E,C){if((!C||E)&&("object"!=typeof E||null===E))throw new Error(Tn(P,D)+"must be a valid context object.")}const gs=function(P){const D=[];let E=0;for(let C=0;C<P.length;C++){let b=P.charCodeAt(C);if(b>=55296&&b<=56319){const R=b-55296;C++,X(C<P.length,"Surrogate pair missing trail surrogate."),b=65536+(R<<10)+(P.charCodeAt(C)-56320)}b<128?D[E++]=b:b<2048?(D[E++]=b>>6|192,D[E++]=63&b|128):b<65536?(D[E++]=b>>12|224,D[E++]=b>>6&63|128,D[E++]=63&b|128):(D[E++]=b>>18|240,D[E++]=b>>12&63|128,D[E++]=b>>6&63|128,D[E++]=63&b|128)}return D},Yr=function(P){let D=0;for(let E=0;E<P.length;E++){const C=P.charCodeAt(E);C<128?D++:C<2048?D+=2:C>=55296&&C<=56319?(D+=4,E++):D+=3}return D};function Vs(P){return P&&P._delegate?P._delegate:P}},588:(ks,ri,Ue)=>{function x(n){return"function"==typeof n}function X(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const L=X(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Pe(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class ht{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(x(i))try{i()}catch(s){e=s instanceof L?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Jt(s)}catch(o){e=e??[],o instanceof L?e=[...e,...o.errors]:e.push(o)}}if(e)throw new L(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Jt(e);else{if(e instanceof ht){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Pe(t,e)}remove(e){const{_finalizers:t}=this;t&&Pe(t,e),e instanceof ht&&e._removeParent(this)}}ht.EMPTY=(()=>{const n=new ht;return n.closed=!0,n})();const dn=ht.EMPTY;function Hn(n){return n instanceof ht||n&&"closed"in n&&x(n.remove)&&x(n.add)&&x(n.unsubscribe)}function Jt(n){x(n)?n():n.unsubscribe()}const Dt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},te={setTimeout(n,e,...t){const{delegate:i}=te;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=te;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ue(n){te.setTimeout(()=>{const{onUnhandledError:e}=Dt;if(!e)throw n;e(n)})}function Re(){}const nt=bt("C",void 0,void 0);function bt(n,e,t){return{kind:n,value:e,error:t}}let Ye=null;function Qe(n){if(Dt.useDeprecatedSynchronousErrorHandling){const e=!Ye;if(e&&(Ye={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Ye;if(Ye=null,t)throw i}}else n()}class On extends ht{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Hn(e)&&e.add(this)):this.destination=ln}static create(e,t,i){return new Zn(e,t,i)}next(e){this.isStopped?Ct(function si(n){return bt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ct(function kt(n){return bt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ct(nt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const pt=Function.prototype.bind;function qt(n,e){return pt.call(n,e)}class wr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){ot(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){ot(i)}else ot(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ot(t)}}}class Zn extends On{constructor(e,t,i){let r;if(super(),x(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Dt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&qt(e.next,s),error:e.error&&qt(e.error,s),complete:e.complete&&qt(e.complete,s)}):r=e}this.destination=new wr(r)}}function ot(n){Dt.useDeprecatedSynchronousErrorHandling?function hi(n){Dt.useDeprecatedSynchronousErrorHandling&&Ye&&(Ye.errorThrown=!0,Ye.error=n)}(n):ue(n)}function Ct(n,e){const{onStoppedNotification:t}=Dt;t&&te.setTimeout(()=>t(n,e))}const ln={closed:!0,next:Re,error:function le(n){throw n},complete:Re},Fn="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ln(n){return n}function fs(n){return 0===n.length?Ln:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Xe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function q(n){return n&&n instanceof On||function Ns(n){return n&&x(n.next)&&x(n.error)&&x(n.complete)}(n)&&Hn(n)}(t)?t:new Zn(t,i,r);return Qe(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=rr(i))((r,s)=>{const o=new Zn({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Fn](){return this}pipe(...t){return fs(t)(this)}toPromise(t){return new(t=rr(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function rr(n){var e;return null!==(e=n??Dt.Promise)&&void 0!==e?e:Promise}const K=X(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let z=(()=>{class n extends Xe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new $(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new K}next(t){Qe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Qe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Qe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?dn:(this.currentObservers=null,s.push(t),new ht(()=>{this.currentObservers=null,Pe(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new Xe;return t.source=this,t}}return n.create=(e,t)=>new $(e,t),n})();class $ extends z{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:dn}}function ne(n){return x(n?.lift)}function ee(n){return e=>{if(ne(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(n,e,t,i,r){return new ft(n,e,t,i,r)}class ft extends On{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ge(n,e){return ee((t,i)=>{let r=0;t.subscribe(pe(i,s=>{i.next(n.call(e,s,r++))}))})}var Fe=Ue(582);const Tt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function hn(n){return x(n?.then)}function en(n){return x(n[Fn])}function fn(n){return Symbol.asyncIterator&&x(n?.[Symbol.asyncIterator])}function Yn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const fi=function oi(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function sr(n){return x(n?.[fi])}function Zr(n){return(0,Fe.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield(0,Fe.qq)(t.read());if(r)return yield(0,Fe.qq)(void 0);yield yield(0,Fe.qq)(i)}}finally{t.releaseLock()}})}function Os(n){return x(n?.getReader)}function mt(n){if(n instanceof Xe)return n;if(null!=n){if(en(n))return function Fs(n){return new Xe(e=>{const t=n[Fn]();if(x(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Tt(n))return function Ls(n){return new Xe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(hn(n))return function ps(n){return new Xe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ue)})}(n);if(fn(n))return vi(n);if(sr(n))return function ms(n){return new Xe(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Os(n))return function Ir(n){return vi(Zr(n))}(n)}throw Yn(n)}function vi(n){return new Xe(e=>{(function Cr(n,e){var t,i,r,s;return(0,Fe.mG)(this,void 0,void 0,function*(){try{for(t=(0,Fe.KL)(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Tr(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Ht(n,e,t=1/0){return x(e)?Ht((i,r)=>ge((s,o)=>e(i,s,r,o))(mt(n(i,r))),t):("number"==typeof e&&(t=e),ee((i,r)=>function bi(n,e,t,i,r,s,o,a){const l=[];let c=0,d=0,f=!1;const g=()=>{f&&!l.length&&!c&&e.complete()},_=I=>c<i?v(I):l.push(I),v=I=>{s&&e.next(I),c++;let S=!1;mt(t(I,d++)).subscribe(pe(e,F=>{r?.(F),s?_(F):e.next(F)},()=>{S=!0},void 0,()=>{if(S)try{for(c--;l.length&&c<i;){const F=l.shift();o?Tr(e,o,()=>v(F)):v(F)}g()}catch(F){e.error(F)}}))};return n.subscribe(pe(e,_,()=>{f=!0,g()})),()=>{a?.()}}(i,r,n,t)))}function or(n=1/0){return Ht(Ln,n)}const Tn=new Xe(n=>n.complete());function xn(n){return n&&x(n.schedule)}function gs(n){return n[n.length-1]}function Yr(n){return x(gs(n))?n.pop():void 0}function _s(n){return xn(gs(n))?n.pop():void 0}function Qn(n,e=0){return ee((t,i)=>{t.subscribe(pe(i,r=>Tr(i,n,()=>i.next(r),e),()=>Tr(i,n,()=>i.complete(),e),r=>Tr(i,n,()=>i.error(r),e)))})}function qi(n,e=0){return ee((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Vs(n,e){if(!n)throw new Error("Iterable cannot be null");return new Xe(t=>{Tr(t,e,()=>{const i=n[Symbol.asyncIterator]();Tr(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function E(n,e){return e?function D(n,e){if(null!=n){if(en(n))return function xr(n,e){return mt(n).pipe(qi(e),Qn(e))}(n,e);if(Tt(n))return function Mo(n,e){return new Xe(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(hn(n))return function ll(n,e){return mt(n).pipe(qi(e),Qn(e))}(n,e);if(fn(n))return Vs(n,e);if(sr(n))return function ga(n,e){return new Xe(t=>{let i;return Tr(t,e,()=>{i=n[fi](),Tr(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>x(i?.return)&&i.return()})}(n,e);if(Os(n))return function P(n,e){return Vs(Zr(n),e)}(n,e)}throw Yn(n)}(n,e):mt(n)}function C(...n){const e=_s(n),t=function ai(n,e){return"number"==typeof gs(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?mt(i[0]):or(t)(E(i,e)):Tn}class b extends z{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function R(...n){return E(n,_s(n))}function Q(n={}){const{connector:e=(()=>new z),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,d=!1,f=!1;const g=()=>{a?.unsubscribe(),a=void 0},_=()=>{g(),o=l=void 0,d=f=!1},v=()=>{const I=o;_(),I?.unsubscribe()};return ee((I,S)=>{c++,!f&&!d&&g();const F=l=l??e();S.add(()=>{c--,0===c&&!f&&!d&&(a=xe(v,r))}),F.subscribe(S),!o&&c>0&&(o=new Zn({next:M=>F.next(M),error:M=>{f=!0,g(),a=xe(_,t,M),F.error(M)},complete:()=>{d=!0,g(),a=xe(_,i),F.complete()}}),mt(I).subscribe(o))})(s)}}function xe(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Zn({next:()=>{i.unsubscribe(),n()}});return mt(e(...t)).subscribe(i)}function Ce(n,e){return ee((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(pe(i,l=>{r?.unsubscribe();let c=0;const d=s++;mt(n(l,d)).subscribe(r=pe(i,f=>i.next(e?e(l,f,d,c++):f),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function ze(n,e=Ln){return n=n??At,ee((t,i)=>{let r,s=!0;t.subscribe(pe(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function At(n,e){return n===e}function be(n){for(let e in n)if(n[e]===be)return e;throw Error("Could not find renamed property on target object.")}function Zt(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ne(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ne).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function pi(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const _a=be({__forward_ref__:be});function j(n){return n.__forward_ref__=j,n.toString=function(){return Ne(this())},n}function k(n){return ae(n)?n():n}function ae(n){return"function"==typeof n&&n.hasOwnProperty(_a)&&n.__forward_ref__===j}function Ie(n){return n&&!!n.\u0275providers}const gt="https://g.co/ng/security#xss";class B extends Error{constructor(e,t){super(function Sn(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function De(n){return"string"==typeof n?n:null==n?"":String(n)}function hp(n,e){throw new B(-201,!1)}function ki(n,e){null==n&&function We(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function fe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Nt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ld(n){return Fy(n,ul)||Fy(n,cd)}function Fy(n,e){return n.hasOwnProperty(e)?n[e]:null}function kc(n){return n&&(n.hasOwnProperty(fp)||n.hasOwnProperty(PI))?n[fp]:null}const ul=be({\u0275prov:be}),fp=be({\u0275inj:be}),cd=be({ngInjectableDef:be}),PI=be({ngInjectorDef:be});var dt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(dt||{});let pp;function ar(n){const e=pp;return pp=n,e}function dd(n,e,t){const i=ld(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&dt.Optional?null:void 0!==e?e:void hp(Ne(n))}const Yt=globalThis;class oe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=fe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const va={},bp="__NG_DI_FLAG__",Dr="ngTempTokenPath",Ep=/\n/gm,pd="__source";let dl;function ko(n){const e=dl;return dl=n,e}function OI(n,e=dt.Default){if(void 0===dl)throw new B(-203,!1);return null===dl?dd(n,void 0,e):dl.get(n,e&dt.Optional?null:void 0,e)}function O(n,e=dt.Default){return(function ud(){return pp}()||OI)(k(n),e)}function me(n,e=dt.Default){return O(n,md(e))}function md(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function ba(n){const e=[];for(let t=0;t<n.length;t++){const i=k(n[t]);if(Array.isArray(i)){if(0===i.length)throw new B(900,!1);let r,s=dt.Default;for(let o=0;o<i.length;o++){const a=i[o],l=Ip(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(O(r,s))}else e.push(O(i))}return e}function gd(n,e){return n[bp]=e,n.prototype[bp]=e,n}function Ip(n){return n[bp]}function Ar(n){return{toString:n}.toString()}var _d=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(_d||{}),Qr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Qr||{});const Bs={},Lt=[],ao=be({\u0275cmp:be}),Cp=be({\u0275dir:be}),fl=be({\u0275pipe:be}),Uy=be({\u0275mod:be}),Us=be({\u0275fac:be}),Ea=be({__NG_ELEMENT_ID__:be}),Rr=be({__NG_ENV_ID__:be});function Tp(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function xp(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];Oc(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function yd(n){return 3===n||4===n||6===n}function Oc(n){return 64===n.charCodeAt(0)}function pl(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||Sp(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function Sp(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const jy="ng-template";function Dp(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(t&&"class"===s&&-1!==Tp(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function vd(n){return 4===n.type&&n.value!==jy}function Ap(n,e,t){return e===(4!==n.type||t?n.value:jy)}function bd(n,e,t){let i=4;const r=n.attrs||[],s=function Rp(n){for(let e=0;e<n.length;e++)if(yd(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!Ap(n,l,t)||""===l&&1===e.length){if(Mr(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!Dp(n.attrs,c,t)){if(Mr(i))return!1;o=!0}continue}const f=zy(8&i?"class":l,r,vd(n),t);if(-1===f){if(Mr(i))return!1;o=!0;continue}if(""!==c){let g;g=f>s?"":r[f+1].toLowerCase();const _=8&i?g:null;if(_&&-1!==Tp(_,c,0)||2&i&&c!==g){if(Mr(i))return!1;o=!0}}}}else{if(!o&&!Mr(i)&&!Mr(l))return!1;if(o&&Mr(l))continue;o=!1,i=l|1&i}}return Mr(i)||o}function Mr(n){return 0==(1&n)}function zy(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function wd(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function Ed(n,e,t=!1){for(let i=0;i<e.length;i++)if(bd(n,e[i],t))return!0;return!1}function Mp(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Pp(n,e){return n?":not("+e.trim()+")":e}function kp(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Mr(o)&&(e+=Pp(s,r),r=""),i=o,s=s||!Mr(i);t++}return""!==r&&(e+=Pp(s,r)),e}function lr(n){return Ar(()=>{const e=Wy(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===_d.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Qr.Emulated,styles:n.styles||Lt,_:null,schemas:n.schemas||null,tView:null,id:""};Cd(t);const i=n.dependencies;return t.directiveDefs=Fc(i,!1),t.pipeDefs=Fc(i,!0),t.id=function LI(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function FI(n){return Et(n)||Ei(n)}function Fp(n){return null!==n}function xt(n){return Ar(()=>({type:n.type,bootstrap:n.bootstrap||Lt,declarations:n.declarations||Lt,imports:n.imports||Lt,exports:n.exports||Lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Id(n,e){if(null==n)return Bs;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function Ae(n){return Ar(()=>{const e=Wy(n);return Cd(e),e})}function Et(n){return n[ao]||null}function Ei(n){return n[Cp]||null}function wi(n){return n[fl]||null}function Gi(n,e){const t=n[Uy]||null;if(!t&&!0===e)throw new Error(`Type ${Ne(n)} does not have '\u0275mod' property.`);return t}function Wy(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Bs,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Lt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Id(n.inputs,e),outputs:Id(n.outputs)}}function Cd(n){n.features?.forEach(e=>e(n))}function Fc(n,e){if(!n)return null;const t=e?wi:FI;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(Fp)}const mn=0,Ee=1,Je=2,gn=3,ys=4,wa=5,Oi=6,gl=7,An=8,Oo=9,Fo=10,et=11,Ia=12,qy=13,Lo=14,$n=15,Ca=16,_l=17,Xr=18,Lc=19,Td=20,Vo=21,lo=22,yl=23,Ta=24,_t=25,xd=1,Gy=2,js=7,vl=9,Fi=11;function Pr(n){return Array.isArray(n)&&"object"==typeof n[xd]}function Ii(n){return Array.isArray(n)&&!0===n[xd]}function Bp(n){return 0!=(4&n.flags)}function xa(n){return n.componentOffset>-1}function Up(n){return 1==(1&n.flags)}function zs(n){return!!n.template}function Ky(n){return 0!=(512&n[Je])}function bl(n,e){return n.hasOwnProperty(Us)?n[Us]:null}let Wn=null,Dd=!1;function Ut(n){const e=Wn;return Wn=n,e}const ev={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function tv(n){if(!jc(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Uc(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function nv(n){n.dirty=!0,function Rd(n){if(void 0===n.liveConsumerNode)return;const e=Dd;Dd=!0;try{for(const t of n.liveConsumerNode)t.dirty||nv(t)}finally{Dd=e}}(n),n.consumerMarkedDirty?.(n)}function Md(n){return n&&(n.nextProducerIndex=0),Ut(n)}function $p(n,e){if(Ut(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(jc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Da(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Uc(n){Bo(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(tv(t),i!==t.version))return!0}return!1}function Wp(n){if(Bo(n),jc(n))for(let e=0;e<n.producerNode.length;e++)Da(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Da(n,e){if(function qp(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Bo(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)Da(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Bo(r),r.producerIndexOfThis[i]=e}}function jc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Bo(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let jI=null;const lv=()=>{},GI=(()=>({...ev,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:lv}))();class cv{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function kr(){return uv}function uv(n){return n.type.prototype.ngOnChanges&&(n.setInput=Zp),KI}function KI(){const n=kd(this),e=n?.current;if(e){const t=n.previous;if(t===Bs)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Zp(n,e,t,i){const r=this.declaredInputs[t],s=kd(n)||function ZI(n,e){return n[dv]=e}(n,{previous:Bs,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new cv(l&&l.currentValue,e,a===Bs),n[i]=e}kr.ngInherit=!0;const dv="__ngSimpleChanges__";function kd(n){return n[dv]||null}const Jr=function(n,e,t){},$c="svg";function sn(n){for(;Array.isArray(n);)n=n[mn];return n}function Od(n,e){return sn(e[n])}function Xn(n,e){return sn(e[n.index])}function hv(n,e){return n.data[e]}function Nr(n,e){const t=e[n];return Pr(t)?t:t[mn]}function Uo(n,e){return null==e?null:n[e]}function Fd(n){n[_l]=0}function XI(n){1024&n[Je]||(n[Je]|=1024,pv(n,1))}function Ld(n){1024&n[Je]&&(n[Je]&=-1025,pv(n,-1))}function pv(n,e){let t=n[gn];if(null===t)return;t[wa]+=e;let i=t;for(t=t[gn];null!==t&&(1===e&&1===i[wa]||-1===e&&0===i[wa]);)t[wa]+=e,i=t,t=t[gn]}const Ge={lFrame:Cv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Bd(){return Ge.bindingsEnabled}function Cl(){return null!==Ge.skipHydrationRootTNode}function ie(){return Ge.lFrame.lView}function Rt(){return Ge.lFrame.tView}function vs(n){return Ge.lFrame.contextLView=n,n[An]}function Or(n){return Ge.lFrame.contextLView=null,n}function Ci(){let n=yv();for(;null!==n&&64===n.type;)n=n.parent;return n}function yv(){return Ge.lFrame.currentTNode}function $s(n,e){const t=Ge.lFrame;t.currentTNode=n,t.isParent=e}function qc(){return Ge.lFrame.isParent}function Gc(){Ge.lFrame.isParent=!1}function Ra(){return Ge.lFrame.bindingIndex++}function iC(n,e){const t=Ge.lFrame;t.bindingIndex=t.bindingRootIndex=n,im(e)}function im(n){Ge.lFrame.currentDirectiveIndex=n}function Kc(n){const e=Ge.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function bv(){return Ge.lFrame.currentQueryIndex}function rm(n){Ge.lFrame.currentQueryIndex=n}function Ev(n){const e=n[Ee];return 2===e.type?e.declTNode:1===e.type?n[Oi]:null}function wv(n,e,t){if(t&dt.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&dt.Host||(r=Ev(s),null===r||(s=s[Lo],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Ge.lFrame=Iv();return i.currentTNode=e,i.lView=n,!0}function Tl(n){const e=Iv(),t=n[Ee];Ge.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Iv(){const n=Ge.lFrame,e=null===n?null:n.child;return null===e?Cv(n):e}function Cv(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Tv(){const n=Ge.lFrame;return Ge.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const xv=Tv;function sm(){const n=Tv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Zi(){return Ge.lFrame.selectedIndex}function uo(n){Ge.lFrame.selectedIndex=n}function Rn(){const n=Ge.lFrame;return hv(n.tView,n.selectedIndex)}function om(){Ge.lFrame.currentNamespace=$c}let Dv=!0;function zd(){return Dv}function jo(n){Dv=n}function Hd(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=d&&(n.destroyHooks??=[]).push(t,d)}}function xl(n,e,t){$d(n,e,3,t)}function Sl(n,e,t,i){(3&n[Je])===t&&$d(n,e,t,i)}function lm(n,e){let t=n[Je];(3&t)===e&&(t&=8191,t+=1,n[Je]=t)}function $d(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[_l]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[_l]+=65536),(a<s||-1==s)&&(Rv(n,t,e,l),n[_l]=(4294901760&n[_l])+l+2),l++}function Av(n,e){Jr(4,n,e);const t=Ut(null);try{e.call(n)}finally{Ut(t),Jr(5,n,e)}}function Rv(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];r?n[Je]>>13<n[_l]>>16&&(3&n[Je])===e&&(n[Je]+=8192,Av(a,s)):Av(a,s)}const Dl=-1;class Ma{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function cm(n){return n!==Dl}function Yc(n){return 32767&n}function Qc(n,e){let t=function fC(n){return n>>16}(n),i=e;for(;t>0;)i=i[Lo],t--;return i}let qd=!0;function Gd(n){const e=qd;return qd=n,e}const p=255,u=5;let h=0;const m={};function w(n,e){const t=W(n,e);if(-1!==t)return t;const i=e[Ee];i.firstCreatePass&&(n.injectorIndex=e.length,N(i.data,n),N(e,null),N(i.blueprint,null));const r=se(n,e),s=n.injectorIndex;if(cm(r)){const o=Yc(r),a=Qc(r,e),l=a[Ee].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function N(n,e){n.push(0,0,0,0,0,0,0,0,e)}function W(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function se(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=jk(r),null===i)return Dl;if(t++,r=r[Lo],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Dl}function Te(n,e,t){!function y(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Ea)&&(i=t[Ea]),null==i&&(i=t[Ea]=h++);const r=i&p;e.data[n+(r>>u)]|=1<<r}(n,e,t)}function wt(n,e,t){if(t&dt.Optional||void 0!==n)return n;hp()}function Yi(n,e,t,i){if(t&dt.Optional&&void 0===i&&(i=null),!(t&(dt.Self|dt.Host))){const r=n[Oo],s=ar(void 0);try{return r?r.get(e,i,t&dt.Optional):dd(e,i,t&dt.Optional)}finally{ar(s)}}return wt(i,0,t)}function ho(n,e,t,i=dt.Default,r){if(null!==n){if(2048&e[Je]&&!(i&dt.Self)){const o=function yG(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Je]&&!(512&o[Je]);){const a=Xc(s,o,t,i|dt.Self,m);if(a!==m)return a;let l=s.parent;if(!l){const c=o[Td];if(c){const d=c.get(t,m,i);if(d!==m)return d}l=jk(o),o=o[Lo]}s=l}return r}(n,e,t,i,m);if(o!==m)return o}const s=Xc(n,e,t,i,m);if(s!==m)return s}return Yi(e,t,i,r)}function Xc(n,e,t,i,r){const s=function kv(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Ea)?n[Ea]:void 0;return"number"==typeof e?e>=0?e&p:pC:e}(t);if("function"==typeof s){if(!wv(e,n,i))return i&dt.Host?wt(r,0,i):Yi(e,t,i,r);try{let o;if(o=s(i),null!=o||i&dt.Optional)return o;hp()}finally{xv()}}else if("number"==typeof s){let o=null,a=W(n,e),l=Dl,c=i&dt.Host?e[$n][Oi]:null;for((-1===a||i&dt.SkipSelf)&&(l=-1===a?se(n,e):e[a+8],l!==Dl&&um(i,!1)?(o=e[Ee],a=Yc(l),e=Qc(l,e)):a=-1);-1!==a;){const d=e[Ee];if(Kd(s,a,d.data)){const f=Pv(a,e,t,o,i,c);if(f!==m)return f}l=e[a+8],l!==Dl&&um(i,e[Ee].data[a+8]===c)&&Kd(s,a,e)?(o=d,a=Yc(l),e=Qc(l,e)):a=-1}}return r}function Pv(n,e,t,i,r,s){const o=e[Ee],a=o.data[n+8],d=Al(a,o,t,null==i?xa(a)&&qd:i!=o&&0!=(3&a.type),r&dt.Host&&s===a);return null!==d?zo(e,o,d,a):m}function Al(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,d=s>>20,g=r?a+d:n.directiveEnd;for(let _=i?a:a+d;_<g;_++){const v=o[_];if(_<l&&t===v||_>=l&&v.type===t)return _}if(r){const _=o[l];if(_&&zs(_)&&_.type===t)return l}return null}function zo(n,e,t,i){let r=n[t];const s=e.data;if(function uC(n){return n instanceof Ma}(r)){const o=r;o.resolving&&function Pc(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new B(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ut(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():De(n)}(s[t]));const a=Gd(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?ar(o.injectImpl):null;wv(n,i,dt.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function cC(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=uv(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&ar(c),Gd(a),o.resolving=!1,xv()}}return r}function Kd(n,e,t){return!!(t[e+(n>>u)]&1<<n)}function um(n,e){return!(n&dt.Self||n&dt.Host&&e)}class Li{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return ho(this._tNode,this._lView,e,md(i),t)}}function pC(){return new Li(Ci(),ie())}function Jn(n){return Ar(()=>{const e=n.prototype.constructor,t=e[Us]||hm(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Us]||hm(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function hm(n){return ae(n)?()=>{const e=hm(k(n));return e&&e()}:bl(n)}function jk(n){const e=n[Ee],t=e.type;return 2===t?e.declTNode:1===t?n[Oi]:null}const Yd="__parameters__";function Xd(n,e,t){return Ar(()=>{const i=function mC(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,d){const f=l.hasOwnProperty(Yd)?l[Yd]:Object.defineProperty(l,Yd,{value:[]})[Yd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function eh(n,e){n.forEach(t=>Array.isArray(t)?eh(t,e):e(t))}function Hk(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ov(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function pm(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function bs(n,e,t){let i=th(n,e);return i>=0?n[1|i]=t:(i=~i,function TG(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function gC(n,e){const t=th(n,e);if(t>=0)return n[1|t]}function th(n,e){return function $k(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const mm=gd(Xd("Optional"),8),Lv=gd(Xd("SkipSelf"),4);function zv(n){return 128==(128&n.flags)}var Ml=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ml||{});const qG=/^>|^->|<!--|-->|--!>|<!-$/g,GG=/(<|>)/g,KG="\u200b$1\u200b";const EC=new Map;let ZG=0;const IC="__ngContext__";function cr(n,e){Pr(e)?(n[IC]=e[Lc],function QG(n){EC.set(n[Lc],n)}(e)):n[IC]=e}let CC;function TC(n,e){return CC(n,e)}function ym(n){const e=n[gn];return Ii(e)?e[gn]:e}function uN(n){return hN(n[Ia])}function dN(n){return hN(n[ys])}function hN(n){for(;null!==n&&!Ii(n);)n=n[ys];return n}function rh(n,e,t,i,r){if(null!=i){let s,o=!1;Ii(i)?s=i:Pr(i)&&(o=!0,i=i[mn]);const a=sn(i);0===n&&null!==t?null==r?gN(e,t,a):Jc(e,t,a,r||null,!0):1===n&&null!==t?Jc(e,t,a,r||null,!0):2===n?function Zv(n,e,t){const i=Gv(n,e);i&&function g6(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function v6(n,e,t,i,r){const s=t[js];s!==sn(t)&&rh(e,n,i,s,r);for(let a=Fi;a<t.length;a++){const l=t[a];bm(l[Ee],l,n,e,i,s)}}(e,n,s,t,r)}}function xC(n,e){return n.createComment(function nN(n){return n.replace(qG,e=>e.replace(GG,KG))}(e))}function Wv(n,e,t){return n.createElement(e,t)}function pN(n,e){const t=n[vl],i=t.indexOf(e);Ld(e),t.splice(i,1)}function qv(n,e){if(n.length<=Fi)return;const t=Fi+e,i=n[t];if(i){const r=i[Ca];null!==r&&r!==n&&pN(r,i),e>0&&(n[t-1][ys]=i[ys]);const s=Ov(n,Fi+e);!function l6(n,e){bm(n,e,e[et],2,null,null),e[mn]=null,e[Oi]=null}(i[Ee],i);const o=s[Xr];null!==o&&o.detachView(s[Ee]),i[gn]=null,i[ys]=null,i[Je]&=-129}return i}function SC(n,e){if(!(256&e[Je])){const t=e[et];e[yl]&&Wp(e[yl]),e[Ta]&&Wp(e[Ta]),t.destroyNode&&bm(n,e,t,3,null,null),function d6(n){let e=n[Ia];if(!e)return DC(n[Ee],n);for(;e;){let t=null;if(Pr(e))t=e[Ia];else{const i=e[Fi];i&&(t=i)}if(!t){for(;e&&!e[ys]&&e!==n;)Pr(e)&&DC(e[Ee],e),e=e[gn];null===e&&(e=n),Pr(e)&&DC(e[Ee],e),t=e&&e[ys]}e=t}}(e)}}function DC(n,e){if(!(256&e[Je])){e[Je]&=-129,e[Je]|=256,function m6(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Ma)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];Jr(4,a,l);try{l.call(a)}finally{Jr(5,a,l)}}else{Jr(4,r,s);try{s.call(r)}finally{Jr(5,r,s)}}}}}(n,e),function p6(n,e){const t=n.cleanup,i=e[gl];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(e[gl]=null);const r=e[Vo];if(null!==r){e[Vo]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,e),1===e[Ee].type&&e[et].destroy();const t=e[Ca];if(null!==t&&Ii(e[gn])){t!==e[gn]&&pN(t,e);const i=e[Xr];null!==i&&i.detachView(n)}!function XG(n){EC.delete(n[Lc])}(e)}}function AC(n,e,t){return function mN(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[mn];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Qr.None||s===Qr.Emulated)return null}return Xn(i,t)}}(n,e.parent,t)}function Jc(n,e,t,i,r){n.insertBefore(e,t,i,r)}function gN(n,e,t){n.appendChild(e,t)}function _N(n,e,t,i,r){null!==i?Jc(n,e,t,i,r):gN(n,e,t)}function Gv(n,e){return n.parentNode(e)}function yN(n,e,t){return bN(n,e,t)}let RC,NC,Qv,bN=function vN(n,e,t){return 40&n.type?Xn(n,t):null};function Kv(n,e,t,i){const r=AC(n,i,e),s=e[et],a=yN(i.parent||e[Oi],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)_N(s,r,t[l],a,!1);else _N(s,r,t,a,!1);void 0!==RC&&RC(s,i,e,t,r)}function vm(n,e){if(null!==e){const t=e.type;if(3&t)return Xn(e,n);if(4&t)return MC(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return vm(n,i);{const r=n[e.index];return Ii(r)?MC(-1,r):sn(r)}}if(32&t)return TC(e,n)()||sn(n[e.index]);{const i=wN(n,e);return null!==i?Array.isArray(i)?i[0]:vm(ym(n[$n]),i):vm(n,e.next)}}return null}function wN(n,e){return null!==e?n[$n][Oi].projection[e.projection]:null}function MC(n,e){const t=Fi+n+1;if(t<e.length){const i=e[t],r=i[Ee].firstChild;if(null!==r)return vm(i,r)}return e[js]}function PC(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&cr(sn(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)PC(n,e,t.child,i,r,s,!1),rh(e,n,r,a,s);else if(32&l){const c=TC(t,i);let d;for(;d=c();)rh(e,n,r,d,s);rh(e,n,r,a,s)}else 16&l?CN(n,e,i,t,r,s):rh(e,n,r,a,s);t=o?t.projectionNext:t.next}}function bm(n,e,t,i,r,s){PC(t,i,n.firstChild,e,r,s,!1)}function CN(n,e,t,i,r,s){const o=t[$n],l=o[Oi].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)rh(e,n,r,l[c],s);else{let c=l;const d=o[gn];zv(i)&&(c.flags|=128),PC(n,e,c,d,r,s,!0)}}function TN(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function xN(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&xp(n,e,i),null!==r&&TN(n,e,r),null!==s&&function E6(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function AN(n){return function OC(){if(void 0===Qv&&(Qv=null,Yt.trustedTypes))try{Qv=Yt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Qv}()?.createScriptURL(n)||n}class RN{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gt})`}}function Pl(n){return n instanceof RN?n.changingThisBreaksApplicationSecurity:n}function Em(n,e){const t=function M6(n){return n instanceof RN&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${gt})`)}return t===e}const O6=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ah=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ah||{});function UC(n){const e=Im();return e?e.sanitize(ah.URL,n)||"":Em(n,"URL")?Pl(n):function FC(n){return(n=String(n)).match(O6)?n:"unsafe:"+n}(De(n))}function LN(n){const e=Im();if(e)return AN(e.sanitize(ah.RESOURCE_URL,n)||"");if(Em(n,"ResourceURL"))return AN(Pl(n));throw new B(904,!1)}function Im(){const n=ie();return n&&n[Fo].sanitizer}const Cm=new oe("ENVIRONMENT_INITIALIZER"),BN=new oe("INJECTOR",-1),UN=new oe("INJECTOR_DEF_TYPES");class jC{get(e,t=va){if(t===va){const i=new Error(`NullInjectorError: No provider for ${Ne(e)}!`);throw i.name="NullInjectorError",i}return t}}function K6(...n){return{\u0275providers:zN(0,n),\u0275fromNgModule:!0}}function zN(n,...e){const t=[],i=new Set;let r;const s=o=>{t.push(o)};return eh(e,o=>{const a=o;Jv(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&HN(r,s),t}function HN(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];zC(r,s=>{e(s,i)})}}function Jv(n,e,t,i){if(!(n=k(n)))return!1;let r=null,s=kc(n);const o=!s&&Et(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=kc(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Jv(c,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{eh(s.imports,d=>{Jv(d,e,t,i)&&(c||=[],c.push(d))})}finally{}void 0!==c&&HN(c,e)}if(!a){const c=bl(r)||(()=>new r);e({provide:r,useFactory:c,deps:Lt},r),e({provide:UN,useValue:r,multi:!0},r),e({provide:Cm,useValue:()=>O(r),multi:!0},r)}const l=s.providers;if(null!=l&&!a){const c=n;zC(l,d=>{e(d,c)})}}}return r!==n&&void 0!==n.providers}function zC(n,e){for(let t of n)Ie(t)&&(t=t.\u0275providers),Array.isArray(t)?zC(t,e):e(t)}const Z6=be({provide:String,useValue:be});function HC(n){return null!==n&&"object"==typeof n&&Z6 in n}function eu(n){return"function"==typeof n}const $C=new oe("Set Injector scope."),eb={},Q6={};let WC;function tb(){return void 0===WC&&(WC=new jC),WC}class Gs{}class lh extends Gs{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,GC(e,o=>this.processProvider(o)),this.records.set(BN,ch(void 0,this)),r.has("environment")&&this.records.set(Gs,ch(void 0,this));const s=this.records.get($C);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(UN.multi,Lt,dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=ko(this),i=ar(void 0);try{return e()}finally{ko(t),ar(i)}}get(e,t=va,i=dt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Rr))return e[Rr](this);i=md(i);const s=ko(this),o=ar(void 0);try{if(!(i&dt.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function n9(n){return"function"==typeof n||"object"==typeof n&&n instanceof oe}(e)&&ld(e);l=c&&this.injectableDefInScope(c)?ch(qC(e),eb):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(i&dt.Self?tb():this.parent).get(e,t=i&dt.Optional&&t===va?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Dr]=a[Dr]||[]).unshift(Ne(e)),s)throw a;return function oo(n,e,t,i){const r=n[Dr];throw e[pd]&&r.unshift(e[pd]),n.message=function hl(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Ne(e);if(Array.isArray(e))r=e.map(Ne).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ne(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(Ep,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Dr]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{ar(o),ko(s)}}resolveInjectorInitializers(){const e=ko(this),t=ar(void 0);try{const r=this.get(Cm.multi,Lt,dt.Self);for(const s of r)s()}finally{ko(e),ar(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Ne(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new B(205,!1)}processProvider(e){let t=eu(e=k(e))?e:k(e&&e.provide);const i=function J6(n){return HC(n)?ch(void 0,n.useValue):ch(qN(n),eb)}(e);if(eu(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=ch(void 0,eb,!0),r.factory=()=>ba(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===eb&&(t.value=Q6,t.value=t.factory()),"object"==typeof t.value&&t.value&&function t9(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=k(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function qC(n){const e=ld(n),t=null!==e?e.factory:bl(n);if(null!==t)return t;if(n instanceof oe)throw new B(204,!1);if(n instanceof Function)return function X6(n){const e=n.length;if(e>0)throw pm(e,"?"),new B(204,!1);const t=function cl(n){return n&&(n[ul]||n[cd])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new B(204,!1)}function qN(n,e,t){let i;if(eu(n)){const r=k(n);return bl(r)||qC(r)}if(HC(n))i=()=>k(n.useValue);else if(function WN(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...ba(n.deps||[]));else if(function $N(n){return!(!n||!n.useExisting)}(n))i=()=>O(k(n.useExisting));else{const r=k(n&&(n.useClass||n.provide));if(!function e9(n){return!!n.deps}(n))return bl(r)||qC(r);i=()=>new r(...ba(n.deps))}return i}function ch(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function GC(n,e){for(const t of n)Array.isArray(t)?GC(t,e):t&&Ie(t)?GC(t.\u0275providers,e):e(t)}const nb=new oe("AppId",{providedIn:"root",factory:()=>i9}),i9="ng",GN=new oe("Platform Initializer"),Ks=new oe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kl=new oe("AnimationModuleType"),KC=new oe("CSP nonce",{providedIn:"root",factory:()=>function oh(){if(void 0!==NC)return NC;if(typeof document<"u")return document;throw new B(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let KN=(n,e,t)=>null;function nT(n,e,t=!1){return KN(n,e,t)}class f9{}class QN{}class m9{resolveComponentFactory(e){throw function p9(n){const e=Error(`No component factory found for ${Ne(n)}.`);return e.ngComponent=n,e}(e)}}let hh=(()=>{class n{static#e=this.NULL=new m9}return n})();function g9(){return fh(Ci(),ie())}function fh(n,e){return new _n(Xn(n,e))}let _n=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=g9}return n})();function _9(n){return n instanceof _n?n.nativeElement:n}class Sm{}let ka=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function y9(){const n=ie(),t=Nr(Ci().index,n);return(Pr(t)?t:n)[et]}()}return n})(),v9=(()=>{class n{static#e=this.\u0275prov=fe({token:n,providedIn:"root",factory:()=>null})}return n})();class Nl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const JN=new Nl("16.2.12"),sT={};function iO(n,e=null,t=null,i){const r=rO(n,e,t,i);return r.resolveInjectorInitializers(),r}function rO(n,e=null,t=null,i,r=new Set){const s=[t||Lt,K6(n)];return i=i||("object"==typeof n?void 0:Ne(n)),new lh(s,e||tb(),i||null,r)}let xi=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=va;static#t=this.NULL=new jC;static create(t,i){if(Array.isArray(t))return iO({name:""},i,t,"");{const r=t.name??"";return iO({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=fe({token:n,providedIn:"any",factory:()=>O(BN)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function aT(n){return n.ngOriginalError}class Na{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&aT(e);for(;t&&aT(t);)t=aT(t);return t||null}}function cT(n){return e=>{setTimeout(n,void 0,e)}}const Vn=class x9 extends z{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=cT(s),r&&(r=cT(r)),o&&(o=cT(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof ht&&e.add(a),a}};function oO(...n){}class Be{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vn(!1),this.onMicrotaskEmpty=new Vn(!1),this.onStable=new Vn(!1),this.onError=new Vn(!1),typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function S9(){const n="function"==typeof Yt.requestAnimationFrame;let e=Yt[n?"requestAnimationFrame":"setTimeout"],t=Yt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function R9(n){const e=()=>{!function A9(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Yt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,dT(n),n.isCheckStableRunning=!0,uT(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),dT(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(function P9(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,s,o,a);try{return aO(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),lO(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return aO(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),lO(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,dT(n),uT(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Be.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(Be.isInAngularZone())throw new B(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,D9,oO,oO);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const D9={};function uT(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function dT(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function aO(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function lO(n){n._nesting--,uT(n)}class M9{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vn,this.onMicrotaskEmpty=new Vn,this.onStable=new Vn,this.onError=new Vn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const cO=new oe("",{providedIn:"root",factory:uO});function uO(){const n=me(Be);let e=!0;return C(new Xe(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new Xe(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Be.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Be.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Q()))}function Oa(n){return n instanceof Function?n():n}let hT=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=fe({token:n,providedIn:"root",factory:()=>new n})}return n})();function Dm(n){for(;n;){n[Je]|=64;const e=ym(n);if(Ky(n)&&!e)return n;n=e}return null}const mO=new oe("",{providedIn:"root",factory:()=>!1});let cb=null;function vO(n,e){return n[e]??wO()}function bO(n,e){const t=wO();t.producerNode?.length&&(n[e]=cb,t.lView=n,cb=EO())}const z9={...ev,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Dm(n.lView)},lView:null};function EO(){return Object.create(z9)}function wO(){return cb??=EO(),cb}const rt={};function je(n){IO(Rt(),ie(),Zi()+n,!1)}function IO(n,e,t,i){if(!i)if(3==(3&e[Je])){const s=n.preOrderCheckHooks;null!==s&&xl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Sl(e,s,0,t)}uo(t)}function H(n,e=dt.Default){const t=ie();return null===t?O(n,e):ho(Ci(),t,k(n),e)}function fT(){throw new Error("invalid")}function ub(n,e,t,i,r,s,o,a,l,c,d){const f=e.blueprint.slice();return f[mn]=r,f[Je]=140|i,(null!==c||n&&2048&n[Je])&&(f[Je]|=2048),Fd(f),f[gn]=f[Lo]=n,f[An]=t,f[Fo]=o||n&&n[Fo],f[et]=a||n&&n[et],f[Oo]=l||n&&n[Oo]||null,f[Oi]=s,f[Lc]=function YG(){return ZG++}(),f[lo]=d,f[Td]=c,f[$n]=2==e.type?n[$n]:f,f}function gh(n,e,t,i,r){let s=n.data[e];if(null===s)s=function pT(n,e,t,i,r){const s=yv(),o=qc(),l=n.data[e]=function Y9(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return Cl()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,i,r),function vv(){return Ge.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Aa(){const n=Ge.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return $s(s,!0),s}function Am(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function CO(n,e,t,i,r){const s=vO(e,yl),o=Zi(),a=2&i;try{uo(-1),a&&e.length>_t&&IO(n,e,_t,!1),Jr(a?2:0,r);const c=a?s:null,d=Md(c);try{null!==c&&(c.dirty=!1),t(i,r)}finally{$p(c,d)}}finally{a&&null===e[yl]&&bO(e,yl),uo(o),Jr(a?3:1,r)}}function mT(n,e,t){if(Bp(e)){const i=Ut(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Ut(i)}}}function gT(n,e,t){Bd()&&(function i8(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;xa(t)&&function u8(n,e,t){const i=Xn(e,n),r=TO(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=db(n,ub(n,r,null,o,i,e,null,n[Fo].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||w(t,e),cr(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=zo(e,n,a,t);cr(c,e),null!==o&&d8(0,a-r,c,l,0,o),zs(l)&&(Nr(t.index,e)[An]=zo(e,n,a,t))}}(n,e,t,Xn(t,e)),64==(64&t.flags)&&RO(n,e,t))}function _T(n,e,t=Xn){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function TO(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=yT(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function yT(n,e,t,i,r,s,o,a,l,c,d){const f=_t+i,g=f+r,_=function $9(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:rt);return t}(f,g),v="function"==typeof c?c():c;return _[Ee]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1,ssrId:d}}let xO=n=>null;function SO(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?DO(t,e,r,s):i.hasOwnProperty(r)&&DO(t,e,i[r],s)}return t}function DO(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function Es(n,e,t,i,r,s,o,a){const l=Xn(e,t);let d,c=e.inputs;!a&&null!=c&&(d=c[i])?(IT(n,t,d,i,r),xa(e)&&function J9(n,e){const t=Nr(e,n);16&t[Je]||(t[Je]|=64)}(t,e.index)):3&e.type&&(i=function X9(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r))}function vT(n,e,t,i){if(Bd()){const r=null===i?null:{"":-1},s=function s8(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Ed(e,o.selectors,!1))if(i||(i=[]),zs(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),bT(n,e,a.length)}else i.unshift(o),bT(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&AO(n,e,t,o,r,a),r&&function o8(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new B(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=pl(t.mergedAttrs,t.attrs)}function AO(n,e,t,i,r,s){for(let c=0;c<i.length;c++)Te(w(t,e),n,i[c].type);!function l8(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let c=0;c<i.length;c++){const d=i[c];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,l=Am(n,e,i.length,null);for(let c=0;c<i.length;c++){const d=i[c];t.mergedAttrs=pl(t.mergedAttrs,d.hostAttrs),c8(n,t,e,l,d),a8(l,d,r),null!==d.contentQueries&&(t.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=64);const f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function Q9(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let d=e.directiveStart;d<r;d++){const f=s[d],g=t?t.get(f):null,v=g?g.outputs:null;l=SO(f.inputs,d,l,g?g.inputs:null),c=SO(f.outputs,d,c,v);const I=null===l||null===o||vd(e)?null:h8(l,d,o);a.push(I)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function RO(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function rC(){return Ge.lFrame.currentDirectiveIndex}();try{uo(s);for(let a=i;a<r;a++){const l=n.data[a],c=e[a];im(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&r8(l,c)}}finally{uo(-1),im(o)}}function r8(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function bT(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function a8(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;zs(e)&&(t[""]=n)}}function c8(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=bl(r.type)),o=new Ma(s,zs(r),H);n.blueprint[i]=o,t[i]=o,function t8(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function n8(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,Am(n,t,r.hostVars,rt),r)}function Ho(n,e,t,i,r,s){const o=Xn(n,e);!function ET(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?De(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[et],o,s,n.value,t,i,r)}function d8(n,e,t,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)MO(i,t,o[a++],o[a++],o[a++])}function MO(n,e,t,i,r){const s=Ut(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{Ut(s)}}function h8(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function PO(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function kO(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const o=n.data[s];rm(t[i]),o.contentQueries(2,e[s],s)}}}function db(n,e){return n[Ia]?n[qy][ys]=e:n[Ia]=e,n[qy]=e,e}function wT(n,e,t){rm(0);const i=Ut(null);try{e(n,t)}finally{Ut(i)}}function NO(n){return n[gl]||(n[gl]=[])}function OO(n){return n.cleanup||(n.cleanup=[])}function FO(n,e,t){return(null===n||zs(n))&&(t=function Wc(n){for(;Array.isArray(n);){if("object"==typeof n[xd])return n;n=n[mn]}return null}(t[e.index])),t[et]}function LO(n,e){const t=n[Oo],i=t?t.get(Na,null):null;i&&i.handleError(e)}function IT(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];MO(n.data[o],e[o],i,a,r)}}function f8(n,e){const t=Nr(e,n),i=t[Ee];!function p8(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[mn];null!==r&&null===t[lo]&&(t[lo]=nT(r,t[Oo])),CT(i,t,t[An])}function CT(n,e,t){Tl(e);try{const i=n.viewQuery;null!==i&&wT(1,i,t);const r=n.template;null!==r&&CO(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&kO(n,e),n.staticViewQueries&&wT(2,n.viewQuery,t);const s=n.components;null!==s&&function m8(n,e){for(let t=0;t<e.length;t++)f8(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Je]&=-5,sm()}}let VO=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const s=typeof Zone>"u"?null:Zone.current,o=function qI(n,e,t){const i=Object.create(GI);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=o=>{i.cleanupFn=o};return i.ref={notify:()=>nv(i),run:()=>{if(i.dirty=!1,i.hasRun&&!Uc(i))return;i.hasRun=!0;const o=Md(i);try{i.cleanupFn(),i.cleanupFn=lv,i.fn(r)}finally{$p(i,o)}},cleanup:()=>i.cleanupFn()},i.ref}(t,c=>{this.all.has(c)&&this.queue.set(c,s)},r);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=fe({token:n,providedIn:"root",factory:()=>new n})}return n})();function hb(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=pi(r,a):2==s&&(i=pi(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Rm(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];null!==s&&i.push(sn(s)),Ii(s)&&BO(s,i);const o=t.type;if(8&o)Rm(n,e,t.child,i);else if(32&o){const a=TC(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=wN(e,t);if(Array.isArray(a))i.push(...a);else{const l=ym(e[$n]);Rm(l[Ee],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function BO(n,e){for(let t=Fi;t<n.length;t++){const i=n[t],r=i[Ee].firstChild;null!==r&&Rm(i[Ee],i,r,e)}n[js]!==n[mn]&&e.push(n[js])}function fb(n,e,t,i=!0){const r=e[Fo],s=r.rendererFactory,o=r.afterRenderEventManager;s.begin?.(),o?.begin();try{UO(n,e,n.template,t)}catch(l){throw i&&LO(e,l),l}finally{s.end?.(),r.effectManager?.flush(),o?.end()}}function UO(n,e,t,i){const r=e[Je];if(256!=(256&r)){e[Fo].effectManager?.flush(),Tl(e);try{Fd(e),function nm(n){return Ge.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&CO(n,e,t,2,i);const o=3==(3&r);if(o){const c=n.preOrderCheckHooks;null!==c&&xl(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Sl(e,c,0,null),lm(e,0)}if(function y8(n){for(let e=uN(n);null!==e;e=dN(e)){if(!e[Gy])continue;const t=e[vl];for(let i=0;i<t.length;i++){XI(t[i])}}}(e),jO(e,2),null!==n.contentQueries&&kO(n,e),o){const c=n.contentCheckHooks;null!==c&&xl(e,c)}else{const c=n.contentHooks;null!==c&&Sl(e,c,1),lm(e,1)}!function H9(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=vO(e,Ta);try{for(let r=0;r<t.length;r++){const s=t[r];if(s<0)uo(~s);else{const o=s,a=t[++r],l=t[++r];iC(a,o),i.dirty=!1;const c=Md(i);try{l(2,e[o])}finally{$p(i,c)}}}}finally{null===e[Ta]&&bO(e,Ta),uo(-1)}}(n,e);const a=n.components;null!==a&&HO(e,a,0);const l=n.viewQuery;if(null!==l&&wT(2,l,i),o){const c=n.viewCheckHooks;null!==c&&xl(e,c)}else{const c=n.viewHooks;null!==c&&Sl(e,c,2),lm(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Je]&=-73,Ld(e)}finally{sm()}}}function jO(n,e){for(let t=uN(n);null!==t;t=dN(t))for(let i=Fi;i<t.length;i++)zO(t[i],e)}function v8(n,e,t){zO(Nr(e,n),t)}function zO(n,e){if(!function fv(n){return 128==(128&n[Je])}(n))return;const t=n[Ee],i=n[Je];if(80&i&&0===e||1024&i||2===e)UO(t,n,t.template,n[An]);else if(n[wa]>0){jO(n,1);const r=t.components;null!==r&&HO(n,r,1)}}function HO(n,e,t){for(let i=0;i<e.length;i++)v8(n,e[i],t)}class Mm{get rootNodes(){const e=this._lView,t=e[Ee];return Rm(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[An]}set context(e){this._lView[An]=e}get destroyed(){return 256==(256&this._lView[Je])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[gn];if(Ii(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(qv(e,i),Ov(t,i))}this._attachedToViewContainer=!1}SC(this._lView[Ee],this._lView)}onDestroy(e){!function Vd(n,e){if(256==(256&n[Je]))throw new B(911,!1);null===n[Vo]&&(n[Vo]=[]),n[Vo].push(e)}(this._lView,e)}markForCheck(){Dm(this._cdRefInjectingView||this._lView)}detach(){this._lView[Je]&=-129}reattach(){this._lView[Je]|=128}detectChanges(){fb(this._lView[Ee],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function u6(n,e){bm(n,e,e[et],2,null,null)}(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e}}class b8 extends Mm{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;fb(e[Ee],e,e[An],!1)}checkNoChanges(){}get context(){return null}}class $O extends hh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Et(e);return new Pm(t,this.ngModule)}}function WO(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class w8{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=md(i);const r=this.injector.get(e,sT,i);return r!==sT||t===sT?r:this.parentInjector.get(e,t,i)}}class Pm extends QN{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=WO(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return WO(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function $y(n){return n.map(kp).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof Gs?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new w8(e,s):e,a=o.get(Sm,null);if(null===a)throw new B(407,!1);const f={rendererFactory:a,sanitizer:o.get(v9,null),effectManager:o.get(VO,null),afterRenderEventManager:o.get(hT,null)},g=a.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",v=i?function W9(n,e,t,i){const s=i.get(mO,!1)||t===Qr.ShadowDom,o=n.selectRootElement(e,s);return function q9(n){xO(n)}(o),o}(g,i,this.componentDef.encapsulation,o):Wv(g,_,function E8(n){const e=n.toLowerCase();return"svg"===e?$c:"math"===e?"math":null}(_)),F=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let M=null;null!==v&&(M=nT(v,o,!0));const V=yT(0,null,null,1,0,null,null,null,null,null,null),Y=ub(null,V,null,F,null,null,f,g,o,null,M);let de,Me;Tl(Y);try{const qe=this.componentDef;let Ft,Pi=null;qe.findHostDirectiveDefs?(Ft=[],Pi=new Map,qe.findHostDirectiveDefs(qe,Ft,Pi),Ft.push(qe)):Ft=[qe];const ds=function C8(n,e){const t=n[Ee],i=_t;return n[i]=e,gh(t,i,2,"#host",null)}(Y,v),TI=function T8(n,e,t,i,r,s,o){const a=r[Ee];!function x8(n,e,t,i){for(const r of n)e.mergedAttrs=pl(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(hb(e,e.mergedAttrs,!0),null!==t&&xN(i,t,e))}(i,n,e,o);let l=null;null!==e&&(l=nT(e,r[Oo]));const c=s.rendererFactory.createRenderer(e,t);let d=16;t.signals?d=4096:t.onPush&&(d=64);const f=ub(r,TO(t),null,d,r[n.index],n,s,c,null,null,l);return a.firstCreatePass&&bT(a,n,i.length-1),db(r,f),r[n.index]=f}(ds,v,qe,Ft,Y,f,g);Me=hv(V,_t),v&&function D8(n,e,t,i){if(i)xp(n,t,["ng-version",JN.full]);else{const{attrs:r,classes:s}=function Np(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Mr(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&xp(n,t,r),s&&s.length>0&&TN(n,t,s.join(" "))}}(g,qe,v,i),void 0!==t&&function A8(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(Me,this.ngContentSelectors,t),de=function S8(n,e,t,i,r,s){const o=Ci(),a=r[Ee],l=Xn(o,r);AO(a,r,o,t,null,i);for(let d=0;d<t.length;d++)cr(zo(r,a,o.directiveStart+d,o),r);RO(a,r,o),l&&cr(l,r);const c=zo(r,a,o.directiveStart+o.componentOffset,o);if(n[An]=r[An]=c,null!==s)for(const d of s)d(c,e);return mT(a,o,n),c}(TI,qe,Ft,Pi,Y,[R8]),CT(V,Y,null)}finally{sm()}return new I8(this.componentType,de,fh(Me,Y),Y,Me)}}class I8 extends f9{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new b8(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;IT(s[Ee],s,r,e,t),this.previousInputValues.set(e,t),Dm(Nr(this._tNode.index,s))}}get injector(){return new Li(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function R8(){const n=Ci();Hd(ie()[Ee],n)}function Mt(n){let e=function qO(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(zs(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=pb(n.inputs),o.inputTransforms=pb(n.inputTransforms),o.declaredInputs=pb(n.declaredInputs),o.outputs=pb(n.outputs);const a=r.hostBindings;a&&N8(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&P8(n,l),c&&k8(n,c),Zt(n.inputs,r.inputs),Zt(n.declaredInputs,r.declaredInputs),Zt(n.outputs,r.outputs),null!==r.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Zt(o.inputTransforms,r.inputTransforms)),zs(r)&&r.data.animation){const d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Mt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function M8(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=pl(r.hostAttrs,t=pl(t,r.hostAttrs))}}(i)}function pb(n){return n===Bs?{}:n===Lt?[]:n}function P8(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function k8(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function N8(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function YO(n){const e=n.inputConfig,t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[2]&&(t[i]=r[2])}n.inputTransforms=t}function ur(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function mi(n,e,t,i){const r=ie();return ur(r,Ra(),e)&&(Rt(),Ho(Rn(),r,n,e,t,i)),mi}function yh(n,e,t,i){return ur(n,Ra(),t)?e+De(t)+i:rt}function Ot(n,e,t,i,r,s,o,a){const l=ie(),c=Rt(),d=n+_t,f=c.firstCreatePass?function sK(n,e,t,i,r,s,o,a,l){const c=e.consts,d=gh(e,n,4,o||null,Uo(c,a));vT(e,t,d,Uo(c,l)),Hd(e,d);const f=d.tView=yT(2,d,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}(d,c,l,e,t,i,r,s,o):c.data[d];$s(f,!1);const g=u1(c,l,f,n);zd()&&Kv(c,l,g,f),cr(g,l),db(l,l[d]=PO(g,l,g,f)),Up(f)&&gT(c,l,f),null!=o&&_T(l,f,a)}let u1=function d1(n,e,t,i){return jo(!0),e[et].createComment("")};function xh(n){return function wl(n,e){return n[e]}(function tm(){return Ge.lFrame.contextLView}(),_t+n)}function He(n,e,t){const i=ie();return ur(i,Ra(),e)&&Es(Rt(),Rn(),i,n,e,i[et],t,!1),He}function MT(n,e,t,i,r){const o=r?"class":"style";IT(n,t,e.inputs[o],o,i)}function he(n,e,t,i){const r=ie(),s=Rt(),o=_t+n,a=r[et],l=s.firstCreatePass?function cK(n,e,t,i,r,s){const o=e.consts,l=gh(e,n,2,i,Uo(o,r));return vT(e,t,l,Uo(o,s)),null!==l.attrs&&hb(l,l.attrs,!1),null!==l.mergedAttrs&&hb(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,e,t,i):s.data[o],c=h1(s,r,l,a,e,n);r[o]=c;const d=Up(l);return $s(l,!0),xN(a,c,l),32!=(32&l.flags)&&zd()&&Kv(s,r,c,l),0===function JI(){return Ge.lFrame.elementDepthCount}()&&cr(c,r),function Jp(){Ge.lFrame.elementDepthCount++}(),d&&(gT(s,r,l),mT(s,l,r)),null!==i&&_T(r,l),he}function _e(){let n=Ci();qc()?Gc():(n=n.parent,$s(n,!1));const e=n;(function mv(n){return Ge.skipHydrationRootTNode===n})(e)&&function tC(){Ge.skipHydrationRootTNode=null}(),function em(){Ge.lFrame.elementDepthCount--}();const t=Rt();return t.firstCreatePass&&(Hd(t,n),Bp(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Wd(n){return 0!=(8&n.flags)}(e)&&MT(t,e,ie(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Mv(n){return 0!=(16&n.flags)}(e)&&MT(t,e,ie(),e.stylesWithoutHost,!1),_e}function on(n,e,t,i){return he(n,e,t,i),_e(),on}let h1=(n,e,t,i,r,s)=>(jo(!0),Wv(i,r,function am(){return Ge.lFrame.currentNamespace}()));function PT(n,e,t){const i=ie(),r=Rt(),s=n+_t,o=r.firstCreatePass?function hK(n,e,t,i,r){const s=e.consts,o=Uo(s,i),a=gh(e,n,8,"ng-container",o);return null!==o&&hb(a,o,!0),vT(e,t,a,Uo(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];$s(o,!0);const a=f1(r,i,o,n);return i[s]=a,zd()&&Kv(r,i,a,o),cr(a,i),Up(o)&&(gT(r,i,o),mT(r,o,i)),null!=t&&_T(i,o),PT}function kT(){let n=Ci();const e=Rt();return qc()?Gc():(n=n.parent,$s(n,!1)),e.firstCreatePass&&(Hd(e,n),Bp(n)&&e.queries.elementEnd(n)),kT}function Lm(n,e,t){return PT(n,e,t),kT(),Lm}let f1=(n,e,t,i)=>(jo(!0),xC(e[et],""));function fo(){return ie()}function Vm(n){return!!n&&"function"==typeof n.then}function p1(n){return!!n&&"function"==typeof n.subscribe}function $t(n,e,t,i){const r=ie(),s=Rt(),o=Ci();return m1(s,r,r[et],o,n,e,i),$t}function NT(n,e){const t=Ci(),i=ie(),r=Rt();return m1(r,i,FO(Kc(r.data),t,i),t,n,e),NT}function m1(n,e,t,i,r,s,o){const a=Up(i),c=n.firstCreatePass&&OO(n),d=e[An],f=NO(e);let g=!0;if(3&i.type||o){const I=Xn(i,e),S=o?o(I):I,F=f.length,M=o?Y=>o(sn(Y[i.index])):i.index;let V=null;if(!o&&a&&(V=function mK(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[gl],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==V)(V.__ngLastListenerFn__||V).__ngNextListenerFn__=s,V.__ngLastListenerFn__=s,g=!1;else{s=_1(i,e,d,s,!1);const Y=t.listen(S,r,s);f.push(s,Y),c&&c.push(r,M,F,F+1)}}else s=_1(i,e,d,s,!1);const _=i.outputs;let v;if(g&&null!==_&&(v=_[r])){const I=v.length;if(I)for(let S=0;S<I;S+=2){const de=e[v[S]][v[S+1]].subscribe(s),Me=f.length;f.push(s,de),c&&c.push(r,i.index,Me,-(Me+1))}}}function g1(n,e,t,i){try{return Jr(6,e,t),!1!==t(i)}catch(r){return LO(n,r),!1}finally{Jr(7,e,t)}}function _1(n,e,t,i,r){return function s(o){if(o===Function)return i;Dm(n.componentOffset>-1?Nr(n.index,e):e);let l=g1(e,t,i,o),c=s.__ngNextListenerFn__;for(;c;)l=g1(e,t,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&o.preventDefault(),l}}function Qt(n=1){return function sC(n){return(Ge.lFrame.contextLView=function oC(n,e){for(;n>0;)e=e[Lo],n--;return e}(n,Ge.lFrame.contextLView))[An]}(n)}function gK(n,e){let t=null;const i=function Hy(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?Ed(n,s,!0):Mp(i,s))return r}else t=r}return t}function bb(n){const e=ie()[$n][Oi];if(!e.projection){const i=e.projection=pm(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?gK(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function ts(n,e=0,t){const i=ie(),r=Rt(),s=gh(r,_t+n,16,null,t||null);null===s.projection&&(s.projection=e),Gc(),(!i[lo]||Cl())&&32!=(32&s.flags)&&function y6(n,e,t){CN(e[et],0,e,t,AC(n,t,e),yN(t.parent||e[Oi],t,e))}(r,i,s)}function Eb(n,e,t){return OT(n,"",e,"",t),Eb}function OT(n,e,t,i,r){const s=ie(),o=yh(s,e,t,i);return o!==rt&&Es(Rt(),Rn(),s,n,o,s[et],r,!1),OT}function wb(n,e){return n<<17|e<<2}function Ol(n){return n>>17&32767}function FT(n){return 2|n}function nu(n){return(131068&n)>>2}function LT(n,e){return-131069&n|e<<2}function VT(n){return 1|n}function x1(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Ol(s):nu(s),l=!1;for(;0!==a&&(!1===l||o);){const d=n[a+1];wK(n[a],e)&&(l=!0,n[a+1]=i?VT(d):FT(d)),a=i?Ol(d):nu(d)}l&&(n[t+1]=i?FT(s):VT(s))}function wK(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&th(n,e)>=0}function Bm(n,e,t){return po(n,e,t,!1),Bm}function Fr(n,e){return po(n,e,null,!0),Fr}function po(n,e,t,i){const r=ie(),s=Rt(),o=function co(n){const e=Ge.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function N1(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Zi()],o=function k1(n,e){return e>=n.expandoStartIndex}(n,t);(function V1(n,e){return 0!=(n.flags&(e?8:16))})(s,i)&&null===e&&!o&&(e=!1),e=function MK(n,e,t,i){const r=Kc(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Um(t=BT(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=BT(r,n,e,t,i),null===s){let l=function PK(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==nu(i))return n[Ol(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=BT(null,n,e,l[1],i),l=Um(l,e.attrs,i),function kK(n,e,t,i){n[Ol(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function NK(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Um(i,n[s].hostAttrs,t);return Um(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function bK(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Ol(o),l=nu(o);n[i]=t;let d,c=!1;if(Array.isArray(t)?(d=t[1],(null===d||th(t,d)>0)&&(c=!0)):d=t,r)if(0!==l){const g=Ol(n[a+1]);n[i+1]=wb(g,a),0!==g&&(n[g+1]=LT(n[g+1],i)),n[a+1]=function yK(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=wb(a,0),0!==a&&(n[a+1]=LT(n[a+1],i)),a=i;else n[i+1]=wb(l,0),0===a?a=i:n[l+1]=LT(n[l+1],i),l=i;c&&(n[i+1]=FT(n[i+1])),x1(n,d,i,!0),x1(n,d,i,!1),function EK(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&th(s,e)>=0&&(t[i+1]=VT(t[i+1]))}(e,d,n,i,s),o=wb(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}(s,n,o,i),e!==rt&&ur(r,o,e)&&function F1(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],d=function vK(n){return 1==(1&n)}(c)?L1(l,e,t,r,nu(c),o):void 0;Ib(d)||(Ib(s)||function _K(n){return 2==(2&n)}(c)&&(s=L1(l,null,t,r,a,o)),function b6(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:Ml.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Ml.Important),n.setStyle(t,i,r,s))}}(i,o,Od(Zi(),t),r,s))}(s,s.data[Zi()],r,r[et],n,r[o+1]=function VK(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ne(Pl(n)))),n}(e,t),i,o)}function BT(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Um(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Um(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),bs(n,o,!!t||e[++s]))}return void 0===n?null:n}function L1(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),d=c?l[1]:l,f=null===d;let g=t[r+1];g===rt&&(g=f?Lt:void 0);let _=f?gC(g,i):d===i?g:void 0;if(c&&!Ib(_)&&(_=gC(l,i)),Ib(_)&&(a=_,o))return a;const v=n[r+1];r=o?Ol(v):nu(v)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=gC(l,i))}return a}function Ib(n){return void 0!==n}function Ke(n,e=""){const t=ie(),i=Rt(),r=n+_t,s=i.firstCreatePass?gh(i,r,1,e,null):i.data[r],o=B1(i,t,s,e,n);t[r]=o,zd()&&Kv(i,t,o,s),$s(s,!1)}let B1=(n,e,t,i,r)=>(jo(!0),function $v(n,e){return n.createText(e)}(e[et],i));function Fl(n){return iu("",n,""),Fl}function iu(n,e,t){const i=ie(),r=yh(i,n,e,t);return r!==rt&&function Fa(n,e,t){const i=Od(e,n);!function fN(n,e,t){n.setValue(e,t)}(n[et],i,t)}(i,Zi(),r),iu}function Cb(n,e,t){const i=ie();return ur(i,Ra(),e)&&Es(Rt(),Rn(),i,n,e,i[et],t,!0),Cb}function UT(n,e,t){const i=ie();if(ur(i,Ra(),e)){const s=Rt(),o=Rn();Es(s,o,i,n,e,FO(Kc(s.data),o,i),t,!0)}return UT}const Ah="en-US";let sF=Ah;function HT(n,e,t,i,r){if(n=k(n),Array.isArray(n))for(let s=0;s<n.length;s++)HT(n[s],e,t,i,r);else{const s=Rt(),o=ie(),a=Ci();let l=eu(n)?n:k(n.provide);const c=qN(n),d=1048575&a.providerIndexes,f=a.directiveStart,g=a.providerIndexes>>20;if(eu(n)||!n.multi){const _=new Ma(c,r,H),v=WT(l,e,r?d:d+g,f);-1===v?(Te(w(a,o),s,l),$T(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(_),o.push(_)):(t[v]=_,o[v]=_)}else{const _=WT(l,e,d+g,f),v=WT(l,e,d,d+g),S=v>=0&&t[v];if(r&&!S||!r&&!(_>=0&&t[_])){Te(w(a,o),s,l);const F=function sZ(n,e,t,i,r){const s=new Ma(n,t,H);return s.multi=[],s.index=e,s.componentProviders=0,RF(s,r,i&&!t),s}(r?rZ:iZ,t.length,r,i,c);!r&&S&&(t[v].providerFactory=F),$T(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(F),o.push(F)}else $T(s,n,_>-1?_:v,RF(t[r?v:_],c,!r&&i));!r&&i&&S&&t[v].componentProviders++}}}function $T(n,e,t,i){const r=eu(e),s=function Y6(n){return!!n.useClass}(e);if(r||s){const l=(s?k(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const d=c.indexOf(t);-1===d?c.push(t,[i,l]):c[d+1].push(i,l)}else c.push(t,l)}}}function RF(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function WT(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function iZ(n,e,t,i){return qT(this.multi,[])}function rZ(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=zo(t,t[Ee],this.providerFactory.index,i);s=a.slice(0,o),qT(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],qT(r,s);return s}function qT(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function vn(n,e=[]){return t=>{t.providersResolver=(i,r)=>function nZ(n,e,t){const i=Rt();if(i.firstCreatePass){const r=zs(n);HT(t,i.data,i.blueprint,r,!0),HT(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class su{}class MF{}class GT extends su{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $O(this);const r=Gi(e);this._bootstrapComponents=Oa(r.bootstrap),this._r3Injector=rO(e,t,[{provide:su,useValue:this},{provide:hh,useValue:this.componentFactoryResolver},...i],Ne(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class KT extends MF{constructor(e){super(),this.moduleType=e}create(e){return new GT(this.moduleType,e,[])}}class PF extends su{constructor(e){super(),this.componentFactoryResolver=new $O(this),this.instance=null;const t=new lh([...e.providers,{provide:su,useValue:this},{provide:hh,useValue:this.componentFactoryResolver}],e.parent||tb(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ZT(n,e,t=null){return new PF({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let lZ=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=zN(0,t.type),r=i.length>0?ZT([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=fe({token:n,providedIn:"environment",factory:()=>new n(O(Gs))})}return n})();function kF(n){n.getStandaloneInjector=e=>e.get(lZ).getOrCreateStandaloneInjector(n)}function NZ(){return this._results[Symbol.iterator]()}class QT{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Vn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=QT.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=NZ)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function qs(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function IG(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function FZ(n,e,t,i=!0){const r=e[Ee];if(function h6(n,e,t,i){const r=Fi+i,s=t.length;i>0&&(t[r-1][ys]=e),i<s-Fi?(e[ys]=t[r],Hk(t,Fi+i,e)):(t.push(e),e[ys]=null),e[gn]=t;const o=e[Ca];null!==o&&t!==o&&function f6(n,e){const t=n[vl];e[$n]!==e[gn][gn][$n]&&(n[Gy]=!0),null===t?n[vl]=[e]:t.push(e)}(o,e);const a=e[Xr];null!==a&&a.insertView(n),e[Je]|=128}(r,e,n,t),i){const s=MC(t,n),o=e[et],a=Gv(o,n[js]);null!==a&&function c6(n,e,t,i,r,s){i[mn]=r,i[Oi]=e,bm(n,i,t,1,r,s)}(r,n[Oi],o,e,a,s)}}let Go=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=BZ}return n})();const LZ=Go,VZ=class extends LZ{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function OZ(n,e,t,i){const r=e.tView,a=ub(n,r,t,4096&n[Je]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[Ca]=n[e.index];const c=n[Xr];return null!==c&&(a[Xr]=c.createEmbeddedView(r)),CT(r,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:i});return new Mm(r)}};function BZ(){return Ab(Ci(),ie())}function Ab(n,e){return 4&n.type?new VZ(e,n,fh(n,e)):null}let Ys=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=WZ}return n})();function WZ(){return QF(Ci(),ie())}const qZ=Ys,ZF=class extends qZ{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return fh(this._hostTNode,this._hostLView)}get injector(){return new Li(this._hostTNode,this._hostLView)}get parentInjector(){const e=se(this._hostTNode,this._hostLView);if(cm(e)){const t=Qc(e,this._hostLView),i=Yc(e);return new Li(t[Ee].data[i+8],t)}return new Li(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=YF(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Fi}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,r,false),a}createComponent(e,t,i,r,s){const o=e&&!function fm(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const I=t||{};a=I.index,i=I.injector,r=I.projectableNodes,s=I.environmentInjector||I.ngModuleRef}const l=o?e:new Pm(Et(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const S=(o?c:this.parentInjector).get(Gs,null);S&&(s=S)}Et(l.componentType??{});const _=l.create(c,r,null,s);return this.insertImpl(_.hostView,a,false),_}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView;if(function QI(n){return Ii(n[gn])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const c=r[gn],d=new ZF(c,c[Oi],c[gn]);d.detach(d.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return FZ(a,r,o,!i),e.attachToViewContainerRef(),Hk(XT(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=YF(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=qv(this._lContainer,t);i&&(Ov(XT(this._lContainer),t),SC(i[Ee],i))}detach(e){const t=this._adjustIndex(e,-1),i=qv(this._lContainer,t);return i&&null!=Ov(XT(this._lContainer),t)?new Mm(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function YF(n){return n[8]}function XT(n){return n[8]||(n[8]=[])}function QF(n,e){let t;const i=e[n.index];return Ii(i)?t=i:(t=PO(i,e,null,n),e[n.index]=t,db(e,t)),XF(t,e,n,i),new ZF(t,n,e)}let XF=function JF(n,e,t,i){if(n[js])return;let r;r=8&t.type?sn(i):function GZ(n,e){const t=n[et],i=t.createComment(""),r=Xn(e,n);return Jc(t,Gv(t,r),i,function _6(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[js]=r};class JT{constructor(e){this.queryList=e,this.matches=null}clone(){return new JT(this.queryList)}setDirty(){this.queryList.setDirty()}}class ex{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new ex(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==rL(e,t).matches&&this.queries[t].setDirty()}}class eL{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class tx{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new tx(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class nx{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new nx(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,YZ(t,s)),this.matchTNodeWithReadOption(e,t,Al(t,e,s,!1,!1))}else i===Go?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Al(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===_n||r===Ys||r===Go&&4&t.type)this.addMatch(t.index,-2);else{const s=Al(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function YZ(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function XZ(n,e,t,i){return-1===t?function QZ(n,e){return 11&n.type?fh(n,e):4&n.type?Ab(n,e):null}(e,n):-2===t?function JZ(n,e,t){return t===_n?fh(e,n):t===Go?Ab(e,n):t===Ys?QF(e,n):void 0}(n,e,i):zo(n,n[Ee],t,e)}function tL(n,e,t,i){const r=e[Xr].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:XZ(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function ix(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=tL(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],d=e[-l];for(let f=Fi;f<d.length;f++){const g=d[f];g[Ca]===g[gn]&&ix(g[Ee],g,c,i)}if(null!==d[vl]){const f=d[vl];for(let g=0;g<f.length;g++){const _=f[g];ix(_[Ee],_,c,i)}}}}}return i}function Di(n){const e=ie(),t=Rt(),i=bv();rm(i+1);const r=rL(t,i);if(n.dirty&&function Qp(n){return 4==(4&n[Je])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?ix(t,e,i,[]):tL(t,e,r,i);n.reset(s,_9),n.notifyOnChanges()}return!0}return!1}function go(n,e,t){const i=Rt();i.firstCreatePass&&(iL(i,new eL(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),nL(i,ie(),e)}function La(n,e,t,i){const r=Rt();if(r.firstCreatePass){const s=Ci();iL(r,new eL(e,t,i),s.index),function tY(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}nL(r,ie(),t)}function Ai(){return function eY(n,e){return n[Xr].queries[e].queryList}(ie(),bv())}function nL(n,e,t){const i=new QT(4==(4&t));(function Z9(n,e,t,i){const r=NO(e);r.push(t),n.firstCreatePass&&OO(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[Xr]&&(e[Xr]=new ex),e[Xr].queries.push(new JT(i))}function iL(n,e,t){null===n.queries&&(n.queries=new tx),n.queries.track(new nx(e,t))}function rL(n,e){return n.queries.getByIndex(e)}function rx(n,e){return Ab(n,e)}const ux=new oe("Application Initializer");let dx=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=me(ux,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=r();if(Vm(s))t.push(s);else if(p1(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),EL=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Ko=new oe("LocaleId",{providedIn:"root",factory:()=>me(Ko,dt.Optional|dt.SkipSelf)||function wY(){return typeof $localize<"u"&&$localize.locale||Ah}()});let wL=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new b(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class TY{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let IL=(()=>{class n{compileModuleSync(t){return new KT(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=Oa(Gi(t).declarations).reduce((o,a)=>{const l=Et(a);return l&&o.push(new Pm(l)),o},[]);return new TY(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const SL=new oe(""),kb=new oe("");let gx,px=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,gx||(function GY(n){gx=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Be.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(O(Be),O(mx),O(kb))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),mx=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return gx?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Ll=null;const DL=new oe("AllowMultipleToken"),_x=new oe("PlatformDestroyListeners"),yx=new oe("appBootstrapListener");class RL{constructor(e,t){this.name=e,this.token=t}}function PL(n,e,t=[]){const i=`Platform: ${e}`,r=new oe(i);return(s=[])=>{let o=vx();if(!o||o.injector.get(DL,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function YY(n){if(Ll&&!Ll.get(DL,!1))throw new B(400,!1);(function AL(){!function zI(n){jI=n}(()=>{throw new B(600,!1)})})(),Ll=n;const e=n.get(NL);(function ML(n){n.get(GN,null)?.forEach(t=>t())})(n)}(function kL(n=[],e){return xi.create({name:e,providers:[{provide:$C,useValue:"platform"},{provide:_x,useValue:new Set([()=>Ll=null])},...n]})}(a,i))}return function XY(n){const e=vx();if(!e)throw new B(401,!1);return e}()}}function vx(){return Ll?.get(NL)??null}let NL=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function JY(n="zone.js",e){return"noop"===n?new M9:"zone.js"===n?new Be(e):n}(i?.ngZone,function OL(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=function aZ(n,e,t){return new GT(n,e,t)}(t.moduleType,this.injector,function UL(n){return[{provide:Be,useFactory:n},{provide:Cm,multi:!0,useFactory:()=>{const e=me(tQ,{optional:!0});return()=>e.initialize()}},{provide:BL,useFactory:eQ},{provide:cO,useFactory:uO}]}(()=>r)),o=s.injector.get(Na,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{Nb(this._modules,s),a.unsubscribe()})}),function FL(n,e,t){try{const i=t();return Vm(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(o,r,()=>{const a=s.injector.get(dx);return a.runInitializers(),a.donePromise.then(()=>(function oF(n){ki(n,"Expected localeId to be defined"),"string"==typeof n&&(sF=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Ko,Ah)||Ah),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,i=[]){const r=LL({},i);return function KY(n,e,t){const i=new KT(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(Vl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new B(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new B(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(_x,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(O(xi))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function LL(n,e){return Array.isArray(e)?e.reduce(LL,n):{...n,...e}}let Vl=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=me(BL),this.zoneIsStable=me(cO),this.componentTypes=[],this.components=[],this.isStable=me(wL).hasPendingTasks.pipe(Ce(t=>t?R(!1):this.zoneIsStable),ze(),Q()),this._injector=me(Gs)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof QN;if(!this._injector.get(dx).done)throw!r&&function ml(n){const e=Et(n)||Ei(n)||wi(n);return null!==e&&e.standalone}(t),new B(405,!1);let o;o=r?t:this._injector.get(hh).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function ZY(n){return n.isBoundToModule}(o)?void 0:this._injector.get(su),c=o.create(xi.NULL,[],i||o.selector,a),d=c.location.nativeElement,f=c.injector.get(SL,null);return f?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),Nb(this.components,c),f?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new B(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Nb(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(yx,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Nb(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new B(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const BL=new oe("",{providedIn:"root",factory:()=>me(Na).handleError.bind(void 0)});function eQ(){const n=me(Be),e=me(Na);return t=>n.runOutsideAngular(()=>e.handleError(t))}let tQ=(()=>{class n{constructor(){this.zone=me(Be),this.applicationRef=me(Vl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let Ph=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=iQ}return n})();function iQ(n){return function rQ(n,e,t){if(xa(n)&&!t){const i=Nr(n.index,e);return new Mm(i,i)}return 47&n.type?new Mm(e[$n],e):null}(Ci(),ie(),16==(16&n))}const _Q=PL(null,"core",[]);let yQ=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(O(Vl))};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({})}return n})();function kh(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Tx=null;function Bl(){return Tx}class PQ{}const jt=new oe("DocumentToken");let xx=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:function(){return me(NQ)},providedIn:"platform"})}return n})();const kQ=new oe("Location Initialized");let NQ=(()=>{class n extends xx{constructor(){super(),this._doc=me(jt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Bl().getBaseHref(this._doc)}onPopState(t){const i=Bl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Bl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function Sx(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function sV(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Va(n){return n&&"?"!==n[0]?"?"+n:n}let au=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:function(){return me(aV)},providedIn:"root"})}return n})();const oV=new oe("appBaseHref");let aV=(()=>{class n extends au{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??me(jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Sx(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Va(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Va(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Va(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(O(xx),O(oV,8))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OQ=(()=>{class n extends au{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Sx(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Va(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Va(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(O(xx),O(oV,8))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),Bb=(()=>{class n{constructor(t){this._subject=new Vn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function VQ(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(sV(lV(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Va(i))}normalize(t){return n.stripTrailingSlash(function LQ(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,lV(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Va(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Va(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=Va;static#t=this.joinWithSlash=Sx;static#n=this.stripTrailingSlash=sV;static#i=this.\u0275fac=function(i){return new(i||n)(O(au))};static#r=this.\u0275prov=fe({token:n,factory:function(){return function FQ(){return new Bb(O(au))}()},providedIn:"root"})}return n})();function lV(n){return n.replace(/\/index.html$/,"")}let lu=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new SX,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){bV("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){bV("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(H(Ys),H(Go))};static#t=this.\u0275dir=Ae({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class SX{constructor(){this.$implicit=null,this.ngIf=null}}function bV(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ne(e)}'.`)}class Vx{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Yb=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const i of this._defaultViews)i.enforceState(t)}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ae({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return n})(),EV=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new Vx(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(i){return new(i||n)(H(Ys),H(Go),H(Yb,9))};static#t=this.\u0275dir=Ae({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return n})(),Bx=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(i){return new(i||n)(H(Ys))};static#t=this.\u0275dir=Ae({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[kr]})}return n})(),Qb=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({})}return n})();const CV="browser";function Xb(n){return"server"===n}let iJ=(()=>{class n{static#e=this.\u0275prov=fe({token:n,providedIn:"root",factory:()=>new rJ(O(jt),window)})}return n})();class rJ{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function sJ(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class AJ extends PQ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class $x extends AJ{static makeCurrent(){!function MQ(n){Tx||(Tx=n)}(new $x)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function RJ(){return eg=eg||document.querySelector("base"),eg?eg.getAttribute("href"):null}();return null==t?null:function MJ(n){tE=tE||document.createElement("a"),tE.setAttribute("href",n);const e=tE.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){eg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function wX(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let tE,eg=null,kJ=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const Wx=new oe("EventManagerPlugins");let AV=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new B(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(O(Wx),O(Be))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();class RV{constructor(e){this._doc=e}}const qx="ng-app-id";let MV=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Xb(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${qx}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(qx),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(qx,this.appId),o}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(O(jt),O(nb),O(KC,8),O(Ks))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const Gx={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Kx=/%COMP%/g,LJ=new oe("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function kV(n,e){return e.map(t=>t.replace(Kx,n))}let Zx=(()=>{class n{constructor(t,i,r,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=Xb(a),this.defaultRenderer=new Yx(t,o,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Qr.ShadowDom&&(i={...i,encapsulation:Qr.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof OV?r.applyToHost(t):r instanceof Qx&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Qr.Emulated:s=new OV(l,c,i,this.appId,d,o,a,f);break;case Qr.ShadowDom:return new jJ(l,c,t,i,o,a,this.nonce,f);default:s=new Qx(l,c,i,d,o,a,f)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(O(AV),O(MV),O(nb),O(LJ),O(jt),O(Ks),O(Be),O(KC))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();class Yx{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Gx[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(NV(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(NV(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new B(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=Gx[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Gx[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ml.DashCase|Ml.Important)?e.style.setProperty(t,i,r&Ml.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ml.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Bl().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function NV(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class jJ extends Yx{constructor(e,t,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=kV(r.id,r.styles);for(const d of c){const f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Qx extends Yx{constructor(e,t,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?kV(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class OV extends Qx{constructor(e,t,i,r,s,o,a,l){const c=r+"-"+i.id;super(e,t,i,s,o,a,l,c),this.contentAttr=function VJ(n){return"_ngcontent-%COMP%".replace(Kx,n)}(c),this.hostAttr=function BJ(n){return"_nghost-%COMP%".replace(Kx,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let zJ=(()=>{class n extends RV{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(O(jt))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const FV=["alt","control","meta","shift"],HJ={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$J={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let WJ=(()=>{class n extends RV{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bl().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),FV.forEach(c=>{const d=i.indexOf(c);d>-1&&(i.splice(d,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=HJ[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),FV.forEach(o=>{o!==r&&(0,$J[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(O(jt))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const VV=[{provide:Ks,useValue:CV},{provide:GN,useValue:function qJ(){$x.makeCurrent()},multi:!0},{provide:jt,useFactory:function KJ(){return function T6(n){NC=n}(document),document},deps:[]}],ZJ=PL(_Q,"browser",VV),YJ=new oe(""),BV=[{provide:kb,useClass:class PJ{addToWindow(e){Yt.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new B(5103,!1);return s},Yt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Yt.getAllAngularRootElements=()=>e.getAllRootElements(),Yt.frameworkStabilizers||(Yt.frameworkStabilizers=[]),Yt.frameworkStabilizers.push(i=>{const r=Yt.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Bl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:SL,useClass:px,deps:[Be,mx,kb]},{provide:px,useClass:px,deps:[Be,mx,kb]}],UV=[{provide:$C,useValue:"root"},{provide:Na,useFactory:function GJ(){return new Na},deps:[]},{provide:Wx,useClass:zJ,multi:!0,deps:[jt,Be,Ks]},{provide:Wx,useClass:WJ,multi:!0,deps:[jt]},Zx,MV,AV,{provide:Sm,useExisting:Zx},{provide:class oJ{},useClass:kJ,deps:[]},[]];let jV=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:nb,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(O(YJ,12))};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({providers:[...UV,...BV],imports:[Qb,yQ]})}return n})(),zV=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||n)(O(jt))};static#t=this.\u0275prov=fe({token:n,factory:function(i){let r=null;return r=i?new i:function XJ(){return new zV(O(jt))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;const{isArray:ree}=Array,{getPrototypeOf:see,prototype:oee,keys:aee}=Object;function qV(n){if(1===n.length){const e=n[0];if(ree(e))return{args:e,keys:null};if(function lee(n){return n&&"object"==typeof n&&see(n)===oee}(e)){const t=aee(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:cee}=Array;function Jx(n){return ge(e=>function uee(n,e){return cee(e)?n(...e):n(e)}(n,e))}function GV(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function nE(...n){const e=_s(n),t=Yr(n),{args:i,keys:r}=qV(n);if(0===i.length)return E([],e);const s=new Xe(function dee(n,e,t=Ln){return i=>{KV(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)KV(e,()=>{const c=E(n[l],e);let d=!1;c.subscribe(pe(i,f=>{s[l]=f,d||(d=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>GV(r,o):Ln));return t?s.pipe(Jx(t)):s}function KV(n,e,t){n?Tr(t,n,e):e()}const iE=X(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function rE(...n){return function hee(){return or(1)}()(E(n,_s(n)))}function ZV(n){return new Xe(e=>{mt(n()).subscribe(e)})}function tg(n,e){const t=x(n)?n:()=>n,i=r=>r.error(t());return new Xe(e?r=>e.schedule(i,0,r):i)}function eS(){return ee((n,e)=>{let t=null;n._refCount++;const i=pe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class YV extends Xe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ne(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ht;const t=this.getSubject();e.add(this.source.subscribe(pe(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ht.EMPTY)}return e}refCount(){return eS()(this)}}function ja(n){return n<=0?()=>Tn:ee((e,t)=>{let i=0;e.subscribe(pe(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function ng(...n){const e=_s(n);return ee((t,i)=>{(e?rE(n,t,e):rE(n,t)).subscribe(i)})}function Ur(n,e){return ee((t,i)=>{let r=0;t.subscribe(pe(i,s=>n.call(e,s,r++)&&i.next(s)))})}function sE(n){return ee((e,t)=>{let i=!1;e.subscribe(pe(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function QV(n=fee){return ee((e,t)=>{let i=!1;e.subscribe(pe(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function fee(){return new iE}function jl(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Ur((r,s)=>n(r,s,i)):Ln,ja(1),t?sE(e):QV(()=>new iE))}function ig(n,e){return x(e)?Ht(n,e,1):Ht(n,1)}function Qi(n,e,t){const i=x(n)||e||t?{next:n,error:e,complete:t}:n;return i?ee((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(pe(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Ln}function cu(n){return ee((e,t)=>{let s,i=null,r=!1;i=e.subscribe(pe(t,void 0,void 0,o=>{s=mt(n(o,cu(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Oh(n,e){return ee(function pee(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(pe(o,d=>{const f=c++;l=a?n(l,d,f):(a=!0,d),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function tS(n){return n<=0?()=>Tn:ee((e,t)=>{let i=[];e.subscribe(pe(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function nS(n){return ee((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function za(n){return ee((e,t)=>{mt(n).subscribe(pe(t,()=>t.complete(),Re)),!t.closed&&e.subscribe(t)})}const at="primary",rg=Symbol("RouteTitle");class _ee{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Fh(n){return new _ee(n)}function yee(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Zo(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!XV(n[r],e[r]))return!1;return!0}function XV(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function JV(n){return n.length>0?n[n.length-1]:null}function zl(n){return function iee(n){return!!n&&(n instanceof Xe||x(n.lift)&&x(n.subscribe))}(n)?n:Vm(n)?E(Promise.resolve(n)):R(n)}const bee={exact:function n2(n,e,t){if(!uu(n.segments,e.segments)||!oE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!n2(n.children[i],e.children[i],t))return!1;return!0},subset:r2},e2={exact:function Eee(n,e){return Zo(n,e)},subset:function wee(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>XV(n[t],e[t]))},ignored:()=>!0};function t2(n,e,t){return bee[t.paths](n.root,e.root,t.matrixParams)&&e2[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function r2(n,e,t){return s2(n,e,e.segments,t)}function s2(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!uu(r,t)||e.hasChildren()||!oE(r,t,i))}if(n.segments.length===t.length){if(!uu(n.segments,t)||!oE(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!r2(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(uu(n.segments,r)&&oE(n.segments,r,i)&&n.children[at])&&s2(n.children[at],e,s,i)}}function oE(n,e,t){return e.every((i,r)=>e2[t](n[r].parameters,i.parameters))}class Lh{constructor(e=new tn([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fh(this.queryParams)),this._queryParamMap}toString(){return Tee.serialize(this)}}class tn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return aE(this)}}class sg{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Fh(this.parameters)),this._parameterMap}toString(){return l2(this)}}function uu(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let og=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:function(){return new iS},providedIn:"root"})}return n})();class iS{parse(e){const t=new Fee(e);return new Lh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ag(e.root,!0)}`,i=function Dee(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${lE(t)}=${lE(r)}`).join("&"):`${lE(t)}=${lE(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function xee(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Tee=new iS;function aE(n){return n.segments.map(e=>l2(e)).join("/")}function ag(n,e){if(!n.hasChildren())return aE(n);if(e){const t=n.children[at]?ag(n.children[at],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==at&&i.push(`${r}:${ag(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Cee(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===at&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==at&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===at?[ag(n.children[at],!1)]:[`${r}:${ag(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[at]?`${aE(n)}/${t[0]}`:`${aE(n)}/(${t.join("//")})`}}function o2(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lE(n){return o2(n).replace(/%3B/gi,";")}function rS(n){return o2(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cE(n){return decodeURIComponent(n)}function a2(n){return cE(n.replace(/\+/g,"%20"))}function l2(n){return`${rS(n.path)}${function See(n){return Object.keys(n).map(e=>`;${rS(e)}=${rS(n[e])}`).join("")}(n.parameters)}`}const Aee=/^[^\/()?;#]+/;function sS(n){const e=n.match(Aee);return e?e[0]:""}const Ree=/^[^\/()?;=#]+/,Pee=/^[^=?&#]+/,Nee=/^[^&#]+/;class Fee{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tn([],{}):new tn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[at]=new tn(e,t)),i}parseSegment(){const e=sS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new sg(cE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Mee(n){const e=n.match(Ree);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=sS(this.remaining);r&&(i=r,this.capture(i))}e[cE(t)]=cE(i)}parseQueryParam(e){const t=function kee(n){const e=n.match(Pee);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function Oee(n){const e=n.match(Nee);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=a2(t),s=a2(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=sS(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new B(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=at);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[at]:new tn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}}function c2(n){return n.segments.length>0?new tn([],{[at]:n}):n}function u2(n){const e={};for(const i of Object.keys(n.children)){const s=u2(n.children[i]);if(i===at&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function Lee(n){if(1===n.numberOfChildren&&n.children[at]){const e=n.children[at];return new tn(n.segments.concat(e.segments),e.children)}return n}(new tn(n.segments,e))}function du(n){return n instanceof Lh}function d2(n){let e;const r=c2(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new tn(s.url,o);return s===n&&(e=a),a}(n.root));return e??r}function h2(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return oS(r,r,r,t,i);const s=function Bee(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new p2(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new p2(t,e,i)}(e);if(s.toRoot())return oS(r,r,new tn([],{}),t,i);const o=function Uee(n,e,t){if(n.isAbsolute)return new dE(e,!0,0);if(!t)return new dE(e,!1,NaN);if(null===t.parent)return new dE(t,!0,0);const i=uE(n.commands[0])?0:1;return function jee(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new B(4005,!1);r=i.segments.length}return new dE(i,!1,r-s)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),a=o.processChildren?cg(o.segmentGroup,o.index,s.commands):m2(o.segmentGroup,o.index,s.commands);return oS(r,o.segmentGroup,a,t,i)}function uE(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function lg(n){return"object"==typeof n&&null!=n&&n.outlets}function oS(n,e,t,i,r){let o,s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`}),o=n===e?t:f2(n,e,t);const a=c2(u2(o));return new Lh(a,s,r)}function f2(n,e,t){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===e?t:f2(s,e,t)}),new tn(n.segments,i)}class p2{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&uE(i[0]))throw new B(4003,!1);const r=i.find(lg);if(r&&r!==JV(i))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class dE{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function m2(n,e,t){if(n||(n=new tn([],{})),0===n.segments.length&&n.hasChildren())return cg(n,e,t);const i=function Hee(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(lg(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!_2(l,c,o))return s;i+=2}else{if(!_2(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new tn(n.segments.slice(0,i.pathIndex),{});return s.children[at]=new tn(n.segments.slice(i.pathIndex),n.children),cg(s,0,r)}return i.match&&0===r.length?new tn(n.segments,{}):i.match&&!n.hasChildren()?aS(n,e,t):i.match?cg(n,0,r):aS(n,e,t)}function cg(n,e,t){if(0===t.length)return new tn(n.segments,{});{const i=function zee(n){return lg(n[0])?n[0].outlets:{[at]:n}}(t),r={};if(Object.keys(i).some(s=>s!==at)&&n.children[at]&&1===n.numberOfChildren&&0===n.children[at].segments.length){const s=cg(n.children[at],e,t);return new tn(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=m2(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===i[s]&&(r[s]=o)}),new tn(n.segments,r)}}function aS(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(lg(s)){const l=$ee(s.outlets);return new tn(i,l)}if(0===r&&uE(t[0])){i.push(new sg(n.segments[e].path,g2(t[0]))),r++;continue}const o=lg(s)?s.outlets[at]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&uE(a)?(i.push(new sg(o,g2(a))),r+=2):(i.push(new sg(o,{})),r++)}return new tn(i,{})}function $ee(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=aS(new tn([],{}),0,i))}),e}function g2(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function _2(n,e,t){return n==t.path&&Zo(e,t.parameters)}const ug="imperative";class Yo{constructor(e,t){this.id=e,this.url=t}}class hE extends Yo{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Hl extends Yo{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dg extends Yo{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vh extends Yo{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class fE extends Yo{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class y2 extends Yo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wee extends Yo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qee extends Yo{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Gee extends Yo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kee extends Yo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zee{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Yee{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Qee{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xee{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jee{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ete{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class v2{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class lS{}class cS{constructor(e){this.url=e}}class tte{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new hg,this.attachRef=null}}let hg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new tte,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class b2{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=uS(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=uS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=dS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return dS(e,this._root).map(t=>t.value)}}function uS(n,e){if(n===e.value)return e;for(const t of e.children){const i=uS(n,t);if(i)return i}return null}function dS(n,e){if(n===e.value)return[e];for(const t of e.children){const i=dS(n,t);if(i.length)return i.unshift(e),i}return[]}class Ha{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Bh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class E2 extends b2{constructor(e,t){super(e),this.snapshot=t,hS(this,e)}toString(){return this.snapshot.toString()}}function w2(n,e){const t=function nte(n,e){const o=new pE([],{},{},"",{},at,e,null,{});return new C2("",new Ha(o,[]))}(0,e),i=new b([new sg("",{})]),r=new b({}),s=new b({}),o=new b({}),a=new b(""),l=new Uh(i,r,o,a,s,at,e,t.root);return l.snapshot=t.root,new E2(new Ha(l,[]),t)}class Uh{constructor(e,t,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ge(c=>c[rg]))??R(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ge(e=>Fh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ge(e=>Fh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function I2(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function ite(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class pE{get title(){return this.data?.[rg]}constructor(e,t,i,r,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class C2 extends b2{constructor(e,t){super(t),this.url=e,hS(this,t)}toString(){return T2(this._root)}}function hS(n,e){e.value._routerState=n,e.children.forEach(t=>hS(n,t))}function T2(n){const e=n.children.length>0?` { ${n.children.map(T2).join(", ")} } `:"";return`${n.value}${e}`}function fS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Zo(e.params,t.params)||n.paramsSubject.next(t.params),function vee(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Zo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function pS(n,e){const t=Zo(n.params,e.params)&&function Iee(n,e){return uu(n,e)&&n.every((t,i)=>Zo(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||pS(n.parent,e.parent))}let mS=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=at,this.activateEvents=new Vn,this.deactivateEvents=new Vn,this.attachEvents=new Vn,this.detachEvents=new Vn,this.parentContexts=me(hg),this.location=me(Ys),this.changeDetector=me(Ph),this.environmentInjector=me(Gs),this.inputBinder=me(mE,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new rte(t,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ae({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[kr]})}return n})();class rte{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Uh?this.route:e===hg?this.childContexts:this.parent.get(e,t)}}const mE=new oe("");let x2=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=nE([i.queryParams,i.params,i.data]).pipe(Ce(([s,o,a],l)=>(a={...s,...o,...a},0===l?R(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const o=function RQ(n){const e=Et(n);if(!e)return null;const t=new Pm(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function fg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function ote(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return fg(n,i,r);return fg(n,i)})}(n,e,t);return new Ha(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>fg(n,a)),o}}const i=function ate(n){return new Uh(new b(n.url),new b(n.params),new b(n.queryParams),new b(n.fragment),new b(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>fg(n,s));return new Ha(i,r)}}const gS="ngNavigationCancelingError";function S2(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=du(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=D2(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function D2(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[gS]=!0,i.cancellationCode=e,t&&(i.url=t),i}function A2(n){return n&&n[gS]}let R2=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=lr({type:n,selectors:[["ng-component"]],standalone:!0,features:[kF],decls:1,vars:0,template:function(i,r){1&i&&on(0,"router-outlet")},dependencies:[mS],encapsulation:2})}return n})();function _S(n){const e=n.children&&n.children.map(_S),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==at&&(t.component=R2),t}function vo(n){return n.outlet||at}function pg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class mte{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),fS(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Bh(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Bh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Bh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=Bh(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new ete(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Xee(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(fS(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),fS(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=pg(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class M2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gE{constructor(e,t){this.component=e,this.route=t}}function gte(n,e,t){const i=n._root;return mg(i,e?e._root:null,t,[i.value])}function jh(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function Oy(n){return null!==ld(n)}(n)?e.get(n):n:i}function mg(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Bh(e);return n.children.forEach(o=>{(function yte(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function vte(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!uu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!uu(n.url,e.url)||!Zo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pS(n,e)||!Zo(n.queryParams,e.queryParams);default:return!pS(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new M2(i)):(s.data=o.data,s._resolvedData=o._resolvedData),mg(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new gE(a.outlet.component,o))}else o&&gg(e,a,r),r.canActivateChecks.push(new M2(i)),mg(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>gg(a,t.getContext(o),r)),r}function gg(n,e,t){const i=Bh(n),r=n.value;Object.entries(i).forEach(([s,o])=>{gg(o,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new gE(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function _g(n){return"function"==typeof n}function P2(n){return n instanceof iE||"EmptyError"===n?.name}const _E=Symbol("INITIAL_VALUE");function zh(){return Ce(n=>nE(n.map(e=>e.pipe(ja(1),ng(_E)))).pipe(ge(e=>{for(const t of e)if(!0!==t){if(t===_E)return _E;if(!1===t||t instanceof Lh)return t}return!0}),Ur(e=>e!==_E),ja(1)))}function k2(n){return function hs(...n){return fs(n)}(Qi(e=>{if(du(e))throw S2(0,e)}),ge(e=>!0===e))}class yE{constructor(e){this.segmentGroup=e||null}}class N2{constructor(e){this.urlTree=e}}function Hh(n){return tg(new yE(n))}function O2(n){return tg(new N2(n))}class Bte{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new B(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return R(i);if(r.numberOfChildren>1||!r.children[at])return tg(new B(4e3,!1));r=r.children[at]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Lh(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new tn(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new B(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const yS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ute(n,e,t,i,r){const s=vS(n,e,t);return s.matched?(i=function cte(n,e){return n.providers&&!n._injector&&(n._injector=ZT(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function Fte(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?R(r.map(o=>{const a=jh(o,n);return zl(function Tte(n){return n&&_g(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(zh(),k2()):R(!0)}(i,e,t).pipe(ge(o=>!0===o?s:{...yS}))):R(s)}function vS(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...yS}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||yee)(t,n,e);if(!r)return{...yS};const s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function F2(n,e,t,i){return t.length>0&&function Hte(n,e,t){return t.some(i=>vE(n,e,i)&&vo(i)!==at)}(n,t,i)?{segmentGroup:new tn(e,zte(i,new tn(t,n.children))),slicedSegments:[]}:0===t.length&&function $te(n,e,t){return t.some(i=>vE(n,e,i))}(n,t,i)?{segmentGroup:new tn(n.segments,jte(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new tn(n.segments,n.children),slicedSegments:t}}function jte(n,e,t,i,r){const s={};for(const o of i)if(vE(n,t,o)&&!r[vo(o)]){const a=new tn([],{});s[vo(o)]=a}return{...r,...s}}function zte(n,e){const t={};t[at]=e;for(const i of n)if(""===i.path&&vo(i)!==at){const r=new tn([],{});t[vo(i)]=r}return t}function vE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Kte{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new Bte(this.urlSerializer,this.urlTree)}noMatchError(e){return new B(4002,!1)}recognize(){const e=F2(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,at).pipe(cu(t=>{if(t instanceof N2)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof yE?this.noMatchError(t):t}),ge(t=>{const i=new pE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},at,this.rootComponentType,null,{}),r=new Ha(i,t),s=new C2("",r),o=function Vee(n,e,t=null,i=null){return h2(d2(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,at).pipe(cu(i=>{throw i instanceof yE?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=I2(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return E(r).pipe(ig(s=>{const o=i.children[s],a=function fte(n,e){const t=n.filter(i=>vo(i)===e);return t.push(...n.filter(i=>vo(i)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),Oh((s,o)=>(s.push(...o),s)),sE(null),function mee(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Ur((r,s)=>n(r,s,i)):Ln,tS(1),t?sE(e):QV(()=>new iE))}(),Ht(s=>{if(null===s)return Hh(i);const o=L2(s);return function Zte(n){n.sort((e,t)=>e.value.outlet===at?-1:t.value.outlet===at?1:e.value.outlet.localeCompare(t.value.outlet))}(o),R(o)}))}processSegment(e,t,i,r,s,o){return E(t).pipe(ig(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,s,o).pipe(cu(l=>{if(l instanceof yE)return R(null);throw l}))),jl(a=>!!a),cu(a=>{if(P2(a))return function qte(n,e,t){return 0===e.length&&!n.children[t]}(i,r,s)?R([]):Hh(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,s,o,a){return function Wte(n,e,t,i){return!!(vo(n)===i||i!==at&&vE(e,t,n))&&("**"===n.path||vS(e,n,t).matched)}(i,r,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o):Hh(r):Hh(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?O2(s):this.applyRedirects.lineralizeSegments(i,s).pipe(Ht(o=>{const a=new tn(o,{});return this.processSegment(e,t,a,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:d}=vS(t,r,s);if(!a)return Hh(t);const f=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,d);return r.redirectTo.startsWith("/")?O2(f):this.applyRedirects.lineralizeSegments(r,f).pipe(Ht(g=>this.processSegment(e,i,t,g.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let a;if("**"===i.path){const l=r.length>0?JV(r).parameters:{};a=R({snapshot:new pE(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,V2(i),vo(i),i.component??i._loadedComponent??null,i,B2(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=Ute(t,i,r,e).pipe(ge(({matched:l,consumedSegments:c,remainingSegments:d,parameters:f})=>l?{snapshot:new pE(c,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,V2(i),vo(i),i.component??i._loadedComponent??null,i,B2(i)),consumedSegments:c,remainingSegments:d}:null));return a.pipe(Ce(l=>null===l?Hh(t):this.getChildConfig(e=i._injector??e,i,r).pipe(Ce(({routes:c})=>{const d=i._loadedInjector??e,{snapshot:f,consumedSegments:g,remainingSegments:_}=l,{segmentGroup:v,slicedSegments:I}=F2(t,g,_,c);if(0===I.length&&v.hasChildren())return this.processChildren(d,c,v).pipe(ge(F=>null===F?null:[new Ha(f,F)]));if(0===c.length&&0===I.length)return R([new Ha(f,[])]);const S=vo(i)===s;return this.processSegment(d,c,v,I,S?at:s,!0).pipe(ge(F=>[new Ha(f,F)]))}))))}getChildConfig(e,t,i){return t.children?R({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?R({routes:t._loadedRoutes,injector:t._loadedInjector}):function Ote(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?R(!0):R(r.map(o=>{const a=jh(o,n);return zl(function Ete(n){return n&&_g(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(zh(),k2())}(e,t,i).pipe(Ht(r=>r?this.configLoader.loadChildren(e,t).pipe(Qi(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Vte(n){return tg(D2(!1,3))}())):R({routes:[],injector:e})}}function Yte(n){const e=n.value.routeConfig;return e&&""===e.path}function L2(n){const e=[],t=new Set;for(const i of n){if(!Yte(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=L2(i.children);e.push(new Ha(i.value,r))}return e.filter(i=>!t.has(i))}function V2(n){return n.data||{}}function B2(n){return n.resolve||{}}function U2(n){return"string"==typeof n.title||null===n.title}function bS(n){return Ce(e=>{const t=n(e);return t?E(t).pipe(ge(()=>e)):R(e)})}const $h=new oe("ROUTES");let ES=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=me(IL)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return R(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=zl(t.loadComponent()).pipe(ge(j2),Qi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),nS(()=>{this.componentLoaders.delete(t)})),r=new YV(i,()=>new z).pipe(eS());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return R({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function ine(n,e,t,i){return zl(n.loadChildren()).pipe(ge(j2),Ht(r=>r instanceof MF||Array.isArray(r)?R(r):E(e.compileModuleAsync(r))),ge(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,!0):(s=r.create(t).injector,o=s.get($h,[],{optional:!0,self:!0}).flat()),{routes:o.map(_S),injector:s}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(nS(()=>{this.childrenLoaders.delete(i)})),o=new YV(s,()=>new z).pipe(eS());return this.childrenLoaders.set(i,o),o}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function j2(n){return function rne(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let bE=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new z,this.transitionAbortSubject=new z,this.configLoader=me(ES),this.environmentInjector=me(Gs),this.urlSerializer=me(og),this.rootContexts=me(hg),this.inputBindingEnabled=null!==me(mE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>R(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new Yee(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new Zee(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new b({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ug,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ur(s=>0!==s.id),ge(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Ce(s=>{this.currentTransition=s;let o=!1,a=!1;return R(s).pipe(Qi(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ce(l=>{const c=l.currentBrowserUrl.toString(),d=!t.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!d&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const g="";return this.events.next(new Vh(l.id,this.urlSerializer.serialize(l.rawUrl),g,0)),l.resolve(null),Tn}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return R(l).pipe(Ce(g=>{const _=this.transitions?.getValue();return this.events.next(new hE(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions?.getValue()?Tn:Promise.resolve(g)}),function Qte(n,e,t,i,r,s){return Ht(o=>function Gte(n,e,t,i,r,s,o="emptyOnly"){return new Kte(n,e,t,i,r,o,s).recognize()}(n,e,t,i,o.extractedUrl,r,s).pipe(ge(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Qi(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const _=new y2(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}));if(d&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:g,extractedUrl:_,source:v,restoredState:I,extras:S}=l,F=new hE(g,this.urlSerializer.serialize(_),v,I);this.events.next(F);const M=w2(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:M,urlAfterRedirects:_,extras:{...S,skipLocationChange:!1,replaceUrl:!1}},R(s)}{const g="";return this.events.next(new Vh(l.id,this.urlSerializer.serialize(l.extractedUrl),g,1)),l.resolve(null),Tn}}),Qi(l=>{const c=new Wee(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),ge(l=>(this.currentTransition=s={...l,guards:gte(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function Ste(n,e){return Ht(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?R({...t,guardsResult:!0}):function Dte(n,e,t,i){return E(n).pipe(Ht(r=>function Nte(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?R(s.map(a=>{const l=pg(e)??r,c=jh(a,l);return zl(function Cte(n){return n&&_g(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,i):l.runInContext(()=>c(n,e,t,i))).pipe(jl())})).pipe(zh()):R(!0)}(r.component,r.route,t,e,i)),jl(r=>!0!==r,!0))}(o,i,r,n).pipe(Ht(a=>a&&function bte(n){return"boolean"==typeof n}(a)?function Ate(n,e,t,i){return E(e).pipe(ig(r=>rE(function Mte(n,e){return null!==n&&e&&e(new Qee(n)),R(!0)}(r.route.parent,i),function Rte(n,e){return null!==n&&e&&e(new Jee(n)),R(!0)}(r.route,i),function kte(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function _te(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>ZV(()=>R(o.guards.map(l=>{const c=pg(o.node)??t,d=jh(l,c);return zl(function Ite(n){return n&&_g(n.canActivateChild)}(d)?d.canActivateChild(i,n):c.runInContext(()=>d(i,n))).pipe(jl())})).pipe(zh())));return R(s).pipe(zh())}(n,r.path,t),function Pte(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return R(!0);const r=i.map(s=>ZV(()=>{const o=pg(e)??t,a=jh(s,o);return zl(function wte(n){return n&&_g(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(jl())}));return R(r).pipe(zh())}(n,r.route,t))),jl(r=>!0!==r,!0))}(i,s,n,e):R(a)),ge(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),Qi(l=>{if(s.guardsResult=l.guardsResult,du(l.guardsResult))throw S2(0,l.guardsResult);const c=new qee(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Ur(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),bS(l=>{if(l.guards.canActivateChecks.length)return R(l).pipe(Qi(c=>{const d=new Gee(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),Ce(c=>{let d=!1;return R(c).pipe(function Xte(n,e){return Ht(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return R(t);let s=0;return E(r).pipe(ig(o=>function Jte(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!U2(r)&&(s[rg]=r.title),function ene(n,e,t,i){const r=function tne(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return R({});const s={};return E(r).pipe(Ht(o=>function nne(n,e,t,i){const r=pg(e)??i,s=jh(n,r);return zl(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(jl(),Qi(a=>{s[o]=a}))),tS(1),function gee(n){return ge(()=>n)}(s),cu(o=>P2(o)?Tn:tg(o)))}(s,n,e,i).pipe(ge(o=>(n._resolvedData=o,n.data=I2(n,t).resolve,r&&U2(r)&&(n.data[rg]=r.title),null)))}(o.route,i,n,e)),Qi(()=>s++),tS(1),Ht(o=>s===r.length?R(t):Tn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Qi({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",2)}}))}),Qi(c=>{const d=new Kee(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),bS(l=>{const c=d=>{const f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Qi(g=>{d.component=g}),ge(()=>{})));for(const g of d.children)f.push(...c(g));return f};return nE(c(l.targetSnapshot.root)).pipe(sE(),ja(1))}),bS(()=>this.afterPreactivation()),ge(l=>{const c=function ste(n,e,t){const i=fg(n,e._root,t?t._root:void 0);return new E2(i,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},s}),Qi(()=>{this.events.next(new lS)}),((n,e,t,i)=>ge(r=>(new mte(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ja(1),Qi({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Hl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),za(this.transitionAbortSubject.pipe(Qi(l=>{throw l}))),nS(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),cu(l=>{if(a=!0,A2(l))this.events.next(new dg(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function lte(n){return A2(n)&&du(n.url)}(l)?this.events.next(new cS(l.url)):s.resolve(!1);else{this.events.next(new fE(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(c){s.reject(c)}}return Tn}))}))}cancelNavigationTransition(t,i,r){const s=new dg(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function z2(n){return n!==ug}let H2=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===at);return i}getResolvedTitleForRoute(t){return t.data[rg]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:function(){return me(sne)},providedIn:"root"})}return n})(),sne=(()=>{class n extends H2{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(O(zV))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),one=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:function(){return me(lne)},providedIn:"root"})}return n})();class ane{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let lne=(()=>{class n extends ane{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const EE=new oe("",{providedIn:"root",factory:()=>({})});let cne=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:function(){return me(une)},providedIn:"root"})}return n})(),une=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var yg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(yg||{});function $2(n,e){n.events.pipe(Ur(t=>t instanceof Hl||t instanceof dg||t instanceof fE||t instanceof Vh),ge(t=>t instanceof Hl||t instanceof Vh?yg.COMPLETE:t instanceof dg&&(0===t.code||1===t.code)?yg.REDIRECTING:yg.FAILED),Ur(t=>t!==yg.REDIRECTING),ja(1)).subscribe(()=>{e()})}function dne(n){throw n}function hne(n,e,t){return e.parse("/")}const fne={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pne={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let dr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=me(EL),this.isNgZoneEnabled=!1,this._events=new z,this.options=me(EE,{optional:!0})||{},this.pendingTasks=me(wL),this.errorHandler=this.options.errorHandler||dne,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||hne,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=me(cne),this.routeReuseStrategy=me(one),this.titleStrategy=me(H2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=me($h,{optional:!0})?.flat()??[],this.navigationTransitions=me(bE),this.urlSerializer=me(og),this.location=me(Bb),this.componentInputBindingEnabled=!!me(mE,{optional:!0}),this.eventsSubscription=new ht,this.isNgZoneEnabled=me(Be)instanceof Be&&Be.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Lh,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=w2(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(W2(i)&&this._events.next(i));if(i instanceof hE)z2(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof Vh)this.rawUrlTree=r.rawUrl;else if(i instanceof y2){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof lS)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof dg)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof cS){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),o={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||z2(r.source)};this.scheduleNavigation(s,ug,null,o,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof fE&&this.restoreHistory(r,!0),i instanceof Hl&&(this.navigated=!0),W2(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ug,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(_S),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let f,d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}null!==d&&(d=this.removeEmptyProps(d));try{f=d2(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),f=this.currentUrlTree.root}return h2(f,t,d,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=du(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,ug,null,i)}navigate(t,i={skipLocationChange:!1}){return function mne(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new B(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...fne}:!1===i?{...pne}:i,du(t))return t2(this.currentUrlTree,t,r);const s=this.parseUrl(t);return t2(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((f,g)=>{a=f,l=g});const d=this.pendingTasks.add();return $2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(f=>Promise.reject(f))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function W2(n){return!(n instanceof lS||n instanceof cS)}let hu=(()=>{class n{constructor(t,i,r,s,o,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new z,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof Hl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,r,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function VN(n,e,t){return function G6(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?LN:UC}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(H(dr),H(Uh),function Nv(n){return function Ve(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(yd(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(Ci(),n)}("tabindex"),H(ka),H(_n),H(au))};static#t=this.\u0275dir=Ae({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&$t("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&i&&mi("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",kh],skipLocationChange:["skipLocationChange","skipLocationChange",kh],replaceUrl:["replaceUrl","replaceUrl",kh],routerLink:"routerLink"},standalone:!0,features:[YO,kr]})}return n})();class q2{}let yne=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ur(t=>t instanceof Hl),ig(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=ZT(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return E(r).pipe(or())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):R(null);const s=r.pipe(Ht(o=>null===o?R(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?E([s,this.loader.loadComponent(i)]).pipe(or()):s})}static#e=this.\u0275fac=function(i){return new(i||n)(O(dr),O(IL),O(Gs),O(q2),O(ES))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const wS=new oe("");let G2=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof hE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hl?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Vh&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof v2&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new v2(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){fT()};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function $a(n,e){return{\u0275kind:n,\u0275providers:e}}function Z2(){const n=me(xi);return e=>{const t=n.get(Vl);if(e!==t.components[0])return;const i=n.get(dr),r=n.get(Y2);1===n.get(IS)&&i.initialNavigation(),n.get(Q2,null,dt.Optional)?.setUpPreloading(),n.get(wS,null,dt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const Y2=new oe("",{factory:()=>new z}),IS=new oe("",{providedIn:"root",factory:()=>1}),Q2=new oe("");function wne(n){return $a(0,[{provide:Q2,useExisting:yne},{provide:q2,useExisting:n}])}const X2=new oe("ROUTER_FORROOT_GUARD"),Cne=[Bb,{provide:og,useClass:iS},dr,hg,{provide:Uh,useFactory:function K2(n){return n.routerState.root},deps:[dr]},ES,[]];function Tne(){return new RL("Router",dr)}let J2=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[Cne,[],{provide:$h,multi:!0,useValue:t},{provide:X2,useFactory:Ane,deps:[[dr,new mm,new Lv]]},{provide:EE,useValue:i||{}},i?.useHash?{provide:au,useClass:OQ}:{provide:au,useClass:aV},{provide:wS,useFactory:()=>{const n=me(iJ),e=me(Be),t=me(EE),i=me(bE),r=me(og);return t.scrollOffset&&n.setOffset(t.scrollOffset),new G2(r,i,n,e,t)}},i?.preloadingStrategy?wne(i.preloadingStrategy).\u0275providers:[],{provide:RL,multi:!0,useFactory:Tne},i?.initialNavigation?Rne(i):[],i?.bindToComponentInputs?$a(8,[x2,{provide:mE,useExisting:x2}]).\u0275providers:[],[{provide:eB,useFactory:Z2},{provide:yx,multi:!0,useExisting:eB}]]}}static forChild(t){return{ngModule:n,providers:[{provide:$h,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||n)(O(X2,8))};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({})}return n})();function Ane(n){return"guarded"}function Rne(n){return["disabled"===n.initialNavigation?$a(3,[{provide:ux,multi:!0,useFactory:()=>{const e=me(dr);return()=>{e.setUpLocationChangeListener()}}},{provide:IS,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?$a(2,[{provide:IS,useValue:0},{provide:ux,multi:!0,deps:[xi],useFactory:e=>{const t=e.get(kQ,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(dr),s=e.get(Y2);$2(r,()=>{i(!0)}),e.get(bE).afterPreactivation=()=>(i(!0),s.closed?R(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const eB=new oe("");var Wh=Ue(932),T=Ue(58),rs=Ue(534),Is=Ue(879),bo=Ue(537),ss=Ue(106);ss.Z.registerVersion("firebase","10.7.0","app-compat"),(0,rs.registerVersion)("firebase","10.7.0","app");class Fne extends ht{constructor(e,t){super()}schedule(e,t=0){return this}}const wE={setInterval(n,e,...t){const{delegate:i}=wE;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=wE;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class IE extends Fne{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return wE.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&wE.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Pe(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const CS={now:()=>(CS.delegate||Date).now(),delegate:void 0};class vg{constructor(e,t=vg.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}vg.now=CS.now;class CE extends vg{constructor(e,t=vg.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const Bne=new class Vne extends CE{}(class Lne extends IE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}}),qh=new CE(IE),Une=qh,Gh=new Nl("ANGULARFIRE2_VERSION");class TE{constructor(){return((n,e)=>{const t=(0,rs.getApps)(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i})(zne)}}const zne="app-check";function Kh(){}class tB{zone;delegate;constructor(e,t=Bne){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){const r=this.zone;return this.delegate.schedule(function(o){r.runGuarded(()=>{e.apply(this,[o])})},t,i)}}class Hne{zone;task=null;constructor(e){this.zone=e}call(e,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Kh,{},Kh,Kh)),t.pipe(Qi({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let xE=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new tB(Zone.current)),this.insideAngular=t.run(()=>new tB(Zone.current,qh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(O(Be))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zh(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function nB(n){return n.pipe(Qn(Zh().outsideAngular))}function ci(n){return function Wne(n){return function(t){return(t=t.lift(new Hne(n.ngZone))).pipe(qi(n.outsideAngular),Qn(n.insideAngular))}}(Zh())(n)}const Gne=["ngOnDestroy"];class iB{constructor(e){return e}}const Yh=new oe("angularfire2.app.options"),Qh=new oe("angularfire2.app.name");function bg(n,e,t){const r="object"==typeof t&&t||{};r.name=r.name||"string"==typeof t&&t||"[DEFAULT]";const o=ss.Z.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>ss.Z.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;Yne("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new iB(o)}const Yne=(n,...e)=>{},Qne={provide:iB,useFactory:bg,deps:[Yh,Be,[new mm,Qh]]};let Xne=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:Yh,useValue:t},{provide:Qh,useValue:i}]}}constructor(t){ss.Z.registerVersion("angularfire",Gh.full,"core"),ss.Z.registerVersion("angularfire",Gh.full,"app-compat"),ss.Z.registerVersion("angular",JN.full,t.toString())}static \u0275fac=function(i){return new(i||n)(O(Ks))};static \u0275mod=xt({type:n});static \u0275inj=Nt({providers:[Qne]})}return n})();function SE(n,e,t,i,r){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function Jne(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(r,o)||(rB("error",`${e} was already initialized on the ${t} Firebase App with different settings.${eie?" You may need to reload as Firebase is not HMR aware.":""}`),rB("warn",{is:r,was:o})),s;{const a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}const eie=typeof module<"u"&&!!module.hot,rB=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Ue(365);class tie extends z{constructor(e=1/0,t=1/0,i=CS){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=t.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}function TS(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,Q({connector:()=>new tie(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function sB(n,e){return x(e)?Ce(()=>n,e):Ce(()=>n)}const xS=new oe("angularfire2.auth.use-emulator"),SS=new oe("angularfire2.auth.settings"),DS=new oe("angularfire2.auth.tenant-id"),AS=new oe("angularfire2.auth.langugage-code"),RS=new oe("angularfire2.auth.use-device-language"),MS=new oe("angularfire.auth.persistence"),PS=(n,e,t,i,r,s,o,a)=>SE(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),i&&(l.tenantId=i),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(const[c,d]of Object.entries(o))l.settings[c]=d;return a&&l.setPersistence(a),l},[t,i,r,s,o,a]);let Eg=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,i,r,s,o,a,l,c,d,f,g,_){const v=new z,I=R(void 0).pipe(Qn(o.outsideAngular),Ce(()=>s.runOutsideAngular(()=>Promise.resolve().then(Ue.bind(Ue,365)))),ge(()=>bg(t,s,i)),ge(S=>PS(S,s,a,c,d,f,l,g)),TS({bufferSize:1,refCount:!1}));if(Xb(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=R(null);else{I.pipe(jl()).subscribe();const S=I.pipe(Ce(V=>V.getRedirectResult().then(Y=>Y,()=>null)),ci,TS({bufferSize:1,refCount:!1})),F=I.pipe(Ce(V=>new Xe(Y=>({unsubscribe:s.runOutsideAngular(()=>V.onAuthStateChanged(de=>Y.next(de),de=>Y.error(de),()=>Y.complete()))})))),M=I.pipe(Ce(V=>new Xe(Y=>({unsubscribe:s.runOutsideAngular(()=>V.onIdTokenChanged(de=>Y.next(de),de=>Y.error(de),()=>Y.complete()))}))));this.authState=S.pipe(sB(F),qi(o.outsideAngular),Qn(o.insideAngular)),this.user=S.pipe(sB(M),qi(o.outsideAngular),Qn(o.insideAngular)),this.idToken=this.user.pipe(Ce(V=>V?E(V.getIdToken()):R(null))),this.idTokenResult=this.user.pipe(Ce(V=>V?E(V.getIdTokenResult()):R(null))),this.credential=C(S,v,this.authState.pipe(Ur(V=>!V))).pipe(ge(V=>V?.user?V:null),qi(o.outsideAngular),Qn(o.insideAngular))}return((n,e,t,i={})=>new Proxy(n,{get:(r,s)=>t.runOutsideAngular(()=>{if(n[s])return i?.spy?.get&&i.spy.get(s,n[s]),n[s];if(Gne.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(d=>{const f=d?.(...c);return i?.spy?.apply&&i.spy.apply(s,c,f),f})})})}))(this,I,s,{spy:{apply:(S,F,M)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&M.then(V=>v.next(V))}}})}static \u0275fac=function(i){return new(i||n)(O(Yh),O(Qh,8),O(Ks),O(Be),O(xE),O(xS,8),O(SS,8),O(DS,8),O(AS,8),O(RS,8),O(MS,8),O(TE,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),iie=(()=>{class n{constructor(){ss.Z.registerVersion("angularfire",Gh.full,"auth-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=xt({type:n});static \u0275inj=Nt({providers:[Eg]})}return n})();function kS(){return ee((n,e)=>{let t,i=!1;n.subscribe(pe(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}var we,J=Ue(861),rie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Eo={},NS=NS||{},it=rie||self;function DE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function wg(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var OS="closure_uid_"+(1e9*Math.random()>>>0),oie=0;function aie(n,e,t){return n.call.apply(n.bind,arguments)}function lie(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function hr(n,e,t){return(hr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aie:lie).apply(null,arguments)}function AE(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Vi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function $l(){this.s=this.s,this.o=this.o}$l.prototype.s=!1,$l.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function sie(n){Object.prototype.hasOwnProperty.call(n,OS)&&n[OS]||(n[OS]=++oie)}(this)},$l.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const oB=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function FS(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function aB(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(DE(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let o=0;o<s;o++)n[r+o]=i[o]}else n.push(i)}}function fr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}fr.prototype.h=function(){this.defaultPrevented=!0};var uie=function(){if(!it.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};it.addEventListener("test",t,e),it.removeEventListener("test",t,e)}catch{}return n}();function Ig(n){return/^[\s\xa0]*$/.test(n)}function RE(){var n=it.navigator;return n&&(n=n.userAgent)?n:""}function Qo(n){return-1!=RE().indexOf(n)}function LS(n){return LS[" "](n),n}LS[" "]=function(){};var BS,n,hie=Qo("Opera"),Xh=Qo("Trident")||Qo("MSIE"),lB=Qo("Edge"),VS=lB||Xh,cB=Qo("Gecko")&&!(-1!=RE().toLowerCase().indexOf("webkit")&&!Qo("Edge"))&&!(Qo("Trident")||Qo("MSIE"))&&!Qo("Edge"),fie=-1!=RE().toLowerCase().indexOf("webkit")&&!Qo("Edge");function uB(){var n=it.document;return n?n.documentMode:void 0}e:{var US="",jS=(n=RE(),cB?/rv:([^\);]+)(\)|;)/.exec(n):lB?/Edge\/([\d\.]+)/.exec(n):Xh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):fie?/WebKit\/(\S+)/.exec(n):hie?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(jS&&(US=jS?jS[1]:""),Xh){var zS=uB();if(null!=zS&&zS>parseFloat(US)){BS=String(zS);break e}}BS=US}var pie=it.document&&Xh&&(uB()||parseInt(BS,10))||void 0;function Cg(n,e){if(fr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(cB){e:{try{LS(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:mie[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Cg.$.h.call(this)}}Vi(Cg,fr);var mie={2:"touch",3:"pen",4:"mouse"};Cg.prototype.h=function(){Cg.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Tg="closure_listenable_"+(1e6*Math.random()|0),gie=0;function _ie(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++gie,this.fa=this.ia=!1}function ME(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function $S(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function hB(n){const e={};for(const t in n)e[t]=n[t];return e}const fB="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pB(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<fB.length;s++)t=fB[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function PE(n){this.src=n,this.g={},this.h=0}function WS(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=oB(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(ME(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function qS(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}PE.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=qS(n,e,i,r);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new _ie(e,this.src,s,!!i,r)).ia=t,n.push(e)),e};var GS="closure_lm_"+(1e6*Math.random()|0),KS={};function mB(n,e,t,i,r){if(i&&i.once)return _B(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)mB(n,e[s],t,i,r);return null}return t=XS(t),n&&n[Tg]?n.O(e,t,wg(i)?!!i.capture:!!i,r):gB(n,e,t,!1,i,r)}function gB(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var o=wg(r)?!!r.capture:!!r,a=YS(n);if(a||(n[GS]=a=new PE(n)),(t=a.add(e,t,i,o,s)).proxy)return t;if(i=function vie(){const e=bie;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)uie||(r=o),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(vB(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function _B(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)_B(n,e[s],t,i,r);return null}return t=XS(t),n&&n[Tg]?n.P(e,t,wg(i)?!!i.capture:!!i,r):gB(n,e,t,!0,i,r)}function yB(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)yB(n,e[s],t,i,r);else i=wg(i)?!!i.capture:!!i,t=XS(t),n&&n[Tg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=qS(s=n.g[e],t,i,r))&&(ME(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=YS(n))&&(e=n.g[e.toString()],n=-1,e&&(n=qS(e,t,i,r)),(t=-1<n?e[n]:null)&&ZS(t))}function ZS(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Tg])WS(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(vB(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=YS(e))?(WS(t,n),0==t.h&&(t.src=null,e[GS]=null)):ME(n)}}}function vB(n){return n in KS?KS[n]:KS[n]="on"+n}function bie(n,e){if(n.fa)n=!0;else{e=new Cg(e,this);var t=n.listener,i=n.la||n.src;n.ia&&ZS(n),n=t.call(i,e)}return n}function YS(n){return(n=n[GS])instanceof PE?n:null}var QS="__closure_events_fn_"+(1e9*Math.random()>>>0);function XS(n){return"function"==typeof n?n:(n[QS]||(n[QS]=function(e){return n.handleEvent(e)}),n[QS])}function Bi(){$l.call(this),this.i=new PE(this),this.S=this,this.J=null}function Xi(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,"string"==typeof e)e=new fr(e,n);else if(e instanceof fr)e.target=e.target||n;else{var r=e;pB(e=new fr(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=kE(o,i,!0,e)&&r}if(r=kE(o=e.g=n,i,!0,e)&&r,r=kE(o,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=kE(o=e.g=t[s],i,!1,e)&&r}function kE(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,l=o.la||o.src;o.ia&&WS(n.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}Vi(Bi,$l),Bi.prototype[Tg]=!0,Bi.prototype.removeEventListener=function(n,e,t,i){yB(this,n,e,t,i)},Bi.prototype.N=function(){if(Bi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)ME(t[i]);delete n.g[e],n.h--}}this.J=null},Bi.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Bi.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var JS=it.JSON.stringify;function wie(){var n=eD;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var bB=new class Eie{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Cie,n=>n.reset());class Cie{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Tie(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function xie(n){it.setTimeout(()=>{throw n},0)}let xg,Sg=!1,eD=new class Iie{constructor(){this.h=this.g=null}add(e,t){const i=bB.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},EB=()=>{const n=it.Promise.resolve(void 0);xg=()=>{n.then(Sie)}};var Sie=()=>{for(var n;n=wie();){try{n.h.call(n.g)}catch(t){xie(t)}var e=bB;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Sg=!1};function NE(n,e){Bi.call(this),this.h=n||1,this.g=e||it,this.j=hr(this.qb,this),this.l=Date.now()}function tD(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function nD(n,e,t){if("function"==typeof n)t&&(n=hr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=hr(n.handleEvent,n)}return 2147483647<Number(e)?-1:it.setTimeout(n,e||0)}function wB(n){n.g=nD(()=>{n.g=null,n.i&&(n.i=!1,wB(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Vi(NE,Bi),(we=NE.prototype).ga=!1,we.T=null,we.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Xi(this,"tick"),this.ga&&(tD(this),this.start()))}},we.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},we.N=function(){NE.$.N.call(this),tD(this),delete this.g};class Die extends $l{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wB(this)}N(){super.N(),this.g&&(it.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dg(n){$l.call(this),this.h=n,this.g={}}Vi(Dg,$l);var IB=[];function CB(n,e,t,i){Array.isArray(t)||(t&&(IB[0]=t.toString()),t=IB);for(var r=0;r<t.length;r++){var s=mB(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function TB(n){$S(n.g,function(e,t){this.g.hasOwnProperty(t)&&ZS(e)},n),n.g={}}function OE(){this.g=!0}function Jh(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Pie(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return JS(t)}catch{return e}}(n,t)+(i?" "+i:"")})}Dg.prototype.N=function(){Dg.$.N.call(this),TB(this)},Dg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},OE.prototype.Ea=function(){this.g=!1},OE.prototype.info=function(){};var pu={},xB=null;function FE(){return xB=xB||new Bi}function SB(n){fr.call(this,pu.Ta,n)}function Ag(n){const e=FE();Xi(e,new SB(e))}function DB(n,e){fr.call(this,pu.STAT_EVENT,n),this.stat=e}function jr(n){const e=FE();Xi(e,new DB(e,n))}function AB(n,e){fr.call(this,pu.Ua,n),this.size=e}function Rg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return it.setTimeout(function(){n()},e)}pu.Ta="serverreachability",Vi(SB,fr),pu.STAT_EVENT="statevent",Vi(DB,fr),pu.Ua="timingevent",Vi(AB,fr);var LE={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},RB={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function iD(){}function PB(){}iD.prototype.h=null;var oD,Mg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rD(){fr.call(this,"d")}function sD(){fr.call(this,"c")}function VE(){}function Pg(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new Dg(this),this.P=kie,this.V=new NE(n=VS?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new kB}function kB(){this.i=null,this.g="",this.h=!1}Vi(rD,fr),Vi(sD,fr),Vi(VE,iD),VE.prototype.g=function(){return new XMLHttpRequest},VE.prototype.i=function(){return{}},oD=new VE;var kie=45e3,NB={},aD={};function lD(n,e,t){n.L=1,n.A=zE(Wa(e)),n.u=t,n.S=!0,OB(n,null)}function OB(n,e){n.G=Date.now(),kg(n),n.B=Wa(n.A);var t=n.B,i=n.W;Array.isArray(i)||(i=[String(i)]),WB(t.i,"t",i),n.o=0,t=n.l.J,n.h=new kB,n.g=mU(n.l,t?e:null,!n.u),0<n.O&&(n.M=new Die(hr(n.Pa,n,n.g),n.O)),CB(n.U,n.g,"readystatechange",n.nb),e=n.I?hB(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),Ag(),function Aie(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var f=d.split("_");o=2<=f.length&&"type"==f[1]?o+(d+"=")+c+"&":o+(d+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.v,n.B,n.m,n.W,n.u)}function FB(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function LB(n,e,t){let r,i=!0;for(;!n.J&&n.o<t.length;){if(r=Nie(n,t),r==aD){4==e&&(n.s=4,jr(14),i=!1),Jh(n.j,n.m,null,"[Incomplete Response]");break}if(r==NB){n.s=4,jr(15),Jh(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Jh(n.j,n.m,r,null),cD(n,r)}FB(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,jr(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),gD(e),e.M=!0,jr(11))):(Jh(n.j,n.m,t,"[Invalid Chunked Response]"),mu(n),Ng(n))}function Nie(n,e){var t=n.o,i=e.indexOf("\n",t);return-1==i?aD:(t=Number(e.substring(t,i)),isNaN(t)?NB:(i+=1)+t>e.length?aD:(e=e.slice(i,i+t),n.o=i+t,e))}function kg(n){n.Y=Date.now()+n.P,VB(n,n.P)}function VB(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=Rg(hr(n.lb,n),e)}function BE(n){n.C&&(it.clearTimeout(n.C),n.C=null)}function Ng(n){0==n.l.H||n.J||dU(n.l,n)}function mu(n){BE(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,tD(n.V),TB(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function cD(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||uD(t.i,n)))if(!n.K&&uD(t.i,n)&&3==t.H){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;KE(t),qE(t)}mD(t),jr(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&0==t.A&&!t.v&&(t.v=Rg(hr(t.ib,t),6e3));if(1>=KB(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else _u(t,11)}else if((n.K||t.g==n)&&KE(t),!Ig(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(t.V=c[0],c=c[1],2==t.H)if("c"==c[0]){t.K=c[1],t.pa=c[2];const d=c[3];null!=d&&(t.ra=d,t.l.info("VER="+t.ra));const f=c[4];null!=f&&(t.Ga=f,t.l.info("SVER="+t.Ga));const g=c[5];null!=g&&"number"==typeof g&&0<g&&(t.L=i=1.5*g,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const _=n.g;if(_){const v=_.g?_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var s=i.i;s.g||-1==v.indexOf("spdy")&&-1==v.indexOf("quic")&&-1==v.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(dD(s,s.h),s.h=null))}if(i.F){const I=_.g?_.g.getResponseHeader("X-HTTP-Session-Id"):null;I&&(i.Da=I,Mn(i.I,i.F,I))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((i=t).wa=pU(i,i.J?i.pa:null,i.Y),o.K){ZB(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.C&&(BE(a),kg(a)),i.g=o}else cU(i);0<t.j.length&&GE(t)}else"stop"!=c[0]&&"close"!=c[0]||_u(t,7);else 3==t.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?_u(t,7):pD(t):"noop"!=c[0]&&t.h&&t.h.Aa(c),t.A=0)}Ag()}catch{}}function BB(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(DE(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Fie(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(DE(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function Oie(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(DE(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}(we=Pg.prototype).setTimeout=function(n){this.P=n},we.nb=function(n){n=n.target;const e=this.M;e&&3==Xo(n)?e.l():this.Pa(n)},we.Pa=function(n){try{if(n==this.g)e:{const d=Xo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>d)&&(3!=d||VS||this.g&&(this.h.h||this.g.ja()||iU(this.g)))){this.J||4!=d||7==e||Ag(),BE(this);var t=this.g.da();this.ca=t;t:if(FB(this)){var i=iU(this.g);n="";var r=i.length,s=4==Xo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){mu(this),Ng(this);var o="";break t}this.h.i=new it.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function Rie(n,e,t,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,d,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ig(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.s=3,jr(12),mu(this),Ng(this);break e}Jh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cD(this,t)}this.S?(LB(this,d,o),VS&&this.i&&3==d&&(CB(this.U,this.V,"tick",this.mb),this.V.start())):(Jh(this.j,this.m,o,null),cD(this,o)),4==d&&mu(this),this.i&&!this.J&&(4==d?dU(this.l,this):(this.i=!1,kg(this)))}else(function ere(n){const e={};n=(n.g&&2<=Xo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(Ig(n[i]))continue;var t=Tie(n[i]);const r=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[r]||[];e[r]=s,s.push(t)}!function yie(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(i){return i.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.s=3,jr(12)):(this.s=0,jr(13)),mu(this),Ng(this)}}}catch{}},we.mb=function(){if(this.g){var n=Xo(this.g),e=this.g.ja();this.o<e.length&&(BE(this),LB(this,n,e),this.i&&4!=n&&kg(this))}},we.cancel=function(){this.J=!0,mu(this)},we.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function Mie(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Ag(),jr(17)),mu(this),this.s=2,Ng(this)):VB(this,this.Y-n)};var UB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gu(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof gu){this.h=n.h,UE(this,n.j),this.s=n.s,this.g=n.g,jE(this,n.m),this.l=n.l;var e=n.i,t=new Lg;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),jB(this,t),this.o=n.o}else n&&(e=String(n).match(UB))?(this.h=!1,UE(this,e[1]||"",!0),this.s=Og(e[2]||""),this.g=Og(e[3]||"",!0),jE(this,e[4]),this.l=Og(e[5]||"",!0),jB(this,e[6]||"",!0),this.o=Og(e[7]||"")):(this.h=!1,this.i=new Lg(null,this.h))}function Wa(n){return new gu(n)}function UE(n,e,t){n.j=t?Og(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function jE(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function jB(n,e,t){e instanceof Lg?(n.i=e,function Hie(n,e){e&&!n.j&&(Wl(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(HB(this,i),WB(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Fg(e,jie)),n.i=new Lg(e,n.h))}function Mn(n,e,t){n.i.set(e,t)}function zE(n){return Mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Og(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Fg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Vie),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Vie(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}gu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Fg(e,zB,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Fg(e,zB,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Fg(t,"/"==t.charAt(0)?Uie:Bie,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Fg(t,zie)),n.join("")};var zB=/[#\/\?@]/g,Bie=/[#\?:]/g,Uie=/[#\?]/g,jie=/[#\?@]/g,zie=/#/g;function Lg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Wl(n){n.g||(n.g=new Map,n.h=0,n.i&&function Lie(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function HB(n,e){Wl(n),e=ef(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function $B(n,e){return Wl(n),e=ef(n,e),n.g.has(e)}function WB(n,e,t){HB(n,e),0<t.length&&(n.i=null,n.g.set(ef(n,e),FS(t)),n.h+=t.length)}function ef(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function qB(n){this.l=n||Wie,n=it.PerformanceNavigationTiming?0<(n=it.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(it.g&&it.g.Ka&&it.g.Ka()&&it.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(we=Lg.prototype).add=function(n,e){Wl(this),this.i=null,n=ef(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},we.forEach=function(n,e){Wl(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},we.ta=function(){Wl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},we.Z=function(n){Wl(this);let e=[];if("string"==typeof n)$B(this,n)&&(e=e.concat(this.g.get(ef(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},we.set=function(n,e){return Wl(this),this.i=null,$B(this,n=ef(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},we.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},we.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),n.push(r)}}return this.i=n.join("&")};var Wie=10;function GB(n){return!!n.h||!!n.g&&n.g.size>=n.j}function KB(n){return n.h?1:n.g?n.g.size:0}function uD(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function dD(n,e){n.g?n.g.add(e):n.h=e}function ZB(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function YB(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return FS(n.i)}qB.prototype.cancel=function(){if(this.i=YB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var qie=class{stringify(n){return it.JSON.stringify(n,void 0)}parse(n){return it.JSON.parse(n,void 0)}};function Gie(){this.g=new qie}function Kie(n,e,t){const i=t||"";try{BB(n,function(r,s){let o=r;wg(r)&&(o=JS(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function HE(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Vg(n){this.l=n.ec||null,this.j=n.ob||!1}function $E(n,e){Bi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=hD,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vi(Vg,iD),Vg.prototype.g=function(){return new $E(this.l,this.j)},Vg.prototype.i=function(n){return function(){return n}}({}),Vi($E,Bi);var hD=0;function QB(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Bg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ug(n)}function Ug(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(we=$E.prototype).open=function(n,e){if(this.readyState!=hD)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ug(this)},we.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||it).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},we.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bg(this)),this.readyState=hD},we.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ug(this)),this.g&&(this.readyState=3,Ug(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof it.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;QB(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},we.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Bg(this):Ug(this),3==this.readyState&&QB(this)}},we.Za=function(n){this.g&&(this.response=this.responseText=n,Bg(this))},we.Ya=function(n){this.g&&(this.response=n,Bg(this))},we.ka=function(){this.g&&Bg(this)},we.setRequestHeader=function(n,e){this.v.append(n,e)},we.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},we.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty($E.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Yie=it.JSON.parse;function ti(n){Bi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=XB,this.L=this.M=!1}Vi(ti,Bi);var XB="",Qie=/^https?$/i,Xie=["POST","PUT"];function JB(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,eU(n),WE(n)}function eU(n){n.F||(n.F=!0,Xi(n,"complete"),Xi(n,"error"))}function tU(n){if(n.h&&typeof NS<"u"&&(!n.C[1]||4!=Xo(n)||2!=n.da()))if(n.v&&4==Xo(n))nD(n.La,0,n);else if(Xi(n,"readystatechange"),4==Xo(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===o){var r=String(n.I).match(UB)[1]||null;!r&&it.self&&it.self.location&&(r=it.self.location.protocol.slice(0,-1)),i=!Qie.test(r?r.toLowerCase():"")}t=i}if(t)Xi(n,"complete"),Xi(n,"success");else{n.m=6;try{var s=2<Xo(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",eU(n)}}finally{WE(n)}}}function WE(n,e){if(n.g){nU(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Xi(n,"ready");try{t.onreadystatechange=i}catch{}}}function nU(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(it.clearTimeout(n.A),n.A=null)}function Xo(n){return n.g?n.g.readyState:0}function iU(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case XB:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function rU(n){let e="";return $S(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function fD(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=rU(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Mn(n,e,t))}function jg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function sU(n){this.Ga=0,this.j=[],this.l=new OE,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=jg("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=jg("baseRetryDelayMs",5e3,n),this.hb=jg("retryDelaySeedMs",1e4,n),this.eb=jg("forwardChannelMaxRetries",2,n),this.xa=jg("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new qB(n&&n.concurrentRequestLimit),this.Ja=new Gie,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function pD(n){if(oU(n),3==n.H){var e=n.W++,t=Wa(n.I);if(Mn(t,"SID",n.K),Mn(t,"RID",e),Mn(t,"TYPE","terminate"),zg(n,t),(e=new Pg(n,n.l,e)).L=2,e.A=zE(Wa(t)),t=!1,it.navigator&&it.navigator.sendBeacon)try{t=it.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&it.Image&&((new Image).src=e.A,t=!0),t||(e.g=mU(e.l,null),e.g.ha(e.A)),e.G=Date.now(),kg(e)}fU(n)}function qE(n){n.g&&(gD(n),n.g.cancel(),n.g=null)}function oU(n){qE(n),n.u&&(it.clearTimeout(n.u),n.u=null),KE(n),n.i.cancel(),n.m&&("number"==typeof n.m&&it.clearTimeout(n.m),n.m=null)}function GE(n){if(!GB(n.i)&&!n.m){n.m=!0;var e=n.Na;xg||EB(),Sg||(xg(),Sg=!0),eD.add(e,n),n.C=0}}function aU(n,e){var t;t=e?e.m:n.W++;const i=Wa(n.I);Mn(i,"SID",n.K),Mn(i,"RID",t),Mn(i,"AID",n.V),zg(n,i),n.o&&n.s&&fD(i,n.o,n.s),t=new Pg(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=lU(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),dD(n.i,t),lD(t,i,e)}function zg(n,e){n.na&&$S(n.na,function(t,i){Mn(e,i,t)}),n.h&&BB({},function(t,i){Mn(e,i,t)})}function lU(n,e,t){t=Math.min(n.j.length,t);var i=n.h?hr(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=r[l].g;const d=r[l].map;if(c-=s,0>c)s=Math.max(0,r[l].g-100),a=!1;else try{Kie(d,o,"req"+c+"_")}catch{i&&i(d)}}if(a){i=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function cU(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;xg||EB(),Sg||(xg(),Sg=!0),eD.add(e,n),n.A=0}}function mD(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Rg(hr(n.Ma,n),hU(n,n.A)),n.A++,0))}function gD(n){null!=n.B&&(it.clearTimeout(n.B),n.B=null)}function uU(n){n.g=new Pg(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Wa(n.wa);Mn(e,"RID","rpc"),Mn(e,"SID",n.K),Mn(e,"AID",n.V),Mn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Mn(e,"TO",n.qa),Mn(e,"TYPE","xmlhttp"),zg(n,e),n.o&&n.s&&fD(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=zE(Wa(e)),t.u=null,t.S=!0,OB(t,n)}function KE(n){null!=n.v&&(it.clearTimeout(n.v),n.v=null)}function dU(n,e){var t=null;if(n.g==e){KE(n),gD(n),n.g=null;var i=2}else{if(!uD(n.i,e))return;t=e.F,ZB(n.i,e),i=1}if(0!=n.H)if(e.i)if(1==i){t=e.u?e.u.length:0,e=Date.now()-e.G;var r=n.C;Xi(i=FE(),new AB(i,t)),GE(n)}else cU(n);else if(3==(r=e.s)||0==r&&0<e.ca||!(1==i&&function tre(n,e){return!(KB(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Rg(hr(n.Na,n,e),hU(n,n.C)),n.C++,0)))}(n,e)||2==i&&mD(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:_u(n,5);break;case 4:_u(n,10);break;case 3:_u(n,6);break;default:_u(n,2)}}function hU(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function _u(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var i=hr(n.pb,n);t||(t=new gu("//www.google.com/images/cleardot.gif"),it.location&&"http"==it.location.protocol||UE(t,"https"),zE(t)),function Zie(n,e){const t=new OE;if(it.Image){const i=new Image;i.onload=AE(HE,t,i,"TestLoadImage: loaded",!0,e),i.onerror=AE(HE,t,i,"TestLoadImage: error",!1,e),i.onabort=AE(HE,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=AE(HE,t,i,"TestLoadImage: timeout",!1,e),it.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else jr(2);n.H=0,n.h&&n.h.za(e),fU(n),oU(n)}function fU(n){if(n.H=0,n.ma=[],n.h){const e=YB(n.i);(0!=e.length||0!=n.j.length)&&(aB(n.ma,e),aB(n.ma,n.j),n.i.i.length=0,FS(n.j),n.j.length=0),n.h.ya()}}function pU(n,e,t){var i=t instanceof gu?Wa(t):new gu(t);if(""!=i.g)e&&(i.g=e+"."+i.g),jE(i,i.m);else{var r=it.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new gu(null);i&&UE(s,i),e&&(s.g=e),r&&jE(s,r),t&&(s.l=t),i=s}return e=n.Da,(t=n.F)&&e&&Mn(i,t,e),Mn(i,"VER",n.ra),zg(n,i),i}function mU(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ti(n.Ha&&!n.va?new Vg({ob:t}):n.va)).Oa(n.J),e}function gU(){}function ZE(){if(Xh&&!(10<=Number(pie)))throw Error("Environmental error: no available transport.")}function Cs(n,e){Bi.call(this),this.g=new sU(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Ig(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ig(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new tf(this)}function _U(n){rD.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function yU(){sD.call(this),this.status=1}function tf(n){this.g=n}function wo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function _D(n,e,t){t||(t=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;o=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(t^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(t|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(t|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(t|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(r^(t|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~t))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function nn(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==e||(t[r]=s,i=!1)}this.g=t}(we=ti.prototype).Oa=function(n){this.M=n},we.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():oD.g(),this.C=function MB(n){return n.h||(n.h=n.i())}(this.u?this.u:oD),this.g.onreadystatechange=hr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void JB(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=it.FormData&&n instanceof it.FormData,!(0<=oB(Xie,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{nU(this),0<this.B&&((this.L=function Jie(n){return Xh&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hr(this.ua,this)):this.A=nD(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){JB(this,s)}},we.ua=function(){typeof NS<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xi(this,"timeout"),this.abort(8))},we.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Xi(this,"complete"),Xi(this,"abort"),WE(this))},we.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),WE(this,!0)),ti.$.N.call(this)},we.La=function(){this.s||(this.G||this.v||this.l?tU(this):this.kb())},we.kb=function(){tU(this)},we.isActive=function(){return!!this.g},we.da=function(){try{return 2<Xo(this)?this.g.status:-1}catch{return-1}},we.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},we.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Yie(e)}},we.Ia=function(){return this.m},we.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(we=sU.prototype).ra=8,we.H=1,we.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new Pg(this,this.l,n);let s=this.s;if(this.U&&(s?(s=hB(s),pB(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var i=this.j[t];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=lU(this,r,e),Mn(t=Wa(this.I),"RID",n),Mn(t,"CVER",22),this.F&&Mn(t,"X-HTTP-Session-Id",this.F),zg(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(rU(s)))+"&"+e:this.o&&fD(t,this.o,s)),dD(this.i,r),this.bb&&Mn(t,"TYPE","init"),this.P?(Mn(t,"$req",e),Mn(t,"SID","null"),r.aa=!0,lD(r,t,null)):lD(r,t,e),this.H=2}}else 3==this.H&&(n?aU(this,n):0==this.j.length||GB(this.i)||aU(this))},we.Ma=function(){if(this.u=null,uU(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Rg(hr(this.jb,this),n)}},we.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,jr(10),qE(this),uU(this))},we.ib=function(){null!=this.v&&(this.v=null,qE(this),mD(this),jr(19))},we.pb=function(n){n?(this.l.info("Successfully pinged google.com"),jr(2)):(this.l.info("Failed to ping google.com"),jr(1))},we.isActive=function(){return!!this.h&&this.h.isActive(this)},(we=gU.prototype).Ba=function(){},we.Aa=function(){},we.za=function(){},we.ya=function(){},we.isActive=function(){return!0},we.Va=function(){},ZE.prototype.g=function(n,e){return new Cs(n,e)},Vi(Cs,Bi),Cs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;jr(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=pU(n,null,n.Y),GE(n)},Cs.prototype.close=function(){pD(this.g)},Cs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=JS(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&GE(e)},Cs.prototype.N=function(){this.g.h=null,delete this.j,pD(this.g),delete this.g,Cs.$.N.call(this)},Vi(_U,rD),Vi(yU,sD),Vi(tf,gU),tf.prototype.Ba=function(){Xi(this.g,"a")},tf.prototype.Aa=function(n){Xi(this.g,new _U(n))},tf.prototype.za=function(n){Xi(this.g,new yU)},tf.prototype.ya=function(){Xi(this.g,"b")},Vi(wo,function nre(){this.blockSize=-1}),wo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},wo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=t;)_D(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){_D(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){_D(this,i),r=0;break}}this.h=r,this.i+=e},wo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};var ire={};function yD(n){return-128<=n&&128>n?function die(n,e){var t=ire;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new nn([0|e],0>e?-1:0)}):new nn([0|n],0>n?-1:0)}function Jo(n){if(isNaN(n)||!isFinite(n))return nf;if(0>n)return Ji(Jo(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=vD;return new nn(e,0)}var vD=4294967296,nf=yD(0),bD=yD(1),bU=yD(16777216);function qa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Js(n){return-1==n.h}function Ji(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new nn(t,~n.h).add(bD)}function YE(n,e){return n.add(Ji(e))}function QE(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Hg(n,e){this.g=n,this.h=e}function XE(n,e){if(qa(e))throw Error("division by zero");if(qa(n))return new Hg(nf,nf);if(Js(n))return e=XE(Ji(n),e),new Hg(Ji(e.g),Ji(e.h));if(Js(e))return e=XE(n,Ji(e)),new Hg(Ji(e.g),e.h);if(30<n.g.length){if(Js(n)||Js(e))throw Error("slowDivide_ only works with positive integers.");for(var t=bD,i=e;0>=i.X(n);)t=EU(t),i=EU(i);var r=rf(t,1),s=rf(i,1);for(i=rf(i,2),t=rf(t,2);!qa(i);){var o=s.add(i);0>=o.X(n)&&(r=r.add(t),s=o),i=rf(i,1),t=rf(t,1)}return e=YE(n,r.R(e)),new Hg(r,e)}for(r=nf;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,i-48),o=(s=Jo(t)).R(e);Js(o)||0<o.X(n);)o=(s=Jo(t-=i)).R(e);qa(s)&&(s=bD),r=r.add(s),n=YE(n,o)}return new Hg(r,n)}function EU(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new nn(t,n.h)}function rf(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new nn(r,n.h)}(we=nn.prototype).ea=function(){if(Js(this))return-Ji(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:vD+i)*e,e*=vD}return n},we.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(qa(this))return"0";if(Js(this))return"-"+Ji(this).toString(n);for(var e=Jo(Math.pow(n,6)),t=this,i="";;){var r=XE(t,e).g,s=((0<(t=YE(t,r.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(qa(t=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},we.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},we.X=function(n){return Js(n=YE(this,n))?-1:qa(n)?0:1},we.abs=function(){return Js(this)?Ji(this):this},we.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=o>>>16,t[r]=(o&=65535)<<16|(s&=65535)}return new nn(t,-2147483648&t[t.length-1]?-1:0)},we.R=function(n){if(qa(this)||qa(n))return nf;if(Js(this))return Js(n)?Ji(this).R(Ji(n)):Ji(Ji(this).R(n));if(Js(n))return Ji(this.R(Ji(n)));if(0>this.X(bU)&&0>n.X(bU))return Jo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=n.D(r)>>>16,l=65535&n.D(r);t[2*i+2*r]+=o*l,QE(t,2*i+2*r),t[2*i+2*r+1]+=s*l,QE(t,2*i+2*r+1),t[2*i+2*r+1]+=o*a,QE(t,2*i+2*r+1),t[2*i+2*r+2]+=s*a,QE(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new nn(t,0)},we.gb=function(n){return XE(this,n).h},we.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new nn(t,this.h&n.h)},we.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new nn(t,this.h|n.h)},we.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new nn(t,this.h^n.h)},ZE.prototype.createWebChannel=ZE.prototype.g,Cs.prototype.send=Cs.prototype.u,Cs.prototype.open=Cs.prototype.m,Cs.prototype.close=Cs.prototype.close,LE.NO_ERROR=0,LE.TIMEOUT=8,LE.HTTP_ERROR=6,RB.COMPLETE="complete",PB.EventType=Mg,Mg.OPEN="a",Mg.CLOSE="b",Mg.ERROR="c",Mg.MESSAGE="d",Bi.prototype.listen=Bi.prototype.O,ti.prototype.listenOnce=ti.prototype.P,ti.prototype.getLastError=ti.prototype.Sa,ti.prototype.getLastErrorCode=ti.prototype.Ia,ti.prototype.getStatus=ti.prototype.da,ti.prototype.getResponseJson=ti.prototype.Wa,ti.prototype.getResponseText=ti.prototype.ja,ti.prototype.send=ti.prototype.ha,ti.prototype.setWithCredentials=ti.prototype.Oa,wo.prototype.digest=wo.prototype.l,wo.prototype.reset=wo.prototype.reset,wo.prototype.update=wo.prototype.j,nn.prototype.add=nn.prototype.add,nn.prototype.multiply=nn.prototype.R,nn.prototype.modulo=nn.prototype.gb,nn.prototype.compare=nn.prototype.X,nn.prototype.toNumber=nn.prototype.ea,nn.prototype.toString=nn.prototype.toString,nn.prototype.getBits=nn.prototype.D,nn.fromNumber=Jo,nn.fromString=function vU(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ji(vU(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Jo(Math.pow(e,8)),i=nf,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),o=parseInt(n.substring(r,r+s),e);8>s?(s=Jo(Math.pow(e,s)),i=i.R(s).add(Jo(o))):i=(i=i.R(t)).add(Jo(o))}return i};var rre=Eo.createWebChannelTransport=function(){return new ZE},sre=Eo.getStatEventTarget=function(){return FE()},ED=Eo.ErrorCode=LE,ore=Eo.EventType=RB,are=Eo.Event=pu,wU=Eo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},JE=(Eo.FetchXmlHttpFactory=Vg,Eo.WebChannel=PB),lre=Eo.XhrIo=ti,cre=Eo.Md5=wo,sf=Eo.Integer=nn;const IU="@firebase/firestore";class Ui{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ui.UNAUTHENTICATED=new Ui(null),Ui.GOOGLE_CREDENTIALS=new Ui("google-credentials-uid"),Ui.FIRST_PARTY=new Ui("first-party-uid"),Ui.MOCK_USER=new Ui("mock-user");let af="10.7.0";const ql=new Is.Yd("@firebase/firestore");function lf(){return ql.logLevel}function ce(n,...e){if(ql.logLevel<=Is.in.DEBUG){const t=e.map(wD);ql.debug(`Firestore (${af}): ${n}`,...t)}}function ui(n,...e){if(ql.logLevel<=Is.in.ERROR){const t=e.map(wD);ql.error(`Firestore (${af}): ${n}`,...t)}}function os(n,...e){if(ql.logLevel<=Is.in.WARN){const t=e.map(wD);ql.warn(`Firestore (${af}): ${n}`,...t)}}function wD(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Se(n="Unexpected state"){const e=`FIRESTORE (${af}) INTERNAL ASSERTION FAILED: `+n;throw ui(e),new Error(e)}function Oe(n,e){n||Se()}function ye(n,e){return n}const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends T.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class CU{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hre{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ui.UNAUTHENTICATED))}shutdown(){}}class fre{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class pre{constructor(e){this.t=e,this.currentUser=Ui.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let o=new Ri;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ri,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable((0,J.Z)(function*(){yield c.promise,yield s(i.currentUser)}))},l=c=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ri)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Oe("string"==typeof i.accessToken),new CU(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Oe(null===e||"string"==typeof e),new Ui(e)}}class mre{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ui.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gre{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new mre(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ui.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _re{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const i=s=>{null!=s.error&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe("string"==typeof t.token),this.R=t.token,new TU(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function yre(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class xU{static newId(){const t=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=yre(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[s]%62))}return i}}function tt(n,e){return n<e?-1:n>e?1:0}function cf(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function SU(n){return n+"\0"}class Bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new re(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bn.fromMillis(Date.now())}static fromDate(e){return Bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Bn(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Le(e)}static min(){return new Le(new Bn(0,0))}static max(){return new Le(new Bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class $g{constructor(e,t,i){void 0===t?t=0:t>e.length&&Se(),void 0===i?i=e.length-t:i>e.length-t&&Se(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===$g.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $g?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Vt extends $g{construct(e,t,i){return new Vt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new re(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Vt(t)}static emptyPath(){return new Vt([])}}const vre=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends $g{construct(e,t,i){return new Pn(e,t,i)}static isValidIdentifier(e){return vre.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Pn(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new re(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if("\\"===a){if(r+1===e.length)throw new re(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new re(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else"`"===a?(o=!o,r++):"."!==a||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new re(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(t)}static emptyPath(){return new Pn([])}}class ve{constructor(e){this.path=e}static fromPath(e){return new ve(Vt.fromString(e))}static fromName(e){return new ve(Vt.fromString(e).popFirst(5))}static empty(){return new ve(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Vt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new Vt(e.slice()))}}class uf{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function ID(n){return n.fields.find(e=>2===e.kind)}function yu(n){return n.fields.filter(e=>2!==e.kind)}uf.UNKNOWN_ID=-1;class vu{constructor(e,t){this.fieldPath=e,this.kind=t}}class df{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new df(0,Ts.min())}}function DU(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Le.fromTimestamp(1e9===i?new Bn(t+1,0):new Bn(t,i));return new Ts(r,ve.empty(),e)}function AU(n){return new Ts(n.readTime,n.key,-1)}class Ts{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ts(Le.min(),ve.empty(),-1)}static max(){return new Ts(Le.max(),ve.empty(),-1)}}function CD(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ve.comparator(n.documentKey,e.documentKey),0!==t?t:tt(n.largestBatchId,e.largestBatchId))}const RU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Gl(n){return TD.apply(this,arguments)}function TD(){return TD=(0,J.Z)(function*(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==RU)throw n;ce("LocalStore","Unexpectedly lost primary lease")}),TD.apply(this,arguments)}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):U.reject(t)}static resolve(e){return new U((t,i)=>{t(e)})}static reject(e){return new U((t,i)=>{i(e)})}static waitFor(e){return new U((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=U.resolve(!1);for(const i of e)t=t.next(r=>r?U.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new U((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(d=>{o[c]=d,++a,a===s&&i(o)},d=>r(d))}})}static doWhile(e,t){return new U((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class e0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Ri,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Wg(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=xD(i.target.error);this.V.reject(new Wg(e,r))}}static open(e,t,i,r){try{return new e0(t,e.transaction(r,i))}catch(s){throw new Wg(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ce("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ire(t)}}class Io{constructor(e,t,i){this.name=e,this.version=t,this.p=i,12.2===Io.S((0,T.z$)())&&ui("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ce("SimpleDb","Removing database:",e),bu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,T.hl)())return!1;if(Io.C())return!0;const e=(0,T.z$)(),t=Io.S(e),i=0<t&&t<10,r=Io.v(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(e){var t=this;return(0,J.Z)(function*(){return t.db||(ce("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{i(o.target.result)},s.onblocked=()=>{r(new Wg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;r("VersionError"===a.name?new re(G.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new re(G.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Wg(e,a))},s.onupgradeneeded=o=>{ce("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.N(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{ce("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,J.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.O(e);const l=e0.open(s.db,e,o?"readonly":"readwrite",i),c=r(l).next(d=>(l.g(),d)).catch(d=>(l.abort(d),U.reject(d))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,d="FirebaseError"!==c.name&&a<3;if(ce("SimpleDb","Transaction failed with error:",c.message,"Retrying:",d),s.close(),!d)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class wre{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return bu(this.k.delete())}}class Wg extends re{constructor(e,t){super(G.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Kl(n){return"IndexedDbTransactionError"===n.name}class Ire{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(ce("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(ce("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),bu(i)}add(e){return ce("SimpleDb","ADD",this.store.name,e,e),bu(this.store.add(e))}get(e){return bu(this.store.get(e)).next(t=>(void 0===t&&(t=null),ce("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ce("SimpleDb","DELETE",this.store.name,e),bu(this.store.delete(e))}count(){return ce("SimpleDb","COUNT",this.store.name),bu(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.G(r,(o,a)=>{s.push(a)}).next(()=>s)}{const r=this.store.getAll(i.range);return new U((s,o)=>{r.onerror=a=>{o(a.target.error)},r.onsuccess=a=>{s(a.target.result)}})}}j(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new U((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}H(e,t){ce("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.J=!1;const r=this.cursor(i);return this.G(r,(s,o,a)=>a.delete())}Y(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.G(r,t)}Z(e){const t=this.cursor({});return new U((i,r)=>{t.onerror=s=>{const o=xD(s.target.error);r(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}G(e,t){const i=[];return new U((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const l=new wre(a),c=t(a.primaryKey,a.value,l);if(c instanceof U){const d=c.catch(f=>(l.done(),U.reject(f)));i.push(d)}l.isDone?r():null===l.$?a.continue():a.continue(l.$)}}).next(()=>U.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bu(n){return new U((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=xD(i.target.error);t(r)}})}let PU=!1;function xD(n){const e=Io.S((0,T.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return PU||(PU=!0,setTimeout(()=>{throw i},0)),i}}return n}class Cre{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;ce("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,J.Z)(function*(){t.task=null;try{ce("IndexBackiller",`Documents written: ${yield t.X.te()}`)}catch(i){Kl(i)?ce("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Gl(i)}yield t.ee(6e4)}))}}class Tre{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,J.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.ne(i,e))})()}ne(e,t){const i=new Set;let r=t,s=!0;return U.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!i.has(o))return ce("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>t-r)}re(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(r,s)).next(a=>(ce("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ie(e,t){let i=e;return t.changes.forEach((r,s)=>{const o=AU(s);CD(o,i)>0&&(i=o)}),new Ts(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let xs=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function qg(n){return null==n}function Gg(n){return 0===n&&1/n==-1/0}function kU(n){return"number"==typeof n&&Number.isInteger(n)&&!Gg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function pr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=NU(e)),e=xre(n.get(t),e);return NU(e)}function xre(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function NU(n){return n+"\x01\x01"}function ea(n){const e=n.length;if(Oe(e>=2),2===e)return Oe("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Vt.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Se(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===r.length?l=a:(r+=a,l=r,r=""),i.push(l);break;case"\x10":r+=n.substring(s,o),r+="\0";break;case"\x11":r+=n.substring(s,o+1);break;default:Se()}s=o+2}return new Vt(i)}const OU=["userId","batchId"];function t0(n,e){return[n,pr(e)]}function FU(n,e,t){return[n,pr(e),t]}const Sre={},Dre=["prefixPath","collectionGroup","readTime","documentId"],Are=["prefixPath","collectionGroup","documentId"],Rre=["collectionGroup","readTime","prefixPath","documentId"],Mre=["canonicalId","targetId"],Pre=["targetId","path"],kre=["path","targetId"],Nre=["collectionId","parent"],Ore=["indexId","uid"],Fre=["uid","sequenceNumber"],Lre=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Vre=["indexId","uid","orderedDocumentKey"],Bre=["userId","collectionPath","documentId"],Ure=["userId","collectionPath","largestBatchId"],jre=["userId","collectionGroup","largestBatchId"],LU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zre=[...LU,"documentOverlays"],VU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],BU=VU,Hre=[...BU,"indexConfiguration","indexState","indexEntries"];class SD extends MU{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function ji(n,e){const t=ye(n);return Io.M(t.ae,e)}function UU(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jU(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class En{constructor(e,t){this.comparator=e,this.root=t||er.EMPTY}insert(e,t){return new En(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,er.BLACK,null,null))}remove(e){return new En(this.comparator,this.root.remove(e,this.comparator).copy(null,null,er.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new n0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new n0(this.root,e,this.comparator,!1)}getReverseIterator(){return new n0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new n0(this.root,e,this.comparator,!0)}}class n0{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class er{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??er.RED,this.left=r??er.EMPTY,this.right=s??er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new er(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return er.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}}er.EMPTY=null,er.RED=!0,er.BLACK=!1,er.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,t,i,r,s){return this}insert(e,t,i){return new er(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class an{constructor(e){this.comparator=e,this.data=new En(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zU(this.data.getIterator())}getIteratorFrom(e){return new zU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new an(this.comparator);return t.data=e,t}}class zU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hf(n){return n.hasNext()?n.getNext():void 0}class as{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new as([])}unionWith(e){let t=new an(Pn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new as(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cf(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class HU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new HU("Invalid base64 string: "+s):s}}(e);return new Mi(t)}static fromUint8Array(e){const t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new Mi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mi.EMPTY_BYTE_STRING=new Mi("");const Wre=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yl(n){if(Oe(!!n),"string"==typeof n){let e=0;const t=Wre.exec(n);if(Oe(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ni(n.seconds),nanos:ni(n.nanos)}}function ni(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ga(n){return"string"==typeof n?Mi.fromBase64String(n):Mi.fromUint8Array(n)}function r0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function s0(n){const e=n.mapValue.fields.__previous_value__;return r0(e)?s0(e):e}function Kg(n){const e=Yl(n.mapValue.fields.__local_write_time__.timestampValue);return new Bn(e.seconds,e.nanos)}class qre{constructor(e,t,i,r,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ql{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ql("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ql&&e.projectId===this.projectId&&e.database===this.database}}const Xl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},o0={nullValue:"NULL_VALUE"};function Jl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?r0(n)?4:GU(n)?9007199254740991:10:Se()}function ta(n,e){if(n===e)return!0;const t=Jl(n);if(t!==Jl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Kg(n).isEqual(Kg(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Yl(r.timestampValue),a=Yl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ga(n.bytesValue).isEqual(Ga(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return ni(r.geoPointValue.latitude)===ni(s.geoPointValue.latitude)&&ni(r.geoPointValue.longitude)===ni(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ni(r.integerValue)===ni(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=ni(r.doubleValue),a=ni(s.doubleValue);return o===a?Gg(o)===Gg(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return cf(n.arrayValue.values||[],e.arrayValue.values||[],ta);case 10:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(UU(o)!==UU(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!ta(o[l],a[l])))return!1;return!0}(n,e);default:return Se()}var s}function Zg(n,e){return void 0!==(n.values||[]).find(t=>ta(t,e))}function ec(n,e){if(n===e)return 0;const t=Jl(n),i=Jl(e);if(t!==i)return tt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return tt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ni(s.integerValue||s.doubleValue),l=ni(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return $U(n.timestampValue,e.timestampValue);case 4:return $U(Kg(n),Kg(e));case 5:return tt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Ga(s),l=Ga(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=tt(a[c],l[c]);if(0!==d)return d}return tt(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=tt(ni(s.latitude),ni(o.latitude));return 0!==a?a:tt(ni(s.longitude),ni(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=ec(a[c],l[c]);if(d)return d}return tt(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Xl.mapValue&&o===Xl.mapValue)return 0;if(s===Xl.mapValue)return 1;if(o===Xl.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const g=tt(l[f],d[f]);if(0!==g)return g;const _=ec(a[l[f]],c[d[f]]);if(0!==_)return _}return tt(l.length,d.length)}(n.mapValue,e.mapValue);default:throw Se()}}function $U(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return tt(n,e);const t=Yl(n),i=Yl(e),r=tt(t.seconds,i.seconds);return 0!==r?r:tt(t.nanos,i.nanos)}function ff(n){return DD(n)}function DD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Yl(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ga(n.bytesValue).toBase64():"referenceValue"in n?ve.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(const s of t.values||[])r?r=!1:i+=",",i+=DD(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${DD(t.fields[o])}`;return r+"}"}(n.mapValue):Se()}function Eu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function AD(n){return!!n&&"integerValue"in n}function Yg(n){return!!n&&"arrayValue"in n}function WU(n){return!!n&&"nullValue"in n}function qU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function l0(n){return!!n&&"mapValue"in n}function Qg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zl(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Qg(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function GU(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Gre(n){return"nullValue"in n?o0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Eu(Ql.empty(),ve.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Se()}function Kre(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Eu(Ql.empty(),ve.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Xl:Se()}function KU(n,e){const t=ec(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ZU(n,e){const t=ec(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class tr{constructor(e){this.value=e}static empty(){return new tr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!l0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qg(t)}setAll(e){let t=Pn.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=Qg(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());l0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];l0(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Zl(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new tr(Qg(this.value))}}function YU(n){const e=[];return Zl(n.fields,(t,i)=>{const r=new Pn([t]);if(l0(i)){const s=YU(i.mapValue).fields;if(0===s.length)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new as(e)}class kn{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new kn(e,0,Le.min(),Le.min(),Le.min(),tr.empty(),0)}static newFoundDocument(e,t,i,r){return new kn(e,1,t,Le.min(),i,r,0)}static newNoDocument(e,t){return new kn(e,2,t,Le.min(),Le.min(),tr.empty(),0)}static newUnknownDocument(e,t){return new kn(e,3,t,Le.min(),Le.min(),tr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tc{constructor(e,t){this.position=e,this.inclusive=t}}function QU(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(i=s.field.isKeyField()?ve.comparator(ve.fromName(o.referenceValue),t.key):ec(o,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function XU(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ta(n.position[t],e.position[t]))return!1;return!0}class Xg{constructor(e,t="asc"){this.field=e,this.dir=t}}function Zre(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class JU{}class Pt extends JU{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new Yre(e,t,i):"array-contains"===t?new Jre(e,i):"in"===t?new sj(e,i):"not-in"===t?new ese(e,i):"array-contains-any"===t?new tse(e,i):new Pt(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new Qre(e,i):new Xre(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ec(t,this.value)):null!==t&&Jl(this.value)===Jl(t)&&this.matchesComparison(ec(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rn extends JU{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new rn(e,t)}matches(e){return pf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function pf(n){return"and"===n.op}function RD(n){return"or"===n.op}function MD(n){return ej(n)&&pf(n)}function ej(n){for(const e of n.filters)if(e instanceof rn)return!1;return!0}function PD(n){if(n instanceof Pt)return n.field.canonicalString()+n.op.toString()+ff(n.value);if(MD(n))return n.filters.map(e=>PD(e)).join(",");{const e=n.filters.map(t=>PD(t)).join(",");return`${n.op}(${e})`}}function tj(n,e){return n instanceof Pt?(i=n,(r=e)instanceof Pt&&i.op===r.op&&i.field.isEqual(r.field)&&ta(i.value,r.value)):n instanceof rn?function(i,r){return r instanceof rn&&i.op===r.op&&i.filters.length===r.filters.length&&i.filters.reduce((s,o,a)=>s&&tj(o,r.filters[a]),!0)}(n,e):void Se();var i,r}function nj(n,e){const t=n.filters.concat(e);return rn.create(t,n.op)}function ij(n){return n instanceof Pt?`${(t=n).field.canonicalString()} ${t.op} ${ff(t.value)}`:n instanceof rn?function(t){return t.op.toString()+" {"+t.getFilters().map(ij).join(" ,")+"}"}(n):"Filter";var t}class Yre extends Pt{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class Qre extends Pt{constructor(e,t){super(e,"in",t),this.keys=rj(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Xre extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=rj(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rj(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>ve.fromName(i.referenceValue))}class Jre extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yg(t)&&Zg(t.arrayValue,this.value)}}class sj extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zg(this.value.arrayValue,t)}}class ese extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zg(this.value.arrayValue,t)}}class tse extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Zg(this.value.arrayValue,i))}}class nse{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function kD(n,e=null,t=[],i=[],r=null,s=null,o=null){return new nse(n,e,t,i,r,s,o)}function wu(n){const e=ye(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>PD(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(s=i).field.canonicalString()+s.dir;var s}).join(","),qg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ff(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ff(i)).join(",")),e.ce=t}return e.ce}function Jg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Zre(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tj(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!XU(n.startAt,e.startAt)&&XU(n.endAt,e.endAt)}function c0(n){return ve.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function u0(n,e){return n.filters.filter(t=>t instanceof Pt&&t.field.isEqual(e))}function oj(n,e,t){let i=o0,r=!0;for(const s of u0(n,e)){let o=o0,a=!0;switch(s.op){case"<":case"<=":o=Gre(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=o0}KU({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];KU({value:i,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}function aj(n,e,t){let i=Xl,r=!0;for(const s of u0(n,e)){let o=Xl,a=!0;switch(s.op){case">=":case">":o=Kre(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Xl}ZU({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];ZU({value:i,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}class Ka{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null}}function lj(n,e,t,i,r,s,o,a){return new Ka(n,e,t,i,r,s,o,a)}function mf(n){return new Ka(n)}function cj(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ND(n){return null!==n.collectionGroup}function gf(n){const e=ye(n);if(null===e.le){e.le=[];const t=new Set;for(const s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new an(Pn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new Xg(s,i))}),t.has(Pn.keyField().canonicalString())||e.le.push(new Xg(Pn.keyField(),i))}return e.le}function zr(n){const e=ye(n);return e.he||(e.he=function uj(n,e){if("F"===n.limitType)return kD(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>new Xg(r.field,"desc"===r.dir?"asc":"desc"));const t=n.endAt?new tc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new tc(n.startAt.position,n.startAt.inclusive):null;return kD(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}(e,gf(n))),e.he}function OD(n,e){const t=n.filters.concat([e]);return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function d0(n,e,t){return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function e_(n,e){return Jg(zr(n),zr(e))&&n.limitType===e.limitType}function dj(n){return`${wu(zr(n))}|lt:${n.limitType}`}function _f(n){return`Query(target=${function(t){let i=t.path.canonicalString();return null!==t.collectionGroup&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>ij(r)).join(", ")}]`),qg(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>ff(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>ff(r)).join(",")),`Target(${i})`}(zr(n))}; limitType=${n.limitType})`}function t_(n,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return null!==i.collectionGroup?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ve.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(const s of gf(i))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((i=n).startAt&&!function(o,a,l){const c=QU(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,gf(i),r)||i.endAt&&!function(o,a,l){const c=QU(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,gf(i),r)));var i,r}function hj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fj(n){return(e,t)=>{let i=!1;for(const r of gf(n)){const s=ise(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function ise(n,e,t){const i=n.field.isKeyField()?ve.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?ec(l,c):Se()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Se()}}class Za{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Zl(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return jU(this.inner)}size(){return this.innerSize}}const rse=new En(ve.comparator);function ls(){return rse}const pj=new En(ve.comparator);function n_(...n){let e=pj;for(const t of n)e=e.insert(t.key,t);return e}function mj(n){let e=pj;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function na(){return i_()}function gj(){return i_()}function i_(){return new Za(n=>n.toString(),(n,e)=>n.isEqual(e))}const sse=new En(ve.comparator),ose=new an(ve.comparator);function lt(...n){let e=ose;for(const t of n)e=e.add(t);return e}const ase=new an(tt);function FD(){return ase}function _j(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gg(e)?"-0":e}}function yj(n){return{integerValue:""+n}}function vj(n,e){return kU(e)?yj(e):_j(n,e)}class h0{constructor(){this._=void 0}}function lse(n,e,t){return n instanceof yf?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&r0(s)&&(s=s0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Iu?Ej(n,e):n instanceof Cu?wj(n,e):function(r,s){const o=bj(r,s),a=Ij(o)+Ij(r.Ie);return AD(o)&&AD(r.Ie)?yj(a):_j(r.serializer,a)}(n,e)}function cse(n,e,t){return n instanceof Iu?Ej(n,e):n instanceof Cu?wj(n,e):t}function bj(n,e){return n instanceof vf?AD(i=e)||(s=i)&&"doubleValue"in s?e:{integerValue:0}:null;var i,s}class yf extends h0{}class Iu extends h0{constructor(e){super(),this.elements=e}}function Ej(n,e){const t=Cj(e);for(const i of n.elements)t.some(r=>ta(r,i))||t.push(i);return{arrayValue:{values:t}}}class Cu extends h0{constructor(e){super(),this.elements=e}}function wj(n,e){let t=Cj(e);for(const i of n.elements)t=t.filter(r=>!ta(r,i));return{arrayValue:{values:t}}}class vf extends h0{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Ij(n){return ni(n.integerValue||n.doubleValue)}function Cj(n){return Yg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class r_{constructor(e,t){this.field=e,this.transform=t}}class dse{constructor(e,t){this.version=e,this.transformResults=t}}class Un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function f0(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class p0{}function Tj(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ef(n.key,Un.none()):new bf(n.key,n.data,Un.none());{const t=n.data,i=tr.empty();let r=new an(Pn.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?i.delete(s):i.set(s,o),r=r.add(s)}return new Ya(n.key,i,new as(r.toArray()),Un.none())}}function hse(n,e,t){n instanceof bf?function(r,s,o){const a=r.value.clone(),l=Dj(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ya?function(r,s,o){if(!f0(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Dj(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Sj(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function s_(n,e,t,i){return n instanceof bf?function(s,o,a,l){if(!f0(s.precondition,o))return a;const c=s.value.clone(),d=Aj(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof Ya?function(s,o,a,l){if(!f0(s.precondition,o))return a;const c=Aj(s.fieldTransforms,l,o),d=o.data;return d.setAll(Sj(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,i):(a=t,f0(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function fse(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=bj(i.transform,r||null);null!=s&&(null===t&&(t=tr.empty()),t.set(i.field,s))}return t||null}function xj(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(i=n.fieldTransforms)&&void 0===r||i&&r&&cf(i,r,(s,o)=>function use(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(i=n.transform)instanceof Iu&&r instanceof Iu||i instanceof Cu&&r instanceof Cu?cf(i.elements,r.elements,ta):i instanceof vf&&r instanceof vf?ta(i.Ie,r.Ie):i instanceof yf&&r instanceof yf);var i,r}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var i,r}class bf extends p0{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ya extends p0{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Sj(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Dj(n,e,t){const i=new Map;Oe(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,cse(o,a,t[r]))}return i}function Aj(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,lse(s,o,e))}return i}class Ef extends p0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LD extends p0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class VD{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&hse(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=s_(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=s_(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=gj();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=Tj(o,a);null!==l&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Le.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),lt())}isEqual(e){return this.batchId===e.batchId&&cf(this.mutations,e.mutations,(t,i)=>xj(t,i))&&cf(this.baseMutations,e.baseMutations,(t,i)=>xj(t,i))}}class BD{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Oe(e.mutations.length===i.length);let r=sse;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new BD(e,t,i,r)}}class UD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mse{constructor(e,t){this.count=e,this.unchangedNames=t}}var _i,Bt;function Rj(n){switch(n){default:return Se();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function Mj(n){if(void 0===n)return ui("GRPC error has no .code"),G.UNKNOWN;switch(n){case _i.OK:return G.OK;case _i.CANCELLED:return G.CANCELLED;case _i.UNKNOWN:return G.UNKNOWN;case _i.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case _i.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case _i.INTERNAL:return G.INTERNAL;case _i.UNAVAILABLE:return G.UNAVAILABLE;case _i.UNAUTHENTICATED:return G.UNAUTHENTICATED;case _i.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case _i.NOT_FOUND:return G.NOT_FOUND;case _i.ALREADY_EXISTS:return G.ALREADY_EXISTS;case _i.PERMISSION_DENIED:return G.PERMISSION_DENIED;case _i.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case _i.ABORTED:return G.ABORTED;case _i.OUT_OF_RANGE:return G.OUT_OF_RANGE;case _i.UNIMPLEMENTED:return G.UNIMPLEMENTED;case _i.DATA_LOSS:return G.DATA_LOSS;default:return Se()}}(Bt=_i||(_i={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";function Pj(){return new TextEncoder}const gse=new sf([4294967295,4294967295],0);function kj(n){const e=Pj().encode(n),t=new cre;return t.update(e),new Uint8Array(t.digest())}function Nj(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new sf([t,i],0),new sf([r,s],0)]}class jD{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new o_(`Invalid padding: ${t}`);if(i<0)throw new o_(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new o_(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new o_(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=sf.fromNumber(this.Te)}de(e,t,i){let r=e.add(t.multiply(sf.fromNumber(i)));return 1===r.compare(gse)&&(r=new sf([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=kj(e),[i,r]=Nj(t);for(let s=0;s<this.hashCount;s++){const o=this.de(i,r,s);if(!this.Ae(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new jD(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const t=kj(e),[i,r]=Nj(t);for(let s=0;s<this.hashCount;s++){const o=this.de(i,r,s);this.Re(o)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class o_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class a_{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,l_.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new a_(Le.min(),r,new En(tt),ls(),lt())}}class l_{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new l_(i,t,lt(),lt(),lt())}}class g0{constructor(e,t,i,r){this.Ve=e,this.removedTargetIds=t,this.key=i,this.me=r}}class Oj{constructor(e,t){this.targetId=e,this.fe=t}}class Fj{constructor(e,t,i=Mi.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class Lj{constructor(){this.ge=0,this.pe=Bj(),this.ye=Mi.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=lt(),t=lt(),i=lt();return this.pe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Se()}}),new l_(this.ye,this.we,e,t,i)}Fe(){this.Se=!1,this.pe=Bj()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Oe(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class _se{constructor(e){this.Le=e,this.ke=new Map,this.qe=ls(),this.Qe=Vj(),this.Ke=new En(tt)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(t);break;case 3:this.je(t)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.Ce(e.resumeToken));break;default:Se()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((i,r)=>{this.je(r)&&t(r)})}Je(e){const t=e.targetId,i=e.fe.count,r=this.Ye(t);if(r){const s=r.target;if(c0(s))if(0===i){const o=new ve(s.path);this.We(t,o,kn.newNoDocument(o,Le.min()))}else Oe(1===i);else{const o=this.Ze(t);if(o!==i){const a=this.Xe(e),l=a?this.et(a,e,o):1;0!==l&&(this.He(t),this.Ke=this.Ke.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t;let o,a;try{o=Ga(i).toUint8Array()}catch(l){if(l instanceof HU)return os("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new jD(o,r,s)}catch(l){return os(l instanceof o_?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Te?null:a}et(e,t,i){return t.fe.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),r++)}),r}it(e){const t=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&c0(a.target)){const l=new ve(a.target.path);null!==this.qe.get(l)||this.st(o,l)||this.We(o,l,kn.newNoDocument(l,e))}s.De&&(t.set(o,s.ve()),s.Fe())}});let i=lt();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(i=i.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const r=new a_(e,t,this.Ke,this.qe,i);return this.qe=ls(),this.Qe=Vj(),this.Ke=new En(tt),r}Ue(e,t){if(!this.je(e))return;const i=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,i),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),i&&(this.qe=this.qe.insert(t,i))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Lj,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new an(tt),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||ce("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Lj),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Vj(){return new En(ve.comparator)}function Bj(){return new En(ve.comparator)}const yse={asc:"ASCENDING",desc:"DESCENDING"},vse={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bse={and:"AND",or:"OR"};class Ese{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zD(n,e){return n.useProto3Json||qg(e)?e:{value:e}}function wf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uj(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wse(n,e){return wf(n,e.toTimestamp())}function di(n){return Oe(!!n),Le.fromTimestamp(function(t){const i=Yl(t);return new Bn(i.seconds,i.nanos)}(n))}function HD(n,e){return(i=n,new Vt(["projects",i.projectId,"databases",i.database])).child("documents").child(e).canonicalString();var i}function jj(n){const e=Vt.fromString(n);return Oe(Yj(e)),e}function c_(n,e){return HD(n.databaseId,e.path)}function ia(n,e){const t=jj(e);if(t.get(1)!==n.databaseId.projectId)throw new re(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new re(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(Hj(t))}function $D(n,e){return HD(n.databaseId,e)}function zj(n){const e=jj(n);return 4===e.length?Vt.emptyPath():Hj(e)}function u_(n){return new Vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Hj(n){return Oe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function $j(n,e,t){return{name:c_(n,e),fields:t.value.mapValue.fields}}function Wj(n,e,t){const i=ia(n,e.name),r=di(e.updateTime),s=e.createTime?di(e.createTime):Le.min(),o=new tr({mapValue:{fields:e.fields}}),a=kn.newFoundDocument(i,r,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function d_(n,e){let t;if(e instanceof bf)t={update:$j(n,e.key,e.value)};else if(e instanceof Ef)t={delete:c_(n,e.key)};else if(e instanceof Ya)t={update:$j(n,e.key,e.data),updateMask:Rse(e.fieldMask)};else{if(!(e instanceof LD))return Se();t={verify:c_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof yf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Iu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof vf)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Se()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:wse(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Se()),t;var s}function WD(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Un.updateTime(di(s.updateTime)):void 0!==s.exists?Un.exists(s.exists):Un.none():Un.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let l=null;"setToServerValue"in a?(Oe("REQUEST_TIME"===a.setToServerValue),l=new yf):"appendMissingElements"in a?l=new Iu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Cu(a.removeAllFromArray.values||[]):"increment"in a?l=new vf(o,a.increment):Se();const c=Pn.fromServerFormat(a.fieldPath);return new r_(c,l)}(n,r)):[];var s;if(e.update){const r=ia(n,e.update.name),s=new tr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new as((e.updateMask.fieldPaths||[]).map(d=>Pn.fromServerFormat(d)));return new Ya(r,s,o,t,i)}return new bf(r,s,t,i)}if(e.delete){const r=ia(n,e.delete);return new Ef(r,t)}if(e.verify){const r=ia(n,e.verify);return new LD(r,t)}return Se()}function qj(n,e){return{documents:[$D(n,e.path)]}}function qD(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=$D(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=$D(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(l){if(0!==l.length)return Zj(rn.create(l,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const s=function(l){if(0!==l.length)return l.map(c=>{return{field:nc((f=c).field),direction:Sse(f.dir)};var f})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=zD(n,e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),t;var l}function Gj(n){let e=zj(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Oe(1===i);const d=t.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(f){const g=Kj(f);return g instanceof rn&&MD(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(g=>{return new Xg(If((v=g).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction));var v}));let a=null;t.limit&&(a=function(f){let g;return g="object"==typeof f?f.value:f,qg(g)?null:g}(t.limit));let l=null;var f;t.startAt&&(l=new tc((f=t.startAt).values||[],!!f.before));let c=null;return t.endAt&&(c=function(f){return new tc(f.values||[],!f.before)}(t.endAt)),lj(e,r,o,s,a,"F",l,c)}function Kj(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=If(t.unaryFilter.field);return Pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=If(t.unaryFilter.field);return Pt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=If(t.unaryFilter.field);return Pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=If(t.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Se()}}(n):void 0!==n.fieldFilter?Pt.create(If((t=n).fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return rn.create(t.compositeFilter.filters.map(i=>Kj(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Se()}}(t.compositeFilter.op))}(n):Se();var t}function Sse(n){return yse[n]}function Dse(n){return vse[n]}function Ase(n){return bse[n]}function nc(n){return{fieldPath:n.canonicalString()}}function If(n){return Pn.fromServerFormat(n.fieldPath)}function Zj(n){return n instanceof Pt?function(t){if("=="===t.op){if(qU(t.value))return{unaryFilter:{field:nc(t.field),op:"IS_NAN"}};if(WU(t.value))return{unaryFilter:{field:nc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(qU(t.value))return{unaryFilter:{field:nc(t.field),op:"IS_NOT_NAN"}};if(WU(t.value))return{unaryFilter:{field:nc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nc(t.field),op:Dse(t.op),value:t.value}}}(n):n instanceof rn?function(t){const i=t.getFilters().map(r=>Zj(r));return 1===i.length?i[0]:{compositeFilter:{op:Ase(t.op),filters:i}}}(n):Se()}function Rse(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Yj(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Qa{constructor(e,t,i,r,s=Le.min(),o=Le.min(),a=Mi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Qa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Qj{constructor(e){this.ut=e}}function Xj(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:c_(s=n.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:wf(s,o.version.toTimestamp()),createTime:wf(s,o.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Tu(e.version)};else{if(!e.isUnknownDocument())return Se();i.unknownDocument={path:t.path.toArray(),version:Tu(e.version)}}var s,o;return i}function _0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Tu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xu(n){const e=new Bn(n.seconds,n.nanoseconds);return Le.fromTimestamp(e)}function Su(n,e){const t=(e.baseMutations||[]).map(s=>WD(n.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const i=e.mutations.map(s=>WD(n.ut,s)),r=Bn.fromMillis(e.localWriteTimeMs);return new VD(e.batchId,r,t,i)}function h_(n){const e=xu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?xu(n.lastLimboFreeSnapshotVersion):Le.min();let i;return i=void 0!==n.query.documents?(Oe(1===(s=n.query).documents.length),zr(mf(zj(s.documents[0])))):function(s){return zr(Gj(s))}(n.query),new Qa(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Mi.fromBase64String(n.resumeToken));var s}function Jj(n,e){const t=Tu(e.snapshotVersion),i=Tu(e.lastLimboFreeSnapshotVersion);let r;r=c0(e.target)?qj(n.ut,e.target):qD(n.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function GD(n){const e=Gj({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?d0(e,e.limit,"L"):e}function KD(n,e){return new UD(e.largestBatchId,WD(n.ut,e.overlayMutation))}function ez(n,e){const t=e.path.lastSegment();return[n,pr(e.path.popLast()),t]}function tz(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Tu(i.readTime),documentKey:pr(i.documentKey.path),largestBatchId:i.largestBatchId}}class Pse{getBundleMetadata(e,t){return nz(e).get(t).next(i=>{if(i)return{id:(s=i).bundleId,createTime:xu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return nz(e).put({bundleId:(r=t).id,createTime:Tu(di(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return iz(e).get(t).next(i=>{if(i)return{name:(s=i).name,query:GD(s.bundledQuery),readTime:xu(s.readTime)};var s})}saveNamedQuery(e,t){return iz(e).put({name:(r=t).name,readTime:Tu(di(r.readTime)),bundledQuery:r.bundledQuery});var r}}function nz(n){return ji(n,"bundles")}function iz(n){return ji(n,"namedQueries")}class y0{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){return new y0(e,t.uid||"")}getOverlay(e,t){return f_(e).get(ez(this.userId,t)).next(i=>i?KD(this.serializer,i):null)}getOverlays(e,t){const i=na();return U.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,o)=>{const a=new UD(t,o);r.push(this.lt(e,a))}),U.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(o=>r.add(pr(o.getCollectionPath())));const s=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(f_(e).H("collectionPathOverlayIndex",a))}),U.waitFor(s)}getOverlaysForCollection(e,t,i){const r=na(),s=pr(t),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return f_(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=KD(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=na();let o;const a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return f_(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{const f=KD(this.serializer,c);s.size()<r||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}lt(e,t){return f_(e).put(function(r,s,o){const[a,l,c]=ez(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:d_(r.ut,o.mutation)}}(this.serializer,this.userId,t))}}function f_(n){return ji(n,"documentOverlays")}class Du{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(ni(e.integerValue));else if("doubleValue"in e){const i=ni(e.doubleValue);isNaN(i)?this.Tt(t,13):(this.Tt(t,15),Gg(i)?t.Et(0):t.Et(i))}else if("timestampValue"in e){const i=e.timestampValue;this.Tt(t,20),"string"==typeof i?t.dt(i):(t.dt(`${i.seconds||""}`),t.Et(i.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Ga(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Tt(t,45),t.Et(i.latitude||0),t.Et(i.longitude||0)}else"mapValue"in e?GU(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Se()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const i=e.fields||{};this.Tt(t,55);for(const r of Object.keys(i))this.At(r,t),this.Pt(i[r],t)}yt(e,t){const i=e.values||[];this.Tt(t,50);for(const r of i)this.Pt(r,t)}ft(e,t){this.Tt(t,37),ve.fromName(e).path.forEach(i=>{this.Tt(t,60),this.wt(i,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function kse(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function rz(n){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const o=kse(255&i[s]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}Du.St=new Du;class Nse{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Dt(i.value),i=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ft(i.value),i=t.next();this.Mt()}xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Dt(i);else if(i<2048)this.Dt(960|i>>>6),this.Dt(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i);else{const r=t.codePointAt(0);this.Dt(240|r>>>18),this.Dt(128|63&r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r)}}this.Ct()}Ot(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const r=t.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Nt(e){const t=this.Bt(e),i=rz(t);this.Lt(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),i=rz(t);this.Lt(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class Ose{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class Fse{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class p_{constructor(){this.Wt=new Nse,this.Gt=new Ose(this.Wt),this.zt=new Fse(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Au{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Au(this.indexId,this.documentKey,this.arrayValue,i)}}function ic(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=sz(n.arrayValue,e.arrayValue),0!==t?t:(t=sz(n.directionalValue,e.directionalValue),0!==t?t:ve.comparator(n.documentKey,e.documentKey)))}function sz(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class oz{constructor(e){this.Jt=new an((t,i)=>Pn.comparator(t.field,i.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const i=t;i.isInequality()?this.Jt=this.Jt.add(i):this.Zt.push(i)}}get Xt(){return this.Jt.size>1}en(e){if(Oe(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=ID(e);if(void 0!==t&&!this.tn(t))return!1;const i=yu(e);let r=new Set,s=0,o=0;for(;s<i.length&&this.tn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!r.has(a.field.canonicalString())){const l=i[s];if(!this.nn(a,l)||!this.rn(this.Yt[o++],l))return!1}++s}for(;s<i.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],i[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new an(Pn.comparator);const t=[];for(const i of this.Zt)if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)t.push(new vu(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new vu(i.field,0))}for(const i of this.Yt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new vu(i.field,"asc"===i.dir?0:1)));return new uf(uf.UNKNOWN_ID,this.collectionId,t,df.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function az(n){var e,t;if(Oe(n instanceof Pt||n instanceof rn),n instanceof Pt){if(n instanceof sj){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Pt.create(n.field,"==",s)))||[];return rn.create(r,"or")}return n}const i=n.filters.map(r=>az(r));return rn.create(i,n.op)}function Lse(n){if(0===n.getFilters().length)return[];const e=QD(az(n));return Oe(lz(e)),ZD(e)||YD(e)?[e]:e.getFilters()}function ZD(n){return n instanceof Pt}function YD(n){return n instanceof rn&&MD(n)}function lz(n){return ZD(n)||YD(n)||function(t){if(t instanceof rn&&RD(t)){for(const i of t.getFilters())if(!ZD(i)&&!YD(i))return!1;return!0}return!1}(n)}function QD(n){if(Oe(n instanceof Pt||n instanceof rn),n instanceof Pt)return n;if(1===n.filters.length)return QD(n.filters[0]);const e=n.filters.map(i=>QD(i));let t=rn.create(e,n.op);return t=v0(t),lz(t)?t:(Oe(t instanceof rn),Oe(pf(t)),Oe(t.filters.length>1),t.filters.reduce((i,r)=>XD(i,r)))}function XD(n,e){let t;return Oe(n instanceof Pt||n instanceof rn),Oe(e instanceof Pt||e instanceof rn),t=n instanceof Pt?e instanceof Pt?rn.create([n,e],"and"):cz(n,e):e instanceof Pt?cz(e,n):function(r,s){if(Oe(r.filters.length>0&&s.filters.length>0),pf(r)&&pf(s))return nj(r,s.getFilters());const o=RD(r)?r:s,a=RD(r)?s:r,l=o.filters.map(c=>XD(c,a));return rn.create(l,"or")}(n,e),v0(t)}function cz(n,e){if(pf(e))return nj(e,n.getFilters());{const t=e.filters.map(i=>XD(n,i));return rn.create(t,"or")}}function v0(n){if(Oe(n instanceof Pt||n instanceof rn),n instanceof Pt)return n;const e=n.getFilters();if(1===e.length)return v0(e[0]);if(ej(n))return n;const t=e.map(r=>v0(r)),i=[];return t.forEach(r=>{r instanceof Pt?i.push(r):r instanceof rn&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:rn.create(i,n.op)}class Vse{constructor(){this.on=new JD}addToCollectionParentIndex(e,t){return this.on.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(Ts.min())}updateCollectionGroup(e,t,i){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class JD{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new an(Vt.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new an(Vt.comparator)).toArray()}}const b0=new Uint8Array(0);class Bse{constructor(e,t){this.user=e,this.databaseId=t,this._n=new JD,this.an=new Za(i=>wu(i),(i,r)=>Jg(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this._n.add(t)});const s={collectionId:i,parent:pr(r)};return uz(e).put(s)}return U.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[SU(t),""],!1,!0);return uz(e).W(r).next(s=>{for(const o of s){if(o.collectionId!==t)break;i.push(ea(o.parent))}return i})}addFieldIndex(e,t){const i=m_(e),r={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete r.indexId;const s=i.add(r);if(t.indexState){const o=Tf(e);return s.next(a=>{o.put(tz(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=m_(e),r=Tf(e),s=Cf(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=m_(e),i=Cf(e),r=Tf(e);return t.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(e,t){return U.forEach(this.un(t),i=>this.getIndexType(e,i).next(r=>{if(0===r||1===r){const s=new oz(i).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const i=Cf(e);let r=!0;const s=new Map;return U.forEach(this.un(t),o=>this.cn(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=lt();const a=[];return U.forEach(s,(l,c)=>{var V;ce("IndexedDbIndexManager",`Using index ${V=l,`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`} to execute ${wu(t)}`);const d=function(V,Y){const de=ID(Y);if(void 0===de)return null;for(const Me of u0(V,de.fieldPath))switch(Me.op){case"array-contains-any":return Me.value.arrayValue.values||[];case"array-contains":return[Me.value]}return null}(c,l),f=function(V,Y){const de=new Map;for(const Me of yu(Y))for(const qe of u0(V,Me.fieldPath))switch(qe.op){case"==":case"in":de.set(Me.fieldPath.canonicalString(),qe.value);break;case"not-in":case"!=":return de.set(Me.fieldPath.canonicalString(),qe.value),Array.from(de.values())}return null}(c,l),g=function(V,Y){const de=[];let Me=!0;for(const qe of yu(Y)){const Ft=0===qe.kind?oj(V,qe.fieldPath,V.startAt):aj(V,qe.fieldPath,V.startAt);de.push(Ft.value),Me&&(Me=Ft.inclusive)}return new tc(de,Me)}(c,l),_=function(V,Y){const de=[];let Me=!0;for(const qe of yu(Y)){const Ft=0===qe.kind?aj(V,qe.fieldPath,V.endAt):oj(V,qe.fieldPath,V.endAt);de.push(Ft.value),Me&&(Me=Ft.inclusive)}return new tc(de,Me)}(c,l),v=this.ln(l,c,g),I=this.ln(l,c,_),S=this.hn(l,c,f),F=this.Pn(l.indexId,d,v,g.inclusive,I,_.inclusive,S);return U.forEach(F,M=>i.j(M,t.limit).next(V=>{V.forEach(Y=>{const de=ve.fromSegments(Y.documentKey);o.has(de)||(o=o.add(de),a.push(de))})}))}).next(()=>a)}return U.resolve(null)})}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:Lse(rn.create(e.filters,"and")).map(i=>kD(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,t),t)}Pn(e,t,i,r,s,o,a){const l=(null!=t?t.length:1)*Math.max(i.length,s.length),c=l/(null!=t?t.length:1),d=[];for(let f=0;f<l;++f){const g=t?this.In(t[f/c]):b0,_=this.Tn(e,g,i[f%c],r),v=this.En(e,g,s[f%c],o),I=a.map(S=>this.Tn(e,g,S,!0));d.push(...this.createRange(_,v,I))}return d}Tn(e,t,i,r){const s=new Au(e,ve.empty(),t,i);return r?s:s.Ht()}En(e,t,i,r){const s=new Au(e,ve.empty(),t,i);return r?s.Ht():s}cn(e,t){const i=new oz(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(const a of s)i.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let i=2;const r=this.un(t);return U.forEach(r,s=>this.cn(e,s).next(o=>{o?0!==i&&o.fields.length<function(l){let c=new an(Pn.comparator),d=!1;for(const f of l.filters)for(const g of f.getFlattenedFilters())g.field.isKeyField()||("array-contains"===g.op||"array-contains-any"===g.op?d=!0:c=c.add(g.field));for(const f of l.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(d?1:0)}(s)&&(i=1):i=0})).next(()=>null!==t.limit&&r.length>1&&2===i?1:i)}dn(e,t){const i=new p_;for(const r of yu(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const o=i.jt(r.kind);Du.St.ht(s,o)}return i.Ut()}In(e){const t=new p_;return Du.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const i=new p_;return Du.St.ht(Eu(this.databaseId,t),i.jt(function(s){const o=yu(s);return 0===o.length?0:o[o.length-1].kind}(e))),i.Ut()}hn(e,t,i){if(null===i)return[];let r=[];r.push(new p_);let s=0;for(const o of yu(e)){const a=i[s++];for(const l of r)if(this.Rn(t,o.fieldPath)&&Yg(a))r=this.Vn(r,o,a);else{const c=l.jt(o.kind);Du.St.ht(a,c)}}return this.mn(r)}ln(e,t,i){return this.hn(e,t,i.position)}mn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Ut();return t}Vn(e,t,i){const r=[...e],s=[];for(const o of i.arrayValue.values||[])for(const a of r){const l=new p_;l.seed(a.Ut()),Du.St.ht(o,l.jt(t.kind)),s.push(l)}return s}Rn(e,t){return!!e.filters.find(i=>i instanceof Pt&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=m_(e),r=Tf(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(s=>{const o=[];return U.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(d,f){const g=f?new df(f.sequenceNumber,new Ts(xu(f.readTime),new ve(ea(f.documentKey)),f.largestBatchId)):df.empty(),_=d.fields.map(([v,I])=>new vu(Pn.fromServerFormat(v),I));return new uf(d.indexId,d.collectionGroup,_,g)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:tt(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=m_(e),s=Tf(e);return this.fn(e).next(o=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>U.forEach(a,l=>s.put(tz(l.indexId,this.user,o,i)))))}updateIndexEntries(e,t){const i=new Map;return U.forEach(t,(r,s)=>{const o=i.get(r.collectionGroup);return(o?U.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),U.forEach(a,l=>this.gn(e,r,l).next(c=>{const d=this.pn(s,l);return c.isEqual(d)?U.resolve():this.yn(e,s,l,c,d)}))))})}wn(e,t,i,r){return Cf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(i,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,i,r){return Cf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(i,t.key),t.key.path.toArray()])}gn(e,t,i){const r=Cf(e);let s=new an(ic);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.An(i,t)])},(o,a)=>{s=s.add(new Au(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,t){let i=new an(ic);const r=this.dn(t,e);if(null==r)return i;const s=ID(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Yg(o))for(const a of o.arrayValue.values||[])i=i.add(new Au(t.indexId,e.key,this.In(a),r))}else i=i.add(new Au(t.indexId,e.key,b0,r));return i}yn(e,t,i,r,s){ce("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,d,f,g){const _=l.getIterator(),v=c.getIterator();let I=hf(_),S=hf(v);for(;I||S;){let F=!1,M=!1;if(I&&S){const V=d(I,S);V<0?M=!0:V>0&&(F=!0)}else null!=I?M=!0:F=!0;F?(f(S),S=hf(v)):M?(g(I),I=hf(_)):(I=hf(_),S=hf(v))}}(r,s,ic,a=>{o.push(this.wn(e,t,i,a))},a=>{o.push(this.Sn(e,t,i,a))}),U.waitFor(o)}fn(e){let t=1;return Tf(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,a)=>ic(o,a)).filter((o,a,l)=>!a||0!==ic(o,l[a-1]));const r=[];r.push(e);for(const o of i){const a=ic(o,e),l=ic(o,t);if(0===a)r[0]=e.Ht();else if(a>0&&l<0)r.push(o),r.push(o.Ht());else if(l>0)break}r.push(t);const s=[];for(let o=0;o<r.length;o+=2){if(this.bn(r[o],r[o+1]))return[];s.push(IDBKeyRange.bound([r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,b0,[]],[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,b0,[]]))}return s}bn(e,t){return ic(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dz)}getMinOffset(e,t){return U.mapArray(this.un(t),i=>this.cn(e,i).next(r=>r||Se())).next(dz)}}function uz(n){return ji(n,"collectionParents")}function Cf(n){return ji(n,"indexEntries")}function m_(n){return ji(n,"indexConfiguration")}function Tf(n){return ji(n,"indexState")}function dz(n){Oe(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;CD(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Ts(e.readTime,e.documentKey,t)}const hz={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class mr{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new mr(e,mr.DEFAULT_COLLECTION_PERCENTILE,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fz(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=i.Y({range:o},(d,f,g)=>(a++,g.delete()));s.push(l.next(()=>{Oe(1===a)}));const c=[];for(const d of t.mutations){const f=FU(e,d.key.path,t.batchId);s.push(r.delete(f)),c.push(d.key)}return U.waitFor(s).next(()=>c)}function E0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Se();e=n.noDocument}return JSON.stringify(e).length}mr.DEFAULT_COLLECTION_PERCENTILE=10,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mr.DEFAULT=new mr(41943040,mr.DEFAULT_COLLECTION_PERCENTILE,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mr.DISABLED=new mr(-1,0,0);class w0{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Dn={}}static ct(e,t,i,r){Oe(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new w0(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rc(e).Y({index:"userMutationsIndex",range:i},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=xf(e),o=rc(e);return o.add({}).next(a=>{Oe("number"==typeof a);const l=new VD(a,t,i,r),c=function(_,v,I){const S=I.baseMutations.map(M=>d_(_.ut,M)),F=I.mutations.map(M=>d_(_.ut,M));return{userId:v,batchId:I.batchId,localWriteTimeMs:I.localWriteTime.toMillis(),baseMutations:S,mutations:F}}(this.serializer,this.userId,l),d=[];let f=new an((g,_)=>tt(g.canonicalString(),_.canonicalString()));for(const g of r){const _=FU(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(o.put(c)),d.push(s.put(_,Sre))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Dn[a]=l.keys()}),U.waitFor(d).next(()=>l)})}lookupMutationBatch(e,t){return rc(e).get(t).next(i=>i?(Oe(i.userId===this.userId),Su(this.serializer,i)):null)}Cn(e,t){return this.Dn[t]?U.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.Dn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return rc(e).Y({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(Oe(a.batchId>=i),s=Su(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return rc(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rc(e).W("userMutationsIndex",t).next(i=>i.map(r=>Su(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=t0(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return xf(e).Y({range:r},(o,a,l)=>{const[c,d,f]=o,g=ea(d);if(c===this.userId&&t.path.isEqual(g))return rc(e).get(f).next(_=>{if(!_)throw Se();Oe(_.userId===this.userId),s.push(Su(this.serializer,_))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new an(tt);const r=[];return t.forEach(s=>{const o=t0(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=xf(e).Y({range:a},(c,d,f)=>{const[g,_,v]=c,I=ea(_);g===this.userId&&s.path.isEqual(I)?i=i.add(v):f.done()});r.push(l)}),U.waitFor(r).next(()=>this.vn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=t0(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new an(tt);return xf(e).Y({range:o},(l,c,d)=>{const[f,g,_]=l,v=ea(g);f===this.userId&&i.isPrefixOf(v)?v.length===r&&(a=a.add(_)):d.done()}).next(()=>this.vn(e,a))}vn(e,t){const i=[],r=[];return t.forEach(s=>{r.push(rc(e).get(s).next(o=>{if(null===o)throw Se();Oe(o.userId===this.userId),i.push(Su(this.serializer,o))}))}),U.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return fz(e.ae,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Fn(t.batchId)}),U.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return U.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return xf(e).Y({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=ea(s[1]);r.push(l)}else a.done()}).next(()=>{Oe(0===r.length)})})}containsKey(e,t){return pz(e,this.userId,t)}Mn(e){return mz(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pz(n,e,t){const i=t0(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return xf(n).Y({range:s,J:!0},(a,l,c)=>{const[d,f,g]=a;d===e&&f===r&&(o=!0),c.done()}).next(()=>o)}function rc(n){return ji(n,"mutations")}function xf(n){return ji(n,"documentMutations")}function mz(n){return ji(n,"mutationQueues")}class Ru{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Ru(0)}static Nn(){return new Ru(-1)}}class Use{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const i=new Ru(t.highestTargetId);return t.highestTargetId=i.next(),this.Ln(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Le.fromTimestamp(new Bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r)))}addTargetData(e,t){return this.kn(e,t).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.qn(t,i),this.Ln(e,i))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Sf(e).delete(t.targetId)).next(()=>this.Bn(e)).next(i=>(Oe(i.targetCount>0),i.targetCount-=1,this.Ln(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return Sf(e).Y((o,a)=>{const l=h_(a);l.sequenceNumber<=t&&null===i.get(l.targetId)&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>U.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Sf(e).Y((i,r)=>{const s=h_(r);t(s)})}Bn(e){return gz(e).get("targetGlobalKey").next(t=>(Oe(null!==t),t))}Ln(e,t){return gz(e).put("targetGlobalKey",t)}kn(e,t){return Sf(e).put(Jj(this.serializer,t))}qn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=wu(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Sf(e).Y({range:r,index:"queryTargetsIndex"},(o,a,l)=>{const c=h_(a);Jg(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=sc(e);return t.forEach(o=>{const a=pr(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),U.waitFor(r)}removeMatchingKeys(e,t,i){const r=sc(e);return U.forEach(t,s=>{const o=pr(s.path);return U.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=sc(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=sc(e);let s=lt();return r.Y({range:i,J:!0},(o,a,l)=>{const c=ea(o[1]),d=new ve(c);s=s.add(d)}).next(()=>s)}containsKey(e,t){const i=pr(t.path),r=IDBKeyRange.bound([i],[SU(i)],!1,!0);let s=0;return sc(e).Y({index:"documentTargetsIndex",J:!0,range:r},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}_t(e,t){return Sf(e).get(t).next(i=>i?h_(i):null)}}function Sf(n){return ji(n,"targets")}function gz(n){return ji(n,"targetGlobal")}function sc(n){return ji(n,"targetDocuments")}function _z([n,e],[t,i]){const r=tt(n,t);return 0===r?tt(e,i):r}class jse{constructor(e){this.Qn=e,this.buffer=new an(_z),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();_z(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yz{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var t=this;ce("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,J.Z)(function*(){t.Wn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Kl(i)?ce("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Gl(i)}yield t.Gn(3e5)}))}}class zse{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return U.resolve(xs._e);const i=new jse(t);return this.zn.forEachTarget(e,r=>i.Un(r.sequenceNumber)).next(()=>this.zn.Hn(e,r=>i.Un(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(hz)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hz):this.Jn(e,t))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let i,r,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(i=f,a=Date.now(),this.removeTargets(e,i,t))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(c=Date.now(),lf()<=Is.in.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-d}ms\n\tDetermined least recently used ${r} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${f} documents in `+(c-l)+`ms\nTotal Duration: ${c-d}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:f})))}}class Hse{constructor(e,t){this.db=e,this.garbageCollector=function vz(n,e){return new zse(n,e)}(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Yn(e){let t=0;return this.Hn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,(i,r)=>t(r))}addReference(e,t,i){return I0(e,i)}removeReference(e,t,i){return I0(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return I0(e,t)}Xn(e,t){return function(r,s){let o=!1;return mz(r).Z(a=>pz(r,a,s).next(l=>(l&&(o=!0),U.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=t){const l=this.Xn(e,o).next(c=>{if(!c)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,Le.min()),sc(e).delete([0,pr(o.path)])))});r.push(l)}}).next(()=>U.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return I0(e,t)}Zn(e,t){const i=sc(e);let r,s=xs._e;return i.Y({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==xs._e&&t(new ve(ea(r)),s),s=c,r=l):s=xs._e}).next(()=>{s!==xs._e&&t(new ve(ea(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function I0(n,e){return sc(n).put((r=n.currentSequenceNumber,{targetId:0,path:pr(e.path),sequenceNumber:r}));var r}class bz{constructor(){this.changes=new Za(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?U.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $se{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Mu(e).put(i)}removeEntry(e,t,i){return Mu(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],_0(o),a[a.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.er(e,i)))}getEntry(e,t){let i=kn.newInvalidDocument(t);return Mu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(g_(t))},(r,s)=>{i=this.tr(t,s)}).next(()=>i)}nr(e,t){let i={size:0,document:kn.newInvalidDocument(t)};return Mu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(g_(t))},(r,s)=>{i={document:this.tr(t,s),size:E0(s)}}).next(()=>i)}getEntries(e,t){let i=ls();return this.rr(e,t,(r,s)=>{const o=this.tr(r,s);i=i.insert(r,o)}).next(()=>i)}ir(e,t){let i=ls(),r=new En(ve.comparator);return this.rr(e,t,(s,o)=>{const a=this.tr(s,o);i=i.insert(s,a),r=r.insert(s,E0(o))}).next(()=>({documents:i,sr:r}))}rr(e,t,i){if(t.isEmpty())return U.resolve();let r=new an(Cz);t.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(g_(r.first()),g_(r.last())),o=r.getIterator();let a=o.getNext();return Mu(e).Y({index:"documentKeyIndex",range:s},(l,c,d)=>{const f=ve.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Cz(a,f)<0;)i(a,null),a=o.getNext();a&&a.isEqual(f)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?d.U(g_(a)):d.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,i,r,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),_0(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mu(e).W(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let d=ls();for(const f of c){const g=this.tr(ve.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(t_(t,g)||r.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,i,r){let s=ls();const o=Iz(t,i),a=Iz(t,Ts.max());return Mu(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const f=this.tr(ve.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(f.key,f),s.size===r&&d.done()}).next(()=>s)}newChangeBuffer(e){return new Wse(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wz(e).get("remoteDocumentGlobalKey").next(t=>(Oe(!!t),t))}er(e,t){return wz(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const i=function Mse(n,e){let t;if(e.document)t=Wj(n.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ve.fromSegments(e.noDocument.path),r=xu(e.noDocument.readTime);t=kn.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Se();{const i=ve.fromSegments(e.unknownDocument.path),r=xu(e.unknownDocument.version);t=kn.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(r){const s=new Bn(r[0],r[1]);return Le.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(Le.min()))return i}return kn.newInvalidDocument(e)}}function Ez(n){return new $se(n)}class Wse extends bz{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new Za(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new an((s,o)=>tt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(t.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=Xj(this._r.serializer,o);r=r.add(s.path.popLast());const c=E0(l);i+=c-a.size,t.push(this._r.addEntry(e,s,l))}else if(i-=a.size,this.trackRemovals){const l=Xj(this._r.serializer,o.convertToNoDocument(Le.min()));t.push(this._r.addEntry(e,s,l))}}),r.forEach(s=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),t.push(this._r.updateMetadata(e,i)),U.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next(i=>(this.ar.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this._r.ir(e,t).next(({documents:i,sr:r})=>(r.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function wz(n){return ji(n,"remoteDocumentGlobal")}function Mu(n){return ji(n,"remoteDocumentsV14")}function g_(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Iz(n,e){const t=e.documentKey.path.toArray();return[n,_0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Cz(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=tt(t[s],i[s]),r)return r;return r=tt(t.length,i.length),r||(r=tt(t[t.length-2],i[i.length-2]),r||tt(t[t.length-1],i[i.length-1]))}class qse{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Tz{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&s_(i.mutation,r,as.empty(),Bn.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,lt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=lt()){const r=na();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=n_();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=na();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,lt()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=ls();const o=i_(),a=i_();return t.forEach((l,c)=>{const d=i.get(c.key);r.has(c.key)&&(void 0===d||d.mutation instanceof Ya)?s=s.insert(c.key,c):void 0!==d?(o.set(c.key,d.mutation.getFieldMask()),s_(d.mutation,c,d.mutation.getFieldMask(),Bn.now())):o.set(c.key,as.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),t.forEach((c,d)=>{var f;return a.set(c,new qse(d,null!==(f=o.get(c))&&void 0!==f?f:null))}),a))}recalculateAndSaveOverlays(e,t){const i=i_();let r=new En((o,a)=>o-a),s=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let d=i.get(l)||as.empty();d=a.applyToLocalView(c,d),i.set(l,d);const f=(r.get(a.batchId)||lt()).add(l);r=r.insert(a.batchId,f)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=gj();d.forEach(g=>{if(!s.has(g)){const _=Tj(t.get(g),i.get(g));null!==_&&f.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return U.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return ve.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ND(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r);var o}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):U.resolve(na());let a=-1,l=s;return o.next(c=>U.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{l=l.insert(d,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,lt())).next(d=>({batchId:a,changes:mj(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(i=>{let r=n_();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const s=t.collectionGroup;let o=n_();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const c=(f=t,g=l.child(s),new Ka(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt));var f,g;return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();null===o.get(d)&&(o=o.insert(d,kn.newInvalidDocument(d)))});let a=n_();return o.forEach((l,c)=>{const d=s.get(l);void 0!==d&&s_(d.mutation,c,as.empty(),Bn.now()),t_(t,c)&&(a=a.insert(l,c))}),a})}}class Gse{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return U.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,{id:(r=t).id,version:r.version,createTime:di(r.createTime)}),U.resolve();var r}getNamedQuery(e,t){return U.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,{name:(r=t).name,query:GD(r.bundledQuery),readTime:di(r.readTime)}),U.resolve();var r}}class Kse{constructor(){this.overlays=new En(ve.comparator),this.lr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const i=na();return U.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.lt(e,t,s)}),U.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.lr.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(i)),U.resolve()}getOverlaysForCollection(e,t,i){const r=na(),s=t.length+1,o=new ve(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return U.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new En((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let d=s.get(c.largestBatchId);null===d&&(d=na(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=na(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=r)););return U.resolve(a)}lt(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const o=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new UD(t,i));let s=this.lr.get(t);void 0===s&&(s=lt(),this.lr.set(t,s)),this.lr.set(t,s.add(i.key))}}class eA{constructor(){this.hr=new an(zi.Pr),this.Ir=new an(zi.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const i=new zi(e,t);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.dr(new zi(e,t))}Ar(e,t){e.forEach(i=>this.removeReference(i,t))}Rr(e){const t=new ve(new Vt([])),i=new zi(t,e),r=new zi(t,e+1),s=[];return this.Ir.forEachInRange([i,r],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new ve(new Vt([])),i=new zi(t,e),r=new zi(t,e+1);let s=lt();return this.Ir.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new zi(e,0),i=this.hr.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class zi{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return ve.comparator(e.key,t.key)||tt(e.gr,t.gr)}static Tr(e,t){return tt(e.gr,t.gr)||ve.comparator(e.key,t.key)}}class Zse{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new an(zi.Pr)}checkEmpty(e){return U.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.pr;this.pr++;const o=new VD(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.yr=this.yr.add(new zi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,t){return U.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.Sr(t+1),s=r<0?0:r;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new zi(t,0),r=new zi(t,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([i,r],o=>{const a=this.wr(o.gr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new an(tt);return t.forEach(r=>{const s=new zi(r,0),o=new zi(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{i=i.add(a.gr)})}),U.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;ve.isDocumentKey(s)||(s=s.child(""));const o=new zi(new ve(s),0);let a=new an(tt);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.gr)),!0)},o),U.resolve(this.br(a))}br(e){const t=[];return e.forEach(i=>{const r=this.wr(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Oe(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let i=this.yr;return U.forEach(t.mutations,r=>{const s=new zi(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,t){const i=new zi(t,0),r=this.yr.firstAfterOrEqual(i);return U.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return U.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Yse{constructor(e){this.Cr=e,this.docs=new En(ve.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Cr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return U.resolve(i?i.document.mutableCopy():kn.newInvalidDocument(t))}getEntries(e,t){let i=ls();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():kn.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=ls();const o=t.path,a=new ve(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||CD(AU(d),i)<=0||(r.has(d.key)||t_(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,t,i,r){Se()}vr(e,t){return U.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Qse(this)}getSize(e){return U.resolve(this.size)}}class Qse extends bz{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),U.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class Xse{constructor(e){this.persistence=e,this.Fr=new Za(t=>wu(t),Jg),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.Mr=0,this.Or=new eA,this.targetCount=0,this.Nr=Ru.On()}forEachTarget(e,t){return this.Fr.forEach((i,r)=>t(r)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Mr&&(this.Mr=t),U.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new Ru(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.kn(t),U.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=t&&null===i.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),U.waitFor(s).next(()=>r)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const i=this.Fr.get(t)||null;return U.resolve(i)}addMatchingKeys(e,t,i){return this.Or.Er(t,i),U.resolve()}removeMatchingKeys(e,t,i){this.Or.Ar(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Or.mr(t);return U.resolve(i)}containsKey(e,t){return U.resolve(this.Or.containsKey(t))}}class tA{constructor(e,t){this.Br={},this.overlays={},this.Lr=new xs(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Xse(this),this.indexManager=new Vse,this.remoteDocumentCache=new Yse(i=>this.referenceDelegate.Qr(i)),this.serializer=new Qj(t),this.Kr=new Gse(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Kse,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Br[e.toKey()];return i||(i=new Zse(t,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,i){ce("MemoryPersistence","Starting transaction:",e);const r=new Jse(this.Lr.next());return this.referenceDelegate.$r(),i(r).next(s=>this.referenceDelegate.Ur(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Wr(e,t){return U.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,t)))}}class Jse extends MU{constructor(e){super(),this.currentSequenceNumber=e}}class C0{constructor(e){this.persistence=e,this.Gr=new eA,this.zr=null}static jr(e){return new C0(e)}get Hr(){if(this.zr)return this.zr;throw Se()}addReference(e,t,i){return this.Gr.addReference(i,t),this.Hr.delete(i.toString()),U.resolve()}removeReference(e,t,i){return this.Gr.removeReference(i,t),this.Hr.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),U.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(r=>this.Hr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Hr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Hr,i=>{const r=ve.fromPath(i);return this.Jr(e,r).next(s=>{s||t.removeEntry(r,Le.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(i=>{i?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return U.or([()=>U.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class eoe{constructor(e){this.serializer=e}N(e,t,i,r){const s=new e0("createOrUpgrade",t);var l;i<1&&r>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",OU,{unique:!0}),l.createObjectStore("documentMutations"),xz(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=U.resolve();return i<3&&r>=3&&(0!==i&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),xz(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Le.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),i<4&&r>=4&&(0!==i&&(o=o.next(()=>function(l,c){return c.store("mutations").W().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",OU,{unique:!0});const f=c.store("mutations"),g=d.map(_=>f.put(_));return U.waitFor(g)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(o=o.next(()=>this.Zr(s))),i<6&&r>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),i<7&&r>=7&&(o=o.next(()=>this.ei(s))),i<8&&r>=8&&(o=o.next(()=>this.ti(e,s))),i<9&&r>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(o=o.next(()=>this.ni(s))),i<11&&r>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:Bre});c.createIndex("collectionPathOverlayIndex",Ure,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",jre,{unique:!1})}(e)})),i<13&&r>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:Dre});c.createIndex("documentKeyIndex",Are),c.createIndex("collectionGroupIndex",Rre)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.ii(e,s))),i<15&&r>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Ore}).createIndex("sequenceNumberIndex",Fre,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:Lre}).createIndex("documentKeyIndex",Vre,{unique:!1})}(e))),o}Xr(e){let t=0;return e.store("remoteDocuments").Y((i,r)=>{t+=E0(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Zr(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(r=>U.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",o).next(a=>U.forEach(a,l=>{Oe(l.userId===s.userId);const c=Su(this.serializer,l);return fz(e,s.userId,c).next(()=>{})}))}))}ei(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Y((o,a)=>{const l=new Vt(o),c=[0,pr(l)];s.push(t.get(c).next(d=>d?U.resolve():t.put({targetId:0,path:pr(l),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>U.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Nre});const i=t.store("collectionParents"),r=new JD,s=o=>{if(r.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:pr(l)})}};return t.store("remoteDocuments").Y({J:!0},(o,a)=>{const l=new Vt(o);return s(l.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([o,a,l],c)=>{const d=ea(a);return s(d.popLast())}))}ni(e){const t=e.store("targets");return t.Y((i,r)=>{const s=h_(r),o=Jj(this.serializer,s);return t.put(o)})}ri(e,t){const i=t.store("remoteDocuments"),r=[];return i.Y((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(f=o,f.document?new ve(Vt.fromString(f.document.name).popFirst(5)):f.noDocument?ve.fromSegments(f.noDocument.path):f.unknownDocument?ve.fromSegments(f.unknownDocument.path):Se()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var f;r.push(a.put(c))}).next(()=>U.waitFor(r))}ii(e,t){const i=t.store("mutations"),r=Ez(this.serializer),s=new tA(C0.jr,this.serializer.ut);return i.W().next(o=>{const a=new Map;return o.forEach(l=>{var c;let d=null!==(c=a.get(l.userId))&&void 0!==c?c:lt();Su(this.serializer,l).keys().forEach(f=>d=d.add(f)),a.set(l.userId,d)}),U.forEach(a,(l,c)=>{const d=new Ui(c),f=y0.ct(this.serializer,d),g=s.getIndexManager(d),_=w0.ct(d,this.serializer,g,s.referenceDelegate);return new Tz(r,_,f,g).recalculateAndSaveOverlaysForDocumentKeys(new SD(t,xs._e),l).next()})})}}function xz(n){n.createObjectStore("targetDocuments",{keyPath:Pre}).createIndex("documentTargetsIndex",kre,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Mre,{unique:!0}),n.createObjectStore("targetGlobal")}const nA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iA{constructor(e,t,i,r,s,o,a,l,c,d,f=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.si=s,this.window=o,this.document=a,this.oi=c,this._i=d,this.ai=f,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=g=>Promise.resolve(),!iA.D())throw new re(G.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hse(this,r),this.Ii=t+"main",this.serializer=new Qj(l),this.Ti=new Io(this.Ii,this.ai,new eoe(this.serializer)),this.qr=new Use(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ez(this.serializer),this.Kr=new Pse,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===d&&ui("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new re(G.FAILED_PRECONDITION,nA);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new xs(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var t=this;return this.Pi=function(){var i=(0,J.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var t=(0,J.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,J.Z)(function*(){t.started&&(yield t.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>x0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(t=>this.isPrimary&&!t?this.pi(e).next(()=>!1):!!t&&this.yi(e).next(()=>!0))).catch(e=>{if(Kl(e))return ce("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return __(e).get("owner").next(t=>U.resolve(this.wi(t)))}Si(e){return x0(e).delete(this.clientId)}bi(){var e=this;return(0,J.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=ji(i,"clientMetadata");return r.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return U.forEach(a,l=>r.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const i of t)e.Ei.removeItem(e.vi(i.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?U.resolve(!0):__(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new re(G.FAILED_PRECONDITION,nA);return!1}}return!(!this.networkEnabled||!this.inForeground)||x0(e).W().next(i=>void 0===this.Ci(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ce("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,J.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new SD(t,xs._e);return e.pi(i).next(()=>e.Si(i))}),e.Ti.close(),e.Ni()})()}Ci(e,t){return e.filter(i=>this.Di(i.updateTimeMs,t)&&!this.Fi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>x0(e).W().next(t=>this.Ci(t,18e5).map(i=>i.clientId)))}get started(){return this.kr}getMutationQueue(e,t){return w0.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Bse(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return y0.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,i){ce("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(l=this.ai)?Hre:14===l?BU:13===l?VU:12===l?zre:11===l?LU:void Se();var l;let o;return this.Ti.runTransaction(e,r,s,a=>(o=new SD(a,this.Lr?this.Lr.next():xs._e),"readwrite-primary"===t?this.fi(o).next(l=>!!l||this.gi(o)).next(l=>{if(!l)throw ui(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new re(G.FAILED_PRECONDITION,RU);return i(o)}).next(l=>this.yi(o).next(()=>l)):this.Li(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return __(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)&&!this.wi(t)&&!(this._i||this.allowTabSynchronization&&t.allowTabSynchronization))throw new re(G.FAILED_PRECONDITION,nA)})}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return __(e).put("owner",t)}static D(){return Io.D()}pi(e){const t=__(e);return t.get("owner").next(i=>this.wi(i)?(ce("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):U.resolve())}Di(e,t){const i=Date.now();return!(e<i-t||e>i&&(ui(`Detected an update time that is in the future: ${e} > ${i}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const t=/(?:Version|Mobile)\/1[456]/;(0,T.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const i=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return ce("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ui("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){ui("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function __(n){return ji(n,"owner")}function x0(n){return ji(n,"clientMetadata")}function rA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class sA{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.ki=i,this.qi=r}static Qi(e,t){let i=lt(),r=lt();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new sA(e,t.fromCache,i,r)}}class toe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Sz{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,i,r){const s={result:null};return this.zi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new toe;return this.Hi(e,t,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,t,o,a.size)})}).next(()=>s.result)}Ji(e,t,i,r){return i.documentReadCount<this.Ui?(lf()<=Is.in.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",_f(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),U.resolve()):(lf()<=Is.in.DEBUG&&ce("QueryEngine","Query:",_f(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(lf()<=Is.in.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",_f(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(t))):U.resolve())}zi(e,t){if(cj(t))return U.resolve(null);let i=zr(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=d0(t,null,"F"),i=zr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=lt(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Yi(t,a);return this.Zi(t,c,o,l.readTime)?this.zi(e,d0(t,null,"F")):this.Xi(e,c,t,l)}))})))}ji(e,t,i,r){return cj(t)||r.isEqual(Le.min())?U.resolve(null):this.Gi.getDocuments(e,i).next(s=>{const o=this.Yi(t,s);return this.Zi(t,o,i,r)?U.resolve(null):(lf()<=Is.in.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_f(t)),this.Xi(e,o,t,DU(r,-1)).next(a=>a))})}Yi(e,t){let i=new an(fj(e));return t.forEach((r,s)=>{t_(e,s)&&(i=i.add(s))}),i}Zi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Hi(e,t,i){return lf()<=Is.in.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",_f(t)),this.Gi.getDocumentsMatchingQuery(e,t,Ts.min(),i)}Xi(e,t,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class noe{constructor(e,t,i,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new En(tt),this.ns=new Za(s=>wu(s),Jg),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tz(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}}function Dz(n,e,t,i){return new noe(n,e,t,i)}function Az(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,J.Z)(function*(n,e){const t=ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.os(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=lt();for(const c of r){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(i,l).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})}),oA.apply(this,arguments)}function Rz(n){const e=ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function Mz(n,e,t){let i=lt(),r=lt();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=ls();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ce("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:o,cs:r}})}function soe(n,e){const t=ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Df(n,e){const t=ye(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.qr.getTargetData(i,e).next(s=>s?(r=s,U.resolve(r)):t.qr.allocateTargetId(i).next(o=>(r=new Qa(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.ts.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ts=t.ts.insert(i.targetId,i),t.ns.set(e,i.targetId)),i})}function Af(n,e,t){return aA.apply(this,arguments)}function aA(){return aA=(0,J.Z)(function*(n,e,t){const i=ye(n),r=i.ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Kl(o))throw o;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ts=i.ts.remove(e),i.ns.delete(r.target)}),aA.apply(this,arguments)}function S0(n,e,t){const i=ye(n);let r=Le.min(),s=lt();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const f=ye(l),g=f.ns.get(d);return void 0!==g?U.resolve(f.ts.get(g)):f.qr.getTargetData(c,d)}(i,o,zr(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.es.getDocumentsMatchingQuery(o,e,t?r:Le.min(),t?s:lt())).next(a=>(Nz(i,hj(e),a),{documents:a,ls:s})))}function Pz(n,e){const t=ye(n),i=ye(t.qr),r=t.ts.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i._t(s,e).next(o=>o?o.target:null))}function kz(n,e){const t=ye(n),i=t.rs.get(e)||Le.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.ss.getAllFromCollectionGroup(r,e,DU(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(Nz(t,e,r),r))}function Nz(n,e,t){let i=n.rs.get(e)||Le.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.rs.set(e,i)}function lA(){return lA=(0,J.Z)(function*(n,e,t,i){const r=ye(n);let s=lt(),o=ls();for(const c of t){const d=e.hs(c.metadata.name);c.document&&(s=s.add(d));const f=e.Ps(c);f.setReadTime(e.Is(c.metadata.readTime)),o=o.insert(d,f)}const a=r.ss.newChangeBuffer({trackRemovals:!0}),l=yield Df(r,(d=i,zr(mf(Vt.fromString(`__bundle__/docs/${d}`)))));var d;return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>Mz(c,a,o).next(d=>(a.apply(c),d)).next(d=>r.qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.qr.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,d.us,d.cs)).next(()=>d.us)))}),lA.apply(this,arguments)}function aoe(n,e){return cA.apply(this,arguments)}function cA(){return cA=(0,J.Z)(function*(n,e,t=lt()){const i=yield Df(n,zr(GD(e.bundledQuery))),r=ye(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=di(e.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.Kr.saveNamedQuery(s,e);const a=i.withResumeToken(Mi.EMPTY_BYTE_STRING,o);return r.ts=r.ts.insert(a.targetId,a),r.qr.updateTargetData(s,a).next(()=>r.qr.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.qr.addMatchingKeys(s,t,i.targetId)).next(()=>r.Kr.saveNamedQuery(s,e))})}),cA.apply(this,arguments)}function Oz(n,e){return`firestore_clients_${n}_${e}`}function Fz(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function uA(n,e){return`firestore_targets_${n}_${e}`}class D0{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Ts(e,t,i){const r=JSON.parse(i);let s,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(s=new re(r.error.code,r.error.message))),o?new D0(e,t,r.state,s):(ui("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class y_{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ts(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new re(i.error.code,i.error.message))),s?new y_(e,i.state,r):(ui("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class A0{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=FD();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=kU(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new A0(e,s):(ui("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class dA{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new dA(t.clientId,t.onlineState):(ui("SharedClientState",`Failed to parse online state: ${e}`),null)}}class hA{constructor(){this.activeTargetIds=FD()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fA{constructor(e,t,i,r,s){this.window=e,this.si=t,this.persistenceKey=i,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new En(tt),this.started=!1,this.ps=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=Oz(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new hA),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,J.Z)(function*(){const t=yield e.syncEngine.Bi();for(const r of t){if(r===e.Rs)continue;const s=e.getItem(Oz(e.persistenceKey,r));if(s){const o=A0.Ts(r,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const i=e.storage.getItem(e.Cs);if(i){const r=e.Ms(i);r&&e.xs(r)}for(const r of e.ps)e.fs(r);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,i){this.Ns(e,t,i),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(uA(this.persistenceKey,e));if(i){const r=y_.Ts(e,i);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(uA(this.persistenceKey,e))}updateQueryState(e,t,i){this.ks(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce("SharedClientState","READ",e,t),t}setItem(e,t){ce("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var t=this;const i=e;if(i.storageArea===this.storage){if(ce("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ys)return void ui("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,J.Z)(function*(){if(t.started){if(null!==i.key)if(t.Ss.test(i.key)){if(null==i.newValue){const r=t.Ks(i.key);return t.$s(r,null)}{const r=t.Us(i.key,i.newValue);if(r)return t.$s(r.clientId,r)}}else if(t.bs.test(i.key)){if(null!==i.newValue){const r=t.Ws(i.key,i.newValue);if(r)return t.Gs(r)}}else if(t.Ds.test(i.key)){if(null!==i.newValue){const r=t.zs(i.key,i.newValue);if(r)return t.js(r)}}else if(i.key===t.Cs){if(null!==i.newValue){const r=t.Ms(i.newValue);if(r)return t.xs(r)}}else if(i.key===t.ws){const r=function(o){let a=xs._e;if(null!=o)try{const l=JSON.parse(o);Oe("number"==typeof l),a=l}catch(l){ui("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(i.newValue);r!==xs._e&&t.sequenceNumberHandler(r)}else if(i.key===t.vs){const r=t.Hs(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Js(s)))}}else t.ps.push(i)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,i){const r=new D0(this.currentUser,e,t,i),s=Fz(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Es())}Bs(e){const t=Fz(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,t,i){const r=uA(this.persistenceKey,e),s=new y_(e,t,i);this.setItem(r,s.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const i=this.Ks(e);return A0.Ts(i,t)}Ws(e,t){const i=this.bs.exec(e),r=Number(i[1]);return D0.Ts(new Ui(void 0!==i[2]?i[2]:null),r,t)}zs(e,t){const i=this.Ds.exec(e),r=Number(i[1]);return y_.Ts(r,t)}Ms(e){return dA.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var t=this;return(0,J.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Ys(e.batchId,e.state,e.error);ce("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const i=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),s=this.Os(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=i})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=FD();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class Lz{constructor(){this.eo=new hA,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,i){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new hA,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class loe{ro(e){}shutdown(){}}class Vz{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let R0=null;function pA(){return null===R0?R0=268435456+Math.round(2147483648*Math.random()):R0++,"0x"+R0.toString(16)}const coe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uoe{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const gr="WebChannelConnection";class doe extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=i+"://"+t.host,this.fo=`projects/${r}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get yo(){return!1}wo(t,i,r,s,o){const a=pA(),l=this.So(t,i);ce("RestConnection",`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,s,o),this.Do(t,l,c,r).then(d=>(ce("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw os("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",l,"request:",r),d})}Co(t,i,r,s,o,a){return this.wo(t,i,r,s,o)}bo(t,i,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+af,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}So(t,i){return`${this.mo}/v1/${i}:${coe[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,i,r){const s=pA();return new Promise((o,a)=>{const l=new lre;l.setWithCredentials(!0),l.listenOnce(ore.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ED.NO_ERROR:const d=l.getResponseJson();ce(gr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case ED.TIMEOUT:ce(gr,`RPC '${e}' ${s} timed out`),a(new re(G.DEADLINE_EXCEEDED,"Request time out"));break;case ED.HTTP_ERROR:const f=l.getStatus();if(ce(gr,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const v=function(S){const F=S.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(F)>=0?F:G.UNKNOWN}(_.status);a(new re(v,_.message))}else a(new re(G.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new re(G.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{ce(gr,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);ce(gr,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",c,i,15)})}vo(e,t,i){const r=pA(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=rre(),a=sre(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.bo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const d=s.join("");ce(gr,`Creating RPC '${e}' stream ${r}: ${d}`,l);const f=o.createWebChannel(d,l);let g=!1,_=!1;const v=new uoe({co:S=>{_?ce(gr,`Not sending because RPC '${e}' stream ${r} is closed:`,S):(g||(ce(gr,`Opening RPC '${e}' stream ${r} transport.`),f.open(),g=!0),ce(gr,`RPC '${e}' stream ${r} sending:`,S),f.send(S))},lo:()=>f.close()}),I=(S,F,M)=>{S.listen(F,V=>{try{M(V)}catch(Y){setTimeout(()=>{throw Y},0)}})};return I(f,JE.EventType.OPEN,()=>{_||ce(gr,`RPC '${e}' stream ${r} transport opened.`)}),I(f,JE.EventType.CLOSE,()=>{_||(_=!0,ce(gr,`RPC '${e}' stream ${r} transport closed`),v.Ro())}),I(f,JE.EventType.ERROR,S=>{_||(_=!0,os(gr,`RPC '${e}' stream ${r} transport errored:`,S),v.Ro(new re(G.UNAVAILABLE,"The operation could not be completed")))}),I(f,JE.EventType.MESSAGE,S=>{var F;if(!_){const M=S.data[0];Oe(!!M);const Y=M.error||(null===(F=M[0])||void 0===F?void 0:F.error);if(Y){ce(gr,`RPC '${e}' stream ${r} received error:`,Y);const de=Y.status;let Me=function(Pi){const ds=_i[Pi];if(void 0!==ds)return Mj(ds)}(de),qe=Y.message;void 0===Me&&(Me=G.INTERNAL,qe="Unknown error status: "+de+" with message "+Y.message),_=!0,v.Ro(new re(Me,qe)),f.close()}else ce(gr,`RPC '${e}' stream ${r} received:`,M),v.Vo(M)}}),I(a,are.STAT_EVENT,S=>{S.stat===wU.PROXY?ce(gr,`RPC '${e}' stream ${r} detected buffering proxy`):S.stat===wU.NOPROXY&&ce(gr,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.Ao()},0),v}}function Bz(){return typeof window<"u"?window:null}function M0(){return typeof document<"u"?document:null}function v_(n){return new Ese(n,!0)}class mA{constructor(e,t,i=1e3,r=1.5,s=6e4){this.si=e,this.timerId=t,this.Fo=i,this.Mo=r,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-i);r>0&&ce("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Uz{constructor(e,t,i,r,s,o,a,l){this.si=e,this.Ko=i,this.$o=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new mA(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,J.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,J.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,t){var i=this;return(0,J.Z)(function*(){i.t_(),i.n_(),i.zo.cancel(),i.Uo++,4!==e?i.zo.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(ui(t.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),i.zo.Lo()):t&&t.code===G.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.r_(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Io(t)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Uo===t&&this.s_(i,r)},i=>{e(()=>{const r=new re(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.o_(r)})})}s_(e,t){const i=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho(()=>{i(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(r=>{i(()=>this.o_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Jo(){var e=this;this.state=5,this.zo.ko((0,J.Z)(function*(){e.state=0,e.start()}))}o_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget(()=>this.Uo===e?t():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hoe extends Uz{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function Cse(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:Se(),r=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(Oe(void 0===d||"string"==typeof d),Mi.fromBase64String(d||"")):(Oe(void 0===d||d instanceof Uint8Array),Mi.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=void 0===c.code?G.UNKNOWN:Mj(c.code);return new re(d,c.message||"")}(o);t=new Fj(i,r,s,a||null)}else if("documentChange"in e){const i=e.documentChange,r=ia(n,i.document.name),s=di(i.document.updateTime),o=i.document.createTime?di(i.document.createTime):Le.min(),a=new tr({mapValue:{fields:i.document.fields}}),l=kn.newFoundDocument(r,s,o,a);t=new g0(i.targetIds||[],i.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const i=e.documentDelete,r=ia(n,i.document),s=i.readTime?di(i.readTime):Le.min(),o=kn.newNoDocument(r,s);t=new g0([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const i=e.documentRemove,r=ia(n,i.document);t=new g0([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return Se();{const i=e.filter,{count:r=0,unchangedNames:s}=i,o=new mse(r,s);t=new Oj(i.targetId,o)}}var c;return t}(this.serializer,e),i=function(s){if(!("targetChange"in s))return Le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Le.min():o.readTime?di(o.readTime):Le.min()}(e);return this.listener.a_(t,i)}u_(e){const t={};t.database=u_(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=c0(l)?{documents:qj(s,l)}:{query:qD(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Uj(s,o.resumeToken);const c=zD(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Le.min())>0){a.readTime=wf(s,o.snapshotVersion.toTimestamp());const c=zD(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const i=function xse(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.e_(t)}c_(e){const t={};t.database=u_(this.serializer),t.removeTarget=e,this.e_(t)}}class foe extends Uz{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function Tse(n,e){return n&&n.length>0?(Oe(void 0!==e),n.map(t=>function(r,s){let o=di(r.updateTime?r.updateTime:s);return o.isEqual(Le.min())&&(o=di(s)),new dse(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=di(e.commitTime);return this.listener.I_(i,t)}return Oe(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=u_(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>d_(this.serializer,i))};this.e_(t)}}class poe extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new re(G.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.wo(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new re(G.UNKNOWN,r.toString())})}Co(e,t,i,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,t,i,s,o,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(G.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class goe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(ui(t),this.f_=!1):ce("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class _oe{constructor(e,t,i,r,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{i.enqueueAndForget((0,J.Z)(function*(){var l;oc(o)&&(ce("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,J.Z)(function*(d){const f=ye(d);f.C_.add(4),yield Rf(f),f.M_.set("Unknown"),f.C_.delete(4),yield b_(f)}),function c(d){return l.apply(this,arguments)})(o))}))}),this.M_=new goe(i,r)}}function b_(n){return _A.apply(this,arguments)}function _A(){return _A=(0,J.Z)(function*(n){if(oc(n))for(const e of n.v_)yield e(!0)}),_A.apply(this,arguments)}function Rf(n){return yA.apply(this,arguments)}function yA(){return yA=(0,J.Z)(function*(n){for(const e of n.v_)yield e(!1)}),yA.apply(this,arguments)}function P0(n,e){const t=ye(n);t.D_.has(e.targetId)||(t.D_.set(e.targetId,e),EA(t)?bA(t):Pf(t).Ho()&&vA(t,e))}function E_(n,e){const t=ye(n),i=Pf(t);t.D_.delete(e),i.Ho()&&jz(t,e),0===t.D_.size&&(i.Ho()?i.Zo():oc(t)&&t.M_.set("Unknown"))}function vA(n,e){if(n.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pf(n).u_(e)}function jz(n,e){n.x_.Oe(e),Pf(n).c_(e)}function bA(n){n.x_=new _se({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.D_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Pf(n).start(),n.M_.g_()}function EA(n){return oc(n)&&!Pf(n).jo()&&n.D_.size>0}function oc(n){return 0===ye(n).C_.size}function zz(n){n.x_=void 0}function yoe(n){return wA.apply(this,arguments)}function wA(){return wA=(0,J.Z)(function*(n){n.D_.forEach((e,t)=>{vA(n,e)})}),wA.apply(this,arguments)}function voe(n,e){return IA.apply(this,arguments)}function IA(){return IA=(0,J.Z)(function*(n,e){zz(n),EA(n)?(n.M_.w_(e),bA(n)):n.M_.set("Unknown")}),IA.apply(this,arguments)}function boe(n,e,t){return CA.apply(this,arguments)}function CA(){return CA=(0,J.Z)(function*(n,e,t){if(n.M_.set("Online"),e instanceof Fj&&2===e.state&&e.cause)try{yield(i=(0,J.Z)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.D_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.D_.delete(l),s.x_.removeTarget(l))}),function r(s,o){return i.apply(this,arguments)})(n,e)}catch(i){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield k0(n,i)}else if(e instanceof g0?n.x_.$e(e):e instanceof Oj?n.x_.Je(e):n.x_.Ge(e),!t.isEqual(Le.min()))try{const i=yield Rz(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.D_.get(c);d&&s.D_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.D_.get(l);if(!d)return;s.D_.set(l,d.withResumeToken(Mi.EMPTY_BYTE_STRING,d.snapshotVersion)),jz(s,l);const f=new Qa(d.target,l,c,d.sequenceNumber);vA(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(i){ce("RemoteStore","Failed to raise snapshot:",i),yield k0(n,i)}var i}),CA.apply(this,arguments)}function k0(n,e,t){return TA.apply(this,arguments)}function TA(){return TA=(0,J.Z)(function*(n,e,t){if(!Kl(e))throw e;n.C_.add(1),yield Rf(n),n.M_.set("Offline"),t||(t=()=>Rz(n.localStore)),n.asyncQueue.enqueueRetryable((0,J.Z)(function*(){ce("RemoteStore","Retrying IndexedDB access"),yield t(),n.C_.delete(1),yield b_(n)}))}),TA.apply(this,arguments)}function Hz(n,e){return e().catch(t=>k0(n,t,e))}function Mf(n){return xA.apply(this,arguments)}function xA(){return xA=(0,J.Z)(function*(n){const e=ye(n),t=ac(e);let i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;Eoe(e);)try{const r=yield soe(e.localStore,i);if(null===r){0===e.b_.length&&t.Zo();break}i=r.batchId,woe(e,r)}catch(r){yield k0(e,r)}$z(e)&&Wz(e)}),xA.apply(this,arguments)}function Eoe(n){return oc(n)&&n.b_.length<10}function woe(n,e){n.b_.push(e);const t=ac(n);t.Ho()&&t.h_&&t.P_(e.mutations)}function $z(n){return oc(n)&&!ac(n).jo()&&n.b_.length>0}function Wz(n){ac(n).start()}function Ioe(n){return SA.apply(this,arguments)}function SA(){return SA=(0,J.Z)(function*(n){ac(n).E_()}),SA.apply(this,arguments)}function Coe(n){return DA.apply(this,arguments)}function DA(){return DA=(0,J.Z)(function*(n){const e=ac(n);for(const t of n.b_)e.P_(t.mutations)}),DA.apply(this,arguments)}function Toe(n,e,t){return AA.apply(this,arguments)}function AA(){return AA=(0,J.Z)(function*(n,e,t){const i=n.b_.shift(),r=BD.from(i,e,t);yield Hz(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Mf(n)}),AA.apply(this,arguments)}function xoe(n,e){return RA.apply(this,arguments)}function RA(){return RA=(0,J.Z)(function*(n,e){var t;e&&ac(n).h_&&(yield(t=(0,J.Z)(function*(r,s){if(Rj(a=s.code)&&a!==G.ABORTED){const o=r.b_.shift();ac(r).Yo(),yield Hz(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Mf(r)}var a}),function i(r,s){return t.apply(this,arguments)})(n,e)),$z(n)&&Wz(n)}),RA.apply(this,arguments)}function qz(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,J.Z)(function*(n,e){const t=ye(n);t.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const i=oc(t);t.C_.add(3),yield Rf(t),i&&t.M_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.C_.delete(3),yield b_(t)}),MA.apply(this,arguments)}function PA(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,J.Z)(function*(n,e){const t=ye(n);e?(t.C_.delete(2),yield b_(t)):e||(t.C_.add(2),yield Rf(t),t.M_.set("Unknown"))}),kA.apply(this,arguments)}function Pf(n){return n.O_||(n.O_=function(t,i,r){const s=ye(t);return s.A_(),new hoe(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{ho:yoe.bind(null,n),Io:voe.bind(null,n),a_:boe.bind(null,n)}),n.v_.push(function(){var e=(0,J.Z)(function*(t){t?(n.O_.Yo(),EA(n)?bA(n):n.M_.set("Unknown")):(yield n.O_.stop(),zz(n))});return function(t){return e.apply(this,arguments)}}())),n.O_}function ac(n){return n.N_||(n.N_=function(t,i,r){const s=ye(t);return s.A_(),new foe(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{ho:Ioe.bind(null,n),Io:xoe.bind(null,n),T_:Coe.bind(null,n),I_:Toe.bind(null,n)}),n.v_.push(function(){var e=(0,J.Z)(function*(t){t?(n.N_.Yo(),yield Mf(n)):(yield n.N_.stop(),n.b_.length>0&&(ce("RemoteStore",`Stopping write stream with ${n.b_.length} pending writes`),n.b_=[]))});return function(t){return e.apply(this,arguments)}}())),n.N_}class NA{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new NA(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new re(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kf(n,e){if(ui("AsyncQueue",`${e}: ${n}`),Kl(n))return new re(G.UNAVAILABLE,`${e}: ${n}`);throw n}class Nf{constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=n_(),this.sortedSet=new En(this.comparator)}static emptySet(e){return new Nf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Nf;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Gz{constructor(){this.B_=new En(ve.comparator)}track(e){const t=e.doc.key,i=this.B_.get(t);i?0!==e.type&&3===i.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==i.type?this.B_=this.B_.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.B_=this.B_.remove(t):1===e.type&&2===i.type?this.B_=this.B_.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Se():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Of{constructor(e,t,i,r,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Of(e,t,Nf.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&e_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class Soe{constructor(){this.k_=void 0,this.listeners=[]}}class Doe{constructor(){this.queries=new Za(e=>dj(e),e_),this.onlineState="Unknown",this.q_=new Set}}function OA(n,e){return FA.apply(this,arguments)}function FA(){return FA=(0,J.Z)(function*(n,e){const t=ye(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new Soe),r)try{s.k_=yield t.onListen(i)}catch(o){const a=kf(o,`Initialization of query '${_f(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.listeners.push(e),e.Q_(t.onlineState),s.k_&&e.K_(s.k_)&&BA(t)}),FA.apply(this,arguments)}function LA(n,e){return VA.apply(this,arguments)}function VA(){return VA=(0,J.Z)(function*(n,e){const t=ye(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),VA.apply(this,arguments)}function Aoe(n,e){const t=ye(n);let i=!1;for(const r of e){const o=t.queries.get(r.query);if(o){for(const a of o.listeners)a.K_(r)&&(i=!0);o.k_=r}}i&&BA(t)}function Roe(n,e,t){const i=ye(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function BA(n){n.q_.forEach(e=>{e.next()})}class UA{constructor(e,t,i){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=i||{}}K_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new Of(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){return!e.fromCache||(!this.options.J_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=Of.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class Moe{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class Kz{constructor(e){this.serializer=e}hs(e){return ia(this.serializer,e)}Ps(e){return e.metadata.exists?Wj(this.serializer,e.document,!1):kn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return di(e)}}class Poe{constructor(e,t,i){this.X_=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Zz(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const i=Vt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,i=new Kz(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.hs(r.metadata.name);for(const o of r.metadata.queries){const a=(t.get(o)||lt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,J.Z)(function*(){const t=yield function ooe(n,e,t,i){return lA.apply(this,arguments)}(e.localStore,new Kz(e.serializer),e.documents,e.X_.id),i=e.ta(e.documents);for(const r of e.queries)yield aoe(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:t}})()}}function Zz(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Yz{constructor(e){this.key=e}}class Qz{constructor(e){this.key=e}}class Xz{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=lt(),this.mutatedKeys=lt(),this._a=fj(e),this.aa=new Nf(this._a)}get ua(){return this.ia}ca(e,t){const i=t?t.la:new Gz,r=t?t.aa:this.aa;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,f)=>{const g=r.get(d),_=t_(this.query,f)?f:null,v=!!g&&this.mutatedKeys.has(g.key),I=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;g&&_?g.data.isEqual(_.data)?v!==I&&(i.track({type:3,doc:_}),S=!0):this.ha(g,_)||(i.track({type:2,doc:_}),S=!0,(l&&this._a(_,l)>0||c&&this._a(_,c)<0)&&(a=!0)):!g&&_?(i.track({type:0,doc:_}),S=!0):g&&!_&&(i.track({type:1,doc:g}),S=!0,(l||c)&&(a=!0)),S&&(_?(o=o.add(_),s=I?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const d="F"===this.query.limitType?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{aa:o,la:i,Zi:a,mutatedKeys:s}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((d,f)=>function(_,v){const I=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return I(_)-I(v)}(d.type,f.type)||this._a(d.doc,f.doc)),this.Pa(i),r=null!=r&&r;const a=t&&!r?this.Ia():[],l=0===this.oa.size&&this.current&&!r?1:0,c=l!==this.sa;return this.sa=l,0!==o.length||c?{snapshot:new Of(this.query,e.aa,s,o,e.mutatedKeys,0===l,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new Gz,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(t=>this.ia=this.ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ia=this.ia.delete(t)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=lt(),this.aa.forEach(i=>{this.Ea(i.key)&&(this.oa=this.oa.add(i.key))});const t=[];return e.forEach(i=>{this.oa.has(i)||t.push(new Qz(i))}),this.oa.forEach(i=>{e.has(i)||t.push(new Yz(i))}),t}da(e){this.ia=e.ls,this.oa=lt();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return Of.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class koe{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Noe{constructor(e){this.key=e,this.Ra=!1}}class Ooe{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Za(a=>dj(a),e_),this.fa=new Map,this.ga=new Set,this.pa=new En(ve.comparator),this.ya=new Map,this.wa=new eA,this.Sa={},this.ba=new Map,this.Da=Ru.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function Foe(n,e){return jA.apply(this,arguments)}function jA(){return jA=(0,J.Z)(function*(n,e){const t=uR(n);let i,r;const s=t.ma.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.Aa();else{const o=yield Df(t.localStore,zr(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=yield zA(t,e,i,"current"===a,o.resumeToken),t.isPrimaryClient&&P0(t.remoteStore,o)}return r}),jA.apply(this,arguments)}function zA(n,e,t,i,r){return HA.apply(this,arguments)}function HA(){return HA=(0,J.Z)(function*(n,e,t,i,r){n.va=(f,g,_)=>{return(v=(0,J.Z)(function*(S,F,M,V){let Y=F.view.ca(M);Y.Zi&&(Y=yield S0(S.localStore,F.query,!1).then(({documents:Ft})=>F.view.ca(Ft,Y)));const de=V&&V.targetChanges.get(F.targetId),Me=V&&null!=V.targetMismatches.get(F.targetId),qe=F.view.applyChanges(Y,S.isPrimaryClient,de,Me);return JA(S,F.targetId,qe.Ta),qe.snapshot}),function I(S,F,M,V){return v.apply(this,arguments)})(n,f,g,_);var v};const s=yield S0(n.localStore,e,!0),o=new Xz(e,s.ls),a=o.ca(s.documents),l=l_.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),c=o.applyChanges(a,n.isPrimaryClient,l);JA(n,t,c.Ta);const d=new koe(e,t,o);return n.ma.set(e,d),n.fa.has(t)?n.fa.get(t).push(e):n.fa.set(t,[e]),c.snapshot}),HA.apply(this,arguments)}function Loe(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,J.Z)(function*(n,e){const t=ye(n),i=t.ma.get(e),r=t.fa.get(i.targetId);if(r.length>1)return t.fa.set(i.targetId,r.filter(s=>!e_(s,e))),void t.ma.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Af(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),E_(t.remoteStore,i.targetId),Ff(t,i.targetId)}).catch(Gl))):(Ff(t,i.targetId),yield Af(t.localStore,i.targetId,!0))}),$A.apply(this,arguments)}function WA(){return WA=(0,J.Z)(function*(n,e,t){const i=dR(n);try{const r=yield function(o,a){const l=ye(o),c=Bn.now(),d=a.reduce((_,v)=>_.add(v.key),lt());let f,g;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let v=ls(),I=lt();return l.ss.getEntries(_,d).next(S=>{v=S,v.forEach((F,M)=>{M.isValidDocument()||(I=I.add(F))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,v)).next(S=>{f=S;const F=[];for(const M of a){const V=fse(M,f.get(M.key).overlayedDocument);null!=V&&F.push(new Ya(M.key,V,YU(V.value.mapValue),Un.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,F,a)}).next(S=>{g=S;const F=S.applyToLocalDocumentSet(f,I);return l.documentOverlayCache.saveOverlays(_,S.batchId,F)})}).then(()=>({batchId:g.batchId,changes:mj(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Sa[o.currentUser.toKey()];c||(c=new En(tt)),c=c.insert(a,l),o.Sa[o.currentUser.toKey()]=c}(i,r.batchId,t),yield Xa(i,r.changes),yield Mf(i.remoteStore)}catch(r){const s=kf(r,"Failed to persist write");t.reject(s)}}),WA.apply(this,arguments)}function Jz(n,e){return qA.apply(this,arguments)}function qA(){return qA=(0,J.Z)(function*(n,e){const t=ye(n);try{const i=yield function roe(n,e){const t=ye(n),i=e.snapshotVersion;let r=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ss.newChangeBuffer({trackRemovals:!0});r=t.ts;const a=[];e.targetChanges.forEach((d,f)=>{const g=r.get(f);if(!g)return;a.push(t.qr.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.qr.addMatchingKeys(s,d.addedDocuments,f)));let _=g.withSequenceNumber(s.currentSequenceNumber);var I,S,F;null!==e.targetMismatches.get(f)?_=_.withResumeToken(Mi.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(f,_),S=_,F=d,(0===(I=g).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8||F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0)&&a.push(t.qr.updateTargetData(s,_))});let l=ls(),c=lt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Mz(s,o,e.documentUpdates).next(d=>{l=d.us,c=d.cs})),!i.isEqual(Le.min())){const d=t.qr.getLastRemoteSnapshotVersion(s).next(f=>t.qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(d)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.ts=r,s))}(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.ya.get(s);o&&(Oe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Ra=!0:r.modifiedDocuments.size>0?Oe(o.Ra):r.removedDocuments.size>0&&(Oe(o.Ra),o.Ra=!1))}),yield Xa(t,i,e)}catch(i){yield Gl(i)}}),qA.apply(this,arguments)}function eH(n,e,t){const i=ye(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=ye(o);l.onlineState=a;let c=!1;l.queries.forEach((d,f)=>{for(const g of f.listeners)g.Q_(a)&&(c=!0)}),c&&BA(l)}(i.eventManager,e),r.length&&i.Va.a_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Boe(n,e,t){return GA.apply(this,arguments)}function GA(){return GA=(0,J.Z)(function*(n,e,t){const i=ye(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.ya.get(e),s=r&&r.key;if(s){let o=new En(ve.comparator);o=o.insert(s,kn.newNoDocument(s,Le.min()));const a=lt().add(s),l=new a_(Le.min(),new Map,new En(tt),o,a);yield Jz(i,l),i.pa=i.pa.remove(s),i.ya.delete(e),eR(i)}else yield Af(i.localStore,e,!1).then(()=>Ff(i,e,t)).catch(Gl)}),GA.apply(this,arguments)}function Uoe(n,e){return KA.apply(this,arguments)}function KA(){return KA=(0,J.Z)(function*(n,e){const t=ye(n),i=e.batch.batchId;try{const r=yield function ioe(n,e){const t=ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const f=c.batch,g=f.keys();let _=U.resolve();return g.forEach(v=>{_=_.next(()=>d.getEntry(l,v)).next(I=>{const S=c.docVersions.get(v);Oe(null!==S),I.version.compareTo(S)<0&&(f.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),d.addEntry(I)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=lt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}(t.localStore,e);XA(t,i,null),QA(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Xa(t,r)}catch(r){yield Gl(r)}}),KA.apply(this,arguments)}function joe(n,e,t){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,J.Z)(function*(n,e,t){const i=ye(n);try{const r=yield function(o,a){const l=ye(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Oe(null!==f),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(i.localStore,e);XA(i,e,t),QA(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Xa(i,r)}catch(r){yield Gl(r)}}),ZA.apply(this,arguments)}function YA(){return YA=(0,J.Z)(function*(n,e){const t=ye(n);oc(t.remoteStore)||ce("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(o){const a=ye(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===i)return void e.resolve();const r=t.ba.get(i)||[];r.push(e),t.ba.set(i,r)}catch(i){const r=kf(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),YA.apply(this,arguments)}function QA(n,e){(n.ba.get(e)||[]).forEach(t=>{t.resolve()}),n.ba.delete(e)}function XA(n,e,t){const i=ye(n);let r=i.Sa[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}function Ff(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.fa.get(e))n.ma.delete(i),t&&n.Va.Fa(i,t);n.fa.delete(e),n.isPrimaryClient&&n.wa.Rr(e).forEach(i=>{n.wa.containsKey(i)||tH(n,i)})}function tH(n,e){n.ga.delete(e.path.canonicalString());const t=n.pa.get(e);null!==t&&(E_(n.remoteStore,t),n.pa=n.pa.remove(e),n.ya.delete(t),eR(n))}function JA(n,e,t){for(const i of t)i instanceof Yz?(n.wa.addReference(i.key,e),Hoe(n,i)):i instanceof Qz?(ce("SyncEngine","Document no longer in limbo: "+i.key),n.wa.removeReference(i.key,e),n.wa.containsKey(i.key)||tH(n,i.key)):Se()}function Hoe(n,e){const t=e.key,i=t.path.canonicalString();n.pa.get(t)||n.ga.has(i)||(ce("SyncEngine","New document in limbo: "+t),n.ga.add(i),eR(n))}function eR(n){for(;n.ga.size>0&&n.pa.size<n.maxConcurrentLimboResolutions;){const e=n.ga.values().next().value;n.ga.delete(e);const t=new ve(Vt.fromString(e)),i=n.Da.next();n.ya.set(i,new Noe(t)),n.pa=n.pa.insert(t,i),P0(n.remoteStore,new Qa(zr(mf(t.path)),i,"TargetPurposeLimboResolution",xs._e))}}function Xa(n,e,t){return tR.apply(this,arguments)}function tR(){return tR=(0,J.Z)(function*(n,e,t){const i=ye(n),r=[],s=[],o=[];var a;i.ma.isEmpty()||(i.ma.forEach((a,l)=>{o.push(i.va(l,e,t).then(c=>{if((c||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c?.fromCache?"not-current":"current"),c){r.push(c);const d=sA.Qi(l.targetId,c);s.push(d)}}))}),yield Promise.all(o),i.Va.a_(r),yield(a=(0,J.Z)(function*(c,d){const f=ye(c);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>U.forEach(d,_=>U.forEach(_.ki,v=>f.persistence.referenceDelegate.addReference(g,_.targetId,v)).next(()=>U.forEach(_.qi,v=>f.persistence.referenceDelegate.removeReference(g,_.targetId,v)))))}catch(g){if(!Kl(g))throw g;ce("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const _=g.targetId;if(!g.fromCache){const v=f.ts.get(_),S=v.withLastLimboFreeSnapshotVersion(v.snapshotVersion);f.ts=f.ts.insert(_,S)}}}),function l(c,d){return a.apply(this,arguments)})(i.localStore,s))}),tR.apply(this,arguments)}function $oe(n,e){return nR.apply(this,arguments)}function nR(){return nR=(0,J.Z)(function*(n,e){const t=ye(n);if(!t.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const i=yield Az(t.localStore,e);t.currentUser=e,(s=t).ba.forEach(a=>{a.forEach(l=>{l.reject(new re(G.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Xa(t,i._s)}var s}),nR.apply(this,arguments)}function Woe(n,e){const t=ye(n),i=t.ya.get(e);if(i&&i.Ra)return lt().add(i.key);{let r=lt();const s=t.fa.get(e);if(!s)return r;for(const o of s){const a=t.ma.get(o);r=r.unionWith(a.view.ua)}return r}}function qoe(n,e){return iR.apply(this,arguments)}function iR(){return iR=(0,J.Z)(function*(n,e){const t=ye(n),i=yield S0(t.localStore,e.query,!0),r=e.view.da(i);return t.isPrimaryClient&&JA(t,e.targetId,r.Ta),r}),iR.apply(this,arguments)}function Goe(n,e){return rR.apply(this,arguments)}function rR(){return rR=(0,J.Z)(function*(n,e){const t=ye(n);return kz(t.localStore,e).then(i=>Xa(t,i))}),rR.apply(this,arguments)}function Koe(n,e,t,i){return sR.apply(this,arguments)}function sR(){return sR=(0,J.Z)(function*(n,e,t,i){const r=ye(n),s=yield function(a,l){const c=ye(a),d=ye(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Cn(f,l).next(g=>g?c.localDocuments.getDocuments(f,g):U.resolve(null)))}(r.localStore,e);var l;null!==s?("pending"===t?yield Mf(r.remoteStore):"acknowledged"===t||"rejected"===t?(XA(r,e,i||null),QA(r,e),l=e,ye(ye(r.localStore).mutationQueue).Fn(l)):Se(),yield Xa(r,s)):ce("SyncEngine","Cannot apply mutation batch with id: "+e)}),sR.apply(this,arguments)}function oR(){return oR=(0,J.Z)(function*(n,e){const t=ye(n);if(uR(t),dR(t),!0===e&&!0!==t.Ca){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield nH(t,i.toArray());t.Ca=!0,yield PA(t.remoteStore,!0);for(const s of r)P0(t.remoteStore,s)}else if(!1===e&&!1!==t.Ca){const i=[];let r=Promise.resolve();t.fa.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(Ff(t,o),Af(t.localStore,o,!0))),E_(t.remoteStore,o)}),yield r,yield nH(t,i),function(o){const a=ye(o);a.ya.forEach((l,c)=>{E_(a.remoteStore,c)}),a.wa.Vr(),a.ya=new Map,a.pa=new En(ve.comparator)}(t),t.Ca=!1,yield PA(t.remoteStore,!1)}}),oR.apply(this,arguments)}function nH(n,e,t){return aR.apply(this,arguments)}function aR(){return aR=(0,J.Z)(function*(n,e,t){const i=ye(n),r=[],s=[];for(const o of e){let a;const l=i.fa.get(o);if(l&&0!==l.length){a=yield Df(i.localStore,zr(l[0]));for(const c of l){const d=i.ma.get(c),f=yield qoe(i,d);f.snapshot&&s.push(f.snapshot)}}else{const c=yield Pz(i.localStore,o);a=yield Df(i.localStore,c),yield zA(i,iH(c),o,!1,a.resumeToken)}r.push(a)}return i.Va.a_(s),r}),aR.apply(this,arguments)}function iH(n){return lj(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Yoe(n){return t=ye(n).localStore,ye(ye(t).persistence).Bi();var t}function Qoe(n,e,t,i){return lR.apply(this,arguments)}function lR(){return lR=(0,J.Z)(function*(n,e,t,i){const r=ye(n);if(r.Ca)return void ce("SyncEngine","Ignoring unexpected query state notification.");const s=r.fa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield kz(r.localStore,hj(s[0])),a=a_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Mi.EMPTY_BYTE_STRING);yield Xa(r,o,a);break}case"rejected":yield Af(r.localStore,e,!0),Ff(r,e,i);break;default:Se()}}),lR.apply(this,arguments)}function Xoe(n,e,t){return cR.apply(this,arguments)}function cR(){return cR=(0,J.Z)(function*(n,e,t){const i=uR(n);if(i.Ca){for(const r of e){if(i.fa.has(r)){ce("SyncEngine","Adding an already active target "+r);continue}const s=yield Pz(i.localStore,r),o=yield Df(i.localStore,s);yield zA(i,iH(s),o.targetId,!1,o.resumeToken),P0(i.remoteStore,o)}for(const r of t)i.fa.has(r)&&(yield Af(i.localStore,r,!1).then(()=>{E_(i.remoteStore,r),Ff(i,r)}).catch(Gl))}}),cR.apply(this,arguments)}function uR(n){const e=ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jz.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Woe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Boe.bind(null,e),e.Va.a_=Aoe.bind(null,e.eventManager),e.Va.Fa=Roe.bind(null,e.eventManager),e}function dR(n){const e=ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Uoe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=joe.bind(null,e),e}class w_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,J.Z)(function*(){t.serializer=v_(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Dz(this.persistence,new Sz,e.initialUser,this.serializer)}createPersistence(e){return new tA(C0.jr,this.serializer)}createSharedClientState(e){return new Lz}terminate(){var e=this;return(0,J.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class hR extends w_{constructor(e,t,i){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,J.Z)(function*(){yield t().call(i,e),yield i.xa.initialize(i,e),yield dR(i.xa.syncEngine),yield Mf(i.xa.remoteStore),yield i.persistence.mi(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Dz(this.persistence,new Sz,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new yz(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new Tre(t,this.persistence);return new Cre(e.asyncQueue,i)}createPersistence(e){const t=rA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?mr.withCacheSize(this.cacheSizeBytes):mr.DEFAULT;return new iA(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,Bz(),M0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Lz}}class rH extends hR{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,J.Z)(function*(){yield t().call(i,e);const r=i.xa.syncEngine;i.sharedClientState instanceof fA&&(i.sharedClientState.syncEngine={Ys:Koe.bind(null,r),Zs:Qoe.bind(null,r),Xs:Xoe.bind(null,r),Bi:Yoe.bind(null,r),Js:Goe.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.mi(function(){var s=(0,J.Z)(function*(o){yield function Zoe(n,e){return oR.apply(this,arguments)}(i.xa.syncEngine,o),i.gcScheduler&&(o&&!i.gcScheduler.started?i.gcScheduler.start():o||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(o&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():o||i.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Bz();if(!fA.D(t))throw new re(G.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=rA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fA(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Lf{initialize(e,t){var i=this;return(0,J.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>eH(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=$oe.bind(null,i.syncEngine),yield PA(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Doe}createDatastore(e){const t=v_(e.databaseInfo.databaseId),i=new doe(e.databaseInfo);return new poe(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return i=this.localStore,r=this.datastore,s=e.asyncQueue,o=t=>eH(this.syncEngine,t,0),a=Vz.D()?new Vz:new loe,new _oe(i,r,s,o,a);var i,r,s,o,a}createSyncEngine(e,t){return function(r,s,o,a,l,c,d){const f=new Ooe(r,s,o,a,l,c);return d&&(f.Ca=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,J.Z)(function*(i){const r=ye(i);ce("RemoteStore","RemoteStore shutting down."),r.C_.add(5),yield Rf(r),r.F_.shutdown(),r.M_.set("Unknown")}),function t(i){return e.apply(this,arguments)})(this.remoteStore);var e}}function sH(n,e=10240){let t=0;return{read:()=>(0,J.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,J.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class N0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class tae{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new Ri,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(i=>{i&&i.Z_()?this.metadata.resolve(i.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Y_)}`))},i=>this.metadata.reject(i))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,J.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,J.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,J.Z)(function*(){const t=yield e.qa();if(null===t)return null;const i=e.La.decode(t),r=Number(i);isNaN(r)&&e.Qa(`length string (${i}) is not valid number`);const s=yield e.Ka(r);return new Moe(JSON.parse(s),t.length+r)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,J.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const t=e.$a();t<0&&e.Qa("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Ka(e){var t=this;return(0,J.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ua())&&t.Qa("Reached the end of bundle when more is expected.");const i=t.La.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,J.Z)(function*(){const t=yield e.Ba.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class nae{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,J.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new re(G.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,J.Z)(function*(o,a){const l=ye(o),c=u_(l.serializer)+"/documents",d={documents:a.map(v=>c_(l.serializer,v))},f=yield l.Co("BatchGetDocuments",c,d,a.length),g=new Map;f.forEach(v=>{const I=function Ise(n,e){return"found"in e?function(i,r){Oe(!!r.found);const s=ia(i,r.found.name),o=di(r.found.updateTime),a=r.found.createTime?di(r.found.createTime):Le.min(),l=new tr({mapValue:{fields:r.found.fields}});return kn.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(i,r){Oe(!!r.missing),Oe(!!r.readTime);const s=ia(i,r.missing),o=di(r.readTime);return kn.newNoDocument(s,o)}(n,e):Se()}(l.serializer,v);g.set(I.key.toString(),I)});const _=[];return a.forEach(v=>{const I=g.get(v.toString());Oe(!!I),_.push(I)}),_}),function s(o,a){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ef(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,J.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=ve.fromPath(r);e.mutations.push(new LD(s,e.precondition(s)))}),yield(i=(0,J.Z)(function*(s,o){const a=ye(s),l=u_(a.serializer)+"/documents",c={writes:o.map(d=>d_(a.serializer,d))};yield a.wo("Commit",l,c)}),function r(s,o){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Se();t=Le.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new re(G.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Le.min())?Un.exists(!1):Un.updateTime(t):Un.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Le.min()))throw new re(G.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Un.updateTime(t)}return Un.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class iae{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Wa=i.maxAttempts,this.zo=new mA(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,J.Z)(function*(){const t=new nae(e.datastore),i=e.za(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.ja(s)}))}).catch(r=>{e.ja(r)})}))}za(e){try{const t=this.updateFunction(e);return!qg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Rj(t)}return!1}}class rae{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Ui.UNAUTHENTICATED,this.clientId=xU.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=(0,J.Z)(function*(a){ce("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>(ce("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,J.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new re(G.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,J.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=kf(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function O0(n,e){return fR.apply(this,arguments)}function fR(){return fR=(0,J.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,J.Z)(function*(s){i.isEqual(s)||(yield Az(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),fR.apply(this,arguments)}function pR(n,e){return mR.apply(this,arguments)}function mR(){return mR=(0,J.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield gR(n);ce("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>qz(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>qz(e.remoteStore,s)),n._onlineComponents=e}),mR.apply(this,arguments)}function oH(n){return"FirebaseError"===n.name?n.code===G.FAILED_PRECONDITION||n.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function gR(n){return _R.apply(this,arguments)}function _R(){return _R=(0,J.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{yield O0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!oH(t))throw t;os("Error using user provided cache. Falling back to memory cache: "+t),yield O0(n,new w_)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),yield O0(n,new w_);return n._offlineComponents}),_R.apply(this,arguments)}function F0(n){return yR.apply(this,arguments)}function yR(){return yR=(0,J.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),yield pR(n,n._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),yield pR(n,new Lf))),n._onlineComponents}),yR.apply(this,arguments)}function aH(n){return gR(n).then(e=>e.persistence)}function Vf(n){return gR(n).then(e=>e.localStore)}function lH(n){return F0(n).then(e=>e.remoteStore)}function vR(n){return F0(n).then(e=>e.syncEngine)}function Bf(n){return bR.apply(this,arguments)}function bR(){return bR=(0,J.Z)(function*(n){const e=yield F0(n),t=e.eventManager;return t.onListen=Foe.bind(null,e.syncEngine),t.onUnlisten=Loe.bind(null,e.syncEngine),t}),bR.apply(this,arguments)}function uH(n,e,t={}){const i=new Ri;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function(s,o,a,l,c){const d=new N0({next:g=>{o.enqueueAndForget(()=>LA(s,f));const _=g.docs.has(a);!_&&g.fromCache?c.reject(new re(G.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&l&&"server"===l.source?c.reject(new re(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),f=new UA(mf(a.path),d,{includeMetadataChanges:!0,J_:!0});return OA(s,f)}(yield Bf(n),n.asyncQueue,e,t,i)})),i.promise}function dH(n,e,t={}){const i=new Ri;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function(s,o,a,l,c){const d=new N0({next:g=>{o.enqueueAndForget(()=>LA(s,f)),g.fromCache&&"server"===l.source?c.reject(new re(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),f=new UA(a,d,{includeMetadataChanges:!0,J_:!0});return OA(s,f)}(yield Bf(n),n.asyncQueue,e,t,i)})),i.promise}function hH(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const fH=new Map;function ER(n,e,t){if(!t)throw new re(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pH(n,e,t,i){if(!0===e&&!0===i)throw new re(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mH(n){if(!ve.isDocumentKey(n))throw new re(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gH(n){if(ve.isDocumentKey(n))throw new re(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function L0(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(i=n).constructor?i.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var i;return"function"==typeof n?"a function":Se()}function St(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new re(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=L0(n);throw new re(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _H(n,e){if(e<=0)throw new re(G.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class yH{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new re(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new re(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=hH(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new re(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class I_{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yH({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new re(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new re(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yH(e),void 0!==e.credentials&&(this._authCredentials=function(i){if(!i)return new hre;switch(i.type){case"firstParty":return new gre(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new re(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=fH.get(t);i&&(ce("ComponentProvider","Removing Datastore"),fH.delete(t),i.terminate())}(this),Promise.resolve()}}class nr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new nr(this.firestore,e,this._query)}}class Nn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ra(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nn(this.firestore,e,this._key)}}class ra extends nr{constructor(e,t,i){super(e,t,mf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nn(this.firestore,null,new ve(e))}withConverter(e){return new ra(this.firestore,e,this._path)}}function bH(n,e,...t){if(n=(0,T.m9)(n),ER("collection","path",e),n instanceof I_){const i=Vt.fromString(e,...t);return gH(i),new ra(n,null,i)}{if(!(n instanceof Nn||n instanceof ra))throw new re(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Vt.fromString(e,...t));return gH(i),new ra(n.firestore,null,i)}}function V0(n,e,...t){if(n=(0,T.m9)(n),1===arguments.length&&(e=xU.newId()),ER("doc","path",e),n instanceof I_){const i=Vt.fromString(e,...t);return mH(i),new Nn(n,null,new ve(i))}{if(!(n instanceof Nn||n instanceof ra))throw new re(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Vt.fromString(e,...t));return mH(i),new Nn(n.firestore,n instanceof ra?n.converter:null,new ve(i))}}function EH(n,e){return n=(0,T.m9)(n),e=(0,T.m9)(e),(n instanceof Nn||n instanceof ra)&&(e instanceof Nn||e instanceof ra)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function wR(n,e){return n=(0,T.m9)(n),e=(0,T.m9)(e),n instanceof nr&&e instanceof nr&&n.firestore===e.firestore&&e_(n._query,e._query)&&n.converter===e.converter}class gae{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new mA(this,"async_queue_retry"),this.iu=()=>{const t=M0();t&&ce("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const e=M0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=M0();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const t=new Ri;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,J.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(t){if(!Kl(t))throw t;ce("AsyncQueue","Operation failed with retryable error: "+t)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const t=this.Ja.then(()=>(this.tu=!0,e().catch(i=>{throw this.eu=i,this.tu=!1,ui("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(i)),i}).then(i=>(this.tu=!1,i))));return this.Ja=t,t}enqueueAfterDelay(e,t,i){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=NA.createAndSchedule(this,e,t,i,s=>this.au(s));return this.Xa.push(r),r}su(){this.eu&&Se()}verifyOperationInProgress(){}uu(){var e=this;return(0,J.Z)(function*(){let t;do{t=e.Ja,yield t}while(t!==e.Ja)})()}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function IR(n){return function(t,i){if("object"!=typeof t||null===t)return!1;const r=t;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class _ae{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ri,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class wn extends I_{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new gae,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||wH(this),this._firestoreClient.terminate()}}function ii(n){return n._firestoreClient||wH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wH(n){var e,t,i;const r=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new qre(n._databaseId,l,n._persistenceKey,(d=r).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,hH(d.experimentalLongPollingOptions),d.useFetchStreams));var l,d;n._firestoreClient=new rae(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=r.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(i=r.localCache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function IH(n,e,t){const i=new Ri;return n.asyncQueue.enqueue((0,J.Z)(function*(){try{yield O0(n,t),yield pR(n,e),i.resolve()}catch(r){const s=r;if(!oH(s))throw s;os("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function CH(n){if(n._initialized||n._terminated)throw new re(G.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class sa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sa(Mi.fromBase64String(e))}catch(t){throw new re(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sa(Mi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ja{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new re(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pu{constructor(e){this._methodName=e}}class B0{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}}const Dae=/^__.*__$/;class Aae{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms):new bf(e,this.data,t,this.fieldTransforms)}}class TH{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class U0{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new U0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:i,du:!1});return r.Au(e),r}Ru(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:i,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return H0(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(xH(this.Iu)&&Dae.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class Rae{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||v_(e)}pu(e,t,i,r=!1){return new U0({Iu:e,methodName:t,gu:i,path:Pn.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ku(n){const e=n._freezeSettings(),t=v_(n._databaseId);return new Rae(n._databaseId,!!e.ignoreUndefinedProperties,t)}function j0(n,e,t,i,r,s={}){const o=n.pu(s.merge||s.mergeFields?2:0,e,t,r);SR("Data must be an object, but it was:",o,i);const a=AH(i,o);let l,c;if(s.merge)l=new as(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const g=x_(e,f,t);if(!o.contains(g))throw new re(G.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);MH(d,g)||d.push(g)}l=new as(d),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new Aae(new tr(a),l,c)}class T_ extends Pu{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof T_}}function SH(n,e,t){return new U0({Iu:3,gu:e.settings.gu,methodName:n._methodName,du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class CR extends Pu{_toFieldTransform(e){return new r_(e.path,new yf)}isEqual(e){return e instanceof CR}}class Mae extends Pu{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=SH(this,e,!0),i=this.yu.map(s=>Nu(s,t)),r=new Iu(i);return new r_(e.path,r)}isEqual(e){return this===e}}class Pae extends Pu{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=SH(this,e,!0),i=this.yu.map(s=>Nu(s,t)),r=new Cu(i);return new r_(e.path,r)}isEqual(e){return this===e}}class kae extends Pu{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new vf(e.serializer,vj(e.serializer,this.wu));return new r_(e.path,t)}isEqual(e){return this===e}}function TR(n,e,t,i){const r=n.pu(1,e,t);SR("Data must be an object, but it was:",r,i);const s=[],o=tr.empty();Zl(i,(l,c)=>{const d=z0(e,l,t);c=(0,T.m9)(c);const f=r.Ru(d);if(c instanceof T_)s.push(d);else{const g=Nu(c,f);null!=g&&(s.push(d),o.set(d,g))}});const a=new as(s);return new TH(o,a,r.fieldTransforms)}function xR(n,e,t,i,r,s){const o=n.pu(1,e,t),a=[x_(e,i,t)],l=[r];if(s.length%2!=0)throw new re(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(x_(e,s[g])),l.push(s[g+1]);const c=[],d=tr.empty();for(let g=a.length-1;g>=0;--g)if(!MH(c,a[g])){const _=a[g];let v=l[g];v=(0,T.m9)(v);const I=o.Ru(_);if(v instanceof T_)c.push(_);else{const S=Nu(v,I);null!=S&&(c.push(_),d.set(_,S))}}const f=new as(c);return new TH(d,f,o.fieldTransforms)}function DH(n,e,t,i=!1){return Nu(t,n.pu(i?4:3,e))}function Nu(n,e){if(RH(n=(0,T.m9)(n)))return SR("Unsupported field value:",e,n),AH(n,e);if(n instanceof Pu)return function(i,r){if(!xH(r.Iu))throw r.mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.mu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Nu(a,r.Vu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if(null===(i=(0,T.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return vj(r.serializer,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const s=Bn.fromDate(i);return{timestampValue:wf(r.serializer,s)}}if(i instanceof Bn){const s=new Bn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wf(r.serializer,s)}}if(i instanceof B0)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof sa)return{bytesValue:Uj(r.serializer,i._byteString)};if(i instanceof Nn){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:HD(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.mu(`Unsupported field value: ${L0(i)}`)}(n,e)}function AH(n,e){const t={};return jU(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zl(n,(i,r)=>{const s=Nu(r,e.Eu(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function RH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Bn||n instanceof B0||n instanceof sa||n instanceof Nn||n instanceof Pu)}function SR(n,e,t){if(!RH(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const i=L0(t);throw e.mu("an object"===i?n+" a custom object":n+" "+i)}var r}function x_(n,e,t){if((e=(0,T.m9)(e))instanceof Ja)return e._internalPath;if("string"==typeof e)return z0(n,e);throw H0("Field path arguments must be of type string or ",n,!1,void 0,t)}const Nae=new RegExp("[~\\*/\\[\\]]");function z0(n,e,t){if(e.search(Nae)>=0)throw H0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ja(...e.split("."))._internalPath}catch{throw H0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function H0(n,e,t,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new re(G.INVALID_ARGUMENT,a+n+l)}function MH(n,e){return n.some(t=>t.isEqual(e))}class S_{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Oae(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($0("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Oae extends S_{data(){return super.data()}}function $0(n,e){return"string"==typeof e?z0(n,e):e instanceof Ja?e._internalPath:e._delegate._internalPath}function PH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new re(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class DR{}class D_ extends DR{}function lc(n,e,...t){let i=[];e instanceof DR&&i.push(e),i=i.concat(t),function(s){const o=s.filter(l=>l instanceof Uf).length,a=s.filter(l=>l instanceof A_).length;if(o>1||o>0&&a>0)throw new re(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class A_ extends D_{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new A_(e,t,i)}_apply(e){const t=this._parse(e);return FH(e._query,t),new nr(e.firestore,e.converter,OD(e._query,t))}_parse(e){const t=ku(e.firestore);return function(s,o,a,l,c,d,f){let g;if(c.isKeyField()){if("array-contains"===d||"array-contains-any"===d)throw new re(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if("in"===d||"not-in"===d){OH(f,d);const _=[];for(const v of f)_.push(NH(l,s,v));g={arrayValue:{values:_}}}else g=NH(l,s,f)}else"in"!==d&&"not-in"!==d&&"array-contains-any"!==d||OH(f,d),g=DH(a,"where",f,"in"===d||"not-in"===d);return Pt.create(c,d,g)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Uf extends DR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Uf(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:rn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)FH(o,l),o=OD(o,l)}(e._query,t),new nr(e.firestore,e.converter,OD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class AR extends D_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new AR(e,t)}_apply(e){const t=function(r,s,o){if(null!==r.startAt)throw new re(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new re(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xg(s,o)}(e._query,this._field,this._direction);return new nr(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Ka(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class W0 extends D_{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new W0(e,t,i)}_apply(e){return new nr(e.firestore,e.converter,d0(e._query,this._limit,this._limitType))}}class q0 extends D_{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new q0(e,t,i)}_apply(e){const t=kH(e,this.type,this._docOrFields,this._inclusive);return new nr(e.firestore,e.converter,(s=t,new Ka((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class G0 extends D_{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new G0(e,t,i)}_apply(e){const t=kH(e,this.type,this._docOrFields,this._inclusive);return new nr(e.firestore,e.converter,(s=t,new Ka((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function kH(n,e,t,i){if(t[0]=(0,T.m9)(t[0]),t[0]instanceof S_)return function(s,o,a,l,c){if(!l)throw new re(G.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const f of gf(s))if(f.field.isKeyField())d.push(Eu(o,l.key));else{const g=l.data.field(f.field);if(r0(g))throw new re(G.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===g){const _=f.field.canonicalString();throw new re(G.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}d.push(g)}return new tc(d,c)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=ku(n.firestore);return function(o,a,l,c,d,f){const g=o.explicitOrderBy;if(d.length>g.length)throw new re(G.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let v=0;v<d.length;v++){const I=d[v];if(g[v].field.isKeyField()){if("string"!=typeof I)throw new re(G.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof I}`);if(!ND(o)&&-1!==I.indexOf("/"))throw new re(G.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${I}' contains a slash.`);const S=o.path.child(Vt.fromString(I));if(!ve.isDocumentKey(S))throw new re(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const F=new ve(S);_.push(Eu(a,F))}else{const S=DH(l,c,I);_.push(S)}}return new tc(_,f)}(n._query,n.firestore._databaseId,r,e,t,i)}}function NH(n,e,t){if("string"==typeof(t=(0,T.m9)(t))){if(""===t)throw new re(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ND(e)&&-1!==t.indexOf("/"))throw new re(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Vt.fromString(t));if(!ve.isDocumentKey(i))throw new re(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Eu(n,new ve(i))}if(t instanceof Nn)return Eu(n,t._key);throw new re(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${L0(t)}.`)}function OH(n,e){if(!Array.isArray(n)||0===n.length)throw new re(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FH(n,e){const t=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new re(G.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class RR{convertValue(e,t="none"){switch(Jl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ni(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Se()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Zl(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new B0(ni(e.latitude),ni(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=s0(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Kg(e));default:return null}}convertTimestamp(e){const t=Yl(e);return new Bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Vt.fromString(e);Oe(Yj(i));const r=new Ql(i.get(1),i.get(3)),s=new ve(i.popFirst(5));return r.isEqual(t)||ui(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function K0(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class $ae extends RR{constructor(e){super(),this.firestore=e}convertBytes(e){return new sa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}class Ou{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class el extends S_{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new R_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field($0("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class R_ extends el{data(e={}){return super.data(e)}}class cc{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ou(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new R_(this._firestore,this._userDataWriter,i.key,i,new Ou(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new R_(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ou(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new R_(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ou(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,d=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:qae(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qae(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}function VH(n,e){return n instanceof el&&e instanceof el?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof cc&&e instanceof cc&&n._firestore===e._firestore&&wR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class uc extends RR{constructor(e){super(),this.firestore=e}convertBytes(e){return new sa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}function BH(n,e,t){n=St(n,Nn);const i=St(n.firestore,wn),r=K0(n.converter,e,t);return jf(i,[j0(ku(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Un.none())])}function UH(n,e,t,...i){n=St(n,Nn);const r=St(n.firestore,wn),s=ku(r);let o;return o="string"==typeof(e=(0,T.m9)(e))||e instanceof Ja?xR(s,"updateDoc",n._key,e,t,i):TR(s,"updateDoc",n._key,e),jf(r,[o.toMutation(n._key,Un.exists(!0))])}function jH(n,...e){var t,i,r;n=(0,T.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||IR(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(IR(e[o])){const f=e[o];e[o]=null===(t=f.next)||void 0===t?void 0:t.bind(f),e[o+1]=null===(i=f.error)||void 0===i?void 0:i.bind(f),e[o+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}let l,c,d;if(n instanceof Nn)c=St(n.firestore,wn),d=mf(n._key.path),l={next:f=>{e[o]&&e[o](MR(c,n,f))},error:e[o+1],complete:e[o+2]};else{const f=St(n,nr);c=St(f.firestore,wn),d=f._query;const g=new uc(c);l={next:_=>{e[o]&&e[o](new cc(c,g,f,_))},error:e[o+1],complete:e[o+2]},PH(n._query)}return function(g,_,v,I){const S=new N0(I),F=new UA(_,S,v);return g.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return OA(yield Bf(g),F)})),()=>{S.Na(),g.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return LA(yield Bf(g),F)}))}}(ii(c),d,a,l)}function jf(n,e){return function(i,r){const s=new Ri;return i.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function Voe(n,e,t){return WA.apply(this,arguments)}(yield vR(i),r,s)})),s.promise}(ii(n),e)}function MR(n,e,t){const i=t.docs.get(e._key),r=new uc(n);return new el(n,r,e._key,i,new Ou(t.hasPendingWrites,t.fromCache),e.converter)}const ule={maxAttempts:5};class zH{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ku(e)}set(e,t,i){this._verifyNotCommitted();const r=dc(e,this._firestore),s=K0(r.converter,t,i),o=j0(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(o.toMutation(r._key,Un.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=dc(e,this._firestore);let o;return o="string"==typeof(t=(0,T.m9)(t))||t instanceof Ja?xR(this._dataReader,"WriteBatch.update",s._key,t,i,r):TR(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Un.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=dc(e,this._firestore);return this._mutations=this._mutations.concat(new Ef(t._key,Un.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(G.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dc(n,e){if((n=(0,T.m9)(n)).firestore!==e)throw new re(G.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class dle extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=ku(t)}get(t){const i=dc(t,this._firestore),r=new $ae(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||1!==s.length)return Se();const o=s[0];if(o.isFoundDocument())return new S_(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new S_(this._firestore,r,i._key,null,i.converter);throw Se()})}set(t,i,r){const s=dc(t,this._firestore),o=K0(s.converter,i,r),a=j0(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,r);return this._transaction.set(s._key,a),this}update(t,i,r,...s){const o=dc(t,this._firestore);let a;return a="string"==typeof(i=(0,T.m9)(i))||i instanceof Ja?xR(this._dataReader,"Transaction.update",o._key,i,r,s):TR(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(t){const i=dc(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=dc(e,this._firestore),i=new uc(this._firestore);return super.get(e).then(r=>new el(this._firestore,i,t._key,r._document,new Ou(!1,!1),t.converter))}}function kR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function qH(){if(typeof Uint8Array>"u")throw new re("unimplemented","Uint8Arrays are not available in this environment.")}function GH(){if(!function $re(){return typeof atob<"u"}())throw new re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){af=rs.SDK_VERSION,(0,rs._registerComponent)(new bo.wA("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new wn(new pre(i.getProvider("auth-internal")),new _re(i.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new re(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ql(c.options.projectId,d)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,rs.registerVersion)(IU,"4.4.0",e),(0,rs.registerVersion)(IU,"4.4.0","esm2017")}();class M_{constructor(e){this._delegate=e}static fromBase64String(e){return GH(),new M_(sa.fromBase64String(e))}static fromUint8Array(e){return qH(),new M_(sa.fromUint8Array(e))}toBase64(){return GH(),this._delegate.toBase64()}toUint8Array(){return qH(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function NR(n){return function Ele(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class wle{enableIndexedDbPersistence(e,t){return function vae(n,e){CH(n=St(n,wn));const t=ii(n);if(t._uninitializedComponentsProvider)throw new re(G.FAILED_PRECONDITION,"SDK cache is already specified.");os("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new Lf;return IH(t,r,new hR(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function bae(n){CH(n=St(n,wn));const e=ii(n);if(e._uninitializedComponentsProvider)throw new re(G.FAILED_PRECONDITION,"SDK cache is already specified.");os("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new Lf;return IH(e,i,new rH(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Eae(n){if(n._initialized&&!n._terminated)throw new re(G.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ri;return n._queue.enqueueAndForgetEvenWhileRestricted((0,J.Z)(function*(){try{yield(t=(0,J.Z)(function*(r){if(!Io.D())return Promise.resolve();const s=r+"main";yield Io.delete(s)}),function i(r){return t.apply(this,arguments)})(rA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class KH{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ql||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&os("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function vH(n,e,t,i={}){var r;const s=(n=St(n,I_))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if("string"==typeof i.mockUserToken)a=i.mockUserToken,l=Ui.MOCK_USER;else{a=(0,T.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new re(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ui(c)}n._authCredentials=new fre(new CU(a,l))}}(this._delegate,e,t,i)}enableNetwork(){return function Iae(n){return function sae(n){return n.asyncQueue.enqueue((0,J.Z)(function*(){const e=yield aH(n),t=yield lH(n);return e.setNetworkEnabled(!0),function(r){const s=ye(r);return s.C_.delete(0),b_(s)}(t)}))}(ii(n=St(n,wn)))}(this._delegate)}disableNetwork(){return function Cae(n){return function oae(n){return n.asyncQueue.enqueue((0,J.Z)(function*(){const e=yield aH(n),t=yield lH(n);return e.setNetworkEnabled(!1),(i=(0,J.Z)(function*(s){const o=ye(s);o.C_.add(0),yield Rf(o),o.M_.set("Offline")}),function r(s){return i.apply(this,arguments)})(t);var i}))}(ii(n=St(n,wn)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,pH("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function wae(n){return function(t){const i=new Ri;return t.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function zoe(n,e){return YA.apply(this,arguments)}(yield vR(t),i)})),i.promise}(ii(n=St(n,wn)))}(this._delegate)}onSnapshotsInSync(e){return function tle(n,e){return function cae(n,e){const t=new N0(e);return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return r=yield Bf(n),s=t,ye(r).q_.add(s),void s.next();var r,s})),()=>{t.Na(),n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return r=yield Bf(n),s=t,void ye(r).q_.delete(s);var r,s}))}}(ii(n=St(n,wn)),IR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zf(this,bH(this._delegate,e))}catch(t){throw Hr(t,"collection()","Firestore.collection()")}}doc(e){try{return new eo(this,V0(this._delegate,e))}catch(t){throw Hr(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $r(this,function mae(n,e){if(n=St(n,I_),ER("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new re(G.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new nr(n,null,(i=e,new Ka(Vt.emptyPath(),i)));var i}(this._delegate,e))}catch(t){throw Hr(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function hle(n,e,t){n=St(n,wn);const i=Object.assign(Object.assign({},ule),t);return function(s){if(s.maxAttempts<1)throw new re(G.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new Ri;return s.asyncQueue.enqueueAndForget((0,J.Z)(function*(){const c=yield function cH(n){return F0(n).then(e=>e.datastore)}(s);new iae(s.asyncQueue,c,a,o,l).run()})),l.promise}(ii(n),r=>e(new dle(n,r)),i)}(this._delegate,t=>e(new ZH(this,t)))}batch(){return ii(this._delegate),new YH(new zH(this._delegate,e=>jf(this._delegate,e)))}loadBundle(e){return function Tae(n,e){const t=ii(n=St(n,wn)),i=new _ae;return function uae(n,e,t,i){const r=function(o,a){let l;return l="string"==typeof o?Pj().encode(o):o,d=function(d,f){if(d instanceof Uint8Array)return sH(d,f);if(d instanceof ArrayBuffer)return sH(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new tae(d,a);var d}(t,v_(e));n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){!function Joe(n,e,t){const i=ye(n);var r;(r=(0,J.Z)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(v,I){const S=ye(v),F=di(I.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",M=>S.Kr.getBundleMetadata(M,I.id)).then(M=>!!M&&M.createTime.compareTo(F)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(v=c).totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}),Promise.resolve(new Set);l._updateProgress(Zz(c));const d=new Poe(c,o.localStore,a.serializer);let f=yield a.Ma();for(;f;){const _=yield d.ea(f);_&&l._updateProgress(_),f=yield a.Ma()}const g=yield d.complete();return yield Xa(o,g.ra,void 0),yield function(v,I){const S=ye(v);return S.persistence.runTransaction("Save bundle","readwrite",F=>S.Kr.saveBundleMetadata(F,I))}(o.localStore,c),l._completeWith(g.progress),Promise.resolve(g.na)}catch(c){return os("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var v}),function s(o,a,l){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield vR(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function xae(n,e){return function dae(n,e){return n.asyncQueue.enqueue((0,J.Z)(function*(){return function(i,r){const s=ye(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,r))}(yield Vf(n),e)}))}(ii(n=St(n,wn)),e).then(t=>t?new nr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new $r(this,t):null)}}class Y0 extends RR{constructor(e){super(),this.firestore=e}convertBytes(e){return new M_(new sa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return eo.forKey(t,this.firestore,null)}}class ZH{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Y0(e)}get(e){const t=Lu(e);return this._delegate.get(t).then(i=>new P_(this._firestore,new el(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Lu(e);return i?(kR("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Lu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Lu(e);return this._delegate.delete(t),this}}class YH{constructor(e){this._delegate=e}set(e,t,i){const r=Lu(e);return i?(kR("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Lu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Lu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Fu{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new R_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new k_(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Fu.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new Fu(e,new Y0(e),t),r.set(t,s)),s}}Fu.INSTANCES=new WeakMap;class eo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Y0(e)}static forPath(e,t,i){if(e.length%2!=0)throw new re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new eo(t,new Nn(t._delegate,i,new ve(e)))}static forKey(e,t,i){return new eo(t,new Nn(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new zf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zf(this.firestore,bH(this._delegate,e))}catch(t){throw Hr(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,T.m9)(e))instanceof Nn&&EH(this._delegate,e)}set(e,t){t=kR("DocumentReference.set",t);try{return t?BH(this._delegate,e,t):BH(this._delegate,e)}catch(i){throw Hr(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?UH(this._delegate,e):UH(this._delegate,e,t,...i)}catch(r){throw Hr(r,"updateDoc()","DocumentReference.update()")}}delete(){return function Jae(n){return jf(St(n.firestore,wn),[new Ef(n._key,Un.none())])}(this._delegate)}onSnapshot(...e){const t=QH(e),i=XH(e,r=>new P_(this.firestore,new el(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return jH(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function Kae(n){n=St(n,Nn);const e=St(n.firestore,wn),t=ii(e),i=new uc(e);return function aae(n,e){const t=new Ri;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return(i=(0,J.Z)(function*(s,o,a){try{const l=yield function(d,f){const g=ye(d);return g.persistence.runTransaction("read document","readonly",_=>g.localDocuments.getDocument(_,f))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new re(G.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=kf(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function r(s,o,a){return i.apply(this,arguments)})(yield Vf(n),e,t);var i})),t.promise}(t,n._key).then(r=>new el(e,i,n._key,r,new Ou(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Zae(n){n=St(n,Nn);const e=St(n.firestore,wn);return uH(ii(e),n._key,{source:"server"}).then(t=>MR(e,n,t))}(this._delegate):function Gae(n){n=St(n,Nn);const e=St(n.firestore,wn);return uH(ii(e),n._key).then(t=>MR(e,n,t))}(this._delegate),t.then(i=>new P_(this.firestore,new el(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new eo(this.firestore,this._delegate.withConverter(e?Fu.getInstance(this.firestore,e):null))}}function Hr(n,e,t){return n.message=n.message.replace(e,t),n}function QH(n){for(const e of n)if("object"==typeof e&&!NR(e))return e;return{}}function XH(n,e){var t,i;let r;return r=NR(n[0])?n[0]:NR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class P_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new eo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return VH(this._delegate,e._delegate)}}class k_ extends P_{data(e){const t=this._delegate.data(e);return this._delegate._converter||function dre(n,e){n||Se()}(void 0!==t),t}}class $r{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Y0(e)}where(e,t,i){try{return new $r(this.firestore,lc(this._delegate,function Fae(n,e,t){const i=e,r=$0("where",n);return A_._create(r,i,t)}(e,t,i)))}catch(r){throw Hr(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new $r(this.firestore,lc(this._delegate,function Lae(n,e="asc"){const t=e,i=$0("orderBy",n);return AR._create(i,t)}(e,t)))}catch(i){throw Hr(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $r(this.firestore,lc(this._delegate,function Vae(n){return _H("limit",n),W0._create("limit",n,"F")}(e)))}catch(t){throw Hr(t,"limit()","Query.limit()")}}limitToLast(e){try{return new $r(this.firestore,lc(this._delegate,function Bae(n){return _H("limitToLast",n),W0._create("limitToLast",n,"L")}(e)))}catch(t){throw Hr(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $r(this.firestore,lc(this._delegate,function Uae(...n){return q0._create("startAt",n,!0)}(...e)))}catch(t){throw Hr(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $r(this.firestore,lc(this._delegate,function jae(...n){return q0._create("startAfter",n,!1)}(...e)))}catch(t){throw Hr(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $r(this.firestore,lc(this._delegate,function zae(...n){return G0._create("endBefore",n,!1)}(...e)))}catch(t){throw Hr(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $r(this.firestore,lc(this._delegate,function Hae(...n){return G0._create("endAt",n,!0)}(...e)))}catch(t){throw Hr(t,"endAt()","Query.endAt()")}}isEqual(e){return wR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Qae(n){n=St(n,nr);const e=St(n.firestore,wn),t=ii(e),i=new uc(e);return function lae(n,e){const t=new Ri;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return(i=(0,J.Z)(function*(s,o,a){try{const l=yield S0(s,o,!0),c=new Xz(o,l.ls),d=c.ca(l.documents),f=c.applyChanges(d,!1);a.resolve(f.snapshot)}catch(l){const c=kf(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function r(s,o,a){return i.apply(this,arguments)})(yield Vf(n),e,t);var i})),t.promise}(t,n._query).then(r=>new cc(e,i,n,r))}(this._delegate):"server"===e?.source?function Xae(n){n=St(n,nr);const e=St(n.firestore,wn),t=ii(e),i=new uc(e);return dH(t,n._query,{source:"server"}).then(r=>new cc(e,i,n,r))}(this._delegate):function Yae(n){n=St(n,nr);const e=St(n.firestore,wn),t=ii(e),i=new uc(e);return PH(n._query),dH(t,n._query).then(r=>new cc(e,i,n,r))}(this._delegate),t.then(i=>new OR(this.firestore,new cc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=QH(e),i=XH(e,r=>new OR(this.firestore,new cc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return jH(this._delegate,t,i)}withConverter(e){return new $r(this.firestore,this._delegate.withConverter(e?Fu.getInstance(this.firestore,e):null))}}class Cle{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new k_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class OR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new $r(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new k_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Cle(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new k_(this._firestore,i))})}isEqual(e){return VH(this._delegate,e._delegate)}}class zf extends $r{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new eo(this.firestore,e):null}doc(e){try{return new eo(this.firestore,void 0===e?V0(this._delegate):V0(this._delegate,e))}catch(t){throw Hr(t,"doc()","CollectionReference.doc()")}}add(e){return function ele(n,e){const t=St(n.firestore,wn),i=V0(n),r=K0(n.converter,e);return jf(t,[j0(ku(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Un.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new eo(this.firestore,t))}isEqual(e){return EH(this._delegate,e._delegate)}withConverter(e){return new zf(this.firestore,this._delegate.withConverter(e?Fu.getInstance(this.firestore,e):null))}}function Lu(n){return St(n,Nn)}class FR{constructor(...e){this._delegate=new Ja(...e)}static documentId(){return new FR(Pn.keyField().canonicalString())}isEqual(e){return(e=(0,T.m9)(e))instanceof Ja&&this._delegate._internalPath.isEqual(e._internalPath)}}class Vu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ple(){return new CR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Vu(e)}static delete(){const e=function fle(){return new T_("deleteField")}();return e._methodName="FieldValue.delete",new Vu(e)}static arrayUnion(...e){const t=function mle(...n){return new Mae("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Vu(t)}static arrayRemove(...e){const t=function gle(...n){return new Pae("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Vu(t)}static increment(e){const t=function _le(n){return new kae("increment",n)}(e);return t._methodName="FieldValue.increment",new Vu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Tle={Firestore:KH,GeoPoint:B0,Timestamp:Bn,Blob:M_,Transaction:ZH,WriteBatch:YH,DocumentReference:eo,DocumentSnapshot:P_,Query:$r,QueryDocumentSnapshot:k_,QuerySnapshot:OR,CollectionReference:zf,FieldPath:FR,FieldValue:Vu,setLogLevel:function Ile(n){!function ure(n){ql.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function JH(n,e){return function Dle(n,e=qh){return new Xe(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function LR(n,e){return JH(n,e).pipe(ge(t=>({payload:t,type:"query"})))}!function Sle(n){(function xle(n,e){n.INTERNAL.registerComponent(new bo.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},Tle)))})(n,(e,t)=>new KH(e,t,new wle)),n.registerVersion("@firebase/firestore-compat","0.3.23")}(ss.Z);class e${ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=o$(i,t);return new i$(r,s,this.afs)}snapshotChanges(){return function Ale(n,e){return JH(n,e).pipe(ng(void 0),kS(),ge(t=>{const[i,r]=t;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ci)}valueChanges(e={}){return this.snapshotChanges().pipe(ge(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return E(this.ref.get(e)).pipe(ci)}}function Q0(n,e){return LR(n,e).pipe(ng(void 0),kS(),ge(t=>{const[i,r]=t,s=r.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{const c=s.find(f=>f.doc.ref.isEqual(a.ref)),d=i?.payload.docs.find(f=>f.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function t$(n,e,t){return Q0(n,t).pipe(Oh((i,r)=>function Rle(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function Mle(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return VR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return VR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return VR(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),ze(),ge(i=>i.map(r=>({type:r.type,payload:r}))))}function VR(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function n$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class i${ref;query;afs;constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=Q0(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ge(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(ng(void 0),kS(),Ur(([i,r])=>r.length>0||!i),ge(([,i])=>i),ci)}auditTrail(e){return this.stateChanges(e).pipe(Oh((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=n$(e);return t$(this.query,t,this.afs.schedulers.outsideAngular).pipe(ci)}valueChanges(e={}){return LR(this.query,this.afs.schedulers.outsideAngular).pipe(ge(t=>t.payload.docs.map(i=>e.idField?{...i.data(),[e.idField]:i.id}:i.data())),ci)}get(e){return E(this.query.get(e)).pipe(ci)}add(e){return this.ref.add(e)}doc(e){return new e$(this.ref.doc(e),this.afs)}}class Ple{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Q0(this.query,this.afs.schedulers.outsideAngular).pipe(ge(t=>t.filter(i=>e.indexOf(i.type)>-1)),Ur(t=>t.length>0),ci):Q0(this.query,this.afs.schedulers.outsideAngular).pipe(ci)}auditTrail(e){return this.stateChanges(e).pipe(Oh((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=n$(e);return t$(this.query,t,this.afs.schedulers.outsideAngular).pipe(ci)}valueChanges(e={}){return LR(this.query,this.afs.schedulers.outsideAngular).pipe(ge(i=>i.payload.docs.map(r=>e.idField?{[e.idField]:r.id,...r.data()}:r.data())),ci)}get(e){return E(this.query.get(e)).pipe(ci)}}const r$=new oe("angularfire2.enableFirestorePersistence"),s$=new oe("angularfire2.firestore.persistenceSettings"),kle=new oe("angularfire2.firestore.settings"),Nle=new oe("angularfire2.firestore.use-emulator");function o$(n,e=(t=>t)){return{query:e(n),ref:n}}let a$=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,i,r,s,o,a,l,c,d,f,g,_,v,I,S,F,M){this.schedulers=l;const V=bg(t,a,i),Y=d;f&&PS(V,a,g,v,I,S,_,F),[this.firestore,this.persistenceEnabled$]=SE(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{const de=a.runOutsideAngular(()=>V.firestore());if(s&&de.settings(s),Y&&de.useEmulator(...Y),r&&!Xb(o)){const Me=()=>{try{return E(de.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(qe){return typeof console<"u"&&console.warn(qe),R(!1)}};return[de,a.runOutsideAngular(Me)]}return[de,R(!1)]},[s,Y,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=o$(r,i),a=this.schedulers.ngZone.run(()=>s);return new i$(a,o,this)}collectionGroup(t,i){const r=i||(o=>o),s=this.firestore.collectionGroup(t);return new Ple(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new e$(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(O(Yh),O(Qh,8),O(r$,8),O(kle,8),O(Ks),O(Be),O(xE),O(s$,8),O(Nle,8),O(Eg,8),O(xS,8),O(SS,8),O(DS,8),O(AS,8),O(RS,8),O(MS,8),O(TE,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Ole=(()=>{class n{constructor(){ss.Z.registerVersion("angularfire",Gh.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:r$,useValue:!0},{provide:s$,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=xt({type:n});static \u0275inj=Nt({providers:[a$]})}return n})(),Hf=(()=>{class n{constructor(t,i,r){this.afs=t,this.afAuth=i,this.router=r,this.confirmationResult=null,this.recaptchaVerifier=null,this.afAuth.authState.subscribe(s=>{s?(this.userData=s,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}sendOtp(t){return new Promise((i,r)=>{const s=document.getElementById("recaptcha-container");this.recaptchaVerifier||(this.recaptchaVerifier=new ss.Z.auth.RecaptchaVerifier(s,{size:"invisible"})),this.afAuth.signInWithPhoneNumber(t,this.recaptchaVerifier).then(o=>{this.confirmationResult=o,i(o)}).catch(o=>{r(o)})})}verifyOtp(t){return this.confirmationResult?this.confirmationResult.confirm(t).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(r=>{r&&this.router.navigate(["dashboard"])})}).catch(i=>{throw i}):Promise.reject("Confirmation result is null. Call sendOtp first.")}SignIn(t,i){return this.afAuth.signInWithEmailAndPassword(t,i).then(r=>{this.SetUserData(r.user),this.afAuth.authState.subscribe(s=>{s&&this.router.navigate(["dashboard"])})}).catch(r=>r)}SignUp(t,i){return this.afAuth.createUserWithEmailAndPassword(t,i).then(r=>{console.log("got result"),this.SendVerificationMail(),this.SetUserData(r.user)}).catch(r=>new Error(r))}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>i)}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return console.log(t),null!==t}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(r=>{r&&this.router.navigate(["dashboard"])})}).catch(i=>i)}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}static#e=this.\u0275fac=function(i){return new(i||n)(O(a$),O(Eg),O(dr))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),l$=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||n)(H(ka),H(_n))};static#t=this.\u0275dir=Ae({type:n})}return n})(),Bu=(()=>{class n extends l${static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275dir=Ae({type:n,features:[Mt]})}return n})();const oa=new oe("NgValueAccessor"),Vle={provide:oa,useExisting:j(()=>N_),multi:!0},Ule=new oe("CompositionEventMode");let N_=(()=>{class n extends l${constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ble(){const n=Bl()?Bl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(H(ka),H(_n),H(Ule,8))};static#t=this.\u0275dir=Ae({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&$t("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[vn([Vle]),Mt]})}return n})();function hc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function u$(n){return null!=n&&"number"==typeof n.length}const _r=new oe("NgValidators"),fc=new oe("NgAsyncValidators"),jle=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class zle{static min(e){return function d$(n){return e=>{if(hc(e.value)||hc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function h$(n){return e=>{if(hc(e.value)||hc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return f$(e)}static requiredTrue(e){return function p$(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function m$(n){return hc(n.value)||jle.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function g$(n){return e=>hc(e.value)||!u$(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function _$(n){return e=>u$(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function y$(n){if(!n)return X0;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(hc(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return C$(e)}static composeAsync(e){return T$(e)}}function f$(n){return hc(n.value)?{required:!0}:null}function X0(n){return null}function v$(n){return null!=n}function b$(n){return Vm(n)?E(n):n}function E$(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function w$(n,e){return e.map(t=>t(n))}function I$(n){return n.map(e=>function Hle(n){return!n.validate}(e)?e:t=>e.validate(t))}function C$(n){if(!n)return null;const e=n.filter(v$);return 0==e.length?null:function(t){return E$(w$(t,e))}}function BR(n){return null!=n?C$(I$(n)):null}function T$(n){if(!n)return null;const e=n.filter(v$);return 0==e.length?null:function(t){return function Fle(...n){const e=Yr(n),{args:t,keys:i}=qV(n),r=new Xe(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let d=0;d<o;d++){let f=!1;mt(t[d]).subscribe(pe(s,g=>{f||(f=!0,c--),a[d]=g},()=>l--,void 0,()=>{(!l||!f)&&(c||s.next(i?GV(i,a):a),s.complete())}))}});return e?r.pipe(Jx(e)):r}(w$(t,e).map(b$)).pipe(ge(E$))}}function UR(n){return null!=n?T$(I$(n)):null}function x$(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function S$(n){return n._rawValidators}function D$(n){return n._rawAsyncValidators}function jR(n){return n?Array.isArray(n)?n:[n]:[]}function J0(n,e){return Array.isArray(n)?n.includes(e):n===e}function A$(n,e){const t=jR(e);return jR(n).forEach(r=>{J0(t,r)||t.push(r)}),t}function R$(n,e){return jR(e).filter(t=>!J0(n,t))}class M${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=BR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=UR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Wr extends M${get formDirective(){return null}get path(){return null}}class tl extends M${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class P${constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let zR=(()=>{class n extends P${constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(H(tl,2))};static#t=this.\u0275dir=Ae({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&Fr("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Mt]})}return n})();const O_="VALID",tw="INVALID",$f="PENDING",F_="DISABLED";function WR(n){return(nw(n)?n.validators:n)||null}function qR(n,e){return(nw(e)?e.asyncValidators:n)||null}function nw(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class F${constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===O_}get invalid(){return this.status===tw}get pending(){return this.status==$f}get disabled(){return this.status===F_}get enabled(){return this.status!==F_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(A$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(A$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(R$(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(R$(e,this._rawAsyncValidators))}hasValidator(e){return J0(this._rawValidators,e)}hasAsyncValidator(e){return J0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$f,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=F_,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=O_,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===O_||this.status===$f)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?F_:O_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$f,this._hasOwnPendingAsyncValidator=!0;const t=b$(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Vn,this.statusChanges=new Vn}_calculateStatus(){return this._allControlsDisabled()?F_:this.errors?tw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($f)?$f:this._anyControlsHaveStatus(tw)?tw:O_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){nw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Kle(n){return Array.isArray(n)?BR(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Zle(n){return Array.isArray(n)?UR(n):n||null}(this._rawAsyncValidators)}}class GR extends F${constructor(e,t,i){super(WR(t),qR(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function O$(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new B(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function N$(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new B(1e3,"");if(!i[t])throw new B(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Wf=new oe("CallSetDisabledState",{providedIn:"root",factory:()=>iw}),iw="always";function L_(n,e,t=iw){KR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Xle(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&L$(n,e)})}(n,e),function ece(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Jle(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&L$(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Qle(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function sw(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),aw(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ow(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function KR(n,e){const t=S$(n);null!==e.validator?n.setValidators(x$(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=D$(n);null!==e.asyncValidator?n.setAsyncValidators(x$(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();ow(e._rawValidators,r),ow(e._rawAsyncValidators,r)}function aw(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=S$(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=D$(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return ow(e._rawValidators,i),ow(e._rawAsyncValidators,i),t}function L$(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function V$(n,e){KR(n,e)}function B$(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const sce={provide:Wr,useExisting:j(()=>lw)},V_=(()=>Promise.resolve())();let lw=(()=>{class n extends Wr{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Vn,this.form=new GR({},BR(t),UR(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){V_.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),L_(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){V_.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){V_.then(()=>{const i=this._findContainer(t.path),r=new GR({});V$(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){V_.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){V_.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,B$(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(i){return new(i||n)(H(_r,10),H(fc,10),H(Wf,8))};static#t=this.\u0275dir=Ae({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&$t("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vn([sce]),Mt]})}return n})();function U$(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function j$(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const z$=class extends F${constructor(e=null,t,i){super(WR(t),qR(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=j$(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){U$(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){U$(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){j$(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},lce={provide:tl,useExisting:j(()=>cw)},W$=(()=>Promise.resolve())();let cw=(()=>{class n extends tl{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new z$,this._registered=!1,this.name="",this.update=new Vn,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function QR(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===N_?t=s:function ice(n){return Object.getPrototypeOf(n.constructor)===Bu}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function YR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){L_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){W$.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&kh(i);W$.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function rw(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(i){return new(i||n)(H(Wr,9),H(_r,10),H(fc,10),H(oa,10),H(Ph,8),H(Wf,8))};static#t=this.\u0275dir=Ae({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[vn([lce]),Mt,kr]})}return n})(),G$=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({})}return n})();const mce={provide:Wr,useExisting:j(()=>uw)};let uw=(()=>{class n extends Wr{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Vn,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(aw(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return L_(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){sw(t.control||null,t,!1),function rce(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,B$(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(sw(i||null,t),(n=>n instanceof z$)(r)&&(L_(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);V$(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function tce(n,e){return aw(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){KR(this.form,this),this._oldForm&&aw(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||n)(H(_r,10),H(fc,10),H(Wf,8))};static#t=this.\u0275dir=Ae({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&$t("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vn([mce]),Mt,kr]})}return n})(),Uu=(()=>{class n{constructor(){this._validator=X0}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):X0,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ae({type:n,features:[kr]})}return n})();const Sce={provide:_r,useExisting:j(()=>B_),multi:!0};let nM,B_=(()=>{class n extends Uu{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=kh,this.createValidator=t=>f$}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275dir=Ae({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){2&i&&mi("required",r._enabled?"":null)},inputs:{required:"required"},features:[vn([Sce]),Mt]})}return n})(),kce=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({imports:[G$]})}return n})(),Oce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Wf,useValue:t.callSetDisabledState??iw}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({imports:[kce]})}return n})();try{nM=typeof Intl<"u"&&Intl.v8BreakIterator}catch{nM=!1}let qf,yr=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function nJ(n){return n===CV}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!nM)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(O(Ks))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const d4=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function h4(){if(qf)return qf;if("object"!=typeof document||!document)return qf=new Set(d4),qf;let n=document.createElement("input");return qf=new Set(d4.filter(e=>(n.setAttribute("type",e),n.type===e))),qf}let U_,ju,iM;function j_(n){return function Fce(){if(null==U_&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>U_=!0}))}finally{U_=U_||!1}return U_}()?n:!!n.capture}function Lce(){if(null==ju){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ju=!1,ju;if("scrollBehavior"in document.documentElement.style)ju=!0;else{const n=Element.prototype.scrollTo;ju=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ju}function pc(n){return n.composedPath?n.composedPath()[0]:n.target}function rM(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function f4(n){return Ur((e,t)=>n<=t)}function mc(n){return null!=n&&"false"!=`${n}`}function sM(n,e=0){return function Wce(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function hw(n){return Array.isArray(n)?n:[n]}function yi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function gc(n){return n instanceof _n?n.nativeElement:n}function p4(n,e=qh){return ee((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+n,d=e.now();if(d<c)return r=this.schedule(void 0,c-d),void i.add(r);a()}t.subscribe(pe(i,c=>{s=c,o=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}const m4=new Set;let zu,qce=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Kce}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Gce(n,e){if(!m4.has(n))try{zu||(zu=document.createElement("style"),e&&(zu.nonce=e),zu.setAttribute("type","text/css"),document.head.appendChild(zu)),zu.sheet&&(zu.sheet.insertRule(`@media ${n} {body{ }}`,0),m4.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(i){return new(i||n)(O(yr),O(KC,8))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Kce(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let oM=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new z}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return g4(hw(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=nE(g4(hw(t)).map(o=>this._registerQuery(o).observable));return s=rE(s.pipe(ja(1)),s.pipe(f4(1),p4(0))),s.pipe(ge(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new Xe(o=>{const a=l=>this._zone.run(()=>o.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(ng(i),ge(({matches:o})=>({query:t,matches:o})),za(this._destroySubject)),mql:i};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(i){return new(i||n)(O(qce),O(Be))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function g4(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function b4(n){return 0===n.buttons||0===n.detail}function E4(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const iue=new oe("cdk-input-modality-detector-options"),rue={ignoreKeys:[18,17,224,91,16]},Gf=j_({passive:!0,capture:!0});let sue=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new b(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=pc(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(b4(o)?"keyboard":"mouse"),this._mostRecentTarget=pc(o))},this._onTouchstart=o=>{E4(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=pc(o))},this._options={...rue,...s},this.modalityDetected=this._modality.pipe(f4(1)),this.modalityChanged=this.modalityDetected.pipe(ze()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Gf),r.addEventListener("mousedown",this._onMousedown,Gf),r.addEventListener("touchstart",this._onTouchstart,Gf)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Gf),document.removeEventListener("mousedown",this._onMousedown,Gf),document.removeEventListener("touchstart",this._onTouchstart,Gf))}static#e=this.\u0275fac=function(i){return new(i||n)(O(yr),O(Be),O(jt),O(iue,8))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const oue=new oe("liveAnnouncerElement",{providedIn:"root",factory:function aue(){return null}}),lue=new oe("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let cue=0,I4=(()=>{class n{constructor(t,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...i){const r=this._defaultOptions;let s,o;return 1===i.length&&"number"==typeof i[0]?o=i[0]:[s,o]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id="cdk-live-announcer-"+cue++,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(t){const i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){const s=i[r],o=s.getAttribute("aria-owns");o?-1===o.indexOf(t)&&s.setAttribute("aria-owns",o+" "+t):s.setAttribute("aria-owns",t)}}static#e=this.\u0275fac=function(i){return new(i||n)(O(oue,8),O(Be),O(jt),O(lue,8))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const uue=new oe("cdk-focus-monitor-default-options"),fw=j_({passive:!0,capture:!0});let due=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new z,this._rootNodeFocusAndBlurListener=a=>{for(let c=pc(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,i=!1){const r=gc(t);if(!this._platform.isBrowser||1!==r.nodeType)return R();const s=function Bce(n){if(function Vce(){if(null==iM){const n=typeof document<"u"?document.head:null;iM=!(!n||!n.createShadowRoot&&!n.attachShadow)}return iM}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new z,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=gc(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=gc(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=pc(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,fw),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,fw)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(za(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,fw),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,fw),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(O(Be),O(yr),O(sue),O(jt,8),O(uue,8))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const C4="cdk-high-contrast-black-on-white",T4="cdk-high-contrast-white-on-black",aM="cdk-high-contrast-active";let hue=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=me(oM).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(aM,C4,T4),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(aM,C4):2===i&&t.add(aM,T4)}}static#e=this.\u0275fac=function(i){return new(i||n)(O(yr),O(jt))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const fue=new oe("cdk-dir-doc",{providedIn:"root",factory:function pue(){return me(jt)}}),mue=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let x4=(()=>{class n{constructor(t){this.value="ltr",this.change=new Vn,t&&(this.value=function gue(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?mue.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(O(fue,8))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),z_=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({})}return n})();const yue=new oe("mat-sanity-checks",{providedIn:"root",factory:function _ue(){return!0}});let Co=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!rM()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(i){return new(i||n)(O(hue),O(yue,8),O(jt))};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({imports:[z_,z_]})}return n})();function vue(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=mc(e)}constructor(...e){super(...e),this._disabled=!1}}}function A4(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function bue(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=mc(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function Eue(n){return class extends n{updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}let Iue=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Cue{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const R4=j_({passive:!0,capture:!0});class Tue{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=pc(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){const s=this._events.get(t);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,R4)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(i),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,R4)))}}const M4={enterDuration:225,exitDuration:150},P4=j_({passive:!0,capture:!0}),k4=["mousedown","touchstart"],N4=["mouseup","mouseleave","touchend","touchcancel"];class pw{static#e=this._eventManager=new Tue;constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=gc(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...M4,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function Sue(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-o+"px",d.style.top=l-o+"px",d.style.height=2*o+"px",d.style.width=2*o+"px",null!=i.color&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);const f=window.getComputedStyle(d),_=f.transitionDuration,v="none"===f.transitionProperty||"0s"===_||"0s, 0s"===_||0===r.width&&0===r.height,I=new Cue(this,d,i,v);d.style.transform="scale3d(1, 1, 1)",I.state=0,i.persistent||(this._mostRecentTransientRipple=I);let S=null;return!v&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const F=()=>this._finishRippleTransition(I),M=()=>this._destroyRipple(I);d.addEventListener("transitionend",F),d.addEventListener("transitioncancel",M),S={onTransitionEnd:F,onTransitionCancel:M}}),this._activeRipples.set(I,S),(v||!c)&&this._finishRippleTransition(I),I}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...M4,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=gc(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,k4.forEach(i=>{pw._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{N4.forEach(t=>{this._triggerElement.addEventListener(t,this,P4)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=b4(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!E4(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(k4.forEach(t=>pw._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&N4.forEach(t=>e.removeEventListener(t,this,P4)))}}const O4=new oe("mat-ripple-global-options");let Due=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new pw(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(i){return new(i||n)(H(_n),H(Be),H(yr),H(O4,8),H(kl,8))};static#t=this.\u0275dir=Ae({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&Fr("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})(),Aue=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({imports:[Co,Co]})}return n})();const F4={capture:!0},L4=["focus","click","mouseenter","touchstart"],lM="mat-ripple-loader-uninitialized",cM="mat-ripple-loader-class-name",V4="mat-ripple-loader-centered",mw="mat-ripple-loader-disabled";let Rue=(()=>{class n{constructor(){this._document=me(jt,{optional:!0}),this._animationMode=me(kl,{optional:!0}),this._globalRippleOptions=me(O4,{optional:!0}),this._platform=me(yr),this._ngZone=me(Be),this._onInteraction=t=>{if(!(t.target instanceof HTMLElement))return;const r=t.target.closest(`[${lM}]`);r&&this.createRipple(r)},this._ngZone.runOutsideAngular(()=>{for(const t of L4)this._document?.addEventListener(t,this._onInteraction,F4)})}ngOnDestroy(){for(const t of L4)this._document?.removeEventListener(t,this._onInteraction,F4)}configureRipple(t,i){t.setAttribute(lM,""),(i.className||!t.hasAttribute(cM))&&t.setAttribute(cM,i.className||""),i.centered&&t.setAttribute(V4,""),i.disabled&&t.setAttribute(mw,"")}getRipple(t){return t.matRipple?t.matRipple:this.createRipple(t)}setDisabled(t,i){const r=t.matRipple;r?r.disabled=i:i?t.setAttribute(mw,""):t.removeAttribute(mw)}createRipple(t){if(!this._document)return;t.querySelector(".mat-ripple")?.remove();const i=this._document.createElement("span");i.classList.add("mat-ripple",t.getAttribute(cM)),t.append(i);const r=new Due(new _n(i),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return r._isInitialized=!0,r.trigger=t,r.centered=t.hasAttribute(V4),r.disabled=t.hasAttribute(mw),this.attachRipple(t,r),r}attachRipple(t,i){t.removeAttribute(lM),t.matRipple=i}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Mue=["mat-button",""],Pue=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],kue=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],Nue=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Oue=A4(vue(bue(class{constructor(n){this._elementRef=n}})));let Fue=(()=>{class n extends Oue{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=mc(t),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=mc(t),this._updateRippleDisabled()}constructor(t,i,r,s){super(t),this._platform=i,this._ngZone=r,this._animationMode=s,this._focusMonitor=me(due),this._rippleLoader=me(Rue),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const o=t.nativeElement.classList;for(const a of Nue)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(l=>{o.add(l)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...t){return t.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(i){fT()};static#t=this.\u0275dir=Ae({type:n,features:[Mt]})}return n})(),gw=(()=>{class n extends Fue{constructor(t,i,r,s){super(t,i,r,s)}static#e=this.\u0275fac=function(i){return new(i||n)(H(_n),H(yr),H(Be),H(kl,8))};static#t=this.\u0275cmp=lr({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(i,r){2&i&&(mi("disabled",r.disabled||null),Fr("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Mt],attrs:Mue,ngContentSelectors:kue,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){1&i&&(bb(Pue),on(0,"span",0),ts(1),he(2,"span",1),ts(3,1),_e(),ts(4,2),on(5,"span",2)(6,"span",3)),2&i&&Fr("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return n})(),B4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({imports:[Co,Aue,Co]})}return n})();class Bue{constructor(e){this._box=e,this._destroyed=new z,this._resizeSubject=new z,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new Xe(t=>{const i=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(Ur(t=>t.some(i=>i.target===e)),TS({bufferSize:1,refCount:!0}),za(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let Uue=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=me(Be)}ngOnDestroy(){for(const[,t]of this._observers)t.destroy();this._observers.clear()}observe(t,i){const r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new Bue(r)),this._observers.get(r).observe(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class U4{}class jue{}const nl="*";function j4(n,e){return{type:7,name:n,definitions:e,options:{}}}function uM(n,e=null){return{type:4,styles:e,timings:n}}function z4(n,e=null){return{type:2,steps:n,options:e}}function Hu(n){return{type:6,styles:n,offset:null}}function dM(n,e,t){return{type:0,name:n,styles:e,options:t}}function hM(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}class $_{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class H4{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}let zue=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hue=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({providers:[zue]})}return n})();const $ue=["notch"],Wue=["matFormFieldNotchedOutline",""],que=["*"],Gue=["textField"],Kue=["iconPrefixContainer"],Zue=["textPrefixContainer"];function Yue(n,e){1&n&&on(0,"span",19)}function Que(n,e){if(1&n&&(he(0,"label",17),ts(1,1),Ot(2,Yue,1,0,"span",18),_e()),2&n){const t=Qt(2);He("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),mi("for",t._control.id),je(2),He("ngIf",!t.hideRequiredMarker&&t._control.required)}}function Xue(n,e){1&n&&Ot(0,Que,3,5,"label",16),2&n&&He("ngIf",Qt()._hasFloatingLabel())}function Jue(n,e){1&n&&on(0,"div",20)}function ede(n,e){}function tde(n,e){1&n&&Ot(0,ede,0,0,"ng-template",22),2&n&&(Qt(2),He("ngTemplateOutlet",xh(1)))}function nde(n,e){if(1&n&&(he(0,"div",21),Ot(1,tde,1,1,"ng-template",9),_e()),2&n){const t=Qt();He("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),je(1),He("ngIf",!t._forceDisplayInfixLabel())}}function ide(n,e){1&n&&(he(0,"div",23,24),ts(2,2),_e())}function rde(n,e){1&n&&(he(0,"div",25,26),ts(2,3),_e())}function sde(n,e){}function ode(n,e){1&n&&Ot(0,sde,0,0,"ng-template",22),2&n&&(Qt(),He("ngTemplateOutlet",xh(1)))}function ade(n,e){1&n&&(he(0,"div",27),ts(1,4),_e())}function lde(n,e){1&n&&(he(0,"div",28),ts(1,5),_e())}function cde(n,e){1&n&&on(0,"div",29)}function ude(n,e){1&n&&(he(0,"div",30),ts(1,6),_e()),2&n&&He("@transitionMessages",Qt()._subscriptAnimationState)}function dde(n,e){if(1&n&&(he(0,"mat-hint",34),Ke(1),_e()),2&n){const t=Qt(2);He("id",t._hintLabelId),je(1),Fl(t.hintLabel)}}function hde(n,e){if(1&n&&(he(0,"div",31),Ot(1,dde,2,2,"mat-hint",32),ts(2,7),on(3,"div",33),ts(4,8),_e()),2&n){const t=Qt();He("@transitionMessages",t._subscriptAnimationState),je(1),He("ngIf",t.hintLabel)}}const fde=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],pde=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let W_=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ae({type:n,selectors:[["mat-label"]]})}return n})();const mde=new oe("MatError");let gde=0,$4=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+gde++}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ae({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){2&i&&(Cb("id",r.id),mi("align",null),Fr("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}})}return n})();const _de=new oe("MatPrefix"),yde=new oe("MatSuffix"),W4=new oe("FloatingLabelParent");let q4=(()=>{class n{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=me(Uue),this._ngZone=me(Be),this._parent=me(W4),this._resizeSubscription=new ht}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function vde(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const i=t.scrollWidth;return t.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(i){return new(i||n)(H(_n))};static#t=this.\u0275dir=Ae({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){2&i&&Fr("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();const G4="mdc-line-ripple--active",_w="mdc-line-ripple--deactivating";let K4=(()=>{class n{constructor(t,i){this._elementRef=t,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,o=s.contains(_w);"opacity"===r.propertyName&&o&&s.remove(G4,_w)},i.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(_w),t.add(G4)}deactivate(){this._elementRef.nativeElement.classList.add(_w)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(i){return new(i||n)(H(_n),H(Be))};static#t=this.\u0275dir=Ae({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),Z4=(()=>{class n{constructor(t,i){this._elementRef=t,this._ngZone=i,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){this._notch.nativeElement.style.width=this.open&&t?`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(i){return new(i||n)(H(_n),H(Be))};static#t=this.\u0275cmp=lr({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(1&i&&go($ue,5),2&i){let s;Di(s=Ai())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){2&i&&Fr("mdc-notched-outline--notched",r.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:Wue,ngContentSelectors:que,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(i,r){1&i&&(bb(),on(0,"div",0),he(1,"div",1,2),ts(3),_e(),on(4,"div",3))},encapsulation:2,changeDetection:0})}return n})();const bde={transitionMessages:j4("transitionMessages",[dM("enter",Hu({opacity:1,transform:"translateY(0%)"})),hM("void => enter",[Hu({opacity:0,transform:"translateY(-5px)"}),uM("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Y4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ae({type:n})}return n})();const Q4=new oe("MatFormField"),Ede=new oe("MAT_FORM_FIELD_DEFAULT_OPTIONS");let X4=0,pM=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=mc(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,i,r,s,o,a,l,c){this._elementRef=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=l,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+X4++,this._hintLabelId="mat-mdc-hint-"+X4++,this._subscriptAnimationState="",this._destroyed=new z,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(za(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),C(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(za(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(za(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,o=r?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}static#e=this.\u0275fac=function(i){return new(i||n)(H(_n),H(Ph),H(Be),H(x4),H(yr),H(Ede,8),H(kl,8),H(jt))};static#t=this.\u0275cmp=lr({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,r,s){if(1&i&&(La(s,W_,5),La(s,W_,7),La(s,Y4,5),La(s,_de,5),La(s,yde,5),La(s,mde,5),La(s,$4,5)),2&i){let o;Di(o=Ai())&&(r._labelChildNonStatic=o.first),Di(o=Ai())&&(r._labelChildStatic=o.first),Di(o=Ai())&&(r._formFieldControl=o.first),Di(o=Ai())&&(r._prefixChildren=o),Di(o=Ai())&&(r._suffixChildren=o),Di(o=Ai())&&(r._errorChildren=o),Di(o=Ai())&&(r._hintChildren=o)}},viewQuery:function(i,r){if(1&i&&(go(Gue,5),go(Kue,5),go(Zue,5),go(q4,5),go(Z4,5),go(K4,5)),2&i){let s;Di(s=Ai())&&(r._textField=s.first),Di(s=Ai())&&(r._iconPrefixContainer=s.first),Di(s=Ai())&&(r._textPrefixContainer=s.first),Di(s=Ai())&&(r._floatingLabel=s.first),Di(s=Ai())&&(r._notchedOutline=s.first),Di(s=Ai())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){2&i&&Fr("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[vn([{provide:Q4,useExisting:n},{provide:W4,useExisting:n}])],ngContentSelectors:pde,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(i,r){1&i&&(bb(fde),Ot(0,Xue,1,1,"ng-template",null,0,rx),he(2,"div",1,2),$t("click",function(o){return r._control.onContainerClick(o)}),Ot(4,Jue,1,0,"div",3),he(5,"div",4),Ot(6,nde,2,2,"div",5),Ot(7,ide,3,0,"div",6),Ot(8,rde,3,0,"div",7),he(9,"div",8),Ot(10,ode,1,1,"ng-template",9),ts(11),_e(),Ot(12,ade,2,0,"div",10),Ot(13,lde,2,0,"div",11),_e(),Ot(14,cde,1,0,"div",12),_e(),he(15,"div",13),Ot(16,ude,2,1,"div",14),Ot(17,hde,5,2,"div",15),_e()),2&i&&(je(2),Fr("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),je(2),He("ngIf",!r._hasOutline()&&!r._control.disabled),je(2),He("ngIf",r._hasOutline()),je(1),He("ngIf",r._hasIconPrefix),je(1),He("ngIf",r._hasTextPrefix),je(2),He("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),je(2),He("ngIf",r._hasTextSuffix),je(1),He("ngIf",r._hasIconSuffix),je(1),He("ngIf",!r._hasOutline()),je(1),Fr("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),He("ngSwitch",r._getDisplayedMessages()),je(1),He("ngSwitchCase","error"),je(1),He("ngSwitchCase","hint"))},dependencies:[lu,Bx,Yb,EV,$4,q4,Z4,K4],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{--mdc-filled-text-field-active-indicator-height:1px;--mdc-filled-text-field-focus-active-indicator-height:2px;--mdc-filled-text-field-container-shape:4px;border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined{--mdc-outlined-text-field-outline-width:1px;--mdc-outlined-text-field-focus-outline-width:2px;--mdc-outlined-text-field-container-shape:4px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size) * var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[bde.transitionMessages]},changeDetection:0})}return n})(),yw=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({imports:[Co,Qb,Hue,Co]})}return n})();const t3=j_({passive:!0});let Cde=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Tn;const i=gc(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new z,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,t3),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,t3)}}),s}stopMonitoring(t){const i=gc(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}static#e=this.\u0275fac=function(i){return new(i||n)(O(yr),O(Be))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Tde=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({})}return n})();const xde=new oe("MAT_INPUT_VALUE_ACCESSOR"),Sde=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Dde=0;const Ade=Eue(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i,this.stateChanges=new z}});let mM=(()=>{class n extends Ade{get disabled(){return this._disabled}set disabled(t){this._disabled=mc(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(zle.required)??!1}set required(t){this._required=mc(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&h4().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=mc(t)}constructor(t,i,r,s,o,a,l,c,d,f){super(a,s,o,r),this._elementRef=t,this._platform=i,this._autofillMonitor=c,this._formField=f,this._uid="mat-input-"+Dde++,this.focused=!1,this.stateChanges=new z,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(v=>h4().has(v)),this._iOSKeyupListener=v=>{const I=v.target;!I.value&&0===I.selectionStart&&0===I.selectionEnd&&(I.setSelectionRange(1,1),I.setSelectionRange(0,0))};const g=this._elementRef.nativeElement,_=g.nodeName.toLowerCase();this._inputValueAccessor=l||g,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&d.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===_,this._isTextarea="textarea"===_,this._isInFormField=!!f,this._isNativeSelect&&(this.controlType=g.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Sde.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}static#e=this.\u0275fac=function(i){return new(i||n)(H(_n),H(yr),H(tl,10),H(lw,8),H(uw,8),H(Iue),H(xde,10),H(Cde),H(Be),H(Q4,8))};static#t=this.\u0275dir=Ae({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,r){1&i&&$t("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&i&&(Cb("id",r.id)("disabled",r.disabled)("required",r.required),mi("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Fr("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[vn([{provide:Y4,useExisting:n}]),Mt,kr]})}return n})(),Rde=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({imports:[Co,yw,yw,Tde,Co]})}return n})();const Mde=["determinateSpinner"];function Pde(n,e){if(1&n&&(om(),he(0,"svg",11),on(1,"circle",12),_e()),2&n){const t=Qt();mi("viewBox",t._viewBox()),je(1),Bm("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),mi("r",t._circleRadius())}}const kde=A4(class{constructor(n){this._elementRef=n}},"primary"),Nde=new oe("mat-progress-spinner-default-options",{providedIn:"root",factory:function Ode(){return{diameter:n3}}}),n3=100;let r3=(()=>{class n extends kde{constructor(t,i,r){super(t),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=n3,this._noopAnimations="NoopAnimations"===i&&!!r&&!r._forceAnimations,r&&(r.color&&(this.color=this.defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,sM(t)))}get diameter(){return this._diameter}set diameter(t){this._diameter=sM(t)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=sM(t)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const t=2*this._circleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static#e=this.\u0275fac=function(i){return new(i||n)(H(_n),H(kl,8),H(Nde))};static#t=this.\u0275cmp=lr({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,r){if(1&i&&go(Mde,5),2&i){let s;Di(s=Ai())&&(r._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:16,hostBindings:function(i,r){2&i&&(mi("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===r.mode?r.value:null)("mode",r.mode),Bm("width",r.diameter,"px")("height",r.diameter,"px")("--mdc-circular-progress-size",r.diameter+"px")("--mdc-circular-progress-active-indicator-width",r.diameter+"px"),Fr("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===r.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[Mt],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,r){if(1&i&&(Ot(0,Pde,2,8,"ng-template",null,0,rx),he(2,"div",1,2),om(),he(4,"svg",3),on(5,"circle",4),_e()(),function Sv(){!function lC(){Ge.lFrame.currentNamespace=null}()}(),he(6,"div",5)(7,"div",6)(8,"div",7),Lm(9,8),_e(),he(10,"div",9),Lm(11,8),_e(),he(12,"div",10),Lm(13,8),_e()()()),2&i){const s=xh(1);je(4),mi("viewBox",r._viewBox()),je(1),Bm("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),mi("r",r._circleRadius()),je(4),He("ngTemplateOutlet",s),je(2),He("ngTemplateOutlet",s),je(2),He("ngTemplateOutlet",s)}},dependencies:[Bx],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{--mdc-circular-progress-active-indicator-width:4px;--mdc-circular-progress-size:48px}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner .mdc-circular-progress{width:var(--mdc-circular-progress-size) !important;height:var(--mdc-circular-progress-size) !important}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0})}return n})(),Lde=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({imports:[Qb,Co]})}return n})();function Vde(n,e){1&n&&(he(0,"div",22)(1,"div",23),on(2,"mat-progress-spinner",24),_e()())}function Bde(n,e){if(1&n){const t=fo();he(0,"div",8)(1,"mat-form-field",5)(2,"mat-label"),Ke(3,"Password"),_e(),he(4,"input",25),$t("ngModelChange",function(r){return vs(t),Or(Qt().password=r)}),_e()()()}if(2&n){const t=Qt();je(4),He("ngModel",t.password)}}function Ude(n,e){if(1&n){const t=fo();he(0,"button",26),$t("click",function(){return vs(t),Or(Qt().signInOrSendOTP())}),Ke(1),_e()}if(2&n){const t=Qt();He("disabled",t.isButtonDisabled()||t.disableSubmit),je(1),iu(" ",t.isPhoneSignup()?"Send OTP":"Sign In"," ")}}function jde(n,e){if(1&n){const t=fo();he(0,"div",8)(1,"mat-form-field",5)(2,"mat-label"),Ke(3,"Enter OTP"),_e(),he(4,"input",27),$t("ngModelChange",function(r){return vs(t),Or(Qt().otp=r)}),_e()()()}if(2&n){const t=Qt();je(4),He("ngModel",t.otp)}}function zde(n,e){if(1&n){const t=fo();he(0,"button",26),$t("click",function(){return vs(t),Or(Qt(2).verifyOtp())}),Ke(1,"Verify OTP "),_e()}2&n&&He("disabled",Qt(2).disableSubmit)}function Hde(n,e){if(1&n&&(he(0,"div",8),Ot(1,zde,2,1,"button",9),_e()),2&n){const t=Qt();je(1),He("ngIf",!t.loading)}}let $de=(()=>{class n{constructor(t,i){this.authService=t,this.router=i,this.emailOrPhone="",this.password="",this.otp="",this.isOtpSent=!1,this.loading=!1}isButtonDisabled(){return this.isPhoneSignup()?!/^\+\d+$/.test(this.emailOrPhone):!(this.emailOrPhone&&this.password)}verifyOtp(){this.loading=!0,this.disableSubmit=!0,this.authService.verifyOtp(this.otp).then(t=>{console.log("OTP verified successfully",t),this.router.navigate(["/dashboard"])}).catch(t=>console.error("Error verifying OTP",t)).finally(()=>{this.disableSubmit=!1,this.loading=!1})}isPhoneSignup(){return/^\+\d+$/.test(this.emailOrPhone)}singInWithGoogle(){this.authService.AuthLogin(new Wh.X)}singInWithGitHub(){this.authService.AuthLogin(new Wh.Y).then(()=>{this.router.navigate(["/dashboard"])})}singInWithMicrosoft(){this.authService.AuthLogin(new Wh.Z("microsoft.com"))}signInOrSendOTP(){this.isPhoneSignup()?(this.disableSubmit=!0,this.loading=!0,this.authService.sendOtp(this.emailOrPhone).then(()=>{this.isOtpSent=!0}).catch(t=>console.error("Error sending OTP",t)).finally(()=>{this.disableSubmit=!1,this.loading=!1})):(this.disableSubmit=!0,this.loading=!0,this.authService.SignIn(this.emailOrPhone,this.password).then(t=>{console.log("Signed up successfully",t)}).catch(t=>console.error("Error signing up",t)).finally(()=>{this.disableSubmit=!1,this.loading=!1}))}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)(H(Hf),H(dr))};static#t=this.\u0275cmp=lr({type:n,selectors:[["app-sign-in"]],decls:33,vars:6,consts:[["class","overlay",4,"ngIf"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center","fs-3","mb-3","fw-medium"],["appearance","outline",2,"width","100%"],["matInput","","placeholder","Email Address or Phone Number","required","",3,"ngModel","ngModelChange"],["class","mt-2",4,"ngIf"],[1,"mt-2"],["mat-raised-button","","style","width: 100%;","color","primary",3,"disabled","click",4,"ngIf"],["id","recaptcha-container"],[1,"forgotPassword","mt-2"],["routerLink","/forgot-password"],[1,"my-2"],[1,"or"],[1,"orInner"],[1,"d-flex","justify-content-center","align-items-center","gap-2"],[2,"text-decoration","none","cursor","pointer",3,"click"],["src","/assets/google.svg","alt","","width","40px","height","40px"],["src","/assets/github.png","alt","","width","30px","height","30px"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"],[1,"overlay"],[1,"loader"],["diameter","50","mode","indeterminate"],["matInput","","type","password","placeholder","Password","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",2,"width","100%",3,"disabled","click"],["matInput","","type","text","id","inputOtp","required","",3,"ngModel","ngModelChange"]],template:function(i,r){1&i&&(Ot(0,Vde,3,0,"div",0),he(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),Ke(5,"Sign In"),_e(),he(6,"mat-form-field",5)(7,"mat-label"),Ke(8,"Email Address or Phone Number"),_e(),he(9,"input",6),$t("ngModelChange",function(o){return r.emailOrPhone=o}),_e()(),Ot(10,Bde,5,1,"div",7),he(11,"div",8),Ot(12,Ude,2,2,"button",9),_e(),on(13,"div",10),Ot(14,jde,5,1,"div",7),Ot(15,Hde,2,1,"div",7),he(16,"div",11)(17,"span",12),Ke(18,"Forgot Password?"),_e()(),he(19,"div",13)(20,"span",14)(21,"span",15),Ke(22,"Or"),_e()()(),he(23,"div",16)(24,"div",17),$t("click",function(){return r.singInWithGoogle()}),on(25,"img",18),_e(),he(26,"div",17),$t("click",function(){return r.singInWithGitHub()}),on(27,"img",19),_e()()(),he(28,"div",20)(29,"span"),Ke(30,"Don't have an account?"),he(31,"span",21),Ke(32," Sign Up"),_e()()()()()),2&i&&(He("ngIf",r.loading),je(9),He("ngModel",r.emailOrPhone),je(1),He("ngIf",!r.isPhoneSignup()),je(2),He("ngIf",!r.loading),je(2),He("ngIf",r.isOtpSent),je(1),He("ngIf",r.isOtpSent))},dependencies:[lu,hu,N_,zR,B_,cw,gw,pM,W_,mM,r3]})}return n})();class gM{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class _M extends gM{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class s3 extends gM{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Wde extends gM{constructor(e){super(),this.element=e instanceof _n?e.nativeElement:e}}class yM{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof _M?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof s3?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Wde?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class qde extends yM{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||xi.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let o3=(()=>{class n extends yM{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Vn,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(H(hh),H(Ys),H(jt))};static#t=this.\u0275dir=Ae({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Mt]})}return n})(),a3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({})}return n})();const Gde=["addListener","removeListener"],Kde=["addEventListener","removeEventListener"],Zde=["on","off"];function vM(n,e,t,i){if(x(t)&&(i=t,t=void 0),i)return vM(n,e,t).pipe(Jx(i));const[r,s]=function Xde(n){return x(n.addEventListener)&&x(n.removeEventListener)}(n)?Kde.map(o=>a=>n[o](e,a,t)):function Yde(n){return x(n.addListener)&&x(n.removeListener)}(n)?Gde.map(l3(n,e)):function Qde(n){return x(n.on)&&x(n.off)}(n)?Zde.map(l3(n,e)):[];if(!r&&Tt(n))return Ht(o=>vM(o,e,t))(mt(n));if(!r)throw new TypeError("Invalid event target");return new Xe(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function l3(n,e){return t=>i=>n[t](e,i)}const q_={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=q_;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new ht(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=q_;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=q_;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class ehe extends CE{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Jde extends IE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=q_.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(q_.cancelAnimationFrame(t),e._scheduled=void 0)}});let bM,nhe=1;const vw={};function c3(n){return n in vw&&(delete vw[n],!0)}const ihe={setImmediate(n){const e=nhe++;return vw[e]=!0,bM||(bM=Promise.resolve()),bM.then(()=>c3(e)&&n()),e},clearImmediate(n){c3(n)}},{setImmediate:rhe,clearImmediate:she}=ihe,bw={setImmediate(...n){const{delegate:e}=bw;return(e?.setImmediate||rhe)(...n)},clearImmediate(n){const{delegate:e}=bw;return(e?.clearImmediate||she)(n)},delegate:void 0};new class ahe extends CE{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class ohe extends IE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=bw.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(bw.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function u3(n,e=qh){return function che(n){return ee((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const c=r;r=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(pe(t,c=>{i=!0,r=c,s||mt(n(c)).subscribe(s=pe(t,a,l))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>function dhe(n=0,e,t=Une){let i=-1;return null!=e&&(xn(e)?t=e:i=e),new Xe(r=>{let s=function uhe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(n,e))}let fhe=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new z,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Xe(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(u3(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):R()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Ur(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=gc(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>vM(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(O(Be),O(yr),O(jt,8))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),d3=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new z,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(u3(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(O(yr),O(Be),O(jt,8))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),h3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({})}return n})(),f3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({imports:[z_,h3,z_,h3]})}return n})();const p3=Lce();class mhe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=yi(-this._previousScrollPosition.left),e.style.top=yi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),p3&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),p3&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class ghe{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Ur(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class m3{enable(){}disable(){}attach(){}}function EM(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function g3(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class _he{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();EM(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let yhe=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new m3,this.close=o=>new ghe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new mhe(this._viewportRuler,this._document),this.reposition=o=>new _he(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(i){return new(i||n)(O(fhe),O(d3),O(Be),O(jt))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class _3{constructor(e){if(this.scrollStrategy=new m3,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class vhe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let y3=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(O(jt))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bhe=(()=>{class n extends y3{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(O(jt),O(Be,8))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ehe=(()=>{class n extends y3{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=pc(s)},this._clickListener=s=>{const o=pc(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const d=l[c];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(o)||d.overlayElement.contains(a))break;const f=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(s)):f.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(O(jt),O(yr),O(Be,8))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),v3=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||rM()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),rM()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(O(jt),O(yr))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class whe{constructor(e,t,i,r,s,o,a,l,c,d=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new z,this._attachments=new z,this._detachments=new z,this._locationChanges=ht.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new z,this._outsidePointerEvents=new z,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ja(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=yi(this._config.width),e.height=yi(this._config.height),e.minWidth=yi(this._config.minWidth),e.minHeight=yi(this._config.minHeight),e.maxWidth=yi(this._config.maxWidth),e.maxHeight=yi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=hw(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(za(C(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const b3="cdk-overlay-connected-position-bounding-box",Ihe=/([A-Za-z%]+)$/;class Che{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new z,this._resizeSubscription=ht.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(b3),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),d=this._getOverlayFit(c,t,i,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(d,c,i)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<d.visibleArea)&&(o={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&$u(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(b3),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=w3(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let g=0-a,_=a+s.height-i.height,v=this._subtractOverflows(s.width,0-o,o+s.width-i.width),I=this._subtractOverflows(s.height,g,_),S=v*I;return{visibleArea:S,isCompletelyWithinViewport:s.width*s.height===S,fitsInViewportVertically:I===s.height,fitsInViewportHorizontally:v==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=E3(this._overlayRef.getConfig().minHeight),a=E3(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=w3(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),c=Math.max(s.left-i.left-e.x,0);let d=0,f=0;return d=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,f=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:d,y:f},{x:e.x+d,y:e.y+f}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new vhe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,d,f,g;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const _=Math.min(i.bottom-e.y+i.top,e.y),v=this._lastBoundingBoxSize.height;s=2*_,o=e.y-_,s>v&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-v/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)g=i.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)f=e.x,d=i.right-e.x;else{const _=Math.min(i.right-e.x+i.left,e.x),v=this._lastBoundingBoxSize.width;d=2*_,f=e.x-_,d>v&&!this._isInitialRender&&!this._growAfterOpen&&(f=e.x-v/2)}return{top:o,left:f,bottom:a,right:g,width:d,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=yi(i.height),r.top=yi(i.top),r.bottom=yi(i.bottom),r.width=yi(i.width),r.left=yi(i.left),r.right=yi(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=yi(s)),o&&(r.maxWidth=yi(o))}this._lastBoundingBoxSize=i,$u(this._boundingBox.style,r)}_resetBoundingBoxStyles(){$u(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){$u(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();$u(i,this._getExactOverlayY(t,e,d)),$u(i,this._getExactOverlayX(t,e,d))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=yi(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=yi(o.maxWidth):s&&(i.maxWidth="")),$u(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=yi(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=yi(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:g3(e,i),isOriginOutsideView:EM(e,i),isOverlayClipped:g3(t,i),isOverlayOutsideView:EM(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&hw(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof _n)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function $u(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function E3(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(Ihe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function w3(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const I3="cdk-global-overlay-wrapper";class The{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(I3),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,f=this._xOffset,g="rtl"===this._overlayRef.getConfig().direction;let _="",v="",I="";l?I="flex-start":"center"===d?(I="center",g?v=f:_=f):g?"left"===d||"end"===d?(I="flex-end",_=f):("right"===d||"start"===d)&&(I="flex-start",v=f):"left"===d||"start"===d?(I="flex-start",_=f):("right"===d||"end"===d)&&(I="flex-end",v=f),e.position=this._cssPosition,e.marginLeft=l?"0":_,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":v,t.justifyContent=I,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(I3),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let xhe=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new The}flexibleConnectedTo(t){return new Che(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(O(d3),O(jt),O(yr),O(v3))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),She=0,Ew=(()=>{class n{constructor(t,i,r,s,o,a,l,c,d,f,g,_){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=d,this._location=f,this._outsideClickDispatcher=g,this._animationsModuleType=_}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new _3(t);return o.direction=o.direction||this._directionality.value,new whe(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+She++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Vl)),new qde(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(O(yhe),O(v3),O(hh),O(xhe),O(bhe),O(xi),O(Be),O(jt),O(x4),O(Bb),O(Ehe),O(kl,8))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Rhe={provide:new oe("cdk-connected-overlay-scroll-strategy"),deps:[Ew],useFactory:function Ahe(n){return()=>n.scrollStrategies.reposition()}};let Mhe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({providers:[Ew,Rhe],imports:[z_,a3,f3,f3]})}return n})();function Phe(n,e){if(1&n){const t=fo();he(0,"div",2)(1,"button",3),$t("click",function(){return vs(t),Or(Qt().action())}),Ke(2),_e()()}if(2&n){const t=Qt();je(2),iu(" ",t.data.action," ")}}const khe=["label"];function Nhe(n,e){}const Ohe=Math.pow(2,31)-1;class wM{constructor(e,t){this._overlayRef=t,this._afterDismissed=new z,this._afterOpened=new z,this._onAction=new z,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,Ohe))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const C3=new oe("MatSnackBarData");class ww{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let Fhe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ae({type:n,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return n})(),Lhe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ae({type:n,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return n})(),Vhe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Ae({type:n,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return n})(),Bhe=(()=>{class n{constructor(t,i){this.snackBarRef=t,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static#e=this.\u0275fac=function(i){return new(i||n)(H(wM),H(C3))};static#t=this.\u0275cmp=lr({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(i,r){1&i&&(he(0,"div",0),Ke(1),_e(),Ot(2,Phe,3,1,"div",1)),2&i&&(je(1),iu(" ",r.data.message,"\n"),je(1),He("ngIf",r.hasAction))},dependencies:[lu,gw,Fhe,Lhe,Vhe],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}return n})();const Uhe={snackBarState:j4("state",[dM("void, hidden",Hu({transform:"scale(0.8)",opacity:0})),dM("visible",Hu({transform:"scale(1)",opacity:1})),hM("* => visible",uM("150ms cubic-bezier(0, 0, 0.2, 1)")),hM("* => void, * => hidden",uM("75ms cubic-bezier(0.4, 0.0, 1, 1)",Hu({opacity:0})))])};let jhe=0,zhe=(()=>{class n extends yM{constructor(t,i,r,s,o){super(),this._ngZone=t,this._elementRef=i,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=o,this._document=me(jt),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new z,this._onExit=new z,this._onEnter=new z,this._animationState="void",this._liveElementId="mat-snack-bar-container-live-"+jhe++,this.attachDomPortal=a=>{this._assertNotAttached();const l=this._portalOutlet.attachDomPortal(a);return this._afterPortalAttached(),l},this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),i}attachTemplatePortal(t){this._assertNotAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),i}onAnimationEnd(t){const{fromState:i,toState:r}=t;if(("void"===r&&"void"!==i||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(ja(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const t=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(r=>t.classList.add(r)):t.classList.add(i)),this._exposeToModals()}_exposeToModals(){const t=this._liveElementId,i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){const s=i[r],o=s.getAttribute("aria-owns");this._trackedModals.add(s),o?-1===o.indexOf(t)&&s.setAttribute("aria-owns",o+" "+t):s.setAttribute("aria-owns",t)}}_clearFromModals(){this._trackedModals.forEach(t=>{const i=t.getAttribute("aria-owns");if(i){const r=i.replace(this._liveElementId,"").trim();r.length>0?t.setAttribute("aria-owns",r):t.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(r=document.activeElement),t.removeAttribute("aria-hidden"),i.appendChild(t),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static#e=this.\u0275fac=function(i){return new(i||n)(H(Be),H(_n),H(Ph),H(yr),H(ww))};static#t=this.\u0275dir=Ae({type:n,viewQuery:function(i,r){if(1&i&&go(o3,7),2&i){let s;Di(s=Ai())&&(r._portalOutlet=s.first)}},features:[Mt]})}return n})(),Hhe=(()=>{class n extends zhe{_afterPortalAttached(){super._afterPortalAttached();const t=this._label.nativeElement,i="mdc-snackbar__label";t.classList.toggle(i,!t.querySelector(`.${i}`))}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=Jn(n)))(r||n)}}();static#t=this.\u0275cmp=lr({type:n,selectors:[["mat-snack-bar-container"]],viewQuery:function(i,r){if(1&i&&go(khe,7),2&i){let s;Di(s=Ai())&&(r._label=s.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(i,r){1&i&&NT("@state.done",function(o){return r.onAnimationEnd(o)}),2&i&&UT("@state",r._animationState)},features:[Mt],decls:6,vars:3,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(he(0,"div",0)(1,"div",1,2)(3,"div",3),Ot(4,Nhe,0,0,"ng-template",4),_e(),on(5,"div"),_e()()),2&i&&(je(5),mi("aria-live",r._live)("role",r._role)("id",r._liveElementId))},dependencies:[o3],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;--mdc-snackbar-container-shape:4px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[Uhe.snackBarState]}})}return n})(),T3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({imports:[Mhe,a3,Qb,B4,Co,Co]})}return n})();const x3=new oe("mat-snack-bar-default-options",{providedIn:"root",factory:function $he(){return new ww}});let Whe=(()=>{class n{get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}constructor(t,i,r,s,o,a){this._overlay=t,this._live=i,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}openFromComponent(t,i){return this._attach(t,i)}openFromTemplate(t,i){return this._attach(t,i)}open(t,i="",r){const s={...this._defaultConfig,...r};return s.data={message:t,action:i},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,i){const s=xi.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:ww,useValue:i}]}),o=new _M(this.snackBarContainerComponent,i.viewContainerRef,s),a=t.attach(o);return a.instance.snackBarConfig=i,a.instance}_attach(t,i){const r={...new ww,...this._defaultConfig,...i},s=this._createOverlay(r),o=this._attachSnackBarContainer(s,r),a=new wM(o,s);if(t instanceof Go){const l=new s3(t,null,{$implicit:r.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(r,a),c=new _M(t,void 0,l),d=o.attachComponentPortal(c);a.instance=d.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(za(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(t,i){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),i.duration&&i.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(i.duration))}_createOverlay(t){const i=new _3;i.direction=t.direction;let r=this._overlay.position().global();const s="rtl"===t.direction,o="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,a=!o&&"center"!==t.horizontalPosition;return o?r.left("0"):a?r.right("0"):r.centerHorizontally(),"top"===t.verticalPosition?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(t,i){return xi.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:wM,useValue:i},{provide:C3,useValue:t.data}]})}static#e=this.\u0275fac=function(i){return new(i||n)(O(Ew),O(I4),O(xi),O(oM),O(n,12),O(x3))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),qhe=(()=>{class n extends Whe{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a),this.simpleSnackBarComponent=Bhe,this.snackBarContainerComponent=Hhe,this.handsetCssClass="mat-mdc-snack-bar-handset"}static#e=this.\u0275fac=function(i){return new(i||n)(O(Ew),O(I4),O(xi),O(oM),O(n,12),O(x3))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:T3})}return n})();function Ghe(n,e){1&n&&(he(0,"div",20)(1,"div",21),on(2,"mat-progress-spinner",22),_e()())}function Khe(n,e){if(1&n){const t=fo();he(0,"div",8)(1,"mat-form-field",5)(2,"mat-label"),Ke(3,"Password"),_e(),he(4,"input",23),$t("ngModelChange",function(r){return vs(t),Or(Qt().password=r)}),_e()()()}if(2&n){const t=Qt();je(4),He("ngModel",t.password)}}function Zhe(n,e){if(1&n){const t=fo();he(0,"button",24),$t("click",function(){return vs(t),Or(Qt().signUpOrSendOTP())}),Ke(1),_e()}if(2&n){const t=Qt();He("disabled",t.isButtonDisabled()||t.disableSubmit),je(1),iu(" ",t.isPhoneSignup()?"Send OTP":"Sign Up"," ")}}function Yhe(n,e){if(1&n){const t=fo();he(0,"div",8)(1,"mat-form-field",5)(2,"mat-label"),Ke(3,"Enter OTP"),_e(),he(4,"input",25),$t("ngModelChange",function(r){return vs(t),Or(Qt().otp=r)}),_e()()()}if(2&n){const t=Qt();je(4),He("ngModel",t.otp)}}function Qhe(n,e){if(1&n){const t=fo();he(0,"button",24),$t("click",function(){return vs(t),Or(Qt(2).verifyOtp())}),Ke(1,"Verify OTP "),_e()}2&n&&He("disabled",Qt(2).disableSubmit)}function Xhe(n,e){if(1&n&&(he(0,"div",8),Ot(1,Qhe,2,1,"button",9),_e()),2&n){const t=Qt();je(1),He("ngIf",!t.loading)}}let Jhe=(()=>{class n{constructor(t,i,r){this.authService=t,this.router=i,this.snackBar=r,this.emailOrPhone="",this.password="",this.otp="",this.isOtpSent=!1,this.loading=!1}ngOnInit(){}isButtonDisabled(){return this.isPhoneSignup()?!/^\+\d+$/.test(this.emailOrPhone):!(this.emailOrPhone&&this.password)}signUpOrSendOTP(){this.isPhoneSignup()?(this.disableSubmit=!0,this.loading=!0,this.authService.sendOtp(this.emailOrPhone).then(()=>{this.isOtpSent=!0,this.snackBar.open("OTP has been sent your mobile. Please Verify to continue !!","Ok")}).catch(t=>{this.snackBar.open(t?.error?.message||"Something went wrong. Please try again later.","Ok")}).finally(()=>{this.disableSubmit=!1,this.loading=!1})):(this.disableSubmit=!0,this.loading=!0,this.authService.SignUp(this.emailOrPhone,this.password).then(t=>{console.log(t),this.snackBar.open("Successfully Signed Up!!","Ok")}).catch(t=>{this.snackBar.open(t?.error?.message||"Something went wrong. Please try again later.","Ok")}).finally(()=>{this.disableSubmit=!1,this.loading=!1}))}verifyOtp(){this.loading=!0,this.disableSubmit=!0,this.authService.verifyOtp(this.otp).then(t=>{this.snackBar.open("OTP Verified !!","Ok"),this.router.navigate(["/dashboard"])}).catch(t=>this.snackBar.open(t?.error?.message||"Something went wrong. Please try again later.","Ok")).finally(()=>{this.disableSubmit=!1,this.loading=!1})}isPhoneSignup(){return/^\+\d+$/.test(this.emailOrPhone)}singInWithGoogle(){this.authService.AuthLogin(new Wh.X)}singInWithGitHub(){this.authService.AuthLogin(new Wh.Y).then(()=>{this.router.navigate(["/dashboard"])})}singInWithMicrosoft(){this.authService.AuthLogin(new Wh.Z("microsoft.com"))}static#e=this.\u0275fac=function(i){return new(i||n)(H(Hf),H(dr),H(qhe))};static#t=this.\u0275cmp=lr({type:n,selectors:[["app-sign-up"]],decls:30,vars:6,consts:[["class","overlay",4,"ngIf"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center","fs-3","mb-3","fw-medium"],["appearance","outline",2,"width","100%"],["matInput","","placeholder","Email Address or Phone Number","required","",3,"ngModel","ngModelChange"],["class","mt-2",4,"ngIf"],[1,"mt-2"],["mat-raised-button","","style","width: 100%;","color","primary",3,"disabled","click",4,"ngIf"],["id","recaptcha-container"],[1,"my-2"],[1,"or"],[1,"orInner"],[1,"formGroup","d-flex","justify-content-center","align-items-center","gap-2"],[2,"text-decoration","none","cursor","pointer",3,"click"],["src","/assets/google.svg","alt","","width","40px","height","40px"],["src","/assets/github.png","alt","","width","30px","height","30px"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"overlay"],[1,"loader"],["diameter","50","mode","indeterminate"],["matInput","","type","password","placeholder","Password","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",2,"width","100%",3,"disabled","click"],["matInput","","type","text","id","inputOtp","required","",3,"ngModel","ngModelChange"]],template:function(i,r){1&i&&(Ot(0,Ghe,3,0,"div",0),he(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),Ke(5,"Sign Up"),_e(),he(6,"mat-form-field",5)(7,"mat-label"),Ke(8,"Email Address or Phone Number"),_e(),he(9,"input",6),$t("ngModelChange",function(o){return r.emailOrPhone=o}),_e()(),Ot(10,Khe,5,1,"div",7),he(11,"div",8),Ot(12,Zhe,2,2,"button",9),_e(),on(13,"div",10),Ot(14,Yhe,5,1,"div",7),Ot(15,Xhe,2,1,"div",7),he(16,"div",11)(17,"span",12)(18,"span",13),Ke(19,"Or"),_e()()(),he(20,"div",14)(21,"div",15),$t("click",function(){return r.singInWithGoogle()}),on(22,"img",16),_e(),he(23,"div",15),$t("click",function(){return r.singInWithGitHub()}),on(24,"img",17),_e()()(),he(25,"div",18)(26,"span"),Ke(27,"Already have an account? "),he(28,"span",19),Ke(29,"Log In"),_e()()()()()),2&i&&(He("ngIf",r.loading),je(9),He("ngModel",r.emailOrPhone),je(1),He("ngIf",!r.isPhoneSignup()),je(2),He("ngIf",!r.loading),je(2),He("ngIf",r.isOtpSent),je(1),He("ngIf",r.isOtpSent))},dependencies:[lu,hu,N_,zR,B_,cw,gw,pM,W_,mM,r3]})}return n})();function efe(n,e){if(1&n&&(he(0,"div",3)(1,"div",17)(2,"div",18),on(3,"img",19),he(4,"div",20)(5,"h1"),Ke(6,"Hello: "),he(7,"strong"),Ke(8),_e()(),he(9,"p"),Ke(10,"User ID: "),he(11,"strong"),Ke(12),_e()(),he(13,"p"),Ke(14,"Email: "),he(15,"strong"),Ke(16),_e()(),he(17,"p"),Ke(18,"Email Verified: "),he(19,"strong"),Ke(20),_e()()()()()()),2&n){const t=e.ngIf;je(3),Eb("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",UC),Eb("alt",t.displayName),je(5),Fl(t.displayName?t.displayName:"User"),je(4),Fl(t.uid),je(4),Fl(t.email),je(4),Fl(t.emailVerified)}}let tfe=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)(H(Hf))};static#t=this.\u0275cmp=lr({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","ml-2","mr-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(i,r){1&i&&(he(0,"nav",0)(1,"div",1),Ke(2," Dashboard "),_e()(),he(3,"div",2)(4,"div",3)(5,"nav",4)(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),on(10,"i",9),Ke(11,"User Profile "),_e()(),he(12,"li",7)(13,"a",10),$t("click",function(){return r.authService.SignOut()}),on(14,"i",11),Ke(15,"Log out "),_e()()()()(),he(16,"main",12)(17,"div",13)(18,"div",14)(19,"h1",15),Ke(20,"User Profile"),_e()(),Ot(21,efe,21,6,"div",16),_e()()()()),2&i&&(je(21),He("ngIf",r.authService.userData))},dependencies:[lu]})}return n})(),nfe=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)(H(Hf))};static#t=this.\u0275cmp=lr({type:n,selectors:[["app-forgot-password"]],decls:19,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center","fs-3","mb-3","fw-medium"],[1,"text-center"],["appearance","outline",1,"my-2",2,"width","100%"],["matInput","","type","email","required","","placeholder","Email Address"],["passwordResetEmail",""],["mat-raised-button","","color","primary",1,"mb-2",2,"width","100%",3,"disabled","click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(i,r){if(1&i){const s=fo();he(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Ke(4,"Reset Password"),_e(),he(5,"p",4),Ke(6,"Please enter your email address to request a password reset."),_e(),he(7,"mat-form-field",5)(8,"mat-label"),Ke(9,"Enter Email"),_e(),on(10,"input",6,7),_e(),he(12,"button",8),$t("click",function(){vs(s);const a=xh(11);return Or(r.authService.ForgotPassword(a.value))}),Ke(13,"Reset Password "),_e()(),he(14,"div",9)(15,"span"),Ke(16,"Go back to ? "),he(17,"span",10),Ke(18,"Log In"),_e()()()()()}if(2&i){const s=xh(11);je(12),He("disabled",""==s.value)}},dependencies:[hu,gw,pM,W_,mM]})}return n})();function ife(n,e){if(1&n&&(he(0,"div",4)(1,"p",9),Ke(2,"We have sent a confirmation email to "),he(3,"strong"),Ke(4),_e(),Ke(5,"."),_e(),he(6,"p",9),Ke(7,"Please check your email and click on the link to verify your email address."),_e()()),2&n){const t=e.ngIf;je(4),Fl(t.email)}}const rfe=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:$de},{path:"register-user",component:Jhe},{path:"dashboard",component:tfe,canActivate:[(()=>{class n{constructor(t,i){this.authService=t,this.router=i}canActivate(t,i){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}static#e=this.\u0275fac=function(i){return new(i||n)(O(Hf),O(dr))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()]},{path:"forgot-password",component:nfe},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)(H(Hf))};static#t=this.\u0275cmp=lr({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(i,r){1&i&&(he(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),Ke(4,"Thank You for Registering"),_e(),Ot(5,ife,8,1,"div",3),he(6,"div",4)(7,"button",5),$t("click",function(){return r.authService.SendVerificationMail()}),on(8,"i",6),Ke(9," Resend Verification Email "),_e()()(),he(10,"div",7)(11,"span"),Ke(12,"Go back to?"),he(13,"span",8),Ke(14," Sign in"),_e()()()()()),2&i&&(je(5),He("ngIf",r.authService.userData))},dependencies:[lu,hu]})}return n})()}];let sfe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({imports:[J2.forRoot(rfe),J2]})}return n})(),ofe=(()=>{class n{constructor(){this.title="firebase-angular"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=lr({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){1&i&&on(0,"router-outlet")},dependencies:[mS]})}return n})();const afe_firebase={apiKey:"AIzaSyDF9Dp3p9Pt4CGO9Mf-QJri3jojwvYYp7Q",authDomain:"angular-fire-demo-541c1.firebaseapp.com",databaseURL:"https://angular-fire-demo-541c1-default-rtdb.firebaseio.com",projectId:"angular-fire-demo-541c1",storageBucket:"angular-fire-demo-541c1.appspot.com",messagingSenderId:"306663234359",appId:"1:306663234359:web:65ace318b0ce59331798b2",measurementId:"G-P6N0LLQBWZ"},S3="firebasestorage.googleapis.com",D3="storageBucket";class qn extends T.ZR{constructor(e,t,i=0){super(IM(e),`Firebase Storage: ${t} (${IM(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return IM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var jn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(jn||{});function IM(n){return"storage/"+n}function CM(){return new qn(jn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function A3(){return new qn(jn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function R3(){return new qn(jn.CANCELED,"User canceled the upload/download.")}function M3(){return new qn(jn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Kf(n){return new qn(jn.INVALID_ARGUMENT,n)}function P3(){return new qn(jn.APP_DELETED,"The Firebase app was deleted.")}function k3(n){return new qn(jn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function G_(n,e){return new qn(jn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function K_(n){throw new qn(jn.INTERNAL_ERROR,"Internal error: "+n)}class vr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=vr.makeFromUrl(e,t)}catch{return new vr(e,"")}if(""===i.path)return i;throw function _fe(n){return new qn(jn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+r+"(/(.*))?$","i");function c(Y){Y.path_=decodeURIComponent(Y.path)}const f=t.replace(/[.]/g,"\\."),V=[{regex:a,indices:{bucket:1,path:3},postModify:function s(Y){"/"===Y.path.charAt(Y.path.length-1)&&(Y.path_=Y.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${f}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${t===S3?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let Y=0;Y<V.length;Y++){const de=V[Y],Me=de.regex.exec(e);if(Me){let Ft=Me[de.indices.path];Ft||(Ft=""),i=new vr(Me[de.indices.bucket],Ft),de.postModify(i);break}}if(null==i)throw function gfe(n){return new qn(jn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return i}}class wfe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Iw(n){return"string"==typeof n||n instanceof String}function N3(n){return TM()&&n instanceof Blob}function TM(){return typeof Blob<"u"}function xM(n,e,t,i){if(i<e)throw Kf(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw Kf(`Invalid value for '${n}'. Expected ${t} or less.`)}function il(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function O3(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var Zf=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Zf||{});function F3(n,e){const t=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||r||s}class Dfe{constructor(e,t,i,r,s,o,a,l,c,d,f,g=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,v)=>{this.resolve_=_,this.reject_=v,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function Tfe(n){return void 0!==n}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=CM();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(r.canceled?this.appDelete_?P3():R3():A3())};this.canceled_?t(0,new Cw(!1,null,!0)):this.backoffId_=function Ife(n,e,t){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function d(...S){c||(c=!0,e.apply(null,S))}function f(S){r=setTimeout(()=>{r=null,n(_,l())},S)}function g(){s&&clearTimeout(s)}function _(S,...F){if(c)return void g();if(S)return g(),void d.call(null,S,...F);if(l()||o)return g(),void d.call(null,S,...F);let V;i<64&&(i*=2),1===a?(a=2,V=0):V=1e3*(i+Math.random()),f(V)}let v=!1;function I(S){v||(v=!0,g(),!c&&(null!==r?(S||(a=2),clearTimeout(r),f(0)):S||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,I(!0)},t),I}((i,r)=>{if(r)return void i(!1,new Cw(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Zf.NO_ERROR,l=s.getStatus();if(!a||F3(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Zf.ABORT;return void i(!1,new Cw(!1,null,d))}const c=-1!==this.successCodes_.indexOf(l);i(!0,new Cw(c,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Cfe(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Cw{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Ofe(...n){const e=function Nfe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(TM())return new Blob(n);throw new qn(jn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ss={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class SM{constructor(e,t){this.data=e,this.contentType=t||null}}function DM(n,e){switch(n){case Ss.RAW:return new SM(L3(e));case Ss.BASE64:case Ss.BASE64URL:return new SM(V3(n,e));case Ss.DATA_URL:return new SM(function Bfe(n){const e=new B3(n);return e.base64?V3(Ss.BASE64,e.rest):function Vfe(n){let e;try{e=decodeURIComponent(n)}catch{throw G_(Ss.DATA_URL,"Malformed data URL.")}return L3(e)}(e.rest)}(e),function Ufe(n){return new B3(n).contentType}(e))}throw CM()}function L3(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function V3(n,e){switch(n){case Ss.BASE64:{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw G_(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ss.BASE64URL:{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw G_(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Lfe(n){if(typeof atob>"u")throw function Efe(n){return new qn(jn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(r){throw r.message.includes("polyfill")?r:G_(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class B3{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw G_(Ss.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function jfe(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class aa{constructor(e,t){let i=0,r="";N3(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(N3(this.data_)){const r=function Ffe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new aa(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new aa(i,!0)}}static getBlob(...e){if(TM()){const t=e.map(i=>i instanceof aa?i.data_:i);return new aa(Ofe.apply(null,t))}{const t=e.map(o=>Iw(o)?DM(Ss.RAW,o).data:o.data_);let i=0;t.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new aa(r,!0)}}uploadData(){return this.data_}}function AM(n){let e;try{e=JSON.parse(n)}catch{return null}return function Sfe(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function U3(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function $fe(n,e){return e}class qr{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||$fe}}let Tw=null;function Z_(){if(Tw)return Tw;const n=[];n.push(new qr("bucket")),n.push(new qr("generation")),n.push(new qr("metageneration")),n.push(new qr("name","fullPath",!0));const t=new qr("name");t.xform=function e(s,o){return function Wfe(n){return!Iw(n)||n.length<2?n:U3(n)}(o)},n.push(t);const r=new qr("size");return r.xform=function i(s,o){return void 0!==o?Number(o):o},n.push(r),n.push(new qr("timeCreated")),n.push(new qr("updated")),n.push(new qr("md5Hash",null,!0)),n.push(new qr("cacheControl",null,!0)),n.push(new qr("contentDisposition",null,!0)),n.push(new qr("contentEncoding",null,!0)),n.push(new qr("contentLanguage",null,!0)),n.push(new qr("contentType",null,!0)),n.push(new qr("metadata","customMetadata",!0)),Tw=n,Tw}function j3(n,e,t){const i=AM(e);return null===i?null:function Gfe(n,e,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const o=t[s];i[o.local]=o.xform(i,e[o.server])}return function qfe(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new vr(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(i,n),i}(n,i,t)}function RM(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const z3="prefixes",H3="items";class la{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ca(n){if(!n)throw CM()}function xw(n,e){return function t(i,r){const s=j3(n,r,e);return ca(null!==s),s}}function Yf(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function pfe(){return new qn(jn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function ffe(){return new qn(jn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function hfe(n){return new qn(jn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function mfe(n){return new qn(jn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}}function Y_(n){const e=Yf(n);return function t(i,r){let s=e(i,r);return 404===i.getStatus()&&(s=function dfe(n){return new qn(jn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function $3(n,e,t){const r=il(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new la(r,"GET",xw(n,t),o);return a.errorHandler=Y_(e),a}function Jfe(n,e,t,i,r){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),i&&(s.pageToken=i),r&&(s.maxResults=r);const a=il(e.bucketOnlyServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new la(a,"GET",function Qfe(n,e){return function t(i,r){const s=function Yfe(n,e,t){const i=AM(t);return null===i?null:function Zfe(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[z3])for(const r of t[z3]){const s=r.replace(/\/$/,""),o=n._makeStorageReference(new vr(e,s));i.prefixes.push(o)}if(t[H3])for(const r of t[H3]){const s=n._makeStorageReference(new vr(e,r.name));i.items.push(s)}return i}(n,e,i)}(n,e,r);return ca(null!==s),s}}(n,e.bucket),c);return d.urlParams=s,d.errorHandler=Yf(e),d}function q3(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function ipe(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class Sw{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function MM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ca(!1)}return ca(!!t&&-1!==(e||["active"]).indexOf(t)),t}const ape={STATE_CHANGED:"state_changed"},Gr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function PM(n){switch(n){case"running":case"pausing":case"canceling":return Gr.RUNNING;case"paused":return Gr.PAUSED;case"success":return Gr.SUCCESS;case"canceled":return Gr.CANCELED;default:return Gr.ERROR}}class lpe{constructor(e,t,i){if(function xfe(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Qf(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let Z3=null;class cpe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw K_("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw K_("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw K_("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw K_("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw K_("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class upe extends cpe{initXhr(){this.xhr_.responseType="text"}}function To(){return Z3?Z3():new upe}class Y3{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=Z_(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(jn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(F3(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=A3()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(jn.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function rpe(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o=q3(e,i,r),a={name:o.fullPath},l=il(s,n.host,n._protocol),d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=RM(o,t),v=new la(l,"POST",function _(I){let S;MM(I);try{S=I.getResponseHeader("X-Goog-Upload-URL")}catch{ca(!1)}return ca(Iw(S)),S},n.maxUploadRetryTime);return v.urlParams=a,v.headers=d,v.body=f,v.errorHandler=Yf(e),v}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,To,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function spe(n,e,t,i){const l=new la(t,"POST",function s(c){const d=MM(c,["active","final"]);let f=null;try{f=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ca(!1)}f||ca(!1);const g=Number(f);return ca(!isNaN(g)),new Sw(g,i.size(),"final"===d)},n.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=Yf(e),l}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,To,t,i);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Sw(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=function ope(n,e,t,i,r,s,o,a){const l=new Sw(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw function vfe(){return new qn(jn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const c=l.total-l.current;let d=c;r>0&&(d=Math.min(d,r));const f=l.current;let _="";_=0===d?"finalize":c===d?"upload, finalize":"upload";const v={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${l.current}`},I=i.slice(f,f+d);if(null===I)throw M3();const V=new la(t,"POST",function S(Y,de){const Me=MM(Y,["active","final"]),qe=l.current+d,Ft=i.size();let Pi;return Pi="final"===Me?xw(e,s)(Y,de):null,new Sw(qe,Ft,"final"===Me,Pi)},e.maxUploadRetryTime);return V.headers=v,V.body=I.uploadData(),V.progressCallback=a||null,V.errorHandler=Yf(n),V}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,To,r,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=$3(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,To,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function G3(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let V="";for(let Y=0;Y<2;Y++)V+=Math.random().toString().slice(2);return V}();o["Content-Type"]="multipart/related; boundary="+l;const c=q3(e,i,r),d=RM(c,t),_=aa.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+d+"\r\n--"+l+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",i,"\r\n--"+l+"--");if(null===_)throw M3();const v={name:c.fullPath},I=il(s,n.host,n._protocol),F=n.maxUploadRetryTime,M=new la(I,"POST",xw(n,t),F);return M.urlParams=v,M.headers=o,M.body=_.uploadData(),M.errorHandler=Yf(e),M}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,To,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=R3(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=PM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new lpe(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(PM(this._state)){case Gr.SUCCESS:Qf(this._resolve.bind(null,this.snapshot))();break;case Gr.CANCELED:case Gr.ERROR:Qf(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(PM(this._state)){case Gr.RUNNING:case Gr.PAUSED:e.next&&Qf(e.next.bind(e,this.snapshot))();break;case Gr.SUCCESS:e.complete&&Qf(e.complete.bind(e))();break;default:e.error&&Qf(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Wu{constructor(e,t){this._service=e,this._location=t instanceof vr?t:vr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Wu(e,t)}get root(){const e=new vr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return U3(this._location.path)}get storage(){return this._service}get parent(){const e=function zfe(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new vr(this._location.bucket,e);return new Wu(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw k3(e)}}function X3(n,e,t){return kM.apply(this,arguments)}function kM(){return kM=(0,J.Z)(function*(n,e,t){const r=yield J3(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&(yield X3(n,e,r.nextPageToken))}),kM.apply(this,arguments)}function J3(n,e){null!=e&&"number"==typeof e.maxResults&&xM("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=Jfe(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,To)}function wpe(n){n._throwIfRoot("getDownloadURL");const e=function epe(n,e,t){const r=il(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new la(r,"GET",function Xfe(n,e){return function t(i,r){const s=j3(n,r,e);return ca(null!==s),function Kfe(n,e,t,i){const r=AM(e);if(null===r||!Iw(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const f=n.fullPath;return il("/b/"+o(n.bucket)+"/o/"+o(f),t,i)+O3({alt:"media",token:c})})[0]}(s,r,n.host,n._protocol)}}(n,t),o);return a.errorHandler=Y_(e),a}(n.storage,n._location,Z_());return n.storage.makeRequestWithTokens(e,To).then(t=>{if(null===t)throw function bfe(){return new qn(jn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function e5(n,e){const t=function Hfe(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new vr(n._location.bucket,t);return new Wu(n.storage,i)}function t5(n,e){if(n instanceof NM){const t=n;if(null==t._bucket)throw function yfe(){return new qn(jn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+D3+"' property when initializing the app?")}();const i=new Wu(t,t._bucket);return null!=e?t5(i,e):i}return void 0!==e?e5(n,e):n}function xpe(n,e){if(e&&function Cpe(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof NM)return function Tpe(n,e){return new Wu(n,e)}(n,e);throw Kf("To use ref(service, url), the first argument must be a Storage instance.")}return t5(n,e)}function n5(n,e){const t=e?.[D3];return null==t?null:vr.makeFromBucketSpec(t,n)}class NM{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=S3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?vr.makeFromBucketSpec(r,this._host):n5(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?vr.makeFromBucketSpec(this._url,e):n5(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,J.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,J.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wu(this,e)}_makeRequest(e,t,i,r,s=!0){if(this._deleted)return new wfe(P3());{const o=function kfe(n,e,t,i,r,s,o=!0){const a=O3(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return function Mfe(n,e){e&&(n["X-Firebase-GMPID"]=e)}(c,e),function Afe(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(c,t),function Rfe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(c,s),function Pfe(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(c,i),new Dfe(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,o)}(e,this._appId,i,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var i=this;return(0,J.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const r5="@firebase/storage";function a5(n,e){return xpe(n=(0,T.m9)(n),e)}function Fpe(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new NM(t,i,r,e,rs.SDK_VERSION)}!function Lpe(){(0,rs._registerComponent)(new bo.wA("storage",Fpe,"PUBLIC").setMultipleInstances(!0)),(0,rs.registerVersion)(r5,"0.12.0",""),(0,rs.registerVersion)(r5,"0.12.0","esm2017")}();class Dw{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class c5{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Dw(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new Dw(i,this,this._ref))},t)}on(e,t,i,r){let s;return t&&(s="function"==typeof t?o=>t(new Dw(o,this,this._ref)):{next:t.next?o=>t.next(new Dw(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class u5{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new rl(e,this._service))}get items(){return this._delegate.items.map(e=>new rl(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class rl{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Ope(n,e){return e5(n,e)}(this._delegate,e);return new rl(t,this.storage)}get root(){return new rl(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new rl(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new c5(function Dpe(n,e,t){return function _pe(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Y3(n,new aa(e),t)}(n=(0,T.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ss.RAW,i){this._throwIfRoot("putString");const r=DM(t,e),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new c5(new Y3(this._delegate,new aa(r.data,!0),s),this)}listAll(){return function Ppe(n){return function vpe(n){const e={prefixes:[],items:[]};return X3(n,e).then(()=>e)}(n=(0,T.m9)(n))}(this._delegate).then(e=>new u5(e,this.storage))}list(e){return function Mpe(n,e){return J3(n=(0,T.m9)(n),e)}(this._delegate,e||void 0).then(t=>new u5(t,this.storage))}getMetadata(){return function Ape(n){return function bpe(n){n._throwIfRoot("getMetadata");const e=$3(n.storage,n._location,Z_());return n.storage.makeRequestWithTokens(e,To)}(n=(0,T.m9)(n))}(this._delegate)}updateMetadata(e){return function Rpe(n,e){return function Epe(n,e){n._throwIfRoot("updateMetadata");const t=function tpe(n,e,t,i){const s=il(e.fullServerUrl(),n.host,n._protocol),a=RM(t,i),c=n.maxOperationRetryTime,d=new la(s,"PATCH",xw(n,i),c);return d.headers={"Content-Type":"application/json; charset=utf-8"},d.body=a,d.errorHandler=Y_(e),d}(n.storage,n._location,e,Z_());return n.storage.makeRequestWithTokens(t,To)}(n=(0,T.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function kpe(n){return wpe(n=(0,T.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Npe(n){return function Ipe(n){n._throwIfRoot("deleteObject");const e=function npe(n,e){const i=il(e.fullServerUrl(),n.host,n._protocol),a=new la(i,"DELETE",function o(l,c){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Y_(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,To)}(n=(0,T.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw k3(e)}}class d5{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(h5(e))throw Kf("ref() expected a child path but got a URL, use refFromURL instead.");return new rl(a5(this._delegate,e),this)}refFromURL(e){if(!h5(e))throw Kf("refFromURL() expected a full URL but got a child path, use ref() instead.");try{vr.makeFromUrl(e,this._delegate.host)}catch{throw Kf("refFromUrl() expected a valid full URL but got an invalid one.")}return new rl(a5(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){!function l5(n,e,t,i={}){!function Spe(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,T.Sg)(r,n.app.options.projectId))}(n,e,t,i)}(this._delegate,e,t,i)}}function h5(n){return/^[A-Za-z]+:\/\//.test(n)}function jpe(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new d5(t,i)}function f5(n){const e=function Hpe(n){return new Xe(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(p4(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(ge(t=>t.bytesTransferred/t.totalBytes*100))}}function Aw(n){return{getDownloadURL:()=>R(void 0).pipe(nB,Ce(()=>n.getDownloadURL()),ci),getMetadata:()=>R(void 0).pipe(nB,Ce(()=>n.getMetadata()),ci),delete:()=>E(n.delete()),child:e=>Aw(n.child(e)),updateMetadata:e=>E(n.updateMetadata(e)),put:(e,t)=>f5(n.put(e,t)),putString:(e,t,i)=>f5(n.putString(e,t,i)),list:e=>E(n.list(e)),listAll:()=>E(n.listAll())}}!function zpe(n){const e={TaskState:Gr,TaskEvent:ape,StringFormat:Ss,Storage:d5,Reference:rl};n.INTERNAL.registerComponent(new bo.wA("storage-compat",jpe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.3")}(ss.Z);const $pe=new oe("angularfire2.storageBucket"),Wpe=new oe("angularfire2.storage.maxUploadRetryTime"),qpe=new oe("angularfire2.storage.maxOperationRetryTime"),Gpe=new oe("angularfire2.storage.use-emulator");let Kpe=(()=>{class n{storage;constructor(t,i,r,s,o,a,l,c,d,f){const g=bg(t,o,i);this.storage=SE(`${g.name}.storage.${r}`,"AngularFireStorage",g.name,()=>{const _=o.runOutsideAngular(()=>g.storage(r||void 0)),v=d;return v&&_.useEmulator(...v),l&&_.setMaxUploadRetryTime(l),c&&_.setMaxOperationRetryTime(c),_},[l,c])}ref(t){return Aw(this.storage.ref(t))}refFromURL(t){return Aw(this.storage.refFromURL(t))}upload(t,i,r){return Aw(this.storage.ref(t)).put(i,r)}static \u0275fac=function(i){return new(i||n)(O(Yh),O(Qh,8),O($pe,8),O(Ks),O(Be),O(xE),O(Wpe,8),O(qpe,8),O(Gpe,8),O(TE,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Zpe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=xt({type:n});static \u0275inj=Nt({})}return n})(),Ype=(()=>{class n{constructor(){ss.Z.registerVersion("angularfire",Gh.full,"gcs-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=xt({type:n});static \u0275inj=Nt({providers:[Kpe],imports:[Zpe]})}return n})();const p5="@firebase/database";let OM="";function FM(n){OM=n}class Jpe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,T.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,T.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class eme{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,T.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const g5=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Jpe(e)}}catch{}return new eme},qu=g5("localStorage"),LM=g5("sessionStorage"),Xf=new Is.Yd("@firebase/database"),_5=function(){let n=1;return function(){return n++}}(),y5=function(n){const e=(0,T.dS)(n),t=new T.gQ;t.update(e);const i=t.digest();return T.US.encodeByteArray(i)},Q_=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=Q_.apply(null,i):e+="object"==typeof i?(0,T.Wl)(i):i,e+=" "}return e};let Gu=null,v5=!0;const b5=function(n,e){(0,T.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Xf.logLevel=Is.in.VERBOSE,Gu=Xf.log.bind(Xf),e&&LM.set("logging_enabled",!0)):"function"==typeof n?Gu=n:(Gu=null,LM.remove("logging_enabled"))},Hi=function(...n){if(!0===v5&&(v5=!1,null===Gu&&!0===LM.get("logging_enabled")&&b5(!0)),Gu){const e=Q_.apply(null,n);Gu(e)}},X_=function(n){return function(...e){Hi(n,...e)}},VM=function(...n){const e="FIREBASE INTERNAL ERROR: "+Q_(...n);Xf.error(e)},ua=function(...n){const e=`FIREBASE FATAL ERROR: ${Q_(...n)}`;throw Xf.error(e),new Error(e)},br=function(...n){const e="FIREBASE WARNING: "+Q_(...n);Xf.warn(e)},Rw=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},_c="[MIN_NAME]",sl="[MAX_NAME]",Ku=function(n,e){if(n===e)return 0;if(n===_c||e===sl)return-1;if(e===_c||n===sl)return 1;{const t=I5(n),i=I5(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},ime=function(n,e){return n===e?0:n<e?-1:1},J_=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,T.Wl)(e))},BM=function(n){if("object"!=typeof n||null===n)return(0,T.Wl)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,T.Wl)(e[i]),t+=":",t+=BM(n[e[i]]);return t+="}",t},E5=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function $i(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const w5=function(n){(0,T.hu)(!Rw(n),"Invalid JSON number");const i=1023;let r,s,o,a,l;0===n?(s=0,o=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const d=c.join("");let f="";for(l=0;l<64;l+=8){let g=parseInt(d.substr(l,8),2).toString(16);1===g.length&&(g="0"+g),f+=g}return f.toLowerCase()},ame=new RegExp("^-?(0*)\\d{1,10}$"),I5=function(n){if(ame.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Jf=function(n){try{n()}catch(e){setTimeout(()=>{throw br("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},ey=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class dme{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){br(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class hme{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Hi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',br(e)}}let ty=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const D5=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,M5="websocket",P5="long_polling";class jM{constructor(e,t,i,r,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qu.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&qu.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function k5(n,e,t){let i;if((0,T.hu)("string"==typeof e,"typeof type must == string"),(0,T.hu)("object"==typeof t,"typeof params must == object"),e===M5)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==P5)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function fme(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return $i(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}class pme{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,T.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,T.p$)(this.counters_)}}const zM={},HM={};function $M(n){const e=n.toString();return zM[e]||(zM[e]=new pme),zM[e]}class gme{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Jf(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class yc{constructor(e,t,i,r,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=X_(e),this.stats_=$M(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),k5(t,P5,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new gme(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,T.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new WM((...s)=>{const[o,a,l,c,d]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&D5.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yc.forceAllow_=!0}static forceDisallow(){yc.forceDisallow_=!0}static isAvailable(){return!((0,T.Yr)()||!yc.forceAllow_&&(yc.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,T.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,T.h$)(t),r=E5(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,T.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,T.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class WM{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,T.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=_5(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=WM.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Hi("frame writing exception"),a.stack&&Hi(a.stack),Hi(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Hi("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const o=this.pendingSegs.shift();i=i+"&seg"+r+"="+o.seg+"&ts"+r+"="+o.ts+"&d"+r+"="+o.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,T.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Hi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let Pw=null;typeof MozWebSocket<"u"?Pw=MozWebSocket:typeof WebSocket<"u"&&(Pw=WebSocket);let ep=(()=>{class n{constructor(t,i,r,s,o,a,l){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=X_(this.connId),this.stats_=$M(i),this.connURL=n.connectionURL_(i,a,l,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){const a={v:"5"};return!(0,T.Yr)()&&typeof location<"u"&&location.hostname&&D5.test(location.hostname)&&(a.r="f"),i&&(a.s=i),r&&(a.ls=r),s&&(a.ac=s),o&&(a.p=o),k5(t,M5,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qu.set("previous_websocket_failure",!0);try{let r;if((0,T.Yr)()){r={headers:{"User-Agent":`Firebase/5/${OM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new Pw(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==Pw&&!n.forceDisallow_}static previouslyFailed(){return qu.isInMemoryStorage||!0===qu.get("previous_websocket_failure")}markConnectionHealthy(){qu.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,T.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,T.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,T.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=E5(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),U5=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[yc,ep]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=ep&&ep.isAvailable();let r=i&&!ep.previouslyFailed();if(t.webSocketOnly&&(i||br("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ep];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class G5{constructor(e,t,i,r,s,o,a,l,c,d){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=X_("c:"+this.id+":"),this.transportManager_=new U5(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=ey(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=J_("t",e),i=J_("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=J_("t",e),i=J_("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=J_("t",e);if("d"in e){const i=e.d;if("h"===t){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?VM("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):VM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&br("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),ey(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ey(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class K5{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class Z5{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,T.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,T.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class kw extends Z5{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,T.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new kw}getInitialEvent(e){return(0,T.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Xt{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Wt(){return new Xt("")}function yt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function vc(n){return n.pieces_.length-n.pieceNum_}function un(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Xt(n.pieces_,e)}function GM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ny(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function X5(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Xt(e,0)}function zn(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Xt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Xt(t,0)}function vt(n){return n.pieceNum_>=n.pieces_.length}function Kr(n,e){const t=yt(n),i=yt(e);if(null===t)return e;if(t===i)return Kr(un(n),un(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Vme(n,e){const t=ny(n,0),i=ny(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=Ku(t[r],i[r]);if(0!==s)return s}return t.length===i.length?0:t.length<i.length?-1:1}function KM(n,e){if(vc(n)!==vc(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function to(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(vc(n)>vc(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class Bme{constructor(e,t){this.errorPrefix_=t,this.parts_=ny(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,T.ug)(this.parts_[i]);J5(this)}}function J5(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Zu(n))}function Zu(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class ZM extends Z5{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new ZM}getInitialEvent(e){return(0,T.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const iy=1e3;let Ow,Yu=(()=>{class n extends K5{constructor(t,i,r,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=X_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=iy,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,T.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ZM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&kw.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_((0,T.Wl)(o)),(0,T.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new T.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?i.resolve(l):i.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,T.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,T.hu)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r};t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,d=l.s;n.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",l),"ok"!==d&&this.removeListen_(r,s),t.onComplete&&t.onComplete(d,c))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,T.r3)(t,"w")){const r=(0,T.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();br(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,T.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,T.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,T.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const o={p:t};s&&(o.q=r,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();const a={p:i,d:r};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,T.Wl)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):VM("Unrecognized action received from server: "+(0,T.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,T.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=iy,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=iy,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=iy),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,J.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const d=function(){c?c.close():(l=!0,s())};t.realtime_={close:d,sendRequest:function(_){(0,T.hu)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(_)}};const g=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[_,v]=yield Promise.all([t.authTokenProvider_.getToken(g),t.appCheckTokenProvider_.getToken(g)]);l?Hi("getToken() completed but was canceled"):(Hi("getToken() completed. Creating connection."),t.authToken_=_&&_.accessToken,t.appCheckToken_=v&&v.token,c=new G5(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,I=>{br(I+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(_){t.log_("Failed to get token: "+_),l||(t.repoInfo_.nodeAdmin&&br(_),d())}}})()}interrupt(t){Hi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Hi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,T.xb)(this.interruptReasons_)&&(this.reconnectDelay_=iy,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(o=>BM(o)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new Xt(t).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(i),o.delete(i),0===o.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){Hi("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Hi("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,T.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+OM.replace(/\./g,"-")]=1,(0,T.uI)()?t["framework.cordova"]=1:(0,T.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=kw.getInstance().currentlyOnline();return(0,T.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class It{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new It(e,t)}}class Nw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new It(_c,e),r=new It(_c,t);return 0!==this.compare(i,r)}minPost(){return It.MIN}}class nW extends Nw{static get __EMPTY_NODE(){return Ow}static set __EMPTY_NODE(e){Ow=e}compare(e,t){return Ku(e.name,t.name)}isDefinedOn(e){throw(0,T.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return It.MIN}maxPost(){return new It(sl,Ow)}makePost(e,t){return(0,T.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new It(e,Ow)}toString(){return".key"}}const da=new nW;class Fw{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let QM,xo=(()=>{class n{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??cs.EMPTY_NODE,this.right=o??cs.EMPTY_NODE}copy(t,i,r,s,o){return new n(t??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const o=r(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===o?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return cs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return cs.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class cs{constructor(e,t=cs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new cs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,xo.BLACK,null,null))}remove(e){return new cs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xo.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Fw(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Fw(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Fw(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Fw(this.root_,null,this.comparator_,!0,e)}}function Gme(n,e){return Ku(n.name,e.name)}function YM(n,e){return Ku(n,e)}cs.EMPTY_NODE=new class qme{copy(e,t,i,r,s){return this}insert(e,t,i){return new xo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const iW=function(n){return"number"==typeof n?"number:"+w5(n):"string:"+n},rW=function(n){if(n.isLeafNode()){const e=n.val();(0,T.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,T.r3)(e,".sv"),"Priority must be a string or number.")}else(0,T.hu)(n===QM||n.isEmpty(),"priority of unexpected type.");(0,T.hu)(n===QM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let sW,oW,aW,tp=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,T.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),rW(this.priorityNode_)}static set __childrenNodeConstructor(t){sW=t}static get __childrenNodeConstructor(){return sW}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return vt(t)?this:".priority"===yt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=yt(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,T.hu)(".priority"!==r||1===vc(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(un(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+iW(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?w5(this.value_):this.value_,this.lazyHash_=y5(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,T.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return(0,T.hu)(s>=0,"Unknown leaf type: "+i),(0,T.hu)(o>=0,"Unknown leaf type: "+r),s===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const In=new class Qme extends Nw{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?Ku(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return It.MIN}maxPost(){return new It(sl,new tp("[PRIORITY-POST]",aW))}makePost(e,t){const i=oW(e);return new It(t,new tp("[PRIORITY-POST]",i))}toString(){return".priority"}},Xme=Math.log(2);class Jme{constructor(e){this.count=parseInt(Math.log(e+1)/Xme,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Lw=function(n,e,t,i){n.sort(e);const r=function(l,c){const d=c-l;let f,g;if(0===d)return null;if(1===d)return f=n[l],g=t?t(f):f,new xo(g,f.node,xo.BLACK,null,null);{const _=parseInt(d/2,10)+l,v=r(l,_),I=r(_+1,c);return f=n[_],g=t?t(f):f,new xo(g,f.node,xo.BLACK,v,I)}},a=function(l){let c=null,d=null,f=n.length;const g=function(v,I){const S=f-v,F=f;f-=v;const M=r(S+1,F),V=n[S],Y=t?t(V):V;_(new xo(Y,V.node,I,null,M))},_=function(v){c?(c.left=v,c=v):(d=v,c=v)};for(let v=0;v<l.count;++v){const I=l.nextBitIsOne(),S=Math.pow(2,l.count-(v+1));I?g(S,xo.BLACK):(g(S,xo.BLACK),g(S,xo.RED))}return d}(new Jme(n.length));return new cs(i||e,a)};let XM;const np={};class ol{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,T.hu)(np&&In,"ChildrenNode.ts has not been loaded"),XM=XM||new ol({".priority":np},{".priority":In}),XM}get(e){const t=(0,T.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof cs?t:null}hasIndex(e){return(0,T.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,T.hu)(e!==da,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(It.Wrap);let a,o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();a=r?Lw(i,e.getCompare()):np;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new ol(d,c)}addToIndexes(e,t){const i=(0,T.UI)(this.indexes_,(r,s)=>{const o=(0,T.DV)(this.indexSet_,s);if((0,T.hu)(o,"Missing index implementation for "+s),r===np){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(It.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Lw(a,o.getCompare())}return np}{const a=t.get(e.name);let l=r;return a&&(l=l.remove(new It(e.name,a))),l.insert(e,e.node)}});return new ol(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,T.UI)(this.indexes_,r=>{if(r===np)return r;{const s=t.get(e.name);return s?r.remove(new It(e.name,s)):r}});return new ol(i,this.indexSet_)}}let ry,st=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&rW(this.priorityNode_),this.children_.isEmpty()&&(0,T.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ry||(ry=new n(new cs(YM),null,ol.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ry}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?ry:i}}getChild(t){const i=yt(t);return null===i?this:this.getImmediateChild(i).getChild(un(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,T.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new It(t,i);let s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));const a=s.isEmpty()?ry:this.priorityNode_;return new n(s,a,o)}}updateChild(t,i){const r=yt(t);if(null===r)return i;{(0,T.hu)(".priority"!==yt(t)||1===vc(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(un(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,o=!0;if(this.forEachChild(In,(a,l)=>{i[a]=l.val(t),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*r){const a=[];for(const l in i)a[l]=i[l];return a}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+iW(this.getPriority().val())+":"),this.forEachChild(In,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":y5(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new It(t,i));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new It(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new It(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,It.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,It.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===sy?-1:0}withIndex(t){if(t===da||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===da||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(In),s=i.getIterator(In);let o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===da?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const sy=new class ege extends st{constructor(){super(new cs(YM),st.EMPTY_NODE,ol.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return st.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(It,{MIN:{value:new It(_c,st.EMPTY_NODE)},MAX:{value:new It(sl,sy)}}),nW.__EMPTY_NODE=st.EMPTY_NODE,tp.__childrenNodeConstructor=st,function Kme(n){QM=n}(sy),function Yme(n){aW=n}(sy);const tge=!0;function Gn(n,e=null){if(null===n)return st.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,T.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new tp(n,Gn(e));if(n instanceof Array||!tge){let t=st.EMPTY_NODE;return $i(n,(i,r)=>{if((0,T.r3)(n,i)&&"."!==i.substring(0,1)){const s=Gn(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(Gn(e))}{const t=[];let i=!1;if($i(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Gn(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new It(o,l)))}}),0===t.length)return st.EMPTY_NODE;const s=Lw(t,Gme,o=>o.name,YM);if(i){const o=Lw(t,In.getCompare());return new st(s,Gn(e),new ol({".priority":o},{".priority":In}))}return new st(s,Gn(e),ol.Default)}}!function Zme(n){oW=n}(Gn);class JM extends Nw{constructor(e){super(),this.indexPath_=e,(0,T.hu)(!vt(e)&&".priority"!==yt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?Ku(e.name,t.name):s}makePost(e,t){const i=Gn(e),r=st.EMPTY_NODE.updateChild(this.indexPath_,i);return new It(t,r)}maxPost(){const e=st.EMPTY_NODE.updateChild(this.indexPath_,sy);return new It(sl,e)}toString(){return ny(this.indexPath_,0).join("/")}}const eP=new class nge extends Nw{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?Ku(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return It.MIN}maxPost(){return It.MAX}makePost(e,t){const i=Gn(e);return new It(t,i)}toString(){return".value"}};function lW(n){return{type:"value",snapshotNode:n}}function ip(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function oy(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ay(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class tP{constructor(e){this.index_=e}updateChild(e,t,i,r,s,o){(0,T.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(null!=o&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(oy(t,a)):(0,T.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ip(t,i)):o.trackChildChange(ay(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(In,(r,s)=>{t.hasChild(r)||i.trackChildChange(oy(r,s))}),t.isLeafNode()||t.forEachChild(In,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(ay(r,s,o))}else i.trackChildChange(ip(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?st.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ly{constructor(e){this.indexedFilter_=new tP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ly.getStartPost_(e),this.endPost_=ly.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,s,o){return this.matches(new It(t,i))||(i=st.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=st.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(st.EMPTY_NODE);const s=this;return t.forEachChild(In,(o,a)=>{s.matches(new It(o,a))||(r=r.updateImmediateChild(o,st.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class rge{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new ly(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,s,o){return this.rangedFilter_.matches(new It(t,i))||(i=st.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,o):this.fullLimitUpdateChild_(e,t,i,s,o)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=st.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=st.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;r=r.updateImmediateChild(a.name,a.node),o++}}}else{let s;r=t.withIndex(this.index_),r=r.updatePriority(st.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,st.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let o;if(this.reverse_){const f=this.index_.getCompare();o=(g,_)=>f(_,g)}else o=this.index_.getCompare();const a=e;(0,T.hu)(a.numChildren()===this.limit_,"");const l=new It(t,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(t)){const f=a.getImmediateChild(t);let g=r.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=g&&(g.name===t||a.hasChild(g.name));)g=r.getChildAfterChild(this.index_,g,this.reverse_);const _=null==g?1:o(g,l);if(d&&!i.isEmpty()&&_>=0)return s?.trackChildChange(ay(t,i,f)),a.updateImmediateChild(t,i);{s?.trackChildChange(oy(t,f));const I=a.updateImmediateChild(t,st.EMPTY_NODE);return null!=g&&this.rangedFilter_.matches(g)?(s?.trackChildChange(ip(g.name,g.node)),I.updateImmediateChild(g.name,g.node)):I}}return i.isEmpty()?e:d&&o(c,l)>=0?(null!=s&&(s.trackChildChange(oy(c.name,c.node)),s.trackChildChange(ip(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(c.name,st.EMPTY_NODE)):e}}class Vw{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=In}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,T.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,T.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_c}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,T.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,T.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:sl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,T.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===In}copy(){const e=new Vw;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function nP(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function iP(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function Bw(n,e){const t=n.copy();return t.index_=e,t}function cW(n){const e={};if(n.isDefault())return e;let t;if(n.index_===In?t="$priority":n.index_===eP?t="$value":n.index_===da?t="$key":((0,T.hu)(n.index_ instanceof JM,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,T.Wl)(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=(0,T.Wl)(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+(0,T.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=(0,T.Wl)(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+(0,T.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function uW(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==In&&(e.i=n.index_.toString()),e}class Uw extends K5{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=X_("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,T.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Uw.getListenId_(e,i),a={};this.listens_[o]=a;const l=cW(e._queryParams);this.restRequest_(s+".json",l,(c,d)=>{let f=d;if(404===c&&(f=null,c=null),null===c&&this.onDataUpdate_(s,f,!1,i),(0,T.DV)(this.listens_,o)===a){let g;g=c?401===c?"permission_denied":"rest_error:"+c:"ok",r(g,null)}})}unlisten(e,t){const i=Uw.getListenId_(e,t);delete this.listens_[i]}get(e){const t=cW(e._queryParams),i=e._path.toString(),r=new T.BH;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,T.xO)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,T.cI)(a.responseText)}catch{br("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else 401!==a.status&&404!==a.status&&br("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}class uge{constructor(){this.rootNode_=st.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function jw(){return{value:null,children:new Map}}function rp(n,e,t){if(vt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=yt(e);n.children.has(i)||n.children.set(i,jw()),rp(n.children.get(i),e=un(e),t)}}function rP(n,e){if(vt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(In,(i,r)=>{rp(n,new Xt(i),r)}),rP(n,e)}}if(n.children.size>0){const t=yt(e);return e=un(e),n.children.has(t)&&rP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function sP(n,e,t){null!==n.value?t(e,n.value):function dge(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{sP(r,new Xt(e.toString()+"/"+i),t)})}class hge{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&$i(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class mge{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new hge(e);const i=1e4+2e4*Math.random();ey(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;$i(e,(r,s)=>{s>0&&(0,T.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),ey(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ha=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(ha||{});function lP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class zw{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=ha.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(vt(this.path)){if(null!=this.affectedTree.value)return(0,T.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Xt(e));return new zw(Wt(),t,this.revert)}}return(0,T.hu)(yt(this.path)===e,"operationForChild called for unrelated child."),new zw(un(this.path),this.affectedTree,this.revert)}}class cy{constructor(e,t){this.source=e,this.path=t,this.type=ha.LISTEN_COMPLETE}operationForChild(e){return vt(this.path)?new cy(this.source,Wt()):new cy(this.source,un(this.path))}}class Qu{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=ha.OVERWRITE}operationForChild(e){return vt(this.path)?new Qu(this.source,Wt(),this.snap.getImmediateChild(e)):new Qu(this.source,un(this.path),this.snap)}}class sp{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=ha.MERGE}operationForChild(e){if(vt(this.path)){const t=this.children.subtree(new Xt(e));return t.isEmpty()?null:t.value?new Qu(this.source,Wt(),t.value):new sp(this.source,Wt(),t)}return(0,T.hu)(yt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new sp(this.source,un(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class bc{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(vt(e))return this.isFullyInitialized()&&!this.filtered_;const t=yt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class gge{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function uy(n,e,t,i,r,s){const o=i.filter(a=>a.type===t);o.sort((a,l)=>function vge(n,e,t){if(null==e.childName||null==t.childName)throw(0,T.g5)("Should only compare child_ events.");const i=new It(e.childName,e.snapshotNode),r=new It(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,a,l)),o.forEach(a=>{const l=function yge(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function Hw(n,e){return{eventCache:n,serverCache:e}}function dy(n,e,t,i){return Hw(new bc(e,t,i),n.serverCache)}function hW(n,e,t,i){return Hw(n.eventCache,new bc(e,t,i))}function $w(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Xu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let cP;class Cn{constructor(e,t=(()=>(cP||(cP=new cs(ime)),cP))()){this.value=e,this.children=t}static fromObject(e){let t=new Cn(null);return $i(e,(i,r)=>{t=t.set(new Xt(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Wt(),value:this.value};if(vt(e))return null;{const i=yt(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(un(e),t);return null!=s?{path:zn(new Xt(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(vt(e))return this;{const t=yt(e),i=this.children.get(t);return null!==i?i.subtree(un(e)):new Cn(null)}}set(e,t){if(vt(e))return new Cn(t,this.children);{const i=yt(e),s=(this.children.get(i)||new Cn(null)).set(un(e),t),o=this.children.insert(i,s);return new Cn(this.value,o)}}remove(e){if(vt(e))return this.children.isEmpty()?new Cn(null):new Cn(null,this.children);{const t=yt(e),i=this.children.get(t);if(i){const r=i.remove(un(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new Cn(null):new Cn(this.value,s)}return this}}get(e){if(vt(e))return this.value;{const t=yt(e),i=this.children.get(t);return i?i.get(un(e)):null}}setTree(e,t){if(vt(e))return t;{const i=yt(e),s=(this.children.get(i)||new Cn(null)).setTree(un(e),t);let o;return o=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Cn(this.value,o)}}fold(e){return this.fold_(Wt(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(zn(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Wt(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(vt(e))return null;{const s=yt(e),o=this.children.get(s);return o?o.findOnPath_(un(e),zn(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Wt(),t)}foreachOnPath_(e,t,i){if(vt(e))return this;{this.value&&i(t,this.value);const r=yt(e),s=this.children.get(r);return s?s.foreachOnPath_(un(e),zn(t,r),i):new Cn(null)}}foreach(e){this.foreach_(Wt(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(zn(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class So{constructor(e){this.writeTree_=e}static empty(){return new So(new Cn(null))}}function hy(n,e,t){if(vt(e))return new So(new Cn(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const o=Kr(r,e);return s=s.updateChild(o,t),new So(n.writeTree_.set(r,s))}{const r=new Cn(t),s=n.writeTree_.setTree(e,r);return new So(s)}}}function uP(n,e,t){let i=n;return $i(t,(r,s)=>{i=hy(i,zn(e,r),s)}),i}function fW(n,e){if(vt(e))return So.empty();{const t=n.writeTree_.setTree(e,new Cn(null));return new So(t)}}function dP(n,e){return null!=Ju(n,e)}function Ju(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Kr(t.path,e)):null}function pW(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(In,(i,r)=>{e.push(new It(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new It(i,r.value))}),e}function Ec(n,e){if(vt(e))return n;{const t=Ju(n,e);return new So(null!=t?new Cn(t):n.writeTree_.subtree(e))}}function hP(n){return n.writeTree_.isEmpty()}function op(n,e){return mW(Wt(),n.writeTree_,e)}function mW(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,T.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=mW(zn(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(zn(n,".priority"),i)),t}}function Ww(n,e){return bW(e,n)}function Tge(n,e){if(n.snap)return to(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&to(zn(n.path,t),e))return!0;return!1}function Sge(n){return n.visible}function gW(n,e,t){let i=So.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const o=s.path;let a;if(s.snap)to(t,o)?(a=Kr(t,o),i=hy(i,a,s.snap)):to(o,t)&&(a=Kr(o,t),i=hy(i,Wt(),s.snap.getChild(a)));else{if(!s.children)throw(0,T.g5)("WriteRecord should have .snap or .children");if(to(t,o))a=Kr(t,o),i=uP(i,a,s.children);else if(to(o,t))if(a=Kr(o,t),vt(a))i=uP(i,Wt(),s.children);else{const l=(0,T.DV)(s.children,yt(a));if(l){const c=l.getChild(un(a));i=hy(i,Wt(),c)}}}}}return i}function _W(n,e,t,i,r){if(i||r){const s=Ec(n.visibleWrites,e);return!r&&hP(s)?t:r||null!=t||dP(s,Wt())?op(gW(n.allWrites,function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(to(c.path,e)||to(e,c.path))},e),t||st.EMPTY_NODE):null}{const s=Ju(n.visibleWrites,e);if(null!=s)return s;{const o=Ec(n.visibleWrites,e);return hP(o)?t:null!=t||dP(o,Wt())?op(o,t||st.EMPTY_NODE):null}}}function qw(n,e,t,i){return _W(n.writeTree,n.treePath,e,t,i)}function fP(n,e){return function Dge(n,e,t){let i=st.EMPTY_NODE;const r=Ju(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(In,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){const s=Ec(n.visibleWrites,e);return t.forEachChild(In,(o,a)=>{const l=op(Ec(s,new Xt(o)),a);i=i.updateImmediateChild(o,l)}),pW(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}return pW(Ec(n.visibleWrites,e)).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}(n.writeTree,n.treePath,e)}function yW(n,e,t,i){return function Age(n,e,t,i,r){(0,T.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=zn(e,t);if(dP(n.visibleWrites,s))return null;{const o=Ec(n.visibleWrites,s);return hP(o)?r.getChild(t):op(o,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function Gw(n,e){return function Mge(n,e){return Ju(n.visibleWrites,e)}(n.writeTree,zn(n.treePath,e))}function pP(n,e,t){return function Rge(n,e,t,i){const r=zn(e,t),s=Ju(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?op(Ec(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function vW(n,e){return bW(zn(n.treePath,e),n.writeTree)}function bW(n,e){return{treePath:n,writeTree:e}}class Oge{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,T.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,T.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,ay(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,oy(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,ip(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,T.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,ay(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const EW=new class Fge{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class mP{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new bc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pP(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Xu(this.viewCache_),s=function Nge(n,e,t,i,r,s){return function Pge(n,e,t,i,r,s,o){let a;const l=Ec(n.visibleWrites,e),c=Ju(l,Wt());if(null!=c)a=c;else{if(null==t)return[];a=op(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const d=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let _=g.getNext();for(;_&&d.length<r;)0!==f(_,i)&&d.push(_),_=g.getNext();return d}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function wW(n,e,t,i,r,s){const o=e.eventCache;if(null!=Gw(i,t))return e;{let a,l;if(vt(t))if((0,T.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Xu(e),f=fP(i,c instanceof st?c:st.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{const c=qw(i,Xu(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=yt(t);if(".priority"===c){(0,T.hu)(1===vc(t),"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const f=yW(i,t,d,l);a=null!=f?n.filter.updatePriority(d,f):o.getNode()}else{const d=un(t);let f;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const g=yW(i,t,o.getNode(),l);f=null!=g?o.getNode().getImmediateChild(c).updateChild(d,g):o.getNode().getImmediateChild(c)}else f=pP(i,c,e.serverCache);a=null!=f?n.filter.updateChild(o.getNode(),c,f,d,r,s):o.getNode()}}return dy(e,a,o.isFullyInitialized()||vt(t),n.filter.filtersNodes())}}function Kw(n,e,t,i,r,s,o,a){const l=e.serverCache;let c;const d=o?n.filter:n.filter.getIndexedFilter();if(vt(t))c=d.updateFullNode(l.getNode(),i,null);else if(d.filtersNodes()&&!l.isFiltered()){const _=l.getNode().updateChild(t,i);c=d.updateFullNode(l.getNode(),_,null)}else{const _=yt(t);if(!l.isCompleteForPath(t)&&vc(t)>1)return e;const v=un(t),S=l.getNode().getImmediateChild(_).updateChild(v,i);c=".priority"===_?d.updatePriority(l.getNode(),S):d.updateChild(l.getNode(),_,S,v,EW,null)}const f=hW(e,c,l.isFullyInitialized()||vt(t),d.filtersNodes());return wW(n,f,t,r,new mP(r,f,s),a)}function gP(n,e,t,i,r,s,o){const a=e.eventCache;let l,c;const d=new mP(r,e,s);if(vt(t))c=n.filter.updateFullNode(e.eventCache.getNode(),i,o),l=dy(e,c,!0,n.filter.filtersNodes());else{const f=yt(t);if(".priority"===f)c=n.filter.updatePriority(e.eventCache.getNode(),i),l=dy(e,c,a.isFullyInitialized(),a.isFiltered());else{const g=un(t),_=a.getNode().getImmediateChild(f);let v;if(vt(g))v=i;else{const I=d.getCompleteChild(f);v=null!=I?".priority"===GM(g)&&I.getChild(X5(g)).isEmpty()?I:I.updateChild(g,i):st.EMPTY_NODE}l=_.equals(v)?e:dy(e,n.filter.updateChild(a.getNode(),f,v,g,d,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function IW(n,e){return n.eventCache.isCompleteForChild(e)}function CW(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function _P(n,e,t,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=vt(t)?i:new Cn(null).setTree(t,i);const d=e.serverCache.getNode();return c.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){const v=CW(0,e.serverCache.getNode().getImmediateChild(f),g);l=Kw(n,l,new Xt(f),v,r,s,o,a)}}),c.children.inorderTraversal((f,g)=>{const _=!e.serverCache.isCompleteForChild(f)&&null===g.value;if(!d.hasChild(f)&&!_){const I=CW(0,e.serverCache.getNode().getImmediateChild(f),g);l=Kw(n,l,new Xt(f),I,r,s,o,a)}}),l}class Wge{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new tP(i.getIndex()),s=function sge(n){return n.loadsAllData()?new tP(n.getIndex()):n.hasLimit()?new rge(n):new ly(n)}(i);this.processor_=function Lge(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(st.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(st.EMPTY_NODE,a.getNode(),null),d=new bc(l,o.isFullyInitialized(),r.filtersNodes()),f=new bc(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Hw(f,d),this.eventGenerator_=new gge(this.query_)}get query(){return this.query_}}function Kge(n,e){const t=Xu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!vt(e)&&!t.getImmediateChild(yt(e)).isEmpty())?t.getChild(e):null}function TW(n){return 0===n.eventRegistrations_.length}function xW(n,e,t){const i=[];if(t){(0,T.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(o)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function SW(n,e,t,i){e.type===ha.MERGE&&null!==e.source.queryId&&((0,T.hu)(Xu(n.viewCache_),"We should always have a full cache before handling merges"),(0,T.hu)($w(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function Bge(n,e,t,i,r){const s=new Oge;let o,a;if(t.type===ha.OVERWRITE){const c=t;c.source.fromUser?o=gP(n,e,c.path,c.snap,i,r,s):((0,T.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!vt(c.path),o=Kw(n,e,c.path,c.snap,i,r,a,s))}else if(t.type===ha.MERGE){const c=t;c.source.fromUser?o=function jge(n,e,t,i,r,s,o){let a=e;return i.foreach((l,c)=>{const d=zn(t,l);IW(e,yt(d))&&(a=gP(n,a,d,c,r,s,o))}),i.foreach((l,c)=>{const d=zn(t,l);IW(e,yt(d))||(a=gP(n,a,d,c,r,s,o))}),a}(n,e,c.path,c.children,i,r,s):((0,T.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=_P(n,e,c.path,c.children,i,r,a,s))}else if(t.type===ha.ACK_USER_WRITE){const c=t;o=c.revert?function $ge(n,e,t,i,r,s){let o;if(null!=Gw(i,t))return e;{const a=new mP(i,e,r),l=e.eventCache.getNode();let c;if(vt(t)||".priority"===yt(t)){let d;if(e.serverCache.isFullyInitialized())d=qw(i,Xu(e));else{const f=e.serverCache.getNode();(0,T.hu)(f instanceof st,"serverChildren would be complete if leaf node"),d=fP(i,f)}c=n.filter.updateFullNode(l,d,s)}else{const d=yt(t);let f=pP(i,d,e.serverCache);null==f&&e.serverCache.isCompleteForChild(d)&&(f=l.getImmediateChild(d)),c=null!=f?n.filter.updateChild(l,d,f,un(t),a,s):e.eventCache.getNode().hasChild(d)?n.filter.updateChild(l,d,st.EMPTY_NODE,un(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=qw(i,Xu(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Gw(i,Wt()),dy(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,i,r,s):function zge(n,e,t,i,r,s,o){if(null!=Gw(r,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=i.value){if(vt(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Kw(n,e,t,l.getNode().getChild(t),r,s,a,o);if(vt(t)){let c=new Cn(null);return l.getNode().forEachChild(da,(d,f)=>{c=c.set(new Xt(d),f)}),_P(n,e,t,c,r,s,a,o)}return e}{let c=new Cn(null);return i.foreach((d,f)=>{const g=zn(t,d);l.isCompleteForPath(g)&&(c=c.set(d,l.getNode().getChild(g)))}),_P(n,e,t,c,r,s,a,o)}}(n,e,c.path,c.affectedTree,i,r,s)}else{if(t.type!==ha.LISTEN_COMPLETE)throw(0,T.g5)("Unknown operation type: "+t.type);o=function Hge(n,e,t,i,r){const s=e.serverCache;return wW(n,hW(e,s.getNode(),s.isFullyInitialized()||vt(t),s.isFiltered()),t,i,EW,r)}(n,e,t.path,i,s)}const l=s.getChanges();return function Uge(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=$w(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(lW($w(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,r,e,t,i);return function Vge(n,e){(0,T.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,T.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,T.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,DW(n,s.changes,s.viewCache.eventCache.getNode(),null)}function DW(n,e,t,i){return function _ge(n,e,t,i){const r=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function ige(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),uy(n,r,"child_removed",e,i,t),uy(n,r,"child_added",e,i,t),uy(n,r,"child_moved",s,i,t),uy(n,r,"child_changed",e,i,t),uy(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let Zw,Qw;class AW{constructor(){this.views=new Map}}function yP(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,T.hu)(null!=s,"SyncTree gave us an op for an invalid query."),SW(s,e,t,i)}{let s=[];for(const o of n.views.values())s=s.concat(SW(o,e,t,i));return s}}function RW(n,e,t,i,r){const o=n.views.get(e._queryIdentifier);if(!o){let a=qw(t,r?i:null),l=!1;a?l=!0:i instanceof st?(a=fP(t,i),l=!1):(a=st.EMPTY_NODE,l=!1);const c=Hw(new bc(a,l,!1),new bc(i,r,!1));return new Wge(e,c)}return o}function MW(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function wc(n,e){let t=null;for(const i of n.views.values())t=t||Kge(i,e);return t}function PW(n,e){return e._queryParams.loadsAllData()?Yw(n):n.views.get(e._queryIdentifier)}function kW(n,e){return null!=PW(n,e)}function Ic(n){return null!=Yw(n)}function Yw(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let r_e=1;class NW{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Cn(null),this.pendingWriteTree_=function kge(){return{visibleWrites:So.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function vP(n,e,t,i,r){return function Ege(n,e,t,i,r){(0,T.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=hy(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?ap(n,new Qu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Cc(n,e,t=!1){const i=function Ige(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function Cge(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,T.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&Tge(a,i.path)?r=!1:to(i.path,a.path)&&(s=!0)),o--}return!!r&&(s?(function xge(n){n.visibleWrites=gW(n.allWrites,Sge,Wt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=fW(n.visibleWrites,i.path):$i(i.children,l=>{n.visibleWrites=fW(n.visibleWrites,zn(i.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new Cn(null);return null!=i.snap?s=s.set(Wt(),!0):$i(i.children,o=>{s=s.set(new Xt(o),!0)}),ap(n,new zw(i.path,s,t))}return[]}function fy(n,e,t){return ap(n,new Qu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Xw(n,e,t,i,r=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||kW(o,e))){const l=function t_e(n,e,t,i){const r=e._queryIdentifier,s=[];let o=[];const a=Ic(n);if("default"===r)for(const[l,c]of n.views.entries())o=o.concat(xW(c,t,i)),TW(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(r);l&&(o=o.concat(xW(l,t,i)),TW(l)&&(n.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Ic(n)&&s.push(new(function Xge(){return(0,T.hu)(Zw,"Reference.ts has not been loaded"),Zw}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,i);(function Jge(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!r){const d=-1!==c.findIndex(g=>g._queryParams.loadsAllData()),f=n.syncPointTree_.findOnPath(s,(g,_)=>Ic(_));if(d&&!f){const g=n.syncPointTree_.subtree(s);if(!g.isEmpty()){const _=function d_e(n){return n.fold((e,t,i)=>{if(t&&Ic(t))return[Yw(t)];{let r=[];return t&&(r=MW(t)),$i(i,(s,o)=>{r=r.concat(o)}),r}})}(g);for(let v=0;v<_.length;++v){const I=_[v],S=I.query,F=VW(n,I);n.listenProvider_.startListening(my(S),py(n,S),F.hashFn,F.onComplete)}}}!f&&c.length>0&&!i&&(d?n.listenProvider_.stopListening(my(e),null):c.forEach(g=>{const _=n.queryToTagMap.get(eI(g));n.listenProvider_.stopListening(my(g),_)}))}!function h_e(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=eI(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function OW(n,e,t,i){const r=EP(n,i);if(null!=r){const s=wP(r),o=s.path,a=s.queryId,l=Kr(o,e);return IP(n,o,new Qu(lP(a),l,t))}return[]}function bP(n,e,t,i=!1){const r=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(g,_)=>{const v=Kr(g,r);s=s||wc(_,v),o=o||Ic(_)});let l,a=n.syncPointTree_.get(r);a?(o=o||Ic(a),s=s||wc(a,Wt())):(a=new AW,n.syncPointTree_=n.syncPointTree_.set(r,a)),null!=s?l=!0:(l=!1,s=st.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((_,v)=>{const I=wc(v,Wt());I&&(s=s.updateImmediateChild(_,I))}));const c=kW(a,e);if(!c&&!e._queryParams.loadsAllData()){const g=eI(e);(0,T.hu)(!n.queryToTagMap.has(g),"View does not exist, but we have a tag");const _=function f_e(){return r_e++}();n.queryToTagMap.set(g,_),n.tagToQueryMap.set(_,g)}let f=function e_e(n,e,t,i,r,s){const o=RW(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function Zge(n,e){n.eventRegistrations_.push(e)}(o,t),function Yge(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(In,(s,o)=>{i.push(ip(s,o))}),t.isFullyInitialized()&&i.push(lW(t.getNode())),DW(n,i,t.getNode(),e)}(o,t)}(a,e,t,Ww(n.pendingWriteTree_,r),s,l);if(!c&&!o&&!i){const g=PW(a,e);f=f.concat(function p_e(n,e,t){const i=e._path,r=py(n,e),s=VW(n,t),o=n.listenProvider_.startListening(my(e),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)(0,T.hu)(!Ic(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,d,f)=>{if(!vt(c)&&d&&Ic(d))return[Yw(d).query];{let g=[];return d&&(g=g.concat(MW(d).map(_=>_.query))),$i(f,(_,v)=>{g=g.concat(v)}),g}});for(let c=0;c<l.length;++c){const d=l[c];n.listenProvider_.stopListening(my(d),py(n,d))}}return o}(n,e,g))}return f}function Jw(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=wc(a,Kr(o,e));if(c)return c});return _W(r,e,s,t,!0)}function ap(n,e){return FW(e,n.syncPointTree_,null,Ww(n.pendingWriteTree_,Wt()))}function FW(n,e,t,i){if(vt(n.path))return LW(n,e,t,i);{const r=e.get(Wt());null==t&&null!=r&&(t=wc(r,Wt()));let s=[];const o=yt(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,d=vW(i,o);s=s.concat(FW(a,l,c,d))}return r&&(s=s.concat(yP(r,n,i,t))),s}}function LW(n,e,t,i){const r=e.get(Wt());null==t&&null!=r&&(t=wc(r,Wt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=vW(i,o),d=n.operationForChild(o);d&&(s=s.concat(LW(d,a,l,c)))}),r&&(s=s.concat(yP(r,n,i,t))),s}function VW(n,e){const t=e.query,i=py(n,t);return{hashFn:()=>(function qge(n){return n.viewCache_.serverCache.getNode()}(e)||st.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function l_e(n,e,t){const i=EP(n,t);if(i){const r=wP(i),s=r.path,o=r.queryId,a=Kr(s,e);return IP(n,s,new cy(lP(o),a))}return[]}(n,t._path,i):function a_e(n,e){return ap(n,new cy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function ome(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return Xw(n,t,null,s)}}}}function py(n,e){const t=eI(e);return n.queryToTagMap.get(t)}function eI(n){return n._path.toString()+"$"+n._queryIdentifier}function EP(n,e){return n.tagToQueryMap.get(e)}function wP(n){const e=n.indexOf("$");return(0,T.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Xt(n.substr(0,e))}}function IP(n,e,t){const i=n.syncPointTree_.get(e);return(0,T.hu)(i,"Missing sync point for query tag that we're tracking"),yP(i,t,Ww(n.pendingWriteTree_,e),null)}function my(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function i_e(){return(0,T.hu)(Qw,"Reference.ts has not been loaded"),Qw}())(n._repo,n._path):n}class CP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new CP(t)}node(){return this.node_}}class TP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=zn(this.path_,e);return new TP(this.syncTree_,t)}node(){return Jw(this.syncTree_,this.path_)}}const m_e=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},BW=function(n,e,t){return n&&"object"==typeof n?((0,T.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?g_e(n[".sv"],e,t):"object"==typeof n[".sv"]?__e(n[".sv"],e):void(0,T.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},g_e=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,T.hu)(!1,"Unexpected server value: "+n)},__e=function(n,e,t){n.hasOwnProperty("increment")||(0,T.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,T.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,T.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return"number"!=typeof o?i:o+i},UW=function(n,e,t,i){return SP(e,new TP(t,n),i)},xP=function(n,e,t){return SP(n,new CP(e),t)};function SP(n,e,t){const i=n.getPriority().val(),r=BW(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=BW(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new tp(a,Gn(r)):n}{const o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new tp(r))),o.forEachChild(In,(a,l)=>{const c=SP(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class DP{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function tI(n,e){let t=e instanceof Xt?e:new Xt(e),i=n,r=yt(t);for(;null!==r;){const s=(0,T.DV)(i.node.children,r)||{children:{},childCount:0};i=new DP(r,i,s),t=un(t),r=yt(t)}return i}function ed(n){return n.node.value}function AP(n,e){n.node.value=e,RP(n)}function jW(n){return n.node.childCount>0}function nI(n,e){$i(n.node.children,(t,i)=>{e(new DP(t,n,i))})}function zW(n,e,t,i){t&&!i&&e(n),nI(n,r=>{zW(r,e,!0,i)}),t&&i&&e(n)}function gy(n){return new Xt(null===n.parent?n.name:gy(n.parent)+"/"+n.name)}function RP(n){null!==n.parent&&function b_e(n,e,t){const i=function y_e(n){return void 0===ed(n)&&!jW(n)}(t),r=(0,T.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,RP(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,RP(n))}(n.parent,n.name,n)}const E_e=/[\[\].#$\/\u0000-\u001F\u007F]/,w_e=/[\[\].#$\u0000-\u001F\u007F]/,MP=10485760,iI=function(n){return"string"==typeof n&&0!==n.length&&!E_e.test(n)},HW=function(n){return"string"==typeof n&&0!==n.length&&!w_e.test(n)},_y=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Rw(n)||n&&"object"==typeof n&&(0,T.r3)(n,".sv")},fa=function(n,e,t,i){i&&void 0===e||yy((0,T.gK)(n,"value"),e,t)},yy=function(n,e,t){const i=t instanceof Xt?new Bme(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Zu(i));if("function"==typeof e)throw new Error(n+"contains a function "+Zu(i)+" with contents = "+e.toString());if(Rw(e))throw new Error(n+"contains "+e.toString()+" "+Zu(i));if("string"==typeof e&&e.length>MP/3&&(0,T.ug)(e)>MP)throw new Error(n+"contains a string greater than "+MP+" utf8 bytes "+Zu(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if($i(e,(o,a)=>{if(".value"===o)r=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!iI(o)))throw new Error(n+" contains an invalid key ("+o+") "+Zu(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ume(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,T.ug)(e),J5(n)})(i,o),yy(n,a,i),function jme(n){const e=n.parts_.pop();n.byteLength_-=(0,T.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Zu(i)+" in addition to actual children.")}},$W=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,T.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];$i(e,(o,a)=>{const l=new Xt(o);if(yy(r,a,zn(t,l)),".priority"===GM(l)&&!_y(a))throw new Error(r+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=ny(i);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!iI(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Vme);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&to(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},PP=function(n,e,t){if(!t||void 0!==e){if(Rw(e))throw new Error((0,T.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!_y(e))throw new Error((0,T.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},vy=function(n,e,t,i){if(!(i&&void 0===t||iI(t)))throw new Error((0,T.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},by=function(n,e,t,i){if(!(i&&void 0===t||HW(t)))throw new Error((0,T.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},T_e=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),by(n,e,t,i)},no=function(n,e){if(".info"===yt(e))throw new Error(n+" failed = Can't modify data under /.info/")},WW=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!iI(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),HW(n)}(t))throw new Error((0,T.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class x_e{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function rI(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!KM(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function qW(n,e,t){rI(n,t),GW(n,i=>KM(i,e))}function Ds(n,e,t){rI(n,t),GW(n,i=>to(i,e)||to(e,i))}function GW(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(S_e(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function S_e(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();Gu&&Hi("event: "+t.toString()),Jf(i)}}}const KW="repo_interrupt",D_e=25;class A_e{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new x_e,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=jw(),this.transactionQueueTree_=new DP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ZW(n){const t=n.infoData_.getNode(new Xt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ey(n){return m_e({timestamp:ZW(n)})}function YW(n,e,t,i,r){n.dataUpdateCount++;const s=new Xt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){const l=(0,T.UI)(t,c=>Gn(c));o=function c_e(n,e,t,i){const r=EP(n,i);if(r){const s=wP(r),o=s.path,a=s.queryId,l=Kr(o,e),c=Cn.fromObject(t);return IP(n,o,new sp(lP(a),l,c))}return[]}(n.serverSyncTree_,s,l,r)}else{const l=Gn(t);o=OW(n.serverSyncTree_,s,l,r)}else if(i){const l=(0,T.UI)(t,c=>Gn(c));o=function o_e(n,e,t){const i=Cn.fromObject(t);return ap(n,new sp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,l)}else{const l=Gn(t);o=fy(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=cp(n,s)),Ds(n.eventQueue_,a,o)}function QW(n,e){kP(n,"connected",e),!1===e&&function N_e(n){lp(n,"onDisconnectEvents");const e=Ey(n),t=jw();sP(n.onDisconnect_,Wt(),(r,s)=>{const o=UW(r,s,n.serverSyncTree_,e);rp(t,r,o)});let i=[];sP(t,Wt(),(r,s)=>{i=i.concat(fy(n.serverSyncTree_,r,s));const o=LP(n,r);cp(n,o)}),n.onDisconnect_=jw(),Ds(n.eventQueue_,Wt(),i)}(n)}function kP(n,e,t){const i=new Xt("/.info/"+e),r=Gn(t);n.infoData_.updateSnapshot(i,r);const s=fy(n.infoSyncTree_,i,r);Ds(n.eventQueue_,i,s)}function sI(n){return n.nextWriteId_++}function NP(n,e,t,i,r){lp(n,"set",{path:e.toString(),value:t,priority:i});const s=Ey(n),o=Gn(t,i),a=Jw(n.serverSyncTree_,e),l=xP(o,a,s),c=sI(n),d=vP(n.serverSyncTree_,e,l,c,!0);rI(n.eventQueue_,d),n.server_.put(e.toString(),o.val(!0),(g,_)=>{const v="ok"===g;v||br("set at "+e+" failed: "+g);const I=Cc(n.serverSyncTree_,c,!v);Ds(n.eventQueue_,e,I),Tc(0,r,g,_)});const f=LP(n,e);cp(n,f),Ds(n.eventQueue_,f,[])}function O_e(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&rP(n.onDisconnect_,e),Tc(0,t,i,r)})}function XW(n,e,t,i){const r=Gn(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,o)=>{"ok"===s&&rp(n.onDisconnect_,e,r),Tc(0,i,s,o)})}function OP(n,e,t){let i;i=".info"===yt(e._path)?Xw(n.infoSyncTree_,e,t):Xw(n.serverSyncTree_,e,t),qW(n.eventQueue_,e._path,i)}function JW(n){n.persistentConnection_&&n.persistentConnection_.interrupt(KW)}function lp(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Hi(t,...e)}function Tc(n,e,t,i){e&&Jf(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,e(o)}})}function FP(n,e,t){return Jw(n.serverSyncTree_,e,t)||st.EMPTY_NODE}function oI(n,e=n.transactionQueueTree_){if(e||aI(n,e),ed(e)){const t=tq(n,e);(0,T.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function j_e(n,e,t){const i=t.map(c=>c.currentWriteId),r=FP(n,e,i);let s=r;const o=r.hash();for(let c=0;c<t.length;c++){const d=t[c];(0,T.hu)(0===d.status,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const f=Kr(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{lp(n,"transaction put response",{path:l.toString(),status:c});let d=[];if("ok"===c){const f=[];for(let g=0;g<t.length;g++)t[g].status=2,d=d.concat(Cc(n.serverSyncTree_,t[g].currentWriteId)),t[g].onComplete&&f.push(()=>t[g].onComplete(null,!0,t[g].currentOutputSnapshotResolved)),t[g].unwatcher();aI(n,tI(n.transactionQueueTree_,e)),oI(n,n.transactionQueueTree_),Ds(n.eventQueue_,e,d);for(let g=0;g<f.length;g++)Jf(f[g])}else{if("datastale"===c)for(let f=0;f<t.length;f++)t[f].status=3===t[f].status?4:0;else{br("transaction at "+l.toString()+" failed: "+c);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=c}cp(n,e)}},o)}(n,gy(e),t)}else jW(e)&&nI(e,t=>{oI(n,t)})}function cp(n,e){const t=eq(n,e),i=gy(t);return function z_e(n,e,t){if(0===e.length)return;const i=[];let r=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Kr(t,l.path);let f,d=!1;if((0,T.hu)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)d=!0,f=l.abortReason,r=r.concat(Cc(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=D_e)d=!0,f="maxretry",r=r.concat(Cc(n.serverSyncTree_,l.currentWriteId,!0));else{const g=FP(n,l.path,o);l.currentInputSnapshot=g;const _=e[a].update(g.val());if(void 0!==_){yy("transaction failed: Data returned ",_,l.path);let v=Gn(_);"object"==typeof _&&null!=_&&(0,T.r3)(_,".priority")||(v=v.updatePriority(g.getPriority()));const S=l.currentWriteId,F=Ey(n),M=xP(v,g,F);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=M,l.currentWriteId=sI(n),o.splice(o.indexOf(S),1),r=r.concat(vP(n.serverSyncTree_,l.path,M,l.currentWriteId,l.applyLocally)),r=r.concat(Cc(n.serverSyncTree_,S,!0))}else d=!0,f="nodata",r=r.concat(Cc(n.serverSyncTree_,l.currentWriteId,!0))}Ds(n.eventQueue_,t,r),r=[],d&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&i.push("nodata"===f?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(f),!1,null)))}aI(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)Jf(i[a]);oI(n,n.transactionQueueTree_)}(n,tq(n,t),i),i}function eq(n,e){let t,i=n.transactionQueueTree_;for(t=yt(e);null!==t&&void 0===ed(i);)i=tI(i,t),t=yt(e=un(e));return i}function tq(n,e){const t=[];return nq(n,e,t),t.sort((i,r)=>i.order-r.order),t}function nq(n,e,t){const i=ed(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);nI(e,r=>{nq(n,r,t)})}function aI(n,e){const t=ed(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,AP(e,t.length>0?t:void 0)}nI(e,i=>{aI(n,i)})}function LP(n,e){const t=gy(eq(n,e)),i=tI(n.transactionQueueTree_,e);return function v_e(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{VP(n,r)}),VP(n,i),zW(i,r=>{VP(n,r)}),t}function VP(n,e){const t=ed(e);if(t){const i=[];let r=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,T.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,T.hu)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(Cc(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?AP(e,void 0):t.length=s+1,Ds(n.eventQueue_,gy(e),r);for(let o=0;o<i.length;o++)Jf(i[o])}}const BP=function(n,e){const t=W_e(n),i=t.namespace;return"firebase.com"===t.domain&&ua(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&ua("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&br("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new jM(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new Xt(t.pathString)}},W_e=function(n){let e="",t="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let d=n.indexOf("/");-1===d&&(d=n.length);let f=n.indexOf("?");-1===f&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(r=function H_e(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(d,f)));const g=function $_e(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):br(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,f)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const _=e.slice(0,c);if("localhost"===_.toLowerCase())t="localhost";else if(_.split(".").length<=2)t=_;else{const v=e.indexOf(".");i=e.substring(0,v).toLowerCase(),t=e.substring(v+1),s=i}"ns"in g&&(s=g.ns)}return{host:e,port:l,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}},iq="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",q_e=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=iq.charAt(t%64),t=Math.floor(t/64);(0,T.hu)(0===t,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=iq.charAt(e[r]);return(0,T.hu)(20===o.length,"nextPushId: Length should be 20."),o}}();class rq{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,T.Wl)(this.snapshot.exportVal())}}class sq{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class UP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,T.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class oq{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new T.BH;return O_e(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){no("OnDisconnect.remove",this._path);const e=new T.BH;return XW(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){no("OnDisconnect.set",this._path),fa("OnDisconnect.set",e,this._path,!1);const t=new T.BH;return XW(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){no("OnDisconnect.setWithPriority",this._path),fa("OnDisconnect.setWithPriority",e,this._path,!1),PP("OnDisconnect.setWithPriority",t,!1);const i=new T.BH;return function F_e(n,e,t,i,r){const s=Gn(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{"ok"===o&&rp(n.onDisconnect_,e,s),Tc(0,r,o,a)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){no("OnDisconnect.update",this._path),$W("OnDisconnect.update",e,this._path,!1);const t=new T.BH;return function L_e(n,e,t,i){if((0,T.xb)(t))return Hi("onDisconnect().update() called with empty data.  Don't do anything."),void Tc(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{"ok"===r&&$i(t,(o,a)=>{const l=Gn(a);rp(n.onDisconnect_,zn(e,o),l)}),Tc(0,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class us{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return vt(this._path)?null:GM(this._path)}get ref(){return new io(this._repo,this._path)}get _queryIdentifier(){const e=uW(this._queryParams),t=BM(e);return"{}"===t?"default":t}get _queryObject(){return uW(this._queryParams)}isEqual(e){if(!((e=(0,T.m9)(e))instanceof us))return!1;const t=this._repo===e._repo,i=KM(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Lme(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function lI(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function xc(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===da){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==_c)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==sl)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===In){if(null!=e&&!_y(e)||null!=t&&!_y(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,T.hu)(n.getIndex()instanceof JM||n.getIndex()===eP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function cI(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class io extends us{constructor(e,t){super(e,t,new Vw,!1)}get parent(){const e=X5(this._path);return null===e?null:new io(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class td{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Xt(e),i=nd(this.ref,e);return new td(this._node.getChild(t),i,In)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new td(r,nd(this.ref,i),In)))}hasChild(e){const t=new Xt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function aq(n,e){return(n=(0,T.m9)(n))._checkNotDeleted("ref"),void 0!==e?nd(n._root,e):n._root}function lq(n,e){(n=(0,T.m9)(n))._checkNotDeleted("refFromURL");const t=BP(e,n._repo.repoInfo_.nodeAdmin);WW("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&ua("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),aq(n,t.path.toString())}function nd(n,e){return null===yt((n=(0,T.m9)(n))._path)?T_e("child","path",e,!1):by("child","path",e,!1),new io(n._repo,zn(n._path,e))}function jP(n,e){n=(0,T.m9)(n),no("set",n._path),fa("set",e,n._path,!1);const t=new T.BH;return NP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Q_e(n,e){$W("update",e,n._path,!1);const t=new T.BH;return function k_e(n,e,t,i){lp(n,"update",{path:e.toString(),value:t});let r=!0;const s=Ey(n),o={};if($i(t,(a,l)=>{r=!1,o[a]=UW(zn(e,a),Gn(l),n.serverSyncTree_,s)}),r)Hi("update() called with empty data.  Don't do anything."),Tc(0,i,"ok",void 0);else{const a=sI(n),l=function s_e(n,e,t,i){!function wge(n,e,t,i){(0,T.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=uP(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=Cn.fromObject(t);return ap(n,new sp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,o,a);rI(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,d)=>{const f="ok"===c;f||br("update at "+e+" failed: "+c);const g=Cc(n.serverSyncTree_,a,!f),_=g.length>0?cp(n,e):e;Ds(n.eventQueue_,_,g),Tc(0,i,c,d)}),$i(t,c=>{const d=LP(n,zn(e,c));cp(n,d)}),Ds(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function X_e(n){n=(0,T.m9)(n);const e=new UP(()=>{}),t=new wy(e);return function P_e(n,e,t){const i=function u_e(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(c,d)=>{const f=Kr(c,t);i=i||wc(d,f)});let r=n.syncPointTree_.get(t);r?i=i||wc(r,Wt()):(r=new AW,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,o=s?new bc(i,!0,!1):null;return function Gge(n){return $w(n.viewCache_)}(RW(r,e,Ww(n.pendingWriteTree_,e._path),s?o.getNode():st.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const s=Gn(r).withIndex(e._queryParams.getIndex());let o;if(bP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=fy(n.serverSyncTree_,e._path,s);else{const a=py(n.serverSyncTree_,e);o=OW(n.serverSyncTree_,e._path,s,a)}return Ds(n.eventQueue_,e._path,o),Xw(n.serverSyncTree_,e,t,null,!0),s},r=>(lp(n,"get for query "+(0,T.Wl)(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new td(i,new io(n._repo,n._path),n._queryParams.getIndex()))}class wy{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new rq("value",this,new td(e.snapshotNode,new io(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new sq(this,e,t):null}matches(e){return e instanceof wy&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class uI{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new sq(this,e,t):null}createEvent(e,t){(0,T.hu)(null!=e.childName,"Child events should have a childName.");const i=nd(new io(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new rq(e.type,this,new td(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof uI&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Iy(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const l=t,c=(d,f)=>{OP(n._repo,n,a),l(d,f)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new UP(t,s||void 0),a="value"===e?new wy(o):new uI(e,o);return function V_e(n,e,t){let i;i=".info"===yt(e._path)?bP(n.infoSyncTree_,e,t):bP(n.serverSyncTree_,e,t),qW(n.eventQueue_,e._path,i)}(n._repo,n,a),()=>OP(n._repo,n,a)}function zP(n,e,t,i){return Iy(n,"value",e,t,i)}function cq(n,e,t,i){return Iy(n,"child_added",e,t,i)}function uq(n,e,t,i){return Iy(n,"child_changed",e,t,i)}function dq(n,e,t,i){return Iy(n,"child_moved",e,t,i)}function hq(n,e,t,i){return Iy(n,"child_removed",e,t,i)}function fq(n,e,t){let i=null;const r=t?new UP(t):null;"value"===e?i=new wy(r):e&&(i=new uI(e,r)),OP(n._repo,n,i)}class Do{}class pq extends Do{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){fa("endAt",this._value,e._path,!0);const t=iP(e._queryParams,this._value,this._key);if(cI(t),xc(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new us(e._repo,e._path,t,e._orderByCalled)}}class eye extends Do{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){fa("endBefore",this._value,e._path,!1);const t=function cge(n,e,t){let i;return i=iP(n,e,n.index_===da||t?t:_c),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(cI(t),xc(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new us(e._repo,e._path,t,e._orderByCalled)}}class mq extends Do{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){fa("startAt",this._value,e._path,!0);const t=nP(e._queryParams,this._value,this._key);if(cI(t),xc(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new us(e._repo,e._path,t,e._orderByCalled)}}class iye extends Do{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){fa("startAfter",this._value,e._path,!1);const t=function lge(n,e,t){let i;return i=nP(n,e,n.index_===da||t?t:sl),i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(cI(t),xc(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new us(e._repo,e._path,t,e._orderByCalled)}}class sye extends Do{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new us(e._repo,e._path,function oge(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class aye extends Do{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new us(e._repo,e._path,function age(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class cye extends Do{constructor(e){super(),this._path=e}_apply(e){lI(e,"orderByChild");const t=new Xt(this._path);if(vt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new JM(t),r=Bw(e._queryParams,i);return xc(r),new us(e._repo,e._path,r,!0)}}class dye extends Do{_apply(e){lI(e,"orderByKey");const t=Bw(e._queryParams,da);return xc(t),new us(e._repo,e._path,t,!0)}}class fye extends Do{_apply(e){lI(e,"orderByPriority");const t=Bw(e._queryParams,In);return xc(t),new us(e._repo,e._path,t,!0)}}class mye extends Do{_apply(e){lI(e,"orderByValue");const t=Bw(e._queryParams,eP);return xc(t),new us(e._repo,e._path,t,!0)}}class _ye extends Do{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(fa("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new pq(this._value,this._key)._apply(new mq(this._value,this._key)._apply(e))}}function Ao(n,...e){let t=(0,T.m9)(n);for(const i of e)t=i._apply(t);return t}(function Qge(n){(0,T.hu)(!Zw,"__referenceConstructor has already been defined"),Zw=n})(io),function n_e(n){(0,T.hu)(!Qw,"__referenceConstructor has already been defined"),Qw=n}(io);const HP={};function $P(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||ua("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=BP(s,r),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=BP(s,r),a=o.repoInfo):l=!o.repoInfo.secure;const d=r&&l?new ty(ty.OWNER):new hme(n.name,n.options,e);WW("Invalid Firebase Database URL",o),vt(o.path)||ua("Database URL must point to the root of a Firebase Database (not including a child path).");const f=function wye(n,e,t,i){let r=HP[e.name];r||(r={},HP[e.name]=r);let s=r[n.toURLString()];return s&&ua("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new A_e(n,false,t,i),r[n.toURLString()]=s,s}(a,n,d,new dme(n.name,t));return new Cye(f,n)}class Cye{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function R_e(n,e,t){if(n.stats_=$M(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Uw(n.repoInfo_,(i,r,s,o)=>{YW(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>QW(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,T.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Yu(n.repoInfo_,e,(i,r,s,o)=>{YW(n,i,r,s,o)},i=>{QW(n,i)},i=>{!function M_e(n,e){$i(e,(t,i)=>{kP(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function mme(n,e){const t=n.toString();return HM[t]||(HM[t]=e()),HM[t]}(n.repoInfo_,()=>new mge(n.stats_,n.server_)),n.infoData_=new uge,n.infoSyncTree_=new NW({startListening:(i,r,s,o)=>{let a=[];const l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=fy(n.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),kP(n,"connected",!1),n.serverSyncTree_=new NW({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,l)=>{const c=o(a,l);Ds(n.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new io(this._repo,Wt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Eye(n,e){const t=HP[e];(!t||t[n.key]!==n)&&ua(`Database ${e}(${n.repoInfo_}) has already been deleted.`),JW(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ua("Cannot call "+e+" on a deleted database.")}}function _q(){U5.IS_TRANSPORT_INITIALIZED&&br("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Tye(){_q(),yc.forceDisallow()}function xye(){_q(),ep.forceDisallow(),yc.forceAllow()}function Aye(n,e){b5(n,e)}const Mye={".sv":"timestamp"};class Nye{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Yu.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Yu.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Rye(n){FM(rs.SDK_VERSION),(0,rs._registerComponent)(new bo.wA("database",(e,{instanceIdentifier:t})=>$P(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,rs.registerVersion)(p5,"1.0.1",n),(0,rs.registerVersion)(p5,"1.0.1","esm2017")}();const Vye=new Is.Yd("@firebase/database-compat"),vq=function(n){Vye.warn("FIREBASE WARNING: "+n)};class jye{constructor(e){this._delegate=e}cancel(e){(0,T.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,T.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,T.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,T.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,T.Dv)("OnDisconnect.set",1,2,arguments.length),(0,T.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,T.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,T.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if((0,T.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,vq("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,T.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class zye{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,T.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Sc{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,T.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,T.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,T.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,T.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,T.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),by("DataSnapshot.child","path",e,!1),new Sc(this._database,this._delegate.child(e))}hasChild(e){return(0,T.Dv)("DataSnapshot.hasChild",1,1,arguments.length),by("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,T.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,T.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,T.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Sc(this._database,t)))}hasChildren(){return(0,T.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,T.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,T.Dv)("DataSnapshot.ref",0,0,arguments.length),new As(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ir{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;(0,T.Dv)("Query.on",2,4,arguments.length),(0,T.Wj)("Query.on","callback",t,!1);const o=ir.getCancelAndContextArgs_("Query.on",i,r),a=(c,d)=>{t.call(o.context,new Sc(this.database,c),d)};a.userCallback=t,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return zP(this._delegate,a,l),t;case"child_added":return cq(this._delegate,a,l),t;case"child_removed":return hq(this._delegate,a,l),t;case"child_changed":return uq(this._delegate,a,l),t;case"child_moved":return dq(this._delegate,a,l),t;default:throw new Error((0,T.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,T.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,T.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,T.Wj)("Query.off","callback",t,!0),(0,T.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,fq(this._delegate,e,r)}else fq(this._delegate,e)}get(){return X_e(this._delegate).then(e=>new Sc(this.database,e))}once(e,t,i,r){(0,T.Dv)("Query.once",1,4,arguments.length),(0,T.Wj)("Query.once","callback",t,!0);const s=ir.getCancelAndContextArgs_("Query.once",i,r),o=new T.BH,a=(c,d)=>{const f=new Sc(this.database,c);t&&t.call(s.context,f,d),o.resolve(f)};a.userCallback=t,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":zP(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":cq(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":hq(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":uq(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":dq(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,T.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,T.Dv)("Query.limitToFirst",1,1,arguments.length),new ir(this.database,Ao(this._delegate,function oye(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new sye(n)}(e)))}limitToLast(e){return(0,T.Dv)("Query.limitToLast",1,1,arguments.length),new ir(this.database,Ao(this._delegate,function lye(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new aye(n)}(e)))}orderByChild(e){return(0,T.Dv)("Query.orderByChild",1,1,arguments.length),new ir(this.database,Ao(this._delegate,function uye(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return by("orderByChild","path",n,!1),new cye(n)}(e)))}orderByKey(){return(0,T.Dv)("Query.orderByKey",0,0,arguments.length),new ir(this.database,Ao(this._delegate,function hye(){return new dye}()))}orderByPriority(){return(0,T.Dv)("Query.orderByPriority",0,0,arguments.length),new ir(this.database,Ao(this._delegate,function pye(){return new fye}()))}orderByValue(){return(0,T.Dv)("Query.orderByValue",0,0,arguments.length),new ir(this.database,Ao(this._delegate,function gye(){return new mye}()))}startAt(e=null,t){return(0,T.Dv)("Query.startAt",0,2,arguments.length),new ir(this.database,Ao(this._delegate,function nye(n=null,e){return vy("startAt","key",e,!0),new mq(n,e)}(e,t)))}startAfter(e=null,t){return(0,T.Dv)("Query.startAfter",0,2,arguments.length),new ir(this.database,Ao(this._delegate,function rye(n,e){return vy("startAfter","key",e,!0),new iye(n,e)}(e,t)))}endAt(e=null,t){return(0,T.Dv)("Query.endAt",0,2,arguments.length),new ir(this.database,Ao(this._delegate,function J_e(n,e){return vy("endAt","key",e,!0),new pq(n,e)}(e,t)))}endBefore(e=null,t){return(0,T.Dv)("Query.endBefore",0,2,arguments.length),new ir(this.database,Ao(this._delegate,function tye(n,e){return vy("endBefore","key",e,!0),new eye(n,e)}(e,t)))}equalTo(e,t){return(0,T.Dv)("Query.equalTo",1,2,arguments.length),new ir(this.database,Ao(this._delegate,function yye(n,e){return vy("equalTo","key",e,!0),new _ye(n,e)}(e,t)))}toString(){return(0,T.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,T.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,T.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ir))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,T.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,T.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,T.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new As(this.database,new io(this._delegate._repo,this._delegate._path))}}class As extends ir{constructor(e,t){super(e,new us(t._repo,t._path,new Vw,!1)),this.database=e,this._delegate=t}getKey(){return(0,T.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,T.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new As(this.database,nd(this._delegate,e))}getParent(){(0,T.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new As(this.database,e):null}getRoot(){return(0,T.Dv)("Reference.root",0,0,arguments.length),new As(this.database,this._delegate.root)}set(e,t){(0,T.Dv)("Reference.set",1,2,arguments.length),(0,T.Wj)("Reference.set","onComplete",t,!0);const i=jP(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,T.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,vq("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}no("Reference.update",this._delegate._path),(0,T.Wj)("Reference.update","onComplete",t,!0);const i=Q_e(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,T.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,T.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function Y_e(n,e,t){if(no("setWithPriority",n._path),fa("setWithPriority",e,n._path,!1),PP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new T.BH;return NP(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){(0,T.Dv)("Reference.remove",0,1,arguments.length),(0,T.Wj)("Reference.remove","onComplete",e,!0);const t=function K_e(n){return no("remove",n._path),jP(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,T.Dv)("Reference.transaction",1,3,arguments.length),(0,T.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,T.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,T.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function Oye(n,e,t){var i;if(n=(0,T.m9)(n),no("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=t?.applyLocally)||void 0===i||i,s=new T.BH,a=zP(n,()=>{});return function U_e(n,e,t,i,r,s){lp(n,"transaction on "+e);const o={path:e,update:t,onComplete:i,status:null,order:_5(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=FP(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{yy("transaction failed: Data returned ",l,o.path),o.status=0;const c=tI(n.transactionQueueTree_,e),d=ed(c)||[];let f;d.push(o),AP(c,d),"object"==typeof l&&null!==l&&(0,T.r3)(l,".priority")?(f=(0,T.DV)(l,".priority"),(0,T.hu)(_y(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(Jw(n.serverSyncTree_,e)||st.EMPTY_NODE).getPriority().val();const g=Ey(n),_=Gn(l,f),v=xP(_,a,g);o.currentOutputSnapshotRaw=_,o.currentOutputSnapshotResolved=v,o.currentWriteId=sI(n);const I=vP(n.serverSyncTree_,e,v,o.currentWriteId,o.applyLocally);Ds(n.eventQueue_,e,I),oI(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(l,c,d)=>{let f=null;l?s.reject(l):(f=new td(d,new io(n._repo,n._path),In),s.resolve(new Nye(c,f)))},a,r),s.promise}(this._delegate,e,{applyLocally:i}).then(s=>new zye(s.committed,new Sc(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){(0,T.Dv)("Reference.setPriority",1,2,arguments.length),(0,T.Wj)("Reference.setPriority","onComplete",t,!0);const i=function Z_e(n,e){n=(0,T.m9)(n),no("setPriority",n._path),PP("setPriority",e,!1);const t=new T.BH;return NP(n._repo,zn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,T.Dv)("Reference.push",0,2,arguments.length),(0,T.Wj)("Reference.push","onComplete",t,!0);const i=function G_e(n,e){n=(0,T.m9)(n),no("push",n._path),fa("push",e,n._path,!0);const t=ZW(n._repo),i=q_e(t),r=nd(n,i),s=nd(n,i);let o;return o=null!=e?jP(s,e).then(()=>s):Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}(this._delegate,e),r=i.then(o=>new As(this.database,o));t&&r.then(()=>t(null),o=>t(o));const s=new As(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return no("Reference.onDisconnect",this._delegate._path),new jye(new oq(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Cy{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Tye,forceLongPolling:xye}}useEmulator(e,t,i={}){!function yq(n,e,t,i={}){(n=(0,T.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ua("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&ua('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ty(ty.OWNER);else if(i.mockUserToken){const o="string"==typeof i.mockUserToken?i.mockUserToken:(0,T.Sg)(i.mockUserToken,n.app.options.projectId);s=new ty(o)}!function bye(n,e,t,i){n.repoInfo_=new jM(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(this._delegate,e,t,i)}ref(e){if((0,T.Dv)("database.ref",0,1,arguments.length),e instanceof As){const t=lq(this._delegate,e.toString());return new As(this,t)}{const t=aq(this._delegate,e);return new As(this,t)}}refFromURL(e){(0,T.Dv)("database.refFromURL",1,1,arguments.length);const i=lq(this._delegate,e);return new As(this,i)}goOffline(){return(0,T.Dv)("database.goOffline",0,0,arguments.length),function Sye(n){(n=(0,T.m9)(n))._checkNotDeleted("goOffline"),JW(n._repo)}(this._delegate)}goOnline(){return(0,T.Dv)("database.goOnline",0,0,arguments.length),function Dye(n){(n=(0,T.m9)(n))._checkNotDeleted("goOnline"),function B_e(n){n.persistentConnection_&&n.persistentConnection_.resume(KW)}(n._repo)}(this._delegate)}}Cy.ServerValue={TIMESTAMP:function Pye(){return Mye}(),increment:n=>function kye(n){return{".sv":{increment:n}}}(n)};var $ye=Object.freeze({__proto__:null,initStandalone:function Hye({app:n,url:e,version:t,customAuthImpl:i,customAppCheckImpl:r,namespace:s,nodeAdmin:o=!1}){FM(t);const a=new bo.H0("database-standalone"),l=new bo.zt("auth-internal",a);let c;return l.setComponent(new bo.wA("auth-internal",()=>i,"PRIVATE")),r&&(c=new bo.zt("app-check-internal",a),c.setComponent(new bo.wA("app-check-internal",()=>r,"PRIVATE"))),{instance:new Cy($P(n,l,c,e,o),n),namespace:s}}});const Wye=Cy.ServerValue;function Ty(n,e,t="on",i=qh){return new Xe(r=>{let s=null;return s=n[t](e,(o,a)=>{i.schedule(()=>{r.next({snapshot:o,prevKey:a})}),"once"===t&&i.schedule(()=>r.complete())},o=>{i.schedule(()=>r.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(ge(r=>{const{snapshot:s,prevKey:o}=r;let a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),Q())}function bq(n){return null==n}function Eq(n){return"function"==typeof n.set}function wq(n,e){return Eq(e)?e:n.ref(e)}function Iq(n,e){if(function Gye(n){return"string"==typeof n}(n))return e.stringCase();if(Eq(n))return e.firebaseCase();if(function Kye(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Cq(n){return(bq(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Tq(n,e,t){return C(...(e=Cq(e)).map(r=>Ty(n,r,"on",t)))}function xq(n,e){return function(i,r){return Iq(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function Xye(n){return function(t){return t?Iq(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Sq(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function tve(n,e){const{payload:t,prevKey:i,key:r}=e,s=Sq(n,r),o=function eve(n,e){if(bq(e))return 0;{const t=Sq(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{const c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,c],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==i&&(n=n.filter(l=>l.payload.key!==t.key)).splice(o,0,e);else{if(null==i)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===r?e:a);case"child_moved":if(s>-1){const a=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,a),n}return n;default:return n}}function Dq(n,e,t){return function Jye(n,e,t){return Ty(n,"value","once",t).pipe(Ce(i=>{const r=[R(i)];return e.forEach(s=>r.push(Ty(n,s,"on",t))),C(...r).pipe(Oh(tve,[]))}),ze())}(n,e=Cq(e),t)}function Aq(n,e){return function(){return Ty(n,"value","on",e)}}!function qye(n){n.INTERNAL.registerComponent(new bo.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new Cy(r,i)},"PUBLIC").setServiceProps({Reference:As,Query:ir,Database:Cy,DataSnapshot:Sc,enableLogging:Aye,INTERNAL:$ye,ServerValue:Wye}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.1")}(ss.Z);const rve=new oe("angularfire2.realtimeDatabaseURL"),sve=new oe("angularfire2.database.use-emulator");let ove=(()=>{class n{schedulers;database;constructor(t,i,r,s,o,a,l,c,d,f,g,_,v,I,S){this.schedulers=a;const F=l,M=bg(t,o,i);c&&PS(M,o,d,g,_,v,f,I),this.database=SE(`${M.name}.database.${r}`,"AngularFireDatabase",M.name,()=>{const V=o.runOutsideAngular(()=>M.database(r||void 0));return F&&V.useEmulator(...F),V},[F])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>wq(this.database,t));let s=r;return i&&(s=i(r)),function nve(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:xq(i,"update"),set:xq(i,"set"),push:r=>i.push(r),remove:Xye(i),snapshotChanges:r=>Dq(n,r,t).pipe(ci),stateChanges:r=>Tq(n,r,t).pipe(ci),auditTrail:r=>function Zye(n,e,t){return function Qye(n,e,t){return function Yye(n,e){return Ty(n,"value","on",e).pipe(ge(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(function Qpe(...n){const e=Yr(n);return ee((t,i)=>{const r=n.length,s=new Array(r);let o=n.map(()=>!1),a=!1;for(let l=0;l<r;l++)mt(n[l]).subscribe(pe(i,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(Ln))&&(o=null))},Re));t.subscribe(pe(i,l=>{if(a){const c=[l,...s];i.next(e?e(...c):c)}}))})}(e),ge(([r,s])=>{const o=r.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function Xpe(n){return ee((e,t)=>{let i=!1,r=0;e.subscribe(pe(t,s=>(i||(i=!n(s,r++)))&&t.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),ge(r=>r.actions))}(n,Tq(n,e).pipe(Oh((r,s)=>[...r,s],[])),t)}(n,r,t).pipe(ci),valueChanges:(r,s)=>Dq(n,r,t).pipe(ge(a=>a.map(l=>s&&s.idField?{...l.payload.val(),[s.idField]:l.key}:l.payload.val())),ci)}}(s,this)}object(t){return function ive(n,e){return{query:n,snapshotChanges:()=>Aq(n,e.schedulers.outsideAngular)().pipe(ci),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Aq(n,e.schedulers.outsideAngular)().pipe(ci,ge(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>wq(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(i){return new(i||n)(O(Yh),O(Qh,8),O(rve,8),O(Ks),O(Be),O(xE),O(sve,8),O(Eg,8),O(xS,8),O(SS,8),O(DS,8),O(AS,8),O(RS,8),O(MS,8),O(TE,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),ave=(()=>{class n{constructor(){ss.Z.registerVersion("angularfire",Gh.full,"rtdb-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=xt({type:n});static \u0275inj=Nt({providers:[ove]})}return n})();function Rq(n){return new B(3e3,!1)}function Dc(n){switch(n.length){case 0:return new $_;case 1:return n[0];default:return new H4(n)}}function Mq(n,e,t=new Map,i=new Map){const r=[],s=[];let o=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),d=c==o,f=d&&a||new Map;l.forEach((g,_)=>{let v=_,I=g;if("offset"!==_)switch(v=n.normalizePropertyName(v,r),I){case"!":I=t.get(_);break;case nl:I=i.get(_);break;default:I=n.normalizeStyleValue(_,v,I,r)}f.set(v,I)}),d||s.push(f),a=f,o=c}),r.length)throw function Rve(n){return new B(3502,!1)}();return s}function WP(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&qP(t,"start",n)));break;case"done":n.onDone(()=>i(t&&qP(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&qP(t,"destroy",n)))}}function qP(n,e,t){const s=GP(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function GP(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Rs(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function Pq(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const zve=(()=>typeof document>"u"?null:document.documentElement)();function KP(n){const e=n.parentNode||n.host||null;return e===zve?null:e}let id=null,kq=!1;function Nq(n,e){for(;e;){if(e===n)return!0;e=KP(e)}return!1}function Oq(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]}let Fq=(()=>{class n{validateStyleProperty(t){return function $ve(n){id||(id=function Wve(){return typeof document<"u"?document.body:null}()||{},kq=!!id.style&&"WebkitAppearance"in id.style);let e=!0;return id.style&&!function Hve(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in id.style,!e&&kq&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in id.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return Nq(t,i)}getParentElement(t){return KP(t)}query(t,i,r){return Oq(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new $_(r,s)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),ZP=(()=>{class n{static#e=this.NOOP=new Fq}return n})();const qve=1e3,YP="ng-enter",dI="ng-leave",hI="ng-trigger",fI=".ng-trigger",Vq="ng-animating",QP=".ng-animating";function al(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:XP(parseFloat(e[1]),e[2])}function XP(n,e){return"s"===e?n*qve:n}function pI(n,e,t){return n.hasOwnProperty("duration")?n:function Kve(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(Rq()),{duration:0,delay:0,easing:""};r=XP(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=XP(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function lve(){return new B(3100,!1)}()),a=!0),s<0&&(e.push(function cve(){return new B(3101,!1)}()),a=!0),a&&e.splice(l,0,Rq())}return{duration:r,delay:s,easing:o}}(n,e,t)}function xy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Bq(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Ac(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function pa(n,e,t){e.forEach((i,r)=>{const s=ek(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i})}function rd(n,e){e.forEach((t,i)=>{const r=ek(i);n.style[r]=""})}function Sy(n){return Array.isArray(n)?1==n.length?n[0]:z4(n):n}const JP=new RegExp("{{\\s*(.+?)\\s*}}","g");function jq(n){let e=[];if("string"==typeof n){let t;for(;t=JP.exec(n);)e.push(t[1]);JP.lastIndex=0}return e}function Dy(n,e,t){const i=n.toString(),r=i.replace(JP,(s,o)=>{let a=e[o];return null==a&&(t.push(function dve(n){return new B(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function mI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Qve=/-+([a-z0-9])/g;function ek(n){return n.replace(Qve,(...e)=>e[1].toUpperCase())}function Ms(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function hve(n){return new B(3004,!1)}()}}function zq(n,e){return window.getComputedStyle(n)[e]}const gI="*";function ebe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function tbe(n,e,t){if(":"==n[0]){const l=function nbe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function xve(n){return new B(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Tve(n){return new B(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(Hq(r,o));"<"==s[0]&&!(r==gI&&o==gI)&&e.push(Hq(o,r))}(i,t,e)):t.push(n),t}const _I=new Set(["true","1"]),yI=new Set(["false","0"]);function Hq(n,e){const t=_I.has(n)||yI.has(n),i=_I.has(e)||yI.has(e);return(r,s)=>{let o=n==gI||n==r,a=e==gI||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?_I.has(n):yI.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?_I.has(e):yI.has(e)),o&&a}}const ibe=new RegExp("s*:selfs*,?","g");function tk(n,e,t,i){return new rbe(n).build(e,t,i)}class rbe{constructor(e){this._driver=e}build(e,t,i){const r=new abe(t);return this._resetContextStyleTimingState(r),Ms(this,Sy(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function pve(){return new B(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function mve(){return new B(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{jq(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(mI(s.values()),t.errors.push(function gve(n,e){return new B(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Ms(this,Sy(e.animation),t);return{type:1,matchers:ebe(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:sd(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Ms(this,i,t)),options:sd(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=Ms(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:sd(e.options)}}visitAnimate(e,t){const i=function cbe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return nk(pI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=nk(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=pI(t,e);return nk(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Hu({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=Hu(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===nl?i.push(a):t.errors.push(new B(3002,!1)):i.push(Bq(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),d=c.get(l);let f=!0;d&&(s!=r&&s>=d.startTime&&r<=d.endTime&&(t.errors.push(function yve(n,e,t,i,r){return new B(3010,!1)}()),f=!1),s=d.startTime),f&&c.set(l,{startTime:s,endTime:r}),t.options&&function Yve(n,e,t){const i=e.params||{},r=jq(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function uve(n){return new B(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function vve(){return new B(3011,!1)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const d=e.steps.map(F=>{const M=this._makeStyleAst(F,t);let V=null!=M.offset?M.offset:function lbe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(M.styles),Y=0;return null!=V&&(s++,Y=M.offset=V),l=l||Y<0||Y>1,a=a||Y<c,c=Y,o.push(Y),M});l&&t.errors.push(function bve(){return new B(3012,!1)}()),a&&t.errors.push(function Eve(){return new B(3200,!1)}());const f=e.steps.length;let g=0;s>0&&s<f?t.errors.push(function wve(){return new B(3202,!1)}()):0==s&&(g=1/(f-1));const _=f-1,v=t.currentTime,I=t.currentAnimateTimings,S=I.duration;return d.forEach((F,M)=>{const V=g>0?M==_?1:g*M:o[M],Y=V*S;t.currentTime=v+I.delay+Y,I.duration=Y,this._validateStyleAst(F,t),F.offset=V,i.styles.push(F)}),i}visitReference(e,t){return{type:8,animation:Ms(this,Sy(e.animation),t),options:sd(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:sd(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:sd(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function sbe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(ibe,"")),n=n.replace(/@\*/g,fI).replace(/@\w+/g,t=>fI+"-"+t.slice(1)).replace(/:animating/g,QP),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Rs(t.collectedStyles,t.currentQuerySelector,new Map);const a=Ms(this,Sy(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:sd(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Ive(){return new B(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:pI(e.timings,t.errors,!0);return{type:12,animation:Ms(this,Sy(e.animation),t),timings:i,options:null}}}class abe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function sd(n){return n?(n=xy(n)).params&&(n.params=function obe(n){return n?xy(n):null}(n.params)):n={},n}function nk(n,e,t){return{duration:n,delay:e,easing:t}}function ik(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class vI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const hbe=new RegExp(":enter","g"),pbe=new RegExp(":leave","g");function rk(n,e,t,i,r,s=new Map,o=new Map,a,l,c=[]){return(new mbe).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class mbe{buildKeyframes(e,t,i,r,s,o,a,l,c,d=[]){c=c||new vI;const f=new sk(e,t,c,r,s,d,[]);f.options=l;const g=l.delay?al(l.delay):0;f.currentTimeline.delayNextStep(g),f.currentTimeline.setStyles([o],null,f.errors,l),Ms(this,i,f);const _=f.timelines.filter(v=>v.containsAnimation());if(_.length&&a.size){let v;for(let I=_.length-1;I>=0;I--){const S=_[I];if(S.element===t){v=S;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,f.errors,l)}return _.length?_.map(v=>v.buildKeyframes()):[ik(t,[],[],[],0,g,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const o="number"==typeof s?s:al(Dy(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?al(i.duration):null,a=null!=i.delay?al(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ms(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=bI);const o=al(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Ms(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?al(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ms(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return pI(t.params?Dy(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?al(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=bI);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{t.currentQueryIndex=d;const f=t.createSubContext(e.options,c);s&&f.delayNextStep(s),c===t.element&&(l=f.currentTimeline),Ms(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,f.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const d=t.currentTimeline;l&&d.delayNextStep(l);const f=d.currentTime;Ms(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-f+(r.startTime-i.currentTimeline.startTime)}}const bI={};class sk{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=bI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new EI(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=al(i.duration)),null!=i.delay&&(r.delay=al(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Dy(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new sk(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=bI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new gbe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(hbe,"."+this._enterClassName)).replace(pbe,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function Cve(n){return new B(3014,!1)}()),a}}class EI{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new EI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||nl),this._currentKeyframe.set(t,nl);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function _be(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,nl)}else Ac(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=Dy(l,s,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??nl),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Ac(a,new Map,this._backFill);c.forEach((d,f)=>{"!"===d?e.add(f):d===nl&&t.add(f)}),i||c.set("offset",l/this.duration),r.push(c)});const s=e.size?mI(e.values()):[],o=t.size?mI(t.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return ik(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class gbe extends EI{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=Ac(e[0]);l.set("offset",0),s.push(l);const c=Ac(e[0]);c.set("offset",qq(a)),s.push(c);const d=e.length-1;for(let f=1;f<=d;f++){let g=Ac(e[f]);const _=g.get("offset");g.set("offset",qq((t+_*i)/o)),s.push(g)}i=o,t=0,r="",e=s}return ik(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function qq(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class ok{}const ybe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class vbe extends ok{normalizePropertyName(e,t){return ek(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(ybe.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function fve(n,e){return new B(3005,!1)}())}return o+s}}function Gq(n,e,t,i,r,s,o,a,l,c,d,f,g){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:f,errors:g}}const ak={};class Kq{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function bbe(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,l,c,d){const f=[],g=this.ast.options&&this.ast.options.params||ak,v=this.buildStyles(i,a&&a.params||ak,f),I=l&&l.params||ak,S=this.buildStyles(r,I,f),F=new Set,M=new Map,V=new Map,Y="void"===r,de={params:Ebe(I,g),delay:this.ast.options?.delay},Me=d?[]:rk(e,t,this.ast.animation,s,o,v,S,de,c,f);let qe=0;if(Me.forEach(Pi=>{qe=Math.max(Pi.duration+Pi.delay,qe)}),f.length)return Gq(t,this._triggerName,i,r,Y,v,S,[],[],M,V,qe,f);Me.forEach(Pi=>{const ds=Pi.element,TI=Rs(M,ds,new Set);Pi.preStyleProps.forEach(od=>TI.add(od));const Ry=Rs(V,ds,new Set);Pi.postStyleProps.forEach(od=>Ry.add(od)),ds!==t&&F.add(ds)});const Ft=mI(F.values());return Gq(t,this._triggerName,i,r,Y,v,S,Me,Ft,M,V,qe)}}function Ebe(n,e){const t=xy(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class wbe{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=xy(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Dy(o,r,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),i.set(a,o)})}),i}}class Cbe{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new wbe(r.style,r.options&&r.options.params||{},i))}),Zq(this.states,"true","1"),Zq(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new Kq(e,r,this.states))}),this.fallbackTransition=function Tbe(n,e,t){return new Kq(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function Zq(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const xbe=new vI;class Sbe{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=tk(this._driver,t,i,[]);if(i.length)throw function Mve(n){return new B(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=Mq(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=rk(this._driver,t,s,YP,dI,new Map,new Map,i,xbe,r),o.forEach(d=>{const f=Rs(a,d.element,new Map);d.postStyleProps.forEach(g=>f.set(g,null))})):(r.push(function Pve(){return new B(3300,!1)}()),o=[]),r.length)throw function kve(n){return new B(3504,!1)}();a.forEach((d,f)=>{d.forEach((g,_)=>{d.set(_,this._driver.computeStyle(f,_,nl))})});const c=Dc(o.map(d=>{const f=a.get(d.element);return this._buildPlayer(d,new Map,f)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Nve(n){return new B(3301,!1)}();return t}listen(e,t,i,r){const s=GP(t,"","","");return WP(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const Yq="ng-animate-queued",lk="ng-animate-disabled",Pbe=[],Qq={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},kbe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ro="__ng_removed";class ck{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function Lbe(n){return n??null}(i?e.value:e),i){const s=xy(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Ay="void",uk=new ck(Ay);class Nbe{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ro(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function Ove(n,e){return new B(3302,!1)}();if(null==i||0==i.length)throw function Fve(n){return new B(3303,!1)}();if(!function Vbe(n){return"start"==n||"done"==n}(i))throw function Lve(n,e){return new B(3400,!1)}();const s=Rs(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=Rs(this._engine.statesByElement,e,new Map);return a.has(t)||(ro(e,hI),ro(e,hI+"-"+t),a.set(t,uk)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Vve(n){return new B(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new dk(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(ro(e,hI),ro(e,hI+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new ck(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=uk),c.value!==Ay&&l.value===c.value){if(!function jbe(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const I=[],S=s.matchStyles(l.value,l.params,I),F=s.matchStyles(c.value,c.params,I);I.length?this._engine.reportError(I):this._engine.afterFlush(()=>{rd(e,S),pa(e,F)})}return}const g=Rs(this._engine.playersByElement,e,[]);g.forEach(I=>{I.namespaceId==this.id&&I.triggerName==t&&I.queued&&I.destroy()});let _=s.matchTransition(l.value,c.value,e,c.params),v=!1;if(!_){if(!r)return;_=s.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:_,fromState:l,toState:c,player:o,isFallbackTransition:v}),v||(ro(e,Yq),o.onStart(()=>{up(e,Yq)})),o.onDone(()=>{let I=this.players.indexOf(o);I>=0&&this.players.splice(I,1);const S=this._engine.playersByElement.get(e);if(S){let F=S.indexOf(o);F>=0&&S.splice(F,1)}}),this.players.push(o),g.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,fI,!0);i.forEach(r=>{if(r[Ro])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const d=this.trigger(e,c,Ay,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Dc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=i.get(o)||uk,d=new ck(Ay),f=new dk(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:d,player:f,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Ro];(!s||s===Qq)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){ro(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=GP(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,WP(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Obe{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Nbe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(wI(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!wI(t))return;const s=t[Ro];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ro(e,lk)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),up(e,lk))}removeNode(e,t,i){if(wI(t)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Ro]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return wI(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,fI,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,QP,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Dc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ro];if(t&&t.setForRemoval){if(e[Ro]=Qq,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(lk)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)ro(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Dc(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function Bve(n){return new B(3402,!1)}()}_flushAnimations(e,t){const i=new vI,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(ke=>{d.add(ke);const $e=this.driver.query(ke,".ng-animate-queued",!0);for(let Ze=0;Ze<$e.length;Ze++)d.add($e[Ze])});const f=this.bodyNode,g=Array.from(this.statesByElement.keys()),_=eG(g,this.collectedEnterElements),v=new Map;let I=0;_.forEach((ke,$e)=>{const Ze=YP+I++;v.set($e,Ze),ke.forEach(zt=>ro(zt,Ze))});const S=[],F=new Set,M=new Set;for(let ke=0;ke<this.collectedLeaveElements.length;ke++){const $e=this.collectedLeaveElements[ke],Ze=$e[Ro];Ze&&Ze.setForRemoval&&(S.push($e),F.add($e),Ze.hasAnimation?this.driver.query($e,".ng-star-inserted",!0).forEach(zt=>F.add(zt)):M.add($e))}const V=new Map,Y=eG(g,Array.from(F));Y.forEach((ke,$e)=>{const Ze=dI+I++;V.set($e,Ze),ke.forEach(zt=>ro(zt,Ze))}),e.push(()=>{_.forEach((ke,$e)=>{const Ze=v.get($e);ke.forEach(zt=>up(zt,Ze))}),Y.forEach((ke,$e)=>{const Ze=V.get($e);ke.forEach(zt=>up(zt,Ze))}),S.forEach(ke=>{this.processLeaveNode(ke)})});const de=[],Me=[];for(let ke=this._namespaceList.length-1;ke>=0;ke--)this._namespaceList[ke].drainQueuedTransitions(t).forEach(Ze=>{const zt=Ze.player,Wi=Ze.element;if(de.push(zt),this.collectedEnterElements.length){const Er=Wi[Ro];if(Er&&Er.setForMove){if(Er.previousTriggersValues&&Er.previousTriggersValues.has(Ze.triggerName)){const ad=Er.previousTriggersValues.get(Ze.triggerName),so=this.statesByElement.get(Ze.element);if(so&&so.has(Ze.triggerName)){const xI=so.get(Ze.triggerName);xI.value=ad,so.set(Ze.triggerName,xI)}}return void zt.destroy()}}const ma=!f||!this.driver.containsElement(f,Wi),Ps=V.get(Wi),Rc=v.get(Wi),Kn=this._buildInstruction(Ze,i,Rc,Ps,ma);if(Kn.errors&&Kn.errors.length)return void Me.push(Kn);if(ma)return zt.onStart(()=>rd(Wi,Kn.fromStyles)),zt.onDestroy(()=>pa(Wi,Kn.toStyles)),void r.push(zt);if(Ze.isFallbackTransition)return zt.onStart(()=>rd(Wi,Kn.fromStyles)),zt.onDestroy(()=>pa(Wi,Kn.toStyles)),void r.push(zt);const dG=[];Kn.timelines.forEach(Er=>{Er.stretchStartingKeyframe=!0,this.disabledNodes.has(Er.element)||dG.push(Er)}),Kn.timelines=dG,i.append(Wi,Kn.timelines),o.push({instruction:Kn,player:zt,element:Wi}),Kn.queriedElements.forEach(Er=>Rs(a,Er,[]).push(zt)),Kn.preStyleProps.forEach((Er,ad)=>{if(Er.size){let so=l.get(ad);so||l.set(ad,so=new Set),Er.forEach((xI,pk)=>so.add(pk))}}),Kn.postStyleProps.forEach((Er,ad)=>{let so=c.get(ad);so||c.set(ad,so=new Set),Er.forEach((xI,pk)=>so.add(pk))})});if(Me.length){const ke=[];Me.forEach($e=>{ke.push(function Uve(n,e){return new B(3505,!1)}())}),de.forEach($e=>$e.destroy()),this.reportError(ke)}const qe=new Map,Ft=new Map;o.forEach(ke=>{const $e=ke.element;i.has($e)&&(Ft.set($e,$e),this._beforeAnimationBuild(ke.player.namespaceId,ke.instruction,qe))}),r.forEach(ke=>{const $e=ke.element;this._getPreviousPlayers($e,!1,ke.namespaceId,ke.triggerName,null).forEach(zt=>{Rs(qe,$e,[]).push(zt),zt.destroy()})});const Pi=S.filter(ke=>nG(ke,l,c)),ds=new Map;Jq(ds,this.driver,M,c,nl).forEach(ke=>{nG(ke,l,c)&&Pi.push(ke)});const Ry=new Map;_.forEach((ke,$e)=>{Jq(Ry,this.driver,new Set(ke),l,"!")}),Pi.forEach(ke=>{const $e=ds.get(ke),Ze=Ry.get(ke);ds.set(ke,new Map([...$e?.entries()??[],...Ze?.entries()??[]]))});const od=[],cG=[],uG={};o.forEach(ke=>{const{element:$e,player:Ze,instruction:zt}=ke;if(i.has($e)){if(d.has($e))return Ze.onDestroy(()=>pa($e,zt.toStyles)),Ze.disabled=!0,Ze.overrideTotalTime(zt.totalTime),void r.push(Ze);let Wi=uG;if(Ft.size>1){let Ps=$e;const Rc=[];for(;Ps=Ps.parentNode;){const Kn=Ft.get(Ps);if(Kn){Wi=Kn;break}Rc.push(Ps)}Rc.forEach(Kn=>Ft.set(Kn,Wi))}const ma=this._buildAnimation(Ze.namespaceId,zt,qe,s,Ry,ds);if(Ze.setRealPlayer(ma),Wi===uG)od.push(Ze);else{const Ps=this.playersByElement.get(Wi);Ps&&Ps.length&&(Ze.parentPlayer=Dc(Ps)),r.push(Ze)}}else rd($e,zt.fromStyles),Ze.onDestroy(()=>pa($e,zt.toStyles)),cG.push(Ze),d.has($e)&&r.push(Ze)}),cG.forEach(ke=>{const $e=s.get(ke.element);if($e&&$e.length){const Ze=Dc($e);ke.setRealPlayer(Ze)}}),r.forEach(ke=>{ke.parentPlayer?ke.syncPlayerEvents(ke.parentPlayer):ke.destroy()});for(let ke=0;ke<S.length;ke++){const $e=S[ke],Ze=$e[Ro];if(up($e,dI),Ze&&Ze.hasAnimation)continue;let zt=[];if(a.size){let ma=a.get($e);ma&&ma.length&&zt.push(...ma);let Ps=this.driver.query($e,QP,!0);for(let Rc=0;Rc<Ps.length;Rc++){let Kn=a.get(Ps[Rc]);Kn&&Kn.length&&zt.push(...Kn)}}const Wi=zt.filter(ma=>!ma.destroyed);Wi.length?Bbe(this,$e,Wi):this.processLeaveNode($e)}return S.length=0,od.forEach(ke=>{this.players.push(ke),ke.onDone(()=>{ke.destroy();const $e=this.players.indexOf(ke);this.players.splice($e,1)}),ke.play()}),od}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==Ay;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,d=c!==s,f=Rs(i,c,[]);this._getPreviousPlayers(c,d,o,a,t.toState).forEach(_=>{const v=_.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),_.destroy(),f.push(_)})}rd(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],d=new Set,f=new Set,g=t.timelines.map(v=>{const I=v.element;d.add(I);const S=I[Ro];if(S&&S.removedBeforeQueried)return new $_(v.duration,v.delay);const F=I!==l,M=function Ube(n){const e=[];return tG(n,e),e}((i.get(I)||Pbe).map(qe=>qe.getRealPlayer())).filter(qe=>!!qe.element&&qe.element===I),V=s.get(I),Y=o.get(I),de=Mq(this._normalizer,v.keyframes,V,Y),Me=this._buildPlayer(v,de,M);if(v.subTimeline&&r&&f.add(I),F){const qe=new dk(e,a,I);qe.setRealPlayer(Me),c.push(qe)}return Me});c.forEach(v=>{Rs(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>function Fbe(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,v.element,v))}),d.forEach(v=>ro(v,Vq));const _=Dc(g);return _.onDestroy(()=>{d.forEach(v=>up(v,Vq)),pa(l,t.toStyles)}),f.forEach(v=>{Rs(r,v,[]).push(_)}),_}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new $_(e.duration,e.delay)}}class dk{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new $_,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>WP(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Rs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function wI(n){return n&&1===n.nodeType}function Xq(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Jq(n,e,t,i,r){const s=[];t.forEach(l=>s.push(Xq(l)));const o=[];i.forEach((l,c)=>{const d=new Map;l.forEach(f=>{const g=e.computeStyle(c,f,r);d.set(f,g),(!g||0==g.length)&&(c[Ro]=kbe,o.push(c))}),n.set(c,d)});let a=0;return t.forEach(l=>Xq(l,s[a++])),o}function eG(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function ro(n,e){n.classList?.add(e)}function up(n,e){n.classList?.remove(e)}function Bbe(n,e,t){Dc(t).onDone(()=>n.processLeaveNode(e))}function tG(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof H4?tG(i.players,e):e.push(i)}}function nG(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class II{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Obe(e,t,i),this._timelineEngine=new Sbe(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],d=tk(this._driver,s,l,[]);if(l.length)throw function Ave(n,e){return new B(3404,!1)}();a=function Ibe(n,e,t){return new Cbe(n,e,t)}(r,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=Pq(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=Pq(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let Hbe=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&pa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(pa(this._element,this._initialStyles),this._endStyles&&(pa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(rd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(rd(this._element,this._endStyles),this._endStyles=null),pa(this._element,this._initialStyles),this._state=3)}}return n})();function hk(n){let e=null;return n.forEach((t,i)=>{(function $be(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class iG{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:zq(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Wbe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Nq(e,t)}getParentElement(e){return KP(e)}query(e,t,i){return Oq(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,d=o.filter(_=>_ instanceof iG);(function Xve(n,e){return 0===n||0===e})(i,r)&&d.forEach(_=>{_.currentSnapshot.forEach((v,I)=>c.set(I,v))});let f=function Zve(n){return n.length?n[0]instanceof Map?n:n.map(e=>Bq(e)):[]}(t).map(_=>Ac(_));f=function Jve(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,zq(n,a)))}}return e}(e,f,c);const g=function zbe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=hk(e[0]),e.length>1&&(i=hk(e[e.length-1]))):e instanceof Map&&(t=hk(e)),t||i?new Hbe(n,t,i):null}(e,f);return new iG(e,f,l,g)}}let qbe=(()=>{class n extends U4{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Qr.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?z4(t):t;return rG(this._renderer,null,i,"register",[r]),new Gbe(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||n)(O(Sm),O(jt))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();class Gbe extends jue{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Kbe(this._id,e,t||{},this._renderer)}}class Kbe{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return rG(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function rG(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const sG="@.disabled";let Zbe=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let d=this._rendererCache.get(s);return d||(d=new oG("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,d)),d}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(o,a,t,d.name,d)};return i.data.animation.forEach(l),new Ybe(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||n)(O(Sm),O(II),O(Be))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();class oG{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==sG?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Ybe extends oG{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==sG?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function Qbe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Xbe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let Jbe=(()=>{class n extends II{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(O(jt),O(ZP),O(ok),O(Vl))};static#t=this.\u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const aG=[{provide:U4,useClass:qbe},{provide:ok,useFactory:function eEe(){return new vbe}},{provide:II,useClass:Jbe},{provide:Sm,useFactory:function tEe(n,e,t){return new Zbe(n,e,t)},deps:[Zx,II,Be]}],fk=[{provide:ZP,useFactory:()=>new Wbe},{provide:kl,useValue:"BrowserAnimations"},...aG],lG=[{provide:ZP,useClass:Fq},{provide:kl,useValue:"NoopAnimations"},...aG];let nEe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?lG:fk}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n});static#n=this.\u0275inj=Nt({providers:fk,imports:[jV]})}return n})(),iEe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=xt({type:n,bootstrap:[ofe]});static#n=this.\u0275inj=Nt({imports:[jV,sfe,Xne.initializeApp(afe_firebase),iie,Ole,Ype,ave,Oce,nEe,B4,yw,Rde,Lde,yw,T3]})}return n})();ZJ().bootstrapModule(iEe).catch(n=>console.error(n))},106:(ks,ri,Ue)=>{Ue.d(ri,{Z:()=>si});var x=Ue(58),X=Ue(537),L=Ue(534),Pe=Ue(879);class ht{constructor(Ye,Qe){this._delegate=Ye,this.firebase=Qe,(0,L._addComponent)(Ye,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=Ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ye){this._delegate.automaticDataCollectionEnabled=Ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ye=>{this._delegate.checkDestroyed(),Ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Ye,Qe=L._DEFAULT_ENTRY_NAME){var hi;this._delegate.checkDestroyed();const On=this._delegate.container.getProvider(Ye);return!On.isInitialized()&&"EXPLICIT"===(null===(hi=On.getComponent())||void 0===hi?void 0:hi.instantiationMode)&&On.initialize(),On.getImmediate({identifier:Qe})}_removeServiceInstance(Ye,Qe=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ye).clearInstance(Qe)}_addComponent(Ye){(0,L._addComponent)(this._delegate,Ye)}_addOrOverwriteComponent(Ye){(0,L._addOrOverwriteComponent)(this._delegate,Ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Hn=new x.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),te=function Dt(){const bt=function Jt(bt){const Ye={},Qe={__esModule:!0,initializeApp:function pt(ot,le={}){const Ct=L.initializeApp(ot,le);if((0,x.r3)(Ye,Ct.name))return Ye[Ct.name];const ln=new bt(Ct,Qe);return Ye[Ct.name]=ln,ln},app:On,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function wr(ot){const le=ot.name,Ct=le.replace("-compat","");if(L._registerComponent(ot)&&"PUBLIC"===ot.type){const ln=(Fn=On())=>{if("function"!=typeof Fn[Ct])throw Hn.create("invalid-app-argument",{appName:le});return Fn[Ct]()};void 0!==ot.serviceProps&&(0,x.ZB)(ln,ot.serviceProps),Qe[Ct]=ln,bt.prototype[Ct]=function(...Fn){return this._getService.bind(this,le).apply(this,ot.multipleInstances?Fn:[])}}return"PUBLIC"===ot.type?Qe[Ct]:null},removeApp:function hi(ot){delete Ye[ot]},useAsService:function Zn(ot,le){return"serverAuth"===le?null:le},modularAPIs:L}};function On(ot){if(!(0,x.r3)(Ye,ot=ot||L._DEFAULT_ENTRY_NAME))throw Hn.create("no-app",{appName:ot});return Ye[ot]}return Qe.default=Qe,Object.defineProperty(Qe,"apps",{get:function qt(){return Object.keys(Ye).map(ot=>Ye[ot])}}),On.App=bt,Qe}(ht);return bt.INTERNAL=Object.assign(Object.assign({},bt.INTERNAL),{createFirebaseNamespace:Dt,extendNamespace:function Ye(Qe){(0,x.ZB)(bt,Qe)},createSubscribe:x.ne,ErrorFactory:x.LL,deepExtend:x.ZB}),bt}(),ue=new Pe.Yd("@firebase/app-compat");if((0,x.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const bt=self.firebase.SDK_VERSION;bt&&bt.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const si=te;!function kt(bt){(0,L.registerVersion)("@firebase/app-compat","0.2.24",bt)}()},534:(ks,ri,Ue)=>{Ue.r(ri),Ue.d(ri,{FirebaseError:()=>Pe.ZR,SDK_VERSION:()=>gs,_DEFAULT_ENTRY_NAME:()=>ps,_addComponent:()=>Cr,_addOrOverwriteComponent:()=>Tr,_apps:()=>vi,_clearComponents:()=>Tn,_components:()=>Ir,_getProvider:()=>Ht,_registerComponent:()=>bi,_removeServiceInstance:()=>or,deleteApp:()=>Qn,getApp:()=>_s,getApps:()=>ai,initializeApp:()=>Yr,onLog:()=>ll,registerVersion:()=>xr,setLogLevel:()=>Mo});var x=Ue(861),X=Ue(537),L=Ue(879),Pe=Ue(58);const ht=(j,k)=>k.some(ae=>j instanceof ae);let dn,Hn;const te=new WeakMap,ue=new WeakMap,Re=new WeakMap,nt=new WeakMap,kt=new WeakMap;let Ye={get(j,k,ae){if(j instanceof IDBTransaction){if("done"===k)return ue.get(j);if("objectStoreNames"===k)return j.objectStoreNames||Re.get(j);if("store"===k)return ae.objectStoreNames[1]?void 0:ae.objectStore(ae.objectStoreNames[0])}return pt(j[k])},set:(j,k,ae)=>(j[k]=ae,!0),has:(j,k)=>j instanceof IDBTransaction&&("done"===k||"store"===k)||k in j};function On(j){return"function"==typeof j?function hi(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Dt(){return Hn||(Hn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...k){return j.apply(qt(this),k),pt(te.get(this))}:function(...k){return pt(j.apply(qt(this),k))}:function(k,...ae){const Ie=j.call(qt(this),k,...ae);return Re.set(Ie,k.sort?k.sort():[k]),pt(Ie)}}(j):(j instanceof IDBTransaction&&function bt(j){if(ue.has(j))return;const k=new Promise((ae,Ie)=>{const ct=()=>{j.removeEventListener("complete",gt),j.removeEventListener("error",B),j.removeEventListener("abort",B)},gt=()=>{ae(),ct()},B=()=>{Ie(j.error||new DOMException("AbortError","AbortError")),ct()};j.addEventListener("complete",gt),j.addEventListener("error",B),j.addEventListener("abort",B)});ue.set(j,k)}(j),ht(j,function Jt(){return dn||(dn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Ye):j)}function pt(j){if(j instanceof IDBRequest)return function si(j){const k=new Promise((ae,Ie)=>{const ct=()=>{j.removeEventListener("success",gt),j.removeEventListener("error",B)},gt=()=>{ae(pt(j.result)),ct()},B=()=>{Ie(j.error),ct()};j.addEventListener("success",gt),j.addEventListener("error",B)});return k.then(ae=>{ae instanceof IDBCursor&&te.set(ae,j)}).catch(()=>{}),kt.set(k,j),k}(j);if(nt.has(j))return nt.get(j);const k=On(j);return k!==j&&(nt.set(j,k),kt.set(k,j)),k}const qt=j=>kt.get(j),ot=["get","getKey","getAll","getAllKeys","count"],le=["put","add","delete","clear"],Ct=new Map;function ln(j,k){if(!(j instanceof IDBDatabase)||k in j||"string"!=typeof k)return;if(Ct.get(k))return Ct.get(k);const ae=k.replace(/FromIndex$/,""),Ie=k!==ae,ct=le.includes(ae);if(!(ae in(Ie?IDBIndex:IDBObjectStore).prototype)||!ct&&!ot.includes(ae))return;const gt=function(){var B=(0,x.Z)(function*(Sn,...De){const ut=this.transaction(Sn,ct?"readwrite":"readonly");let Pc=ut.store;return Ie&&(Pc=Pc.index(De.shift())),(yield Promise.all([Pc[ae](...De),ct&&ut.done]))[0]});return function(De){return B.apply(this,arguments)}}();return Ct.set(k,gt),gt}!function Qe(j){Ye=j(Ye)}(j=>({...j,get:(k,ae,Ie)=>ln(k,ae)||j.get(k,ae,Ie),has:(k,ae)=>!!ln(k,ae)||j.has(k,ae)}));class Fn{constructor(k){this.container=k}getPlatformInfoString(){return this.container.getProviders().map(ae=>{if(function Ln(j){const k=j.getComponent();return"VERSION"===k?.type}(ae)){const Ie=ae.getImmediate();return`${Ie.library}/${Ie.version}`}return null}).filter(ae=>ae).join(" ")}}const hs="@firebase/app",Xe=new L.Yd("@firebase/app"),ps="[DEFAULT]",ms={[hs]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vi=new Map,Ir=new Map;function Cr(j,k){try{j.container.addComponent(k)}catch(ae){Xe.debug(`Component ${k.name} failed to register with FirebaseApp ${j.name}`,ae)}}function Tr(j,k){j.container.addOrOverwriteComponent(k)}function bi(j){const k=j.name;if(Ir.has(k))return Xe.debug(`There were multiple attempts to register component ${k}.`),!1;Ir.set(k,j);for(const ae of vi.values())Cr(ae,j);return!0}function Ht(j,k){const ae=j.container.getProvider("heartbeat").getImmediate({optional:!0});return ae&&ae.triggerHeartbeat(),j.container.getProvider(k)}function or(j,k,ae=ps){Ht(j,k).clearInstance(ae)}function Tn(){Ir.clear()}const pn=new Pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class xn{constructor(k,ae,Ie){this._isDeleted=!1,this._options=Object.assign({},k),this._config=Object.assign({},ae),this._name=ae.name,this._automaticDataCollectionEnabled=ae.automaticDataCollectionEnabled,this._container=Ie,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(k){this.checkDestroyed(),this._automaticDataCollectionEnabled=k}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(k){this._isDeleted=k}checkDestroyed(){if(this.isDeleted)throw pn.create("app-deleted",{appName:this._name})}}const gs="10.7.0";function Yr(j,k={}){let ae=j;"object"!=typeof k&&(k={name:k});const Ie=Object.assign({name:ps,automaticDataCollectionEnabled:!1},k),ct=Ie.name;if("string"!=typeof ct||!ct)throw pn.create("bad-app-name",{appName:String(ct)});if(ae||(ae=(0,Pe.aH)()),!ae)throw pn.create("no-options");const gt=vi.get(ct);if(gt){if((0,Pe.vZ)(ae,gt.options)&&(0,Pe.vZ)(Ie,gt.config))return gt;throw pn.create("duplicate-app",{appName:ct})}const B=new X.H0(ct);for(const De of Ir.values())B.addComponent(De);const Sn=new xn(ae,Ie,B);return vi.set(ct,Sn),Sn}function _s(j=ps){const k=vi.get(j);if(!k&&j===ps&&(0,Pe.aH)())return Yr();if(!k)throw pn.create("no-app",{appName:j});return k}function ai(){return Array.from(vi.values())}function Qn(j){return qi.apply(this,arguments)}function qi(){return(qi=(0,x.Z)(function*(j){const k=j.name;vi.has(k)&&(vi.delete(k),yield Promise.all(j.container.getProviders().map(ae=>ae.delete())),j.isDeleted=!0)})).apply(this,arguments)}function xr(j,k,ae){var Ie;let ct=null!==(Ie=ms[j])&&void 0!==Ie?Ie:j;ae&&(ct+=`-${ae}`);const gt=ct.match(/\s|\//),B=k.match(/\s|\//);if(gt||B){const Sn=[`Unable to register library "${ct}" with version "${k}":`];return gt&&Sn.push(`library name "${ct}" contains illegal characters (whitespace or "/")`),gt&&B&&Sn.push("and"),B&&Sn.push(`version name "${k}" contains illegal characters (whitespace or "/")`),void Xe.warn(Sn.join(" "))}bi(new X.wA(`${ct}-version`,()=>({library:ct,version:k}),"VERSION"))}function ll(j,k){if(null!==j&&"function"!=typeof j)throw pn.create("invalid-log-argument");(0,L.Am)(j,k)}function Mo(j){(0,L.Ub)(j)}const ga="firebase-heartbeat-database",Vs=1,P="firebase-heartbeat-store";let D=null;function E(){return D||(D=function wr(j,k,{blocked:ae,upgrade:Ie,blocking:ct,terminated:gt}={}){const B=indexedDB.open(j,k),Sn=pt(B);return Ie&&B.addEventListener("upgradeneeded",De=>{Ie(pt(B.result),De.oldVersion,De.newVersion,pt(B.transaction),De)}),ae&&B.addEventListener("blocked",De=>ae(De.oldVersion,De.newVersion,De)),Sn.then(De=>{gt&&De.addEventListener("close",()=>gt()),ct&&De.addEventListener("versionchange",ut=>ct(ut.oldVersion,ut.newVersion,ut))}).catch(()=>{}),Sn}(ga,Vs,{upgrade:(j,k)=>{0===k&&j.createObjectStore(P)}}).catch(j=>{throw pn.create("idb-open",{originalErrorMessage:j.message})})),D}function b(){return(b=(0,x.Z)(function*(j){try{return yield(yield E()).transaction(P).objectStore(P).get(xe(j))}catch(k){if(k instanceof Pe.ZR)Xe.warn(k.message);else{const ae=pn.create("idb-get",{originalErrorMessage:k?.message});Xe.warn(ae.message)}}})).apply(this,arguments)}function R(j,k){return Q.apply(this,arguments)}function Q(){return(Q=(0,x.Z)(function*(j,k){try{const Ie=(yield E()).transaction(P,"readwrite");yield Ie.objectStore(P).put(k,xe(j)),yield Ie.done}catch(ae){if(ae instanceof Pe.ZR)Xe.warn(ae.message);else{const Ie=pn.create("idb-set",{originalErrorMessage:ae?.message});Xe.warn(Ie.message)}}})).apply(this,arguments)}function xe(j){return`${j.name}!${j.options.appId}`}class At{constructor(k){this.container=k,this._heartbeatsCache=null;const ae=this.container.getProvider("app").getImmediate();this._storage=new Ne(ae),this._heartbeatsCachePromise=this._storage.read().then(Ie=>(this._heartbeatsCache=Ie,Ie))}triggerHeartbeat(){var k=this;return(0,x.Z)(function*(){var ae,Ie;const gt=k.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),B=be();if((null!=(null===(ae=k._heartbeatsCache)||void 0===ae?void 0:ae.heartbeats)||(k._heartbeatsCache=yield k._heartbeatsCachePromise,null!=(null===(Ie=k._heartbeatsCache)||void 0===Ie?void 0:Ie.heartbeats)))&&k._heartbeatsCache.lastSentHeartbeatDate!==B&&!k._heartbeatsCache.heartbeats.some(Sn=>Sn.date===B))return k._heartbeatsCache.heartbeats.push({date:B,agent:gt}),k._heartbeatsCache.heartbeats=k._heartbeatsCache.heartbeats.filter(Sn=>{const De=new Date(Sn.date).valueOf();return Date.now()-De<=2592e6}),k._storage.overwrite(k._heartbeatsCache)})()}getHeartbeatsHeader(){var k=this;return(0,x.Z)(function*(){var ae;if(null===k._heartbeatsCache&&(yield k._heartbeatsCachePromise),null==(null===(ae=k._heartbeatsCache)||void 0===ae?void 0:ae.heartbeats)||0===k._heartbeatsCache.heartbeats.length)return"";const Ie=be(),{heartbeatsToSend:ct,unsentEntries:gt}=function Zt(j,k=1024){const ae=[];let Ie=j.slice();for(const ct of j){const gt=ae.find(B=>B.agent===ct.agent);if(gt){if(gt.dates.push(ct.date),pi(ae)>k){gt.dates.pop();break}}else if(ae.push({agent:ct.agent,dates:[ct.date]}),pi(ae)>k){ae.pop();break}Ie=Ie.slice(1)}return{heartbeatsToSend:ae,unsentEntries:Ie}}(k._heartbeatsCache.heartbeats),B=(0,Pe.L)(JSON.stringify({version:2,heartbeats:ct}));return k._heartbeatsCache.lastSentHeartbeatDate=Ie,gt.length>0?(k._heartbeatsCache.heartbeats=gt,yield k._storage.overwrite(k._heartbeatsCache)):(k._heartbeatsCache.heartbeats=[],k._storage.overwrite(k._heartbeatsCache)),B})()}}function be(){return(new Date).toISOString().substring(0,10)}class Ne{constructor(k){this.app=k,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,x.Z)(function*(){return!!(0,Pe.hl)()&&(0,Pe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var k=this;return(0,x.Z)(function*(){if(yield k._canUseIndexedDBPromise){const Ie=yield function C(j){return b.apply(this,arguments)}(k.app);return Ie?.heartbeats?Ie:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(k){var ae=this;return(0,x.Z)(function*(){var Ie;if(yield ae._canUseIndexedDBPromise){const gt=yield ae.read();return R(ae.app,{lastSentHeartbeatDate:null!==(Ie=k.lastSentHeartbeatDate)&&void 0!==Ie?Ie:gt.lastSentHeartbeatDate,heartbeats:k.heartbeats})}})()}add(k){var ae=this;return(0,x.Z)(function*(){var Ie;if(yield ae._canUseIndexedDBPromise){const gt=yield ae.read();return R(ae.app,{lastSentHeartbeatDate:null!==(Ie=k.lastSentHeartbeatDate)&&void 0!==Ie?Ie:gt.lastSentHeartbeatDate,heartbeats:[...gt.heartbeats,...k.heartbeats]})}})()}}function pi(j){return(0,Pe.L)(JSON.stringify({version:2,heartbeats:j})).length}!function _a(j){bi(new X.wA("platform-logger",k=>new Fn(k),"PRIVATE")),bi(new X.wA("heartbeat",k=>new At(k),"PRIVATE")),xr(hs,"0.9.24",j),xr(hs,"0.9.24","esm2017"),xr("fire-js","")}("")},537:(ks,ri,Ue)=>{Ue.d(ri,{H0:()=>Jt,wA:()=>L,zt:()=>ht});var x=Ue(861),X=Ue(58);class L{constructor(te,ue,Re){this.name=te,this.instanceFactory=ue,this.type=Re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(te){return this.instantiationMode=te,this}setMultipleInstances(te){return this.multipleInstances=te,this}setServiceProps(te){return this.serviceProps=te,this}setInstanceCreatedCallback(te){return this.onInstanceCreated=te,this}}const Pe="[DEFAULT]";class ht{constructor(te,ue){this.name=te,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(te){const ue=this.normalizeInstanceIdentifier(te);if(!this.instancesDeferred.has(ue)){const Re=new X.BH;if(this.instancesDeferred.set(ue,Re),this.isInitialized(ue)||this.shouldAutoInitialize())try{const nt=this.getOrInitializeService({instanceIdentifier:ue});nt&&Re.resolve(nt)}catch{}}return this.instancesDeferred.get(ue).promise}getImmediate(te){var ue;const Re=this.normalizeInstanceIdentifier(te?.identifier),nt=null!==(ue=te?.optional)&&void 0!==ue&&ue;if(!this.isInitialized(Re)&&!this.shouldAutoInitialize()){if(nt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Re})}catch(kt){if(nt)return null;throw kt}}getComponent(){return this.component}setComponent(te){if(te.name!==this.name)throw Error(`Mismatching Component ${te.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=te,this.shouldAutoInitialize()){if(function Hn(Dt){return"EAGER"===Dt.instantiationMode}(te))try{this.getOrInitializeService({instanceIdentifier:Pe})}catch{}for(const[ue,Re]of this.instancesDeferred.entries()){const nt=this.normalizeInstanceIdentifier(ue);try{const kt=this.getOrInitializeService({instanceIdentifier:nt});Re.resolve(kt)}catch{}}}}clearInstance(te=Pe){this.instancesDeferred.delete(te),this.instancesOptions.delete(te),this.instances.delete(te)}delete(){var te=this;return(0,x.Z)(function*(){const ue=Array.from(te.instances.values());yield Promise.all([...ue.filter(Re=>"INTERNAL"in Re).map(Re=>Re.INTERNAL.delete()),...ue.filter(Re=>"_delete"in Re).map(Re=>Re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(te=Pe){return this.instances.has(te)}getOptions(te=Pe){return this.instancesOptions.get(te)||{}}initialize(te={}){const{options:ue={}}=te,Re=this.normalizeInstanceIdentifier(te.instanceIdentifier);if(this.isInitialized(Re))throw Error(`${this.name}(${Re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const nt=this.getOrInitializeService({instanceIdentifier:Re,options:ue});for(const[kt,si]of this.instancesDeferred.entries())Re===this.normalizeInstanceIdentifier(kt)&&si.resolve(nt);return nt}onInit(te,ue){var Re;const nt=this.normalizeInstanceIdentifier(ue),kt=null!==(Re=this.onInitCallbacks.get(nt))&&void 0!==Re?Re:new Set;kt.add(te),this.onInitCallbacks.set(nt,kt);const si=this.instances.get(nt);return si&&te(si,nt),()=>{kt.delete(te)}}invokeOnInitCallbacks(te,ue){const Re=this.onInitCallbacks.get(ue);if(Re)for(const nt of Re)try{nt(te,ue)}catch{}}getOrInitializeService({instanceIdentifier:te,options:ue={}}){let Re=this.instances.get(te);if(!Re&&this.component&&(Re=this.component.instanceFactory(this.container,{instanceIdentifier:(Dt=te,Dt===Pe?void 0:Dt),options:ue}),this.instances.set(te,Re),this.instancesOptions.set(te,ue),this.invokeOnInitCallbacks(Re,te),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,te,Re)}catch{}var Dt;return Re||null}normalizeInstanceIdentifier(te=Pe){return this.component?this.component.multipleInstances?te:Pe:te}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Jt{constructor(te){this.name=te,this.providers=new Map}addComponent(te){const ue=this.getProvider(te.name);if(ue.isComponentSet())throw new Error(`Component ${te.name} has already been registered with ${this.name}`);ue.setComponent(te)}addOrOverwriteComponent(te){this.getProvider(te.name).isComponentSet()&&this.providers.delete(te.name),this.addComponent(te)}getProvider(te){if(this.providers.has(te))return this.providers.get(te);const ue=new ht(te,this);return this.providers.set(te,ue),ue}getProviders(){return Array.from(this.providers.values())}}},879:(ks,ri,Ue)=>{Ue.d(ri,{Am:()=>Dt,Ub:()=>Jt,Yd:()=>Hn,in:()=>X});const x=[];var X=function(te){return te[te.DEBUG=0]="DEBUG",te[te.VERBOSE=1]="VERBOSE",te[te.INFO=2]="INFO",te[te.WARN=3]="WARN",te[te.ERROR=4]="ERROR",te[te.SILENT=5]="SILENT",te}(X||{});const L={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},Pe=X.INFO,ht={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},dn=(te,ue,...Re)=>{if(ue<te.logLevel)return;const nt=(new Date).toISOString(),kt=ht[ue];if(!kt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[kt](`[${nt}]  ${te.name}:`,...Re)};class Hn{constructor(ue){this.name=ue,this._logLevel=Pe,this._logHandler=dn,this._userLogHandler=null,x.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in X))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?L[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...ue),this._logHandler(this,X.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...ue),this._logHandler(this,X.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,X.INFO,...ue),this._logHandler(this,X.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,X.WARN,...ue),this._logHandler(this,X.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...ue),this._logHandler(this,X.ERROR,...ue)}}function Jt(te){x.forEach(ue=>{ue.setLogLevel(te)})}function Dt(te,ue){for(const Re of x){let nt=null;ue&&ue.level&&(nt=L[ue.level]),Re.userLogHandler=null===te?null:(kt,si,...bt)=>{const Ye=bt.map(Qe=>{if(null==Qe)return null;if("string"==typeof Qe)return Qe;if("number"==typeof Qe||"boolean"==typeof Qe)return Qe.toString();if(Qe instanceof Error)return Qe.message;try{return JSON.stringify(Qe)}catch{return null}}).filter(Qe=>Qe).join(" ");si>=(nt??kt.logLevel)&&te({level:X[si].toLowerCase(),message:Ye,args:bt,type:kt.name})}}}},365:(ks,ri,Ue)=>{Ue.r(ri);var x=Ue(861),X=Ue(106),L=Ue(932),Pe=Ue(58),Hn=(Ue(534),Ue(879),Ue(537));function Jt(){return window}function ue(){return ue=(0,x.Z)(function*(E,C,b){var R;const{BuildInfo:Q}=Jt();(0,L.au)(C.sessionId,"AuthEvent did not contain a session ID");const xe=yield function Qe(E){return hi.apply(this,arguments)}(C.sessionId),Ce={};return(0,L.av)()?Ce.ibi=Q.packageName:(0,L.aw)()?Ce.apn=Q.packageName:(0,L.ax)(E,"operation-not-supported-in-this-environment"),Q.displayName&&(Ce.appDisplayName=Q.displayName),Ce.sessionId=xe,(0,L.ay)(E,b,C.type,void 0,null!==(R=C.eventId)&&void 0!==R?R:void 0,Ce)}),ue.apply(this,arguments)}function nt(){return(nt=(0,x.Z)(function*(E){const{BuildInfo:C}=Jt(),b={};(0,L.av)()?b.iosBundleId=C.packageName:(0,L.aw)()?b.androidPackageName=C.packageName:(0,L.ax)(E,"operation-not-supported-in-this-environment"),yield(0,L.az)(E,b)})).apply(this,arguments)}function bt(){return(bt=(0,x.Z)(function*(E,C,b){const{cordova:R}=Jt();let Q=()=>{};try{yield new Promise((xe,Ce)=>{let ze=null;function At(){var Ne;xe();const pi=null===(Ne=R.plugins.browsertab)||void 0===Ne?void 0:Ne.close;"function"==typeof pi&&pi(),"function"==typeof b?.close&&b.close()}function be(){ze||(ze=window.setTimeout(()=>{Ce((0,L.aB)(E,"redirect-cancelled-by-user"))},2e3))}function Zt(){"visible"===document?.visibilityState&&be()}C.addPassiveListener(At),document.addEventListener("resume",be,!1),(0,L.aw)()&&document.addEventListener("visibilitychange",Zt,!1),Q=()=>{C.removePassiveListener(At),document.removeEventListener("resume",be,!1),document.removeEventListener("visibilitychange",Zt,!1),ze&&window.clearTimeout(ze)}})}finally{Q()}})).apply(this,arguments)}function hi(){return(hi=(0,x.Z)(function*(E){const C=function On(E){if((0,L.au)(/[0-9a-zA-Z]+/.test(E),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(E);const C=new ArrayBuffer(E.length),b=new Uint8Array(C);for(let R=0;R<E.length;R++)b[R]=E.charCodeAt(R);return b}(E),b=yield crypto.subtle.digest("SHA-256",C);return Array.from(new Uint8Array(b)).map(Q=>Q.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class qt extends L.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(C=>{this.resolveInialized=C})}addPassiveListener(C){this.passiveListeners.add(C)}removePassiveListener(C){this.passiveListeners.delete(C)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(C){return this.resolveInialized(),this.passiveListeners.forEach(b=>b(C)),super.onEvent(C)}initialized(){var C=this;return(0,x.Z)(function*(){yield C.initPromise})()}}function ot(E){return le.apply(this,arguments)}function le(){return(le=(0,x.Z)(function*(E){const C=yield Fn()._get(Ln(E));return C&&(yield Fn()._remove(Ln(E))),C})).apply(this,arguments)}function ln(){const E=[];for(let b=0;b<20;b++){const R=Math.floor(62*Math.random());E.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(R))}return E.join("")}function Fn(){return(0,L.aE)(L.b)}function Ln(E){return(0,L.aF)("authEvent",E.config.apiKey,E.name)}function Xe(E){if(!E?.includes("?"))return{};const[C,...b]=E.split("?");return(0,Pe.zd)(b.join("?"))}const q=class Ns{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aG,this._overrideRedirectResult=L.aH}_initialize(C){var b=this;return(0,x.Z)(function*(){const R=C._key();let Q=b.eventManagers.get(R);return Q||(Q=new qt(C),b.eventManagers.set(R,Q),b.attachCallbackListeners(C,Q)),Q})()}_openPopup(C){(0,L.ax)(C,"operation-not-supported-in-this-environment")}_openRedirect(C,b,R,Q){var xe=this;return(0,x.Z)(function*(){!function Ye(E){var C,b,R,Q,xe,Ce,ze,At,be,Zt;const Ne=Jt();(0,L.aC)("function"==typeof(null===(C=Ne?.universalLinks)||void 0===C?void 0:C.subscribe),E,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.aC)(typeof(null===(b=Ne?.BuildInfo)||void 0===b?void 0:b.packageName)<"u",E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.aC)("function"==typeof(null===(xe=null===(Q=null===(R=Ne?.cordova)||void 0===R?void 0:R.plugins)||void 0===Q?void 0:Q.browsertab)||void 0===xe?void 0:xe.openUrl),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aC)("function"==typeof(null===(At=null===(ze=null===(Ce=Ne?.cordova)||void 0===Ce?void 0:Ce.plugins)||void 0===ze?void 0:ze.browsertab)||void 0===At?void 0:At.isAvailable),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aC)("function"==typeof(null===(Zt=null===(be=Ne?.cordova)||void 0===be?void 0:be.InAppBrowser)||void 0===Zt?void 0:Zt.open),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(C);const Ce=yield xe._initialize(C);yield Ce.initialized(),Ce.resetRedirect(),(0,L.aI)(),yield xe._originValidation(C);const ze=function wr(E,C,b=null){return{type:C,eventId:b,urlResponse:null,sessionId:ln(),postBody:null,tenantId:E.tenantId,error:(0,L.aB)(E,"no-auth-event")}}(C,R,Q);yield function Zn(E,C){return Fn()._set(Ln(E),C)}(C,ze);const At=yield function te(E,C,b){return ue.apply(this,arguments)}(C,ze,b),be=yield function kt(E){const{cordova:C}=Jt();return new Promise(b=>{C.plugins.browsertab.isAvailable(R=>{let Q=null;R?C.plugins.browsertab.openUrl(E):Q=C.InAppBrowser.open(E,(0,L.aA)()?"_blank":"_system","location=yes"),b(Q)})})}(At);return function si(E,C,b){return bt.apply(this,arguments)}(C,Ce,be)})()}_isIframeWebStorageSupported(C,b){throw new Error("Method not implemented.")}_originValidation(C){const b=C._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function Re(E){return nt.apply(this,arguments)}(C)),this.originValidationPromises[b]}attachCallbackListeners(C,b){const{universalLinks:R,handleOpenURL:Q,BuildInfo:xe}=Jt(),Ce=setTimeout((0,x.Z)(function*(){yield ot(C),b.onEvent(K())}),500),ze=function(){var Zt=(0,x.Z)(function*(Ne){clearTimeout(Ce);const pi=yield ot(C);let _a=null;pi&&Ne?.url&&(_a=function Ct(E,C){var b,R;const Q=function fs(E){const C=Xe(E),b=C.link?decodeURIComponent(C.link):void 0,R=Xe(b).link,Q=C.deep_link_id?decodeURIComponent(C.deep_link_id):void 0;return Xe(Q).link||Q||R||b||E}(C);if(Q.includes("/__/auth/callback")){const xe=Xe(Q),Ce=xe.firebaseError?function hs(E){try{return JSON.parse(E)}catch{return null}}(decodeURIComponent(xe.firebaseError)):null,ze=null===(R=null===(b=Ce?.code)||void 0===b?void 0:b.split("auth/"))||void 0===R?void 0:R[1],At=ze?(0,L.aB)(ze):null;return At?{type:E.type,eventId:E.eventId,tenantId:E.tenantId,error:At,urlResponse:null,sessionId:null,postBody:null}:{type:E.type,eventId:E.eventId,tenantId:E.tenantId,sessionId:E.sessionId,urlResponse:Q,postBody:null}}return null}(pi,Ne.url)),b.onEvent(_a||K())});return function(pi){return Zt.apply(this,arguments)}}();typeof R<"u"&&"function"==typeof R.subscribe&&R.subscribe(null,ze);const At=Q,be=`${xe.packageName.toLowerCase()}://`;Jt().handleOpenURL=function(){var Zt=(0,x.Z)(function*(Ne){if(Ne.toLowerCase().startsWith(be)&&ze({url:Ne}),"function"==typeof At)try{At(Ne)}catch(pi){console.error(pi)}});return function(Ne){return Zt.apply(this,arguments)}}()}};function K(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.aB)("no-auth-event")}}function pe(){var E;return(null===(E=self?.location)||void 0===E?void 0:E.protocol)||null}function ge(E=(0,Pe.z$)()){return!("file:"!==pe()&&"ionic:"!==pe()&&"capacitor:"!==pe()||!E.toLowerCase().match(/iphone|ipad|ipod|android/))}function fn(){try{const E=self.localStorage,C=L.aN();if(E)return E.setItem(C,"1"),E.removeItem(C),!function en(E=(0,Pe.z$)()){return function Tt(){return(0,Pe.w1)()&&11===document?.documentMode}()||function hn(E=(0,Pe.z$)()){return/Edge\/\d+/.test(E)}(E)}()||(0,Pe.hl)()}catch{return Yn()&&(0,Pe.hl)()}return!1}function Yn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function oi(){return(function ft(){return"http:"===pe()||"https:"===pe()}()||(0,Pe.ru)()||ge())&&!function Fe(){return(0,Pe.b$)()||(0,Pe.UG)()}()&&fn()&&!Yn()}function fi(){return ge()&&typeof document<"u"}function Zr(){return(Zr=(0,x.Z)(function*(){return!!fi()&&new Promise(E=>{const C=setTimeout(()=>{E(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(C),E(!0)})})})).apply(this,arguments)}const mt={LOCAL:"local",NONE:"none",SESSION:"session"},Fs=L.aC,Ls="persistence";function ms(E){return vi.apply(this,arguments)}function vi(){return(vi=(0,x.Z)(function*(E){yield E._initializationPromise;const C=Cr(),b=L.aF(Ls,E.config.apiKey,E.name);C&&C.setItem(b,E._getPersistence())})).apply(this,arguments)}function Cr(){var E;try{return(null===(E=function Os(){return typeof window<"u"?window:null}())||void 0===E?void 0:E.sessionStorage)||null}catch{return null}}const Tr=L.aC;class bi{constructor(){this.browserResolver=L.aE(L.k),this.cordovaResolver=L.aE(q),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aG,this._overrideRedirectResult=L.aH}_initialize(C){var b=this;return(0,x.Z)(function*(){return yield b.selectUnderlyingResolver(),b.assertedUnderlyingResolver._initialize(C)})()}_openPopup(C,b,R,Q){var xe=this;return(0,x.Z)(function*(){return yield xe.selectUnderlyingResolver(),xe.assertedUnderlyingResolver._openPopup(C,b,R,Q)})()}_openRedirect(C,b,R,Q){var xe=this;return(0,x.Z)(function*(){return yield xe.selectUnderlyingResolver(),xe.assertedUnderlyingResolver._openRedirect(C,b,R,Q)})()}_isIframeWebStorageSupported(C,b){this.assertedUnderlyingResolver._isIframeWebStorageSupported(C,b)}_originValidation(C){return this.assertedUnderlyingResolver._originValidation(C)}get _shouldInitProactively(){return fi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Tr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var C=this;return(0,x.Z)(function*(){if(C.underlyingResolver)return;const b=yield function sr(){return Zr.apply(this,arguments)}();C.underlyingResolver=b?C.cordovaResolver:C.browserResolver})()}}function Ht(E){return E.unwrap()}function Tn(E){return pn(E)}function pn(E){const{_tokenResponse:C}=E instanceof Pe.ZR?E.customData:E;if(!C)return null;if(!(E instanceof Pe.ZR)&&"temporaryProof"in C&&"phoneNumber"in C)return L.P.credentialFromResult(E);const b=C.providerId;if(!b||b===L.p.PASSWORD)return null;let R;switch(b){case L.p.GOOGLE:R=L.X;break;case L.p.FACEBOOK:R=L.W;break;case L.p.GITHUB:R=L.Y;break;case L.p.TWITTER:R=L.$;break;default:const{oauthIdToken:Q,oauthAccessToken:xe,oauthTokenSecret:Ce,pendingToken:ze,nonce:At}=C;return xe||Ce||Q||ze?ze?b.startsWith("saml.")?L.aQ._create(b,ze):L.N._fromParams({providerId:b,signInMethod:b,pendingToken:ze,idToken:Q,accessToken:xe}):new L.Z(b).credential({idToken:Q,accessToken:xe,rawNonce:At}):null}return E instanceof Pe.ZR?R.credentialFromError(E):R.credentialFromResult(E)}function xn(E,C){return C.catch(b=>{throw b instanceof Pe.ZR&&function Mc(E,C){var b;const R=null===(b=C.customData)||void 0===b?void 0:b._tokenResponse;if("auth/multi-factor-auth-required"===C?.code)C.resolver=new _s(E,L.as(E,C));else if(R){const Q=pn(C),xe=C;Q&&(xe.credential=Q,xe.tenantId=R.tenantId||void 0,xe.email=R.email||void 0,xe.phoneNumber=R.phoneNumber||void 0)}}(E,b),b}).then(b=>{const Q=b.user;return{operationType:b.operationType,credential:Tn(b),additionalUserInfo:L.aq(b),user:ai.getOrCreate(Q)}})}function gs(E,C){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,x.Z)(function*(E,C){const b=yield C;return{verificationId:b.verificationId,confirm:R=>xn(E,b.confirm(R))}})).apply(this,arguments)}class _s{constructor(C,b){this.resolver=b,this.auth=function or(E){return E.wrapped()}(C)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(C){return xn(Ht(this.auth),this.resolver.resolveSignIn(C))}}class ai{constructor(C){this._delegate=C,this.multiFactor=L.at(C)}static getOrCreate(C){return ai.USER_MAP.has(C)||ai.USER_MAP.set(C,new ai(C)),ai.USER_MAP.get(C)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(C){return this._delegate.getIdTokenResult(C)}getIdToken(C){return this._delegate.getIdToken(C)}linkAndRetrieveDataWithCredential(C){return this.linkWithCredential(C)}linkWithCredential(C){var b=this;return(0,x.Z)(function*(){return xn(b.auth,L.a2(b._delegate,C))})()}linkWithPhoneNumber(C,b){var R=this;return(0,x.Z)(function*(){return gs(R.auth,L.l(R._delegate,C,b))})()}linkWithPopup(C){var b=this;return(0,x.Z)(function*(){return xn(b.auth,L.d(b._delegate,C,bi))})()}linkWithRedirect(C){var b=this;return(0,x.Z)(function*(){return yield ms(L.aJ(b.auth)),L.g(b._delegate,C,bi)})()}reauthenticateAndRetrieveDataWithCredential(C){return this.reauthenticateWithCredential(C)}reauthenticateWithCredential(C){var b=this;return(0,x.Z)(function*(){return xn(b.auth,L.a3(b._delegate,C))})()}reauthenticateWithPhoneNumber(C,b){return gs(this.auth,L.r(this._delegate,C,b))}reauthenticateWithPopup(C){return xn(this.auth,L.e(this._delegate,C,bi))}reauthenticateWithRedirect(C){var b=this;return(0,x.Z)(function*(){return yield ms(L.aJ(b.auth)),L.h(b._delegate,C,bi)})()}sendEmailVerification(C){return L.ag(this._delegate,C)}unlink(C){var b=this;return(0,x.Z)(function*(){return yield L.ap(b._delegate,C),b})()}updateEmail(C){return L.al(this._delegate,C)}updatePassword(C){return L.am(this._delegate,C)}updatePhoneNumber(C){return L.u(this._delegate,C)}updateProfile(C){return L.ak(this._delegate,C)}verifyBeforeUpdateEmail(C,b){return L.ah(this._delegate,C,b)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ai.USER_MAP=new WeakMap;const Qn=L.aC;let qi=(()=>{class E{constructor(b,R){if(this.app=b,R.isInitialized())return this._delegate=R.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Q}=b.options;Qn(Q,"invalid-api-key",{appName:b.name}),Qn(Q,"invalid-api-key",{appName:b.name});const xe=typeof window<"u"?bi:void 0;this._delegate=R.initialize({options:{persistence:ll(Q,b.name),popupRedirectResolver:xe}}),this._delegate._updateErrorMap(L.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ai.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(b){this._delegate.languageCode=b}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(b){this._delegate.tenantId=b}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(b,R){L.K(this._delegate,b,R)}applyActionCode(b){return L.a7(this._delegate,b)}checkActionCode(b){return L.a8(this._delegate,b)}confirmPasswordReset(b,R){return L.a6(this._delegate,b,R)}createUserWithEmailAndPassword(b,R){var Q=this;return(0,x.Z)(function*(){return xn(Q._delegate,L.aa(Q._delegate,b,R))})()}fetchProvidersForEmail(b){return this.fetchSignInMethodsForEmail(b)}fetchSignInMethodsForEmail(b){return L.af(this._delegate,b)}isSignInWithEmailLink(b){return L.ad(this._delegate,b)}getRedirectResult(){var b=this;return(0,x.Z)(function*(){Qn(oi(),b._delegate,"operation-not-supported-in-this-environment");const R=yield L.j(b._delegate,bi);return R?xn(b._delegate,Promise.resolve(R)):{credential:null,user:null}})()}addFrameworkForLogging(b){!function z(E,C){(0,L.aJ)(E)._logFramework(C)}(this._delegate,b)}onAuthStateChanged(b,R,Q){const{next:xe,error:Ce,complete:ze}=xr(b,R,Q);return this._delegate.onAuthStateChanged(xe,Ce,ze)}onIdTokenChanged(b,R,Q){const{next:xe,error:Ce,complete:ze}=xr(b,R,Q);return this._delegate.onIdTokenChanged(xe,Ce,ze)}sendSignInLinkToEmail(b,R){return L.ac(this._delegate,b,R)}sendPasswordResetEmail(b,R){return L.a5(this._delegate,b,R||void 0)}setPersistence(b){var R=this;return(0,x.Z)(function*(){let Q;switch(function ps(E,C){Fs(Object.values(mt).includes(C),E,"invalid-persistence-type"),(0,Pe.b$)()?Fs(C!==mt.SESSION,E,"unsupported-persistence-type"):(0,Pe.UG)()?Fs(C===mt.NONE,E,"unsupported-persistence-type"):Yn()?Fs(C===mt.NONE||C===mt.LOCAL&&(0,Pe.hl)(),E,"unsupported-persistence-type"):Fs(C===mt.NONE||fn(),E,"unsupported-persistence-type")}(R._delegate,b),b){case mt.SESSION:Q=L.a;break;case mt.LOCAL:Q=(yield L.aE(L.i)._isAvailable())?L.i:L.b;break;case mt.NONE:Q=L.U;break;default:return L.ax("argument-error",{appName:R._delegate.name})}return R._delegate.setPersistence(Q)})()}signInAndRetrieveDataWithCredential(b){return this.signInWithCredential(b)}signInAnonymously(){return xn(this._delegate,L.a0(this._delegate))}signInWithCredential(b){return xn(this._delegate,L.a1(this._delegate,b))}signInWithCustomToken(b){return xn(this._delegate,L.a4(this._delegate,b))}signInWithEmailAndPassword(b,R){return xn(this._delegate,L.ab(this._delegate,b,R))}signInWithEmailLink(b,R){return xn(this._delegate,L.ae(this._delegate,b,R))}signInWithPhoneNumber(b,R){return gs(this._delegate,L.s(this._delegate,b,R))}signInWithPopup(b){var R=this;return(0,x.Z)(function*(){return Qn(oi(),R._delegate,"operation-not-supported-in-this-environment"),xn(R._delegate,L.c(R._delegate,b,bi))})()}signInWithRedirect(b){var R=this;return(0,x.Z)(function*(){return Qn(oi(),R._delegate,"operation-not-supported-in-this-environment"),yield ms(R._delegate),L.f(R._delegate,b,bi)})()}updateCurrentUser(b){return this._delegate.updateCurrentUser(b)}verifyPasswordResetCode(b){return L.a9(this._delegate,b)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return E.Persistence=mt,E})();function xr(E,C,b){let R=E;"function"!=typeof E&&({next:R,error:C,complete:b}=E);const Q=R;return{next:Ce=>Q(Ce&&ai.getOrCreate(Ce)),error:C,complete:b}}function ll(E,C){const b=function Ir(E,C){const b=Cr();if(!b)return[];const R=L.aF(Ls,E,C);switch(b.getItem(R)){case mt.NONE:return[L.U];case mt.LOCAL:return[L.i,L.a];case mt.SESSION:return[L.a];default:return[]}}(E,C);if(typeof self<"u"&&!b.includes(L.i)&&b.push(L.i),typeof window<"u")for(const R of[L.b,L.a])b.includes(R)||b.push(R);return b.includes(L.U)||b.push(L.U),b}class Mo{constructor(){this.providerId="phone",this._delegate=new L.P(Ht(X.Z.auth()))}static credential(C,b){return L.P.credential(C,b)}verifyPhoneNumber(C,b){return this._delegate.verifyPhoneNumber(C,b)}unwrap(){return this._delegate}}Mo.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,Mo.PROVIDER_ID=L.P.PROVIDER_ID;const ga=L.aC;class Vs{constructor(C,b,R=X.Z.app()){var Q;ga(null===(Q=R.options)||void 0===Q?void 0:Q.apiKey,"invalid-api-key",{appName:R.name}),this._delegate=new L.R(R.auth(),C,b),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function D(E){E.INTERNAL.registerComponent(new Hn.wA("auth-compat",C=>{const b=C.getProvider("app-compat").getImmediate(),R=C.getProvider("auth");return new qi(b,R)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.V,FacebookAuthProvider:L.W,GithubAuthProvider:L.Y,GoogleAuthProvider:L.X,OAuthProvider:L.Z,SAMLAuthProvider:L._,PhoneAuthProvider:Mo,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:Vs,TwitterAuthProvider:L.$,Auth:qi,AuthCredential:L.L,Error:Pe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),E.registerVersion("@firebase/auth-compat","0.5.0")}(X.Z)},861:(ks,ri,Ue)=>{function x(L,Pe,ht,dn,Hn,Jt,Dt){try{var te=L[Jt](Dt),ue=te.value}catch(Re){return void ht(Re)}te.done?Pe(ue):Promise.resolve(ue).then(dn,Hn)}function X(L){return function(){var Pe=this,ht=arguments;return new Promise(function(dn,Hn){var Jt=L.apply(Pe,ht);function Dt(ue){x(Jt,dn,Hn,Dt,te,"next",ue)}function te(ue){x(Jt,dn,Hn,Dt,te,"throw",ue)}Dt(void 0)})}}Ue.d(ri,{Z:()=>X})},582:(ks,ri,Ue)=>{function Pe(q,K){var z={};for(var $ in q)Object.prototype.hasOwnProperty.call(q,$)&&K.indexOf($)<0&&(z[$]=q[$]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var ne=0;for($=Object.getOwnPropertySymbols(q);ne<$.length;ne++)K.indexOf($[ne])<0&&Object.prototype.propertyIsEnumerable.call(q,$[ne])&&(z[$[ne]]=q[$[ne]])}return z}function Re(q,K,z,$){return new(z||(z=Promise))(function(ee,pe){function ft(Tt){try{Fe($.next(Tt))}catch(hn){pe(hn)}}function ge(Tt){try{Fe($.throw(Tt))}catch(hn){pe(hn)}}function Fe(Tt){Tt.done?ee(Tt.value):function ne(ee){return ee instanceof z?ee:new z(function(pe){pe(ee)})}(Tt.value).then(ft,ge)}Fe(($=$.apply(q,K||[])).next())})}function pt(q){return this instanceof pt?(this.v=q,this):new pt(q)}function qt(q,K,z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,$=z.apply(q,K||[]),ee=[];return ne={},pe("next"),pe("throw"),pe("return"),ne[Symbol.asyncIterator]=function(){return this},ne;function pe(en){$[en]&&(ne[en]=function(fn){return new Promise(function(Yn,oi){ee.push([en,fn,Yn,oi])>1||ft(en,fn)})})}function ft(en,fn){try{!function ge(en){en.value instanceof pt?Promise.resolve(en.value.v).then(Fe,Tt):hn(ee[0][2],en)}($[en](fn))}catch(Yn){hn(ee[0][3],Yn)}}function Fe(en){ft("next",en)}function Tt(en){ft("throw",en)}function hn(en,fn){en(fn),ee.shift(),ee.length&&ft(ee[0][0],ee[0][1])}}function Zn(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var z,K=q[Symbol.asyncIterator];return K?K.call(q):(q=function bt(q){var K="function"==typeof Symbol&&Symbol.iterator,z=K&&q[K],$=0;if(z)return z.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&$>=q.length&&(q=void 0),{value:q&&q[$++],done:!q}}};throw new TypeError(K?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),z={},$("next"),$("throw"),$("return"),z[Symbol.asyncIterator]=function(){return this},z);function $(ee){z[ee]=q[ee]&&function(pe){return new Promise(function(ft,ge){!function ne(ee,pe,ft,ge){Promise.resolve(ge).then(function(Fe){ee({value:Fe,done:ft})},pe)}(ft,ge,(pe=q[ee](pe)).done,pe.value)})}}}Ue.d(ri,{FC:()=>qt,KL:()=>Zn,_T:()=>Pe,mG:()=>Re,qq:()=>pt}),"function"==typeof SuppressedError&&SuppressedError}},ks=>{ks(ks.s=588)}]);